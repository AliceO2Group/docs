<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/runner/work/AliceO2/AliceO2/Detectors/AOD/src/AODProducerWorkflowSpec.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d6/dc9/AODProducerWorkflowSpec_8cxx_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">AODProducerWorkflowSpec.cxx</div></div>
</div><!--header-->
<div class="contents">
<a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2019-2020 CERN and copyright holders of ALICE O2.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// See https://alice-o2.web.cern.ch/copyright for details of the copyright holders.</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// All rights not expressly granted are reserved.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">//</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// This software is distributed under the terms of the GNU General Public</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">// License v3 (GPL Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">//</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// or submit itself to any jurisdiction.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d09/AODProducerWorkflowSpec_8h.html">AODProducerWorkflow/AODProducerWorkflowSpec.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/dcc/AODMcProducerHelpers_8h.html">AODProducerWorkflow/AODMcProducerHelpers.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d47/AODProducerHelpers_8h.html">AODProducerWorkflow/AODProducerHelpers.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="../../d9/d38/EMCAL_2include_2DataFormatsEMCAL_2TriggerRecord_8h.html">DataFormatsEMCAL/TriggerRecord.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d5b/EMCAL_2include_2DataFormatsEMCAL_2EventHandler_8h.html">DataFormatsEMCAL/EventHandler.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d1e/FT0_2include_2DataFormatsFT0_2RecPoints_8h.html">DataFormatsFT0/RecPoints.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d0c/RecPoint_8h.html">DataFormatsFDD/RecPoint.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d62/FV0_2include_2DataFormatsFV0_2RecPoints_8h.html">DataFormatsFV0/RecPoints.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h.html">DataFormatsGlobalTracking/RecoContainer.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/dfa/Digits_8h.html">DataFormatsCTP/Digits.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/d7b/DataFormats_2Detectors_2CTP_2include_2DataFormatsCTP_2Configuration_8h.html">DataFormatsCTP/Configuration.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8b/DataFormats_2Detectors_2CPV_2include_2DataFormatsCPV_2Cluster_8h.html">DataFormatsCPV/Cluster.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/d7a/CPV_2include_2DataFormatsCPV_2TriggerRecord_8h.html">DataFormatsCPV/TriggerRecord.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d71/TrackITS_8h.html">DataFormatsITS/TrackITS.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d4b/MUON_2MCH_2include_2DataFormatsMCH_2ROFRecord_8h.html">DataFormatsMCH/ROFRecord.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d0b/TrackMCH_8h.html">DataFormatsMCH/TrackMCH.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d32/DataFormats_2Detectors_2MUON_2MCH_2include_2DataFormatsMCH_2Cluster_8h.html">DataFormatsMCH/Cluster.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="../../d4/d54/DataFormats_2Detectors_2MUON_2MID_2include_2DataFormatsMID_2Track_8h.html">DataFormatsMID/Track.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/dd0/TrackMFT_8h.html">DataFormatsMFT/TrackMFT.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/df1/PHOS_2include_2DataFormatsPHOS_2TriggerRecord_8h.html">DataFormatsPHOS/TriggerRecord.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/d78/PHOS_2include_2DataFormatsPHOS_2EventHandler_8h.html">DataFormatsPHOS/EventHandler.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/dc9/TrackTPC_8h.html">DataFormatsTPC/TrackTPC.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="../../d9/dbe/TRD_2include_2DataFormatsTRD_2TriggerRecord_8h.html">DataFormatsTRD/TriggerRecord.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="../../d3/d82/BCRecData_8h.html">DataFormatsZDC/BCRecData.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="../../d9/dc5/ZDCEnergy_8h.html">DataFormatsZDC/ZDCEnergy.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/de7/ZDCTDCData_8h.html">DataFormatsZDC/ZDCTDCData.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/dff/GRPECSObject_8h.html">DataFormatsParameters/GRPECSObject.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="../../d9/d52/Common_2MathUtils_2include_2MathUtils_2Utils_8h.html">MathUtils/Utils.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/df3/BasicCCDBManager_8h.html">CCDB/BasicCCDBManager.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="../../d0/d0b/Common_2Constants_2include_2CommonConstants_2Triggers_8h.html">CommonConstants/Triggers.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="../../d3/d9d/PhysicsConstants_8h.html">CommonConstants/PhysicsConstants.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="../../d9/d80/InteractionRecord_8h.html">CommonDataFormat/InteractionRecord.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/d2e/TrackTRD_8h.html">DataFormatsTRD/TrackTRD.h</a>&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/d19/TrackTriggerRecord_8h.html">DataFormatsTRD/TrackTriggerRecord.h</a>&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h.html">DataFormatsGlobalTracking/RecoContainer.h</a>&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d8c/AnalysisDataModel_8h.html">Framework/AnalysisDataModel.h</a>&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/dc6/ConfigParamRegistry_8h.html">Framework/ConfigParamRegistry.h</a>&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d12/DataTypes_8h.html">Framework/DataTypes.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d98/TableBuilder_8h.html">Framework/TableBuilder.h</a>&quot;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/dcc/CCDBParamSpec_8h.html">Framework/CCDBParamSpec.h</a>&quot;</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d22/TreeStreamRedirector_8h.html">CommonUtils/TreeStreamRedirector.h</a>&quot;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/df4/FIT_2FT0_2base_2include_2FT0Base_2Geometry_8h.html">FT0Base/Geometry.h</a>&quot;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#include &quot;<a class="code" href="../../d0/d74/MatchTOF_8h.html">GlobalTracking/MatchTOF.h</a>&quot;</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d16/Cascade_8h.html">ReconstructionDataFormats/Cascade.h</a>&quot;</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/dec/MatchGlobalFwd_8h.html">GlobalTracking/MatchGlobalFwd.h</a>&quot;</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d9c/TrackExtrap_8h.html">MCHTracking/TrackExtrap.h</a>&quot;</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/d4b/TrackParam_8h.html">MCHTracking/TrackParam.h</a>&quot;</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#include &quot;<a class="code" href="../../d4/d35/DPLAlpideParam_8h.html">ITSMFTBase/DPLAlpideParam.h</a>&quot;</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">#include &quot;<a class="code" href="../../d4/deb/PVertexerParams_8h.html">DetectorsVertexing/PVertexerParams.h</a>&quot;</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/d6b/GlobalFwdTrack_8h.html">ReconstructionDataFormats/GlobalFwdTrack.h</a>&quot;</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/d2b/GlobalTrackID_8h.html">ReconstructionDataFormats/GlobalTrackID.h</a>&quot;</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">#include &quot;<a class="code" href="../../d7/d82/PrimaryVertex_8h.html">ReconstructionDataFormats/PrimaryVertex.h</a>&quot;</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc9/StrangeTrack_8h.html">ReconstructionDataFormats/StrangeTrack.h</a>&quot;</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="preprocessor">#include &quot;<a class="code" href="../../d7/d8b/DataFormats_2Reconstruction_2include_2ReconstructionDataFormats_2Track_8h.html">ReconstructionDataFormats/Track.h</a>&quot;</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d1e/TrackTPCITS_8h.html">ReconstructionDataFormats/TrackTPCITS.h</a>&quot;</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d28/TrackMCHMID_8h.html">ReconstructionDataFormats/TrackMCHMID.h</a>&quot;</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/dc4/MatchInfoHMP_8h.html">ReconstructionDataFormats/MatchInfoHMP.h</a>&quot;</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="preprocessor">#include &quot;<a class="code" href="../../d0/d0c/V0_8h.html">ReconstructionDataFormats/V0.h</a>&quot;</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="preprocessor">#include &quot;<a class="code" href="../../d0/d00/VtxTrackIndex_8h.html">ReconstructionDataFormats/VtxTrackIndex.h</a>&quot;</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="preprocessor">#include &quot;<a class="code" href="../../d7/dac/VtxTrackRef_8h.html">ReconstructionDataFormats/VtxTrackRef.h</a>&quot;</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/def/DigitizationContext_8h.html">SimulationDataFormat/DigitizationContext.h</a>&quot;</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/df0/MCEventLabel_8h.html">SimulationDataFormat/MCEventLabel.h</a>&quot;</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/de2/MCTrack_8h.html">SimulationDataFormat/MCTrack.h</a>&quot;</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/d14/MCTruthContainer_8h.html">SimulationDataFormat/MCTruthContainer.h</a>&quot;</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/d68/MCUtils_8h.html">SimulationDataFormat/MCUtils.h</a>&quot;</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d80/MCGenProperties_8h.html">SimulationDataFormat/MCGenProperties.h</a>&quot;</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="preprocessor">#include &quot;<a class="code" href="../../d3/dd7/Detectors_2ZDC_2base_2include_2ZDCBase_2Constants_8h.html">ZDCBase/Constants.h</a>&quot;</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="preprocessor">#include &quot;<a class="code" href="../../d3/d47/ParameterElectronics_8h.html">TPCBase/ParameterElectronics.h</a>&quot;</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#include &quot;<a class="code" href="../../d3/dcc/GPUTPCGMMergedTrackHit_8h.html">GPUTPCGMMergedTrackHit.h</a>&quot;</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="preprocessor">#include &quot;<a class="code" href="../../df/da4/Detectors_2TOF_2base_2include_2TOFBase_2Utils_8h.html">TOFBase/Utils.h</a>&quot;</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="preprocessor">#include &quot;<a class="code" href="../../d7/d34/O2Version_8h.html">O2Version.h</a>&quot;</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="preprocessor">#include &quot;TMath.h&quot;</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="preprocessor">#include &quot;<a class="code" href="../../d9/d52/Common_2MathUtils_2include_2MathUtils_2Utils_8h.html">MathUtils/Utils.h</a>&quot;</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="preprocessor">#include &quot;Math/SMatrix.h&quot;</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="preprocessor">#include &quot;TString.h&quot;</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="preprocessor">#include &lt;type_traits&gt;</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="preprocessor">#include &quot;TLorentzVector.h&quot;</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="preprocessor">#include &quot;TVector3.h&quot;</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/dd5/Tsallis_8h.html">MathUtils/Tsallis.h</a>&quot;</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="preprocessor">#include &lt;random&gt;</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="preprocessor">#ifdef WITH_OPENMP</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="preprocessor">#include &lt;omp.h&gt;</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="preprocessor">#include &lt;filesystem&gt;</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="preprocessor">#include &lt;nlohmann/json.hpp&gt;</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../dd/d8d/namespaceo2_1_1framework.html">o2::framework</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html">o2::math_utils::detail</a>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno"><a class="line" href="../../d6/dc9/AODProducerWorkflowSpec_8cxx.html#ae9a9792ffc48843cbbf350d2bcef071b">  110</a></span><span class="keyword">using </span><a class="code hl_class" href="../../d1/d87/classo2_1_1dataformats_1_1PrimaryVertex.html">PVertex</a> = <a class="code hl_class" href="../../d1/d87/classo2_1_1dataformats_1_1PrimaryVertex.html">o2::dataformats::PrimaryVertex</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="../../d6/dc9/AODProducerWorkflowSpec_8cxx.html#a8496d361950c9158928a790409fa8643">  111</a></span><span class="keyword">using </span><a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a> = <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">o2::dataformats::VtxTrackIndex</a>;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="../../d6/dc9/AODProducerWorkflowSpec_8cxx.html#ab50d2baafa111baf2c5d11d6e9776c85">  112</a></span><span class="keyword">using </span><a class="code hl_struct" href="../../dc/d1e/structo2_1_1globaltracking_1_1DataRequest.html">DataRequest</a> = <a class="code hl_struct" href="../../dc/d1e/structo2_1_1globaltracking_1_1DataRequest.html">o2::globaltracking::DataRequest</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="../../d6/dc9/AODProducerWorkflowSpec_8cxx.html#a5f278d097832fe49174e397c2f5c9927">  113</a></span><span class="keyword">using </span><a class="code hl_class" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html">GID</a> = <a class="code hl_class" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html">o2::dataformats::GlobalTrackID</a>;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno"><a class="line" href="../../d6/dc9/AODProducerWorkflowSpec_8cxx.html#a992cd2bca2c4a3b5d71555ba9b85f59a">  114</a></span><span class="keyword">using </span><a class="code hl_class" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html">DetID</a> = <a class="code hl_class" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html">o2::detectors::DetID</a>;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="../../d6/dc9/AODProducerWorkflowSpec_8cxx.html#acb0ab59327492a362612fbf7fb90ae1a">  115</a></span><span class="keyword">using </span><a class="code hl_class" href="../../dc/d65/classROOT_1_1Math_1_1SMatrix.html">SMatrix55Sym</a> = <a class="code hl_class" href="../../dc/d65/classROOT_1_1Math_1_1SMatrix.html">ROOT::Math::SMatrix&lt;double, 5, 5, ROOT::Math::MatRepSym&lt;double, 5&gt;</a>&gt;;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="keyword">namespace </span><a class="code hl_namespace" href="../../d3/dcc/namespaceo2_1_1aodproducer.html">o2::aodproducer</a></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>{</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::createCTPReadout(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; recoData, std::vector&lt;o2::ctp::CTPDigit&gt;&amp; ctpDigits, <a class="code hl_class" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">ProcessingContext</a>&amp; pc)</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>{</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="comment">// Extraxt CTP Config from CCDB</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  <span class="keyword">const</span> <span class="keyword">auto</span> ctpcfg = pc.<a class="code hl_function" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a7862af0201c6d6a574a054d811f0eab3">inputs</a>().<a class="code hl_function" href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">get</a>&lt;<a class="code hl_class" href="../../da/df6/classo2_1_1ctp_1_1CTPConfiguration.html">o2::ctp::CTPConfiguration</a>*&gt;(<span class="stringliteral">&quot;ctpconfig&quot;</span>);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  ctpcfg-&gt;<a class="code hl_function" href="../../da/df6/classo2_1_1ctp_1_1CTPConfiguration.html#aaf7fbb447171d983ace06520068e7f9e">printStream</a>(std::cout);</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <span class="comment">// o2::ctp::CTPConfiguration ctpcfg = o2::ctp::CTPRunManager::getConfigFromCCDB(-1, std::to_string(runNumber)); // how to get run</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>  <span class="comment">//  Extract inputs from recoData</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>  uint64_t classMaskEMCAL = 0, classMaskTRD = 0, classMaskPHOSCPV = 0;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; trgclass : ctpcfg-&gt;getCTPClasses()) {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">if</span> (trgclass.cluster-&gt;getClusterDetNames().find(<span class="stringliteral">&quot;EMC&quot;</span>) != std::string::npos) {</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>      classMaskEMCAL = trgclass.classMask;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">if</span> (trgclass.cluster-&gt;getClusterDetNames().find(<span class="stringliteral">&quot;PHS&quot;</span>) != std::string::npos) {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>      classMaskPHOSCPV = trgclass.classMask;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="keywordflow">if</span> (trgclass.cluster-&gt;getClusterDetNames().find(<span class="stringliteral">&quot;TRD&quot;</span>) != std::string::npos) {</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>      classMaskTRD = trgclass.classMask;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>  }</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout: Class Mask EMCAL -&gt; &quot;</span> &lt;&lt; classMaskEMCAL;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout: Class Mask PHOS/CPV -&gt; &quot;</span> &lt;&lt; classMaskPHOSCPV;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout: Class Mask TRD -&gt; &quot;</span> &lt;&lt; classMaskTRD;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  <span class="comment">// const auto&amp; fddRecPoints = recoData.getFDDRecPoints();</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <span class="comment">// const auto&amp; fv0RecPoints = recoData.getFV0RecPoints();</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; triggerrecordEMCAL = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ae1a3fc004aeec8aa5291c493aa973b9f">getEMCALTriggers</a>();</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; triggerrecordPHOSCPV = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#af172a5e470747af9cc58a71e83a6f57c">getPHOSTriggers</a>();</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; triggerrecordTRD = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a6958d9e2fd8765ff7639c563bd29b962">getTRDTriggerRecords</a>();</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>  <span class="comment">// For EMCAL filter remove calibration triggers</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  std::vector&lt;o2::emcal::TriggerRecord&gt; triggerRecordEMCALPhys;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; trg : triggerrecordEMCAL) {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="keywordflow">if</span> (trg.getTriggerBits() &amp; <a class="code hl_variable" href="../../df/d7e/namespaceo2_1_1trigger.html#ad1c05a0d6d360b714ac4b02bffac82c9">o2::trigger::Cal</a>) {</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    }</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    triggerRecordEMCALPhys.push_back(trg);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  }</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  <span class="comment">// const auto&amp; triggerrecordTRD =recoData.getITSTPCTRDTriggers()</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  <span class="comment">//</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <span class="comment">// Find TVX triggers, only TRD/EMCAL/PHOS/CPV triggers in coincidence will be accepted</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  std::set&lt;uint64_t&gt; bcsMapT0triggers;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ft0RecPoints = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab1f5dbd4fe43d0ce5ca6910ab7bb46a5">getFT0RecPoints</a>();</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; ft0RecPoint : ft0RecPoints) {</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="keyword">auto</span> t0triggers = ft0RecPoint.getTrigger();</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <span class="keywordflow">if</span> (t0triggers.getVertex()) {</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>      uint64_t globalBC = ft0RecPoint.getInteractionRecord().toLong();</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>      bcsMapT0triggers.insert(globalBC);</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    }</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  }</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  <span class="keyword">auto</span> genericCTPDigitizer = [&amp;bcsMapT0triggers, &amp;ctpDigits](<span class="keyword">auto</span> triggerrecords, uint64_t classmask) -&gt; <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="comment">// Strategy:</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="comment">// find detector trigger based on trigger record from readout and add CTPDigit if trigger there</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="keywordtype">int</span> cntwarnings = 0;</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    uint32_t orbitPrev = 0;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    uint16_t bcPrev = 0;</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; trigger : triggerrecords) {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>      <span class="keyword">auto</span> orbitPrevT = orbitPrev;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>      <span class="keyword">auto</span> bcPrevT = bcPrev;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>      bcPrev = trigger.getBCData().bc;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>      orbitPrev = trigger.getBCData().orbit;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>      <span class="comment">// dedicated for TRD: remove bogus triggers</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>      <span class="keywordflow">if</span> (orbitPrev &lt; orbitPrevT || bcPrev &gt;= <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a296bf820b93d969ac714d0aa4ea82d7c">o2::constants::lhc::LHCMaxBunches</a> || (orbitPrev == orbitPrevT &amp;&amp; bcPrev &lt; bcPrevT)) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        cntwarnings++;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <span class="comment">// LOGP(warning, &quot;Bogus TRD trigger at bc:{}/orbit:{} (previous was {}/{}), with {} tracklets and {} digits&quot;,bcPrev, orbitPrev, bcPrevT, orbitPrevT, trig.getNumberOfTracklets(), trig.getNumberOfDigits());</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        uint64_t globalBC = trigger.getBCData().toLong();</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        <span class="keyword">auto</span> t0entry = bcsMapT0triggers.find(globalBC);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="keywordflow">if</span> (t0entry != bcsMapT0triggers.end()) {</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>          <span class="keyword">auto</span> ctpdig = std::find_if(ctpDigits.begin(), ctpDigits.end(), [globalBC](<span class="keyword">const</span> <a class="code hl_struct" href="../../da/de2/structo2_1_1ctp_1_1CTPDigit.html">o2::ctp::CTPDigit</a>&amp; dig) { return static_cast&lt;uint64_t&gt;(dig.intRecord.toLong()) == globalBC; });</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>          <span class="keywordflow">if</span> (ctpdig != ctpDigits.end()) {</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>            <span class="comment">// CTP digit existing from other trigger, merge detector class mask</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>            ctpdig-&gt;CTPClassMask |= std::bitset&lt;64&gt;(classmask);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>            <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout: Merging &quot;</span> &lt;&lt; classmask &lt;&lt; <span class="stringliteral">&quot; CTP digits with existing digit, CTP mask &quot;</span> &lt;&lt; ctpdig-&gt;CTPClassMask;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            <span class="comment">// New CTP digit needed</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout: New CTP digit needed for class &quot;</span> &lt;&lt; classmask &lt;&lt; std::endl;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            <span class="keyword">auto</span>&amp; ctpdigNew = ctpDigits.emplace_back();</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>            ctpdigNew.intRecord.setFromLong(globalBC);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            ctpdigNew.CTPClassMask = classmask;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>          }</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>          <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warning) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout: Found &quot;</span> &lt;&lt; classmask &lt;&lt; <span class="stringliteral">&quot; and no MTVX:&quot;</span> &lt;&lt; globalBC;</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        }</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>      }</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    }</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <span class="keywordflow">return</span> cntwarnings;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  };</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  <span class="keyword">auto</span> warningsTRD = genericCTPDigitizer(triggerrecordTRD, classMaskTRD);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>  <span class="keyword">auto</span> warningsEMCAL = genericCTPDigitizer(triggerRecordEMCALPhys, classMaskEMCAL);</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>  <span class="keyword">auto</span> warningsPHOSCPV = genericCTPDigitizer(triggerrecordPHOSCPV, classMaskPHOSCPV);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout:# of TRD bogus triggers:&quot;</span> &lt;&lt; warningsTRD;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout:# of EMCAL bogus triggers:&quot;</span> &lt;&lt; warningsEMCAL;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;createCTPReadout:# of PHOS/CPV bogus triggers:&quot;</span> &lt;&lt; warningsPHOSCPV;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>}</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::collectBCs(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>,</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>                                        <span class="keyword">const</span> std::vector&lt;o2::InteractionTimeRecord&gt;&amp; mcRecords,</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>                                        std::map&lt;uint64_t, int&gt;&amp; bcsMap)</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>{</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; primVertices = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPrimaryVertices();</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; fddRecPoints = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getFDDRecPoints();</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ft0RecPoints = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getFT0RecPoints();</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; fv0RecPoints = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getFV0RecPoints();</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; caloEMCCellsTRGR = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getEMCALTriggers();</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; caloPHOSCellsTRGR = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPHOSTriggers();</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cpvTRGR = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getCPVTriggers();</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ctpDigits = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getCTPDigits();</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; zdcBCRecData = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getZDCBCRecData();</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  bcsMap[mStartIR.<a class="code hl_function" href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">toLong</a>()] = 1; <span class="comment">// store the start of TF</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span> </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  <span class="comment">// collecting non-empty BCs and enumerating them</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <a class="code hl_variable" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a> : mcRecords) {</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    uint64_t globalBC = <a class="code hl_variable" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>.toLong();</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  }</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; fddRecPoint : fddRecPoints) {</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    uint64_t globalBC = fddRecPoint.getInteractionRecord().toLong();</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>  }</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; ft0RecPoint : ft0RecPoints) {</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    uint64_t globalBC = ft0RecPoint.getInteractionRecord().toLong();</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  }</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; fv0RecPoint : fv0RecPoints) {</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    uint64_t globalBC = fv0RecPoint.getInteractionRecord().toLong();</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>  }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; zdcRecData : zdcBCRecData) {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    uint64_t globalBC = zdcRecData.ir.toLong();</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>  }</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a> : primVertices) {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    <span class="keyword">auto</span>&amp; timeStamp = <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getTimeStamp();</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="keywordtype">double</span> tsTimeStamp = timeStamp.getTimeStamp() * 1E3; <span class="comment">// mus to ns</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    uint64_t globalBC = relativeTime_to_GlobalBC(tsTimeStamp);</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>  }</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; emcaltrg : caloEMCCellsTRGR) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    uint64_t globalBC = emcaltrg.getBCData().toLong();</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; phostrg : caloPHOSCellsTRGR) {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    uint64_t globalBC = phostrg.getBCData().toLong();</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>  }</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cpvtrg : cpvTRGR) {</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    uint64_t globalBC = cpvtrg.getBCData().toLong();</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; ctpDigit : ctpDigits) {</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    uint64_t globalBC = ctpDigit.intRecord.toLong();</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    bcsMap[globalBC] = 1;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>  }</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>  <span class="keywordtype">int</span> bcID = 0;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; item : bcsMap) {</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    item.second = bcID;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    bcID++;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>  }</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>}</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TracksCursorType, <span class="keyword">typename</span> TracksCovCursorType&gt;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::addToTracksTable(TracksCursorType&amp; tracksCursor, TracksCovCursorType&amp; tracksCovCursor,</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>                                              <span class="keyword">const</span> <a class="code hl_typedef" href="../../d1/dec/namespaceo2_1_1track.html#a481bf229764c1bf6aabcdb06c0a49a9a">o2::track::TrackParCov</a>&amp; track, <span class="keywordtype">int</span> collisionID, <a class="code hl_enumeration" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a103128c0c18f91068440c49f4de3e2e2">aod::track::TrackTypeEnum</a> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>)</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>{</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  tracksCursor(collisionID,</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>               <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>,</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>               truncateFloatFraction(track.getX(), mTrackX),</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>               truncateFloatFraction(track.getAlpha(), mTrackAlpha),</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>               track.getY(),</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>               track.getZ(),</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>               truncateFloatFraction(track.getSnp(), mTrackSnp),</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>               truncateFloatFraction(track.getTgl(), mTrackTgl),</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>               truncateFloatFraction(track.getQ2Pt(), mTrack1Pt));</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>  <span class="comment">// trackscov</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>  <span class="keywordtype">float</span> sY = TMath::Sqrt(track.getSigmaY2()), sZ = TMath::Sqrt(track.getSigmaZ2()), sSnp = TMath::Sqrt(track.getSigmaSnp2()),</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        sTgl = TMath::Sqrt(track.getSigmaTgl2()), sQ2Pt = TMath::Sqrt(track.getSigma1Pt2());</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  tracksCovCursor(truncateFloatFraction(sY, mTrackCovDiag),</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                  truncateFloatFraction(sZ, mTrackCovDiag),</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                  truncateFloatFraction(sSnp, mTrackCovDiag),</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                  truncateFloatFraction(sTgl, mTrackCovDiag),</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                  truncateFloatFraction(sQ2Pt, mTrackCovDiag),</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                  (Char_t)(128. * track.getSigmaZY() / (sZ * sY)),</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                  (Char_t)(128. * track.getSigmaSnpY() / (sSnp * sY)),</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>                  (Char_t)(128. * track.getSigmaSnpZ() / (sSnp * sZ)),</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                  (Char_t)(128. * track.getSigmaTglY() / (sTgl * sY)),</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>                  (Char_t)(128. * track.getSigmaTglZ() / (sTgl * sZ)),</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                  (Char_t)(128. * track.getSigmaTglSnp() / (sTgl * sSnp)),</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                  (Char_t)(128. * track.getSigma1PtY() / (sQ2Pt * sY)),</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>                  (Char_t)(128. * track.getSigma1PtZ() / (sQ2Pt * sZ)),</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>                  (Char_t)(128. * track.getSigma1PtSnp() / (sQ2Pt * sSnp)),</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>                  (Char_t)(128. * track.getSigma1PtTgl() / (sQ2Pt * sTgl)));</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>}</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TracksExtraCursorType&gt;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::addToTracksExtraTable(TracksExtraCursorType&amp; tracksExtraCursor, TrackExtraInfo&amp; extraInfoHolder)</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>{</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>  <span class="comment">// In case of TPC-only tracks, do not truncate the time error since we encapsulate there a special encoding of</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>  <span class="comment">// the deltaFwd/Bwd times</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  <span class="keyword">auto</span> trackTimeRes = extraInfoHolder.trackTimeRes;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  <span class="keywordflow">if</span> (!extraInfoHolder.isTPConly) {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    trackTimeRes = truncateFloatFraction(trackTimeRes, mTrackTimeError);</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>  }</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>  <span class="comment">// extra</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>  tracksExtraCursor(truncateFloatFraction(extraInfoHolder.tpcInnerParam, mTrack1Pt),</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                    extraInfoHolder.flags,</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                    extraInfoHolder.itsClusterSizes,</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>                    extraInfoHolder.tpcNClsFindable,</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                    extraInfoHolder.tpcNClsFindableMinusFound,</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                    extraInfoHolder.tpcNClsFindableMinusPID,</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>                    extraInfoHolder.tpcNClsFindableMinusCrossedRows,</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>                    extraInfoHolder.tpcNClsShared,</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>                    extraInfoHolder.trdPattern,</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>                    truncateFloatFraction(extraInfoHolder.itsChi2NCl, mTrackChi2),</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>                    truncateFloatFraction(extraInfoHolder.tpcChi2NCl, mTrackChi2),</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>                    truncateFloatFraction(extraInfoHolder.trdChi2, mTrackChi2),</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>                    truncateFloatFraction(extraInfoHolder.tofChi2, mTrackChi2),</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>                    truncateFloatFraction(extraInfoHolder.tpcSignal, mTrackSignal),</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>                    truncateFloatFraction(extraInfoHolder.trdSignal, mTrackSignal),</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>                    truncateFloatFraction(extraInfoHolder.length, mTrackSignal),</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>                    truncateFloatFraction(extraInfoHolder.tofExpMom, mTrack1Pt),</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                    truncateFloatFraction(extraInfoHolder.trackEtaEMCAL, mTrackPosEMCAL),</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                    truncateFloatFraction(extraInfoHolder.trackPhiEMCAL, mTrackPosEMCAL),</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>                    truncateFloatFraction(extraInfoHolder.trackTime, mTrackTime),</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>                    trackTimeRes);</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>}</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TracksQACursorType&gt;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::addToTracksQATable(TracksQACursorType&amp; tracksQACursor, <a class="code hl_enumvalue" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ae53f095186cc45fe9d3f6ba714d09047ad313fa03fe7d48393c7e3d7d7073e0a1">TrackQA</a>&amp; trackQAInfoHolder)</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>{</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>  tracksQACursor(</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    trackQAInfoHolder.trackID,</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    mTrackQCRetainOnlydEdx ? 0.0f : truncateFloatFraction(trackQAInfoHolder.tpcTime0, mTPCTime0),</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    truncateFloatFraction(trackQAInfoHolder.tpcdEdxNorm, mTrackSignal),</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int16_t&gt;::min() : trackQAInfoHolder.tpcdcaR,</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int16_t&gt;::min() : trackQAInfoHolder.tpcdcaZ,</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    trackQAInfoHolder.tpcClusterByteMask,</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    trackQAInfoHolder.tpcdEdxMax0R,</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    trackQAInfoHolder.tpcdEdxMax1R,</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    trackQAInfoHolder.tpcdEdxMax2R,</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    trackQAInfoHolder.tpcdEdxMax3R,</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    trackQAInfoHolder.tpcdEdxTot0R,</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    trackQAInfoHolder.tpcdEdxTot1R,</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    trackQAInfoHolder.tpcdEdxTot2R,</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    trackQAInfoHolder.tpcdEdxTot3R,</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefContY,</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefContZ,</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefContSnp,</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefContTgl,</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefContQ2Pt,</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefGloY,</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefGloZ,</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefGloSnp,</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefGloTgl,</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dRefGloQ2Pt,</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dTofdX,</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    mTrackQCRetainOnlydEdx ? std::numeric_limits&lt;int8_t&gt;::min() : trackQAInfoHolder.dTofdZ);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>}</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> mftTracksCursorType, <span class="keyword">typename</span> AmbigMFTTracksCursorType&gt;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::addToMFTTracksTable(mftTracksCursorType&amp; mftTracksCursor, AmbigMFTTracksCursorType&amp; ambigMFTTracksCursor,</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>                                                 <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a> trackID, <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, <span class="keywordtype">int</span> collisionID,</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>                                                 std::uint64_t collisionBC, <span class="keyword">const</span> std::map&lt;uint64_t, int&gt;&amp; bcsMap)</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>{</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  <span class="comment">// mft tracks</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>  <span class="keywordtype">int</span> bcSlice[2] = {-1, -1};</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; track = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMFTTrack(trackID);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rof = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMFTTracksROFRecords()[mMFTROFs[trackID.getIndex()]];</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>  <span class="keywordtype">float</span> trackTime = rof.getBCData().differenceInBC(mStartIR) * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a> + mMFTROFrameHalfLengthNS + mMFTROFBiasNS;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>  <span class="keywordtype">float</span> trackTimeRes = mMFTROFrameHalfLengthNS;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>  <span class="keywordtype">bool</span> needBCSlice = collisionID &lt; 0;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>  std::uint64_t bcOfTimeRef;</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>  <span class="keywordflow">if</span> (needBCSlice) {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="keywordtype">double</span> error = mTimeMarginTrackTime + trackTimeRes;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    bcOfTimeRef = fillBCSlice(bcSlice, trackTime - error, trackTime + error, bcsMap);</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    bcOfTimeRef = collisionBC - mStartIR.<a class="code hl_function" href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">toLong</a>(); <span class="comment">// by default (unambiguous) track time is wrt collision BC</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>  }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  trackTime -= bcOfTimeRef * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a>;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span> </div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>  <span class="comment">// the Cellular Automaton track-finding algorithm flag is stored in first of the 4 bits not used for the cluster size</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>  uint64_t mftClusterSizesAndTrackFlags = track.getClusterSizes();</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>  mftClusterSizesAndTrackFlags |= (track.isCA()) ? (1ULL &lt;&lt; (60)) : 0;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>  mftTracksCursor(collisionID,</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>                  track.getX(),</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>                  track.getY(),</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>                  truncateFloatFraction(track.getZ(), mTrackX), <span class="comment">// for the forward tracks Z has the same role as X in barrel</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>                  truncateFloatFraction(track.getPhi(), mTrackAlpha),</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>                  truncateFloatFraction(track.getTanl(), mTrackTgl),</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>                  truncateFloatFraction(track.getInvQPt(), mTrack1Pt),</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>                  mftClusterSizesAndTrackFlags,</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>                  truncateFloatFraction(track.getTrackChi2(), mTrackChi2),</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>                  truncateFloatFraction(trackTime, mTrackTime),</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>                  truncateFloatFraction(trackTimeRes, mTrackTimeError));</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>  <span class="keywordflow">if</span> (needBCSlice) {</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    ambigMFTTracksCursor(mTableTrMFTID, bcSlice);</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>  }</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>}</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TracksCursorType, <span class="keyword">typename</span> TracksCovCursorType, <span class="keyword">typename</span> TracksExtraCursorType, <span class="keyword">typename</span> TracksQACursorType, <span class="keyword">typename</span> AmbigTracksCursorType,</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>          <span class="keyword">typename</span> MFTTracksCursorType, <span class="keyword">typename</span> MFTTracksCovCursorType, <span class="keyword">typename</span> AmbigMFTTracksCursorType,</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>          <span class="keyword">typename</span> FwdTracksCursorType, <span class="keyword">typename</span> FwdTracksCovCursorType, <span class="keyword">typename</span> AmbigFwdTracksCursorType, <span class="keyword">typename</span> FwdTrkClsCursorType&gt;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::fillTrackTablesPerCollision(<span class="keywordtype">int</span> collisionID,</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>                                                         std::uint64_t collisionBC,</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>                                                         <span class="keyword">const</span> <a class="code hl_class" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html">o2::dataformats::VtxTrackRef</a>&amp; trackRef,</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>                                                         <span class="keyword">const</span> gsl::span&lt;const GIndex&gt;&amp; GIndices,</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                                                         <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>,</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>                                                         TracksCursorType&amp; tracksCursor,</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                                                         TracksCovCursorType&amp; tracksCovCursor,</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>                                                         TracksExtraCursorType&amp; tracksExtraCursor,</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>                                                         TracksQACursorType&amp; tracksQACursor,</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                                                         AmbigTracksCursorType&amp; ambigTracksCursor,</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>                                                         MFTTracksCursorType&amp; mftTracksCursor,</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>                                                         MFTTracksCovCursorType&amp; mftTracksCovCursor,</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>                                                         AmbigMFTTracksCursorType&amp; ambigMFTTracksCursor,</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                                                         FwdTracksCursorType&amp; fwdTracksCursor,</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                                                         FwdTracksCovCursorType&amp; fwdTracksCovCursor,</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>                                                         AmbigFwdTracksCursorType&amp; ambigFwdTracksCursor,</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>                                                         FwdTrkClsCursorType&amp; fwdTrkClsCursor,</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>                                                         <span class="keyword">const</span> std::map&lt;uint64_t, int&gt;&amp; bcsMap)</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>{</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> = <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a516bf7c7bca5465cad0ac01b61f66468">GIndex::NSources</a>; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>--;) {</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    <span class="keywordflow">if</span> (!GIndex::isTrackSource(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>)) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    }</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> = trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7e85c4e425692f2a08b2a13c1ea980d4">getFirstEntryOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> + trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7def086c20e01197faca2b09f9093a46">getEntriesOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    <span class="keywordtype">int</span> nToReserve = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> - <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a>; <span class="comment">// + last index for a given table</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84">GIndex::Source::MFT</a>) {</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>      mftTracksCursor.reserve(nToReserve + mftTracksCursor.lastIndex());</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">GIndex::Source::MCH</a> || <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a043188e1f1e971e828e90751b89686dd">GIndex::Source::MFTMCH</a> || <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">GIndex::Source::MCHMID</a>) {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>      fwdTracksCursor.reserve(nToReserve + fwdTracksCursor.lastIndex());</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>      fwdTracksCovCursor.reserve(nToReserve + fwdTracksCovCursor.lastIndex());</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>      <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a043188e1f1e971e828e90751b89686dd">GIndex::Source::MFTMCH</a>) {</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>        mftTracksCovCursor.reserve(nToReserve + mftTracksCovCursor.lastIndex());</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>      }</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>      tracksCursor.reserve(nToReserve + tracksCursor.lastIndex());</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>      tracksCovCursor.reserve(nToReserve + tracksCovCursor.lastIndex());</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>      tracksExtraCursor.reserve(nToReserve + tracksExtraCursor.lastIndex());</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    }</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ti = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a>; ti &lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a>; ti++) {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trackIndex = GIndices[ti];</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>      <span class="keywordflow">if</span> (GIndex::includesSource(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>, mInputSources)) {</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84">GIndex::Source::MFT</a>) {                                                                <span class="comment">// MFT tracks are treated separately since they are stored in a different table</span></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>          <span class="keywordflow">if</span> (trackIndex.isAmbiguous() &amp;&amp; mGIDToTableMFTID.find(trackIndex) != mGIDToTableMFTID.end()) { <span class="comment">// was it already stored ?</span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>          }</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>          addToMFTTracksTable(mftTracksCursor, ambigMFTTracksCursor, trackIndex, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, collisionID, collisionBC, bcsMap);</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>          mGIDToTableMFTID.emplace(trackIndex, mTableTrMFTID);</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>          mTableTrMFTID++;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">GIndex::Source::MCH</a> || <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a043188e1f1e971e828e90751b89686dd">GIndex::Source::MFTMCH</a> || <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">GIndex::Source::MCHMID</a>) { <span class="comment">// FwdTracks tracks are treated separately since they are stored in a different table</span></div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>          <span class="keywordflow">if</span> (trackIndex.isAmbiguous() &amp;&amp; mGIDToTableFwdID.find(trackIndex) != mGIDToTableFwdID.end()) {           <span class="comment">// was it already stored ?</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>          }</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>          addToFwdTracksTable(fwdTracksCursor, fwdTracksCovCursor, ambigFwdTracksCursor, mftTracksCovCursor, trackIndex, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, collisionID, collisionBC, bcsMap);</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>          mGIDToTableFwdID.emplace(trackIndex, mTableTrFwdID);</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>          addClustersToFwdTrkClsTable(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, fwdTrkClsCursor, trackIndex, mTableTrFwdID);</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>          mTableTrFwdID++;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>          <span class="comment">// barrel track: normal tracks table</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>          <span class="keywordflow">if</span> (trackIndex.isAmbiguous() &amp;&amp; mGIDToTableID.find(trackIndex) != mGIDToTableID.end()) { <span class="comment">// was it already stored ?</span></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>          }</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span> </div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>          <span class="keywordtype">float</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6b425be07cfa8ac09043ef8391e7e514">weight</a> = 0;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>          <span class="keyword">static</span> std::uniform_real_distribution&lt;&gt; <a class="code hl_variable" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a433203debbef4e29c03236b60e0e7aa7">distr</a>(0., 1.);</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>          <span class="keywordtype">bool</span> writeQAData = <a class="code hl_function" href="../../d1/d99/structo2_1_1math__utils_1_1Tsallis.html#aa3aca711a107c7483836a927c65c6807">o2::math_utils::Tsallis::downsampleTsallisCharged</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackParam(trackIndex).getPt(), mTrackQCFraction, mSqrtS, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6b425be07cfa8ac09043ef8391e7e514">weight</a>, <a class="code hl_variable" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a433203debbef4e29c03236b60e0e7aa7">distr</a>(mGenerator)) || ((<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> != <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::TPC</a> || mGIDUsedBySVtx.find(trackIndex) != mGIDUsedBySVtx.end() || mGIDUsedByStr.find(trackIndex) != mGIDUsedByStr.end()) &amp;&amp; mTrackQCKeepGlobalTracks);</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>          <span class="keyword">auto</span> extraInfoHolder = processBarrelTrack(collisionID, collisionBC, trackIndex, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, bcsMap);</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span> </div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>          <span class="keywordflow">if</span> (writeQAData) {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>            <span class="keyword">auto</span> trackQAInfoHolder = processBarrelTrackQA(collisionID, collisionBC, trackIndex, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, bcsMap);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>            <span class="keywordflow">if</span> (std::bitset&lt;8&gt;(trackQAInfoHolder.tpcClusterByteMask).count() &gt;= mTrackQCNTrCut) {</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>              trackQAInfoHolder.trackID = mTableTrID;</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>              <span class="comment">// LOGP(info, &quot;orig time0 in bc: {} diffBCRef: {}, ttime: {} -&gt; {}&quot;, trackQAInfoHolder.tpcTime0*8, extraInfoHolder.diffBCRef, extraInfoHolder.trackTime, (trackQAInfoHolder.tpcTime0 * 8 - extraInfoHolder.diffBCRef) * o2::constants::lhc::LHCBunchSpacingNS - extraInfoHolder.trackTime);</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>              trackQAInfoHolder.tpcTime0 = (trackQAInfoHolder.tpcTime0 * 8 - extraInfoHolder.diffBCRef) * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a> - extraInfoHolder.trackTime;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>              <span class="comment">// difference between TPC track time0 and stored track nominal time in ns instead of TF start</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>              addToTracksQATable(tracksQACursor, trackQAInfoHolder);</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>              writeQAData = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>            }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>          }</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span> </div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>          <span class="comment">// include specific selection of tpc standalone tracks if thinning is active</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>          <span class="keywordflow">if</span> (mThinTracks &amp;&amp; extraInfoHolder.isTPConly &amp;&amp; !writeQAData) { <span class="comment">// if trackQA is written then no check has to be done</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>            <span class="keyword">auto</span> trk = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCTrack(trackIndex);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>            <span class="keywordflow">if</span> (trk.getNClusters() &gt;= mTrackQCNCls &amp;&amp; trk.getPt() &gt;= mTrackQCPt) {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>              <a class="code hl_class" href="../../db/d0f/classo2_1_1dataformats_1_1DCA.html">o2::dataformats::DCA</a> dcaInfo{999.f, 999.f, 999.f, 999.f, 999.f};</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>              <a class="code hl_class" href="../../dc/d08/classo2_1_1dataformats_1_1VertexBase.html">o2::dataformats::VertexBase</a> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> = mVtx.<a class="code hl_function" href="../../da/ddf/classo2_1_1dataformats_1_1MeanVertexObject.html#a5c324515cb0be10d5c3db0ac4d1eb4a7">getMeanVertex</a>(collisionID &lt; 0 ? 0.f : <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPrimaryVertex(collisionID).getZ());</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>              <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#ae2d15b8a99ba7e2ea3b892704edad6e5">o2::base::Propagator::Instance</a>()-&gt;propagateToDCABxByBz(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>, trk, 2., mMatCorr, &amp;dcaInfo) &amp;&amp; std::abs(dcaInfo.getY()) &lt; mTrackQCDCAxy) {</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>                writeQAData = <span class="keyword">true</span>; <span class="comment">// just setting this to not thin the track</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>              }</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            }</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>          }</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span> </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>          <span class="comment">// Skip thinning if not enabled or track is not tpc standalone or assoc. to a V0 or qa&#39;ed</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>          <span class="keywordflow">if</span> (mThinTracks &amp;&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::Source::TPC</a> &amp;&amp; mGIDUsedBySVtx.find(trackIndex) == mGIDUsedBySVtx.end() &amp;&amp; mGIDUsedByStr.find(trackIndex) == mGIDUsedByStr.end() &amp;&amp; !writeQAData) {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>            mGIDToTableID.emplace(trackIndex, -1); <span class="comment">// pretend skipped tracks are stored; this is safe since they are are not written to disk and -1 indicates to all users to not use this track</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>          }</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span> </div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>          <span class="keywordflow">if</span> (!extraInfoHolder.isTPConly &amp;&amp; extraInfoHolder.trackTimeRes &lt; 0.f) { <span class="comment">// failed or rejected?</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warning) &lt;&lt; <span class="stringliteral">&quot;Barrel track &quot;</span> &lt;&lt; trackIndex &lt;&lt; <span class="stringliteral">&quot; has no time set, rejection is not expected : time=&quot;</span> &lt;&lt; extraInfoHolder.trackTime</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>                         &lt;&lt; <span class="stringliteral">&quot; timeErr=&quot;</span> &lt;&lt; extraInfoHolder.trackTimeRes &lt;&lt; <span class="stringliteral">&quot; BCSlice: &quot;</span> &lt;&lt; extraInfoHolder.bcSlice[0] &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; extraInfoHolder.bcSlice[1];</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>          }</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>          <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trOrig = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackParam(trackIndex);</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>          <span class="keywordtype">bool</span> isProp = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>          <span class="keywordflow">if</span> (mPropTracks &amp;&amp; trOrig.getX() &lt; mMaxPropXiu &amp;&amp;</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>              mGIDUsedBySVtx.find(trackIndex) == mGIDUsedBySVtx.end() &amp;&amp;</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>              mGIDUsedByStr.find(trackIndex) == mGIDUsedByStr.end()) { <span class="comment">// Do not propagate track assoc. to V0s and str. tracking</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>            <span class="keyword">auto</span> trackPar(trOrig);</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>            isProp = propagateTrackToPV(trackPar, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, collisionID);</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>            <span class="keywordflow">if</span> (isProp) {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>              addToTracksTable(tracksCursor, tracksCovCursor, trackPar, collisionID, <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a103128c0c18f91068440c49f4de3e2e2a4506d657a2a2ba0d653d5238b2c38158">aod::track::Track</a>);</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>            }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>          }</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>          <span class="keywordflow">if</span> (!isProp) {</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>            addToTracksTable(tracksCursor, tracksCovCursor, trOrig, collisionID, <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a103128c0c18f91068440c49f4de3e2e2a6cc442993cb940c5657119f8e5069019">aod::track::TrackIU</a>);</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>          }</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>          addToTracksExtraTable(tracksExtraCursor, extraInfoHolder);</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>          <span class="comment">//  collecting table indices of barrel tracks for V0s table</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>          <span class="keywordflow">if</span> (extraInfoHolder.bcSlice[0] &gt;= 0 &amp;&amp; collisionID &lt; 0) {</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>            ambigTracksCursor(mTableTrID, extraInfoHolder.bcSlice);</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>          }</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>          mGIDToTableID.emplace(trackIndex, mTableTrID);</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>          mTableTrID++;</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>        }</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>      }</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    }</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>  }</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  <span class="keywordflow">if</span> (collisionID &lt; 0) {</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>  }</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>  <span class="keyword">auto</span> sTracks = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getStrangeTracks();</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>  tracksCursor.reserve(mVertexStrLUT[collisionID + 1] + tracksCursor.lastIndex());</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>  tracksCovCursor.reserve(mVertexStrLUT[collisionID + 1] + tracksCovCursor.lastIndex());</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>  tracksExtraCursor.reserve(mVertexStrLUT[collisionID + 1] + tracksExtraCursor.lastIndex());</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iS{mVertexStrLUT[collisionID]}; iS &lt; mVertexStrLUT[collisionID + 1]; ++iS) {</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="keyword">auto</span>&amp; collStrTrk = mCollisionStrTrk[iS];</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <span class="keyword">auto</span>&amp; sTrk = sTracks[collStrTrk.second];</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    TrackExtraInfo extraInfo;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    extraInfo.itsChi2NCl = sTrk.mTopoChi2; <span class="comment">// TODO: this is the total chi2 of adding the ITS clusters, the topology chi2 meaning might change in the future</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    extraInfo.itsClusterSizes = sTrk.getClusterSizes();</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    addToTracksTable(tracksCursor, tracksCovCursor, sTrk.mMother, collisionID, <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a103128c0c18f91068440c49f4de3e2e2a25a993df094535f2f23619e08bbdd0fe">aod::track::StrangeTrack</a>);</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    addToTracksExtraTable(tracksExtraCursor, extraInfo);</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    mStrTrkIndices[collStrTrk.second] = mTableTrID;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    mTableTrID++;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>  }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>}</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span> </div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::fillIndexTablesPerCollision(<span class="keyword">const</span> <a class="code hl_class" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html">o2::dataformats::VtxTrackRef</a>&amp; trackRef, <span class="keyword">const</span> gsl::span&lt;const GIndex&gt;&amp; GIndices, <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>)</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>{</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchmidMatches = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMCHMIDMatches();</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span> </div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> : {<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">GIndex::Source::MCHMID</a>, <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a043188e1f1e971e828e90751b89686dd">GIndex::Source::MFTMCH</a>, <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">GIndex::Source::MCH</a>, <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84">GIndex::Source::MFT</a>}) {</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> = trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7e85c4e425692f2a08b2a13c1ea980d4">getFirstEntryOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> + trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7def086c20e01197faca2b09f9093a46">getEntriesOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ti = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a>; ti &lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a>; ti++) {</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>      <span class="keyword">auto</span>&amp; trackIndex = GIndices[ti];</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>      <span class="keywordflow">if</span> (GIndex::includesSource(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>, mInputSources)) {</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>        <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84">GIndex::Source::MFT</a>) {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>          <span class="keywordflow">if</span> (trackIndex.isAmbiguous() &amp;&amp; mGIDToTableMFTID.find(trackIndex) != mGIDToTableMFTID.end()) {</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>          }</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>          mGIDToTableMFTID.emplace(trackIndex, mIndexMFTID);</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>          mIndexTableMFT[trackIndex.getIndex()] = mIndexMFTID;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>          mIndexMFTID++;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">GIndex::Source::MCH</a> || <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a043188e1f1e971e828e90751b89686dd">GIndex::Source::MFTMCH</a> || <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">GIndex::Source::MCHMID</a>) {</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>          <span class="keywordflow">if</span> (trackIndex.isAmbiguous() &amp;&amp; mGIDToTableFwdID.find(trackIndex) != mGIDToTableFwdID.end()) {</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>          }</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>          mGIDToTableFwdID.emplace(trackIndex, mIndexFwdID);</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>          <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">GIndex::Source::MCH</a>) {</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>            mIndexTableFwd[trackIndex.getIndex()] = mIndexFwdID;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">GIndex::Source::MCHMID</a>) {</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchmidMatch = mchmidMatches[trackIndex.getIndex()];</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>            <span class="keyword">const</span> <span class="keyword">auto</span> mchTrackID = mchmidMatch.getMCHRef().getIndex();</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            mIndexTableFwd[mchTrackID] = mIndexFwdID;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>          }</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>          mIndexFwdID++;</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>        }</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>      }</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    }</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>  }</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>}</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span> </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> FwdTracksCursorType, <span class="keyword">typename</span> FwdTracksCovCursorType, <span class="keyword">typename</span> AmbigFwdTracksCursorType, <span class="keyword">typename</span> mftTracksCovCursorType&gt;</div>
<div class="foldopen" id="foldopen00625" data-start="{" data-end="}">
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno"><a class="line" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a89bbaac24f2b1a1e6956d35e7c85d22e">  625</a></span><span class="keywordtype">void</span> AODProducerWorkflowDPL::addToFwdTracksTable(FwdTracksCursorType&amp; fwdTracksCursor, FwdTracksCovCursorType&amp; fwdTracksCovCursor,</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                                                 AmbigFwdTracksCursorType&amp; ambigFwdTracksCursor, mftTracksCovCursorType&amp; mftTracksCovCursor, <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a> trackID,</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>                                                 <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, <span class="keywordtype">int</span> collisionID, std::uint64_t collisionBC,</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>                                                 <span class="keyword">const</span> std::map&lt;uint64_t, int&gt;&amp; bcsMap)</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>{</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchTracks = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMCHTracks();</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; midTracks = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMIDTracks();</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchmidMatches = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMCHMIDMatches();</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchClusters = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMCHTrackClusters();</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>  FwdTrackInfo fwdInfo;</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>  FwdTrackCovInfo fwdCovInfo;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>  <span class="keywordtype">int</span> bcSlice[2] = {-1, -1};</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>  <span class="comment">// helper lambda for mch bitmap -- common for global and standalone tracks</span></div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>  <span class="keyword">auto</span> getMCHBitMap = [&amp;](<span class="keywordtype">int</span> mchTrackID) {</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <span class="keywordflow">if</span> (mchTrackID != -1) { <span class="comment">// check matching just in case</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchTrack = mchTracks[mchTrackID];</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../d1/da0/classint.html">first</a> = mchTrack.getFirstClusterIdx();</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>      <span class="keywordtype">int</span> last = mchTrack.getLastClusterIdx();</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt;= last; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) { <span class="comment">// check chamberIds of all clusters</span></div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cluster = mchClusters[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>];</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <span class="keywordtype">int</span> chamberId = cluster.getChamberId();</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>        fwdInfo.mchBitMap |= 1 &lt;&lt; chamberId;</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>      }</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    }</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>  };</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span> </div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>  <span class="keyword">auto</span> getMIDBitMapBoards = [&amp;](<span class="keywordtype">int</span> midTrackID) {</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    <span class="keywordflow">if</span> (midTrackID != -1) { <span class="comment">// check matching just in case</span></div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; midTrack = midTracks[midTrackID];</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>      fwdInfo.midBitMap = midTrack.getHitMap();</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>      fwdInfo.midBoards = midTrack.getEfficiencyWord();</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    }</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>  };</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span> </div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>  <span class="keyword">auto</span> extrapMCHTrack = [&amp;](<span class="keywordtype">int</span> mchTrackID) {</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; track = mchTracks[mchTrackID];</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span> </div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <span class="comment">// mch standalone tracks extrapolated to vertex</span></div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    <span class="comment">// compute 3 sets of tracks parameters :</span></div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <span class="comment">// - at vertex</span></div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <span class="comment">// - at DCA</span></div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <span class="comment">// - at the end of the absorber</span></div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <span class="comment">// extrapolate to vertex</span></div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <span class="keywordtype">float</span> vx = 0, vy = 0, vz = 0;</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="keywordflow">if</span> (collisionID &gt;= 0) {</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPrimaryVertex(collisionID);</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>      vx = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>.getX();</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>      vy = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>.getY();</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>      vz = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>.getZ();</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    }</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span> </div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <a class="code hl_class" href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html">o2::mch::TrackParam</a> trackParamAtVertex(track.getZ(), track.getParameters(), track.getCovariances());</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="keywordflow">if</span> (mPropMuons) {</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>      <span class="keywordtype">double</span> errVtx{0.0}; <span class="comment">// FIXME: get errors associated with vertex if available</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>      <span class="keywordtype">double</span> errVty{0.0};</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d5/d6f/classo2_1_1mch_1_1TrackExtrap.html#a4ae2c19ef50c791d9305207c83453c9c">o2::mch::TrackExtrap::extrapToVertex</a>(trackParamAtVertex, vx, vy, vz, errVtx, errVty)) {</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>      }</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    }</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span> </div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    <span class="comment">// extrapolate to DCA</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <a class="code hl_class" href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html">o2::mch::TrackParam</a> trackParamAtDCA(track.getZ(), track.getParameters());</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d5/d6f/classo2_1_1mch_1_1TrackExtrap.html#a71c6113c85df663e6abafc2ebb6016eb">o2::mch::TrackExtrap::extrapToVertexWithoutBranson</a>(trackParamAtDCA, vz)) {</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    }</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span> </div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    <span class="comment">// extrapolate to the end of the absorber</span></div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    <a class="code hl_class" href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html">o2::mch::TrackParam</a> trackParamAtRAbs(track.getZ(), track.getParameters());</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d5/d6f/classo2_1_1mch_1_1TrackExtrap.html#a1a356eebdd9dfa2ab2ebb5b2c5d34ca6">o2::mch::TrackExtrap::extrapToZ</a>(trackParamAtRAbs, -505.)) { <span class="comment">// FIXME: replace hardcoded 505</span></div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    }</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span> </div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    <span class="keywordtype">double</span> dcaX = trackParamAtDCA.<a class="code hl_function" href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html#a3270667ed541999064ec1ea8d578df04">getNonBendingCoor</a>() - vx;</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    <span class="keywordtype">double</span> dcaY = trackParamAtDCA.<a class="code hl_function" href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html#aa712d841f1781437b0ecc35bbf320e80">getBendingCoor</a>() - vy;</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    <span class="keywordtype">double</span> dca = std::sqrt(dcaX * dcaX + dcaY * dcaY);</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span> </div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    <span class="keywordtype">double</span> xAbs = trackParamAtRAbs.<a class="code hl_function" href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html#a3270667ed541999064ec1ea8d578df04">getNonBendingCoor</a>();</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    <span class="keywordtype">double</span> yAbs = trackParamAtRAbs.<a class="code hl_function" href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html#aa712d841f1781437b0ecc35bbf320e80">getBendingCoor</a>();</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span> </div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    <span class="keywordtype">double</span> dpdca = track.getP() * dca;</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    <span class="keywordtype">double</span> dchi2 = track.getChi2OverNDF();</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span> </div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>    <span class="keyword">auto</span> fwdmuon = mMatching.<a class="code hl_function" href="../../dc/d78/classo2_1_1globaltracking_1_1MatchGlobalFwd.html#ae199ddc753ebf9c5e5957dce37b4695e">MCHtoFwd</a>(trackParamAtVertex);</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span> </div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    fwdInfo.x = fwdmuon.<a class="code hl_function" href="../../d8/d10/classo2_1_1track_1_1TrackParFwd.html#ae5ca1c7f2e604514a7e0227f72a2a697">getX</a>();</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    fwdInfo.y = fwdmuon.getY();</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    fwdInfo.z = fwdmuon.getZ();</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    fwdInfo.phi = fwdmuon.getPhi();</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    fwdInfo.tanl = fwdmuon.getTgl();</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    fwdInfo.invqpt = fwdmuon.getInvQPt();</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    fwdInfo.rabs = std::sqrt(xAbs * xAbs + yAbs * yAbs);</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    fwdInfo.chi2 = dchi2;</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    fwdInfo.pdca = dpdca;</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    fwdInfo.nClusters = track.getNClusters();</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span> </div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    fwdCovInfo.sigX = TMath::Sqrt(fwdmuon.getCovariances()(0, 0));</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    fwdCovInfo.sigY = TMath::Sqrt(fwdmuon.getCovariances()(1, 1));</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    fwdCovInfo.sigPhi = TMath::Sqrt(fwdmuon.getCovariances()(2, 2));</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    fwdCovInfo.sigTgl = TMath::Sqrt(fwdmuon.getCovariances()(3, 3));</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    fwdCovInfo.sig1Pt = TMath::Sqrt(fwdmuon.getCovariances()(4, 4));</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    fwdCovInfo.rhoXY = (Char_t)(128. * fwdmuon.getCovariances()(0, 1) / (fwdCovInfo.sigX * fwdCovInfo.sigY));</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    fwdCovInfo.rhoPhiX = (Char_t)(128. * fwdmuon.getCovariances()(0, 2) / (fwdCovInfo.sigPhi * fwdCovInfo.sigX));</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    fwdCovInfo.rhoPhiY = (Char_t)(128. * fwdmuon.getCovariances()(1, 2) / (fwdCovInfo.sigPhi * fwdCovInfo.sigY));</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    fwdCovInfo.rhoTglX = (Char_t)(128. * fwdmuon.getCovariances()(0, 3) / (fwdCovInfo.sigTgl * fwdCovInfo.sigX));</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    fwdCovInfo.rhoTglY = (Char_t)(128. * fwdmuon.getCovariances()(1, 3) / (fwdCovInfo.sigTgl * fwdCovInfo.sigY));</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    fwdCovInfo.rhoTglPhi = (Char_t)(128. * fwdmuon.getCovariances()(2, 3) / (fwdCovInfo.sigTgl * fwdCovInfo.sigPhi));</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    fwdCovInfo.rho1PtX = (Char_t)(128. * fwdmuon.getCovariances()(0, 4) / (fwdCovInfo.sig1Pt * fwdCovInfo.sigX));</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    fwdCovInfo.rho1PtY = (Char_t)(128. * fwdmuon.getCovariances()(1, 4) / (fwdCovInfo.sig1Pt * fwdCovInfo.sigY));</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>    fwdCovInfo.rho1PtPhi = (Char_t)(128. * fwdmuon.getCovariances()(2, 4) / (fwdCovInfo.sig1Pt * fwdCovInfo.sigPhi));</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    fwdCovInfo.rho1PtTgl = (Char_t)(128. * fwdmuon.getCovariances()(3, 4) / (fwdCovInfo.sig1Pt * fwdCovInfo.sigTgl));</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span> </div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>  };</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span> </div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>  <span class="keywordflow">if</span> (trackID.getSource() == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">GIndex::MCH</a>) { <span class="comment">// This is an MCH track</span></div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    <span class="keywordtype">int</span> mchTrackID = trackID.getIndex();</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    getMCHBitMap(mchTrackID);</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>    <span class="keywordflow">if</span> (!extrapMCHTrack(mchTrackID)) {</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>      LOGF(warn, <span class="stringliteral">&quot;Unable to extrapolate MCH track with ID %d! Dummy parameters will be used&quot;</span>, mchTrackID);</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    }</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>    fwdInfo.trackTypeId = <a class="code hl_enumvalue" href="../../dc/d04/namespaceo2_1_1aod_1_1fwdtrack.html#a309e6fb874be38d514f742d129f1e769a1acf9f15fc03dbc3b7ddf2f6a86763e8">o2::aod::fwdtrack::MCHStandaloneTrack</a>;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rof = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMCHTracksROFRecords()[mMCHROFs[mchTrackID]];</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>    <span class="keyword">auto</span> <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a> = rof.getTimeMUS(mStartIR).first;</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>    fwdInfo.trackTime = <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a>.getTimeStamp() * 1.e3;</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    fwdInfo.trackTimeRes = <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a>.getTimeStampError() * 1.e3;</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trackID.getSource() == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">GIndex::MCHMID</a>) { <span class="comment">// This is an MCH-MID track</span></div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    fwdInfo.trackTypeId = <a class="code hl_enumvalue" href="../../dc/d04/namespaceo2_1_1aod_1_1fwdtrack.html#a309e6fb874be38d514f742d129f1e769a7b270c391f4a953196799a425f81c54e">o2::aod::fwdtrack::MuonStandaloneTrack</a>;</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    <span class="keyword">auto</span> mchmidMatch = mchmidMatches[trackID.getIndex()];</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    <span class="keyword">auto</span> mchTrackID = mchmidMatch.getMCHRef().getIndex();</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>    <span class="keywordflow">if</span> (!extrapMCHTrack(mchTrackID)) {</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>      LOGF(warn, <span class="stringliteral">&quot;Unable to extrapolate MCH track with ID %d! Dummy parameters will be used&quot;</span>, mchTrackID);</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>    }</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    <span class="keyword">auto</span> midTrackID = mchmidMatch.getMIDRef().getIndex();</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    fwdInfo.chi2matchmchmid = mchmidMatch.getMatchChi2OverNDF();</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>    getMCHBitMap(mchTrackID);</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>    getMIDBitMapBoards(midTrackID);</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    <span class="keyword">auto</span> <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a> = mchmidMatch.getTimeMUS(mStartIR).first;</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    fwdInfo.trackTime = <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a>.getTimeStamp() * 1.e3;</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    fwdInfo.trackTimeRes = <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a>.getTimeStampError() * 1.e3;</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>  } <span class="keywordflow">else</span> { <span class="comment">// This is a GlobalMuonTrack or a GlobalForwardTrack</span></div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; track = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getGlobalFwdTrack(trackID);</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mftTracks = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getMFTTracks();</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mfttrack = mftTracks[track.getMFTTrackID()];</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    <span class="keywordflow">if</span> (!extrapMCHTrack(track.getMCHTrackID())) {</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>      LOGF(warn, <span class="stringliteral">&quot;Unable to extrapolate MCH track with ID %d! Dummy parameters will be used&quot;</span>, track.getMCHTrackID());</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    }</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    fwdInfo.x = track.getX();</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    fwdInfo.y = track.getY();</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    fwdInfo.z = track.getZ();</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    fwdInfo.phi = track.getPhi();</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    fwdInfo.tanl = track.getTanl();</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    fwdInfo.invqpt = track.getInvQPt();</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    fwdInfo.chi2 = track.getTrackChi2();</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    <span class="comment">// fwdInfo.nClusters = track.getNumberOfPoints();</span></div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    fwdInfo.chi2matchmchmid = track.getMIDMatchingChi2();</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    fwdInfo.chi2matchmchmft = track.getMFTMCHMatchingChi2();</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>    fwdInfo.matchscoremchmft = track.getMFTMCHMatchingScore();</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>    fwdInfo.matchmfttrackid = mIndexTableMFT[track.getMFTTrackID()];</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>    fwdInfo.matchmchtrackid = mIndexTableFwd[track.getMCHTrackID()];</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>    fwdInfo.trackTime = track.getTimeMUS().getTimeStamp() * 1.e3;</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    fwdInfo.trackTimeRes = track.getTimeMUS().getTimeStampError() * 1.e3;</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span> </div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>    getMCHBitMap(track.getMCHTrackID());</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>    getMIDBitMapBoards(track.getMIDTrackID());</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span> </div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>    fwdCovInfo.sigX = TMath::Sqrt(track.getCovariances()(0, 0));</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    fwdCovInfo.sigY = TMath::Sqrt(track.getCovariances()(1, 1));</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>    fwdCovInfo.sigPhi = TMath::Sqrt(track.getCovariances()(2, 2));</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    fwdCovInfo.sigTgl = TMath::Sqrt(track.getCovariances()(3, 3));</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    fwdCovInfo.sig1Pt = TMath::Sqrt(track.getCovariances()(4, 4));</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    fwdCovInfo.rhoXY = (Char_t)(128. * track.getCovariances()(0, 1) / (fwdCovInfo.sigX * fwdCovInfo.sigY));</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    fwdCovInfo.rhoPhiX = (Char_t)(128. * track.getCovariances()(0, 2) / (fwdCovInfo.sigPhi * fwdCovInfo.sigX));</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    fwdCovInfo.rhoPhiY = (Char_t)(128. * track.getCovariances()(1, 2) / (fwdCovInfo.sigPhi * fwdCovInfo.sigY));</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    fwdCovInfo.rhoTglX = (Char_t)(128. * track.getCovariances()(0, 3) / (fwdCovInfo.sigTgl * fwdCovInfo.sigX));</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>    fwdCovInfo.rhoTglY = (Char_t)(128. * track.getCovariances()(1, 3) / (fwdCovInfo.sigTgl * fwdCovInfo.sigY));</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    fwdCovInfo.rhoTglPhi = (Char_t)(128. * track.getCovariances()(2, 3) / (fwdCovInfo.sigTgl * fwdCovInfo.sigPhi));</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    fwdCovInfo.rho1PtX = (Char_t)(128. * track.getCovariances()(0, 4) / (fwdCovInfo.sig1Pt * fwdCovInfo.sigX));</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    fwdCovInfo.rho1PtY = (Char_t)(128. * track.getCovariances()(1, 4) / (fwdCovInfo.sig1Pt * fwdCovInfo.sigY));</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>    fwdCovInfo.rho1PtPhi = (Char_t)(128. * track.getCovariances()(2, 4) / (fwdCovInfo.sig1Pt * fwdCovInfo.sigPhi));</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>    fwdCovInfo.rho1PtTgl = (Char_t)(128. * track.getCovariances()(3, 4) / (fwdCovInfo.sig1Pt * fwdCovInfo.sigTgl));</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span> </div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    fwdInfo.trackTypeId = (fwdInfo.chi2matchmchmid &gt;= 0) ? <a class="code hl_enumvalue" href="../../dc/d04/namespaceo2_1_1aod_1_1fwdtrack.html#a309e6fb874be38d514f742d129f1e769abd27214630e1956c957b687763815689">o2::aod::fwdtrack::GlobalMuonTrack</a> : <a class="code hl_enumvalue" href="../../dc/d04/namespaceo2_1_1aod_1_1fwdtrack.html#a309e6fb874be38d514f742d129f1e769adaf42f98da1152c88a8b216937ed9c0f">o2::aod::fwdtrack::GlobalForwardTrack</a>;</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span> </div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    <span class="keywordtype">float</span> sX = TMath::Sqrt(mfttrack.getSigma2X()), sY = TMath::Sqrt(mfttrack.getSigma2Y()), sPhi = TMath::Sqrt(mfttrack.getSigma2Phi()),</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>          sTgl = TMath::Sqrt(mfttrack.getSigma2Tanl()), sQ2Pt = TMath::Sqrt(mfttrack.getSigma2InvQPt());</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span> </div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    mftTracksCovCursor(fwdInfo.matchmfttrackid,</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>                       truncateFloatFraction(sX, mTrackCovDiag),</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>                       truncateFloatFraction(sY, mTrackCovDiag),</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>                       truncateFloatFraction(sPhi, mTrackCovDiag),</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>                       truncateFloatFraction(sTgl, mTrackCovDiag),</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>                       truncateFloatFraction(sQ2Pt, mTrackCovDiag),</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>                       (Char_t)(128. * mfttrack.getCovariances()(0, 1) / (sX * sY)),</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>                       (Char_t)(128. * mfttrack.getCovariances()(0, 2) / (sPhi * sX)),</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>                       (Char_t)(128. * mfttrack.getCovariances()(1, 2) / (sPhi * sY)),</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>                       (Char_t)(128. * mfttrack.getCovariances()(0, 3) / (sTgl * sX)),</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>                       (Char_t)(128. * mfttrack.getCovariances()(1, 3) / (sTgl * sY)),</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>                       (Char_t)(128. * mfttrack.getCovariances()(2, 3) / (sTgl * sPhi)),</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>                       (Char_t)(128. * mfttrack.getCovariances()(0, 4) / (sQ2Pt * sX)),</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>                       (Char_t)(128. * mfttrack.getCovariances()(1, 4) / (sQ2Pt * sY)),</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>                       (Char_t)(128. * mfttrack.getCovariances()(2, 4) / (sQ2Pt * sPhi)),</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>                       (Char_t)(128. * mfttrack.getCovariances()(3, 4) / (sQ2Pt * sTgl)));</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>  }</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span> </div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>  std::uint64_t bcOfTimeRef;</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>  <span class="keywordtype">bool</span> needBCSlice = collisionID &lt; 0;</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>  <span class="keywordflow">if</span> (needBCSlice) { <span class="comment">// need to store BC slice</span></div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>    <span class="keywordtype">float</span> err = mTimeMarginTrackTime + fwdInfo.trackTimeRes;</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>    bcOfTimeRef = fillBCSlice(bcSlice, fwdInfo.trackTime - err, fwdInfo.trackTime + err, bcsMap);</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    bcOfTimeRef = collisionBC - mStartIR.<a class="code hl_function" href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">toLong</a>(); <span class="comment">// by default track time is wrt collision BC (unless no collision assigned)</span></div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>  }</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>  fwdInfo.trackTime -= bcOfTimeRef * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a>;</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span> </div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>  fwdTracksCursor(collisionID,</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>                  fwdInfo.trackTypeId,</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>                  fwdInfo.x,</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>                  fwdInfo.y,</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>                  truncateFloatFraction(fwdInfo.z, mTrackX), <span class="comment">// for the forward tracks Z has the same role as X in the barrel</span></div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>                  truncateFloatFraction(fwdInfo.phi, mTrackAlpha),</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>                  truncateFloatFraction(fwdInfo.tanl, mTrackTgl),</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>                  truncateFloatFraction(fwdInfo.invqpt, mTrack1Pt),</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>                  fwdInfo.nClusters,</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>                  truncateFloatFraction(fwdInfo.pdca, mTrackX),</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>                  truncateFloatFraction(fwdInfo.rabs, mTrackX),</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>                  truncateFloatFraction(fwdInfo.chi2, mTrackChi2),</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>                  truncateFloatFraction(fwdInfo.chi2matchmchmid, mTrackChi2),</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>                  truncateFloatFraction(fwdInfo.chi2matchmchmft, mTrackChi2),</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>                  truncateFloatFraction(fwdInfo.matchscoremchmft, mTrackChi2),</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>                  fwdInfo.matchmfttrackid,</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>                  fwdInfo.matchmchtrackid,</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>                  fwdInfo.mchBitMap,</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>                  fwdInfo.midBitMap,</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>                  fwdInfo.midBoards,</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>                  truncateFloatFraction(fwdInfo.trackTime, mTrackTime),</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>                  truncateFloatFraction(fwdInfo.trackTimeRes, mTrackTimeError));</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span> </div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>  fwdTracksCovCursor(truncateFloatFraction(fwdCovInfo.sigX, mTrackCovDiag),</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>                     truncateFloatFraction(fwdCovInfo.sigY, mTrackCovDiag),</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>                     truncateFloatFraction(fwdCovInfo.sigPhi, mTrackCovDiag),</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>                     truncateFloatFraction(fwdCovInfo.sigTgl, mTrackCovDiag),</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>                     truncateFloatFraction(fwdCovInfo.sig1Pt, mTrackCovDiag),</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>                     fwdCovInfo.rhoXY,</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>                     fwdCovInfo.rhoPhiX,</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>                     fwdCovInfo.rhoPhiY,</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>                     fwdCovInfo.rhoTglX,</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>                     fwdCovInfo.rhoTglY,</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>                     fwdCovInfo.rhoTglPhi,</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>                     fwdCovInfo.rho1PtX,</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>                     fwdCovInfo.rho1PtY,</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>                     fwdCovInfo.rho1PtPhi,</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>                     fwdCovInfo.rho1PtTgl);</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span> </div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>  <span class="keywordflow">if</span> (needBCSlice) {</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    ambigFwdTracksCursor(mTableTrFwdID, bcSlice);</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>  }</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>}</div>
</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span> </div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span><span class="comment">//------------------------------------------------------------------</span></div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::updateMCHeader(MCCollisionCursor&amp; collisionCursor,</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>                                            XSectionCursor&amp; xSectionCursor,</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>                                            PdfInfoCursor&amp; pdfInfoCursor,</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>                                            HeavyIonCursor&amp; heavyIonCursor,</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>                                            <span class="keyword">const</span> MCEventHeader&amp; header,</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>                                            <span class="keywordtype">int</span> collisionID,</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>                                            <span class="keywordtype">int</span> bcID,</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>                                            <span class="keywordtype">float</span> <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a>,</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>                                            <span class="keywordtype">short</span> generatorID,</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>                                            <span class="keywordtype">int</span> sourceID)</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>{</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>  <span class="keyword">using </span><a class="code hl_function" href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#a1dd83c3cbb8dbd6fe29833795358c32a">aodmchelpers::updateHepMCHeavyIon</a>;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>  <span class="keyword">using </span><a class="code hl_function" href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#a696ecab3d7bfb316d2d5188dbcd575c0">aodmchelpers::updateHepMCPdfInfo</a>;</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>  <span class="keyword">using </span><a class="code hl_function" href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#ab95b3ef77b0bf4fab5c85d42e803434c">aodmchelpers::updateHepMCXSection</a>;</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>  <span class="keyword">using </span><a class="code hl_function" href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#a6837ac5d8a3f6fefd6126020579ed4e3">aodmchelpers::updateMCCollisions</a>;</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span> </div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>  <span class="keyword">auto</span> genID = updateMCCollisions(collisionCursor,</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>                                  bcID,</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>                                  <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a>,</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                                  header,</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>                                  generatorID,</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                                  sourceID,</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>                                  mCollisionPosition);</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>  mXSectionUpdate = (updateHepMCXSection(xSectionCursor, <span class="comment">//</span></div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>                                         collisionID,    <span class="comment">//</span></div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>                                         genID,          <span class="comment">//</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>                                         header,         <span class="comment">//</span></div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>                                         mXSectionUpdate)</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>                       ? HepMCUpdate::always</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>                       : HepMCUpdate::never);</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>  mPdfInfoUpdate = (updateHepMCPdfInfo(pdfInfoCursor, <span class="comment">//</span></div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>                                       collisionID,   <span class="comment">//</span></div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>                                       genID,         <span class="comment">//</span></div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>                                       header,        <span class="comment">//</span></div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>                                       mPdfInfoUpdate)</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>                      ? HepMCUpdate::always</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>                      : HepMCUpdate::never);</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>  mHeavyIonUpdate = (updateHepMCHeavyIon(heavyIonCursor, <span class="comment">//</span></div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>                                         collisionID,    <span class="comment">//</span></div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>                                         genID,          <span class="comment">//</span></div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>                                         header,</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>                                         mHeavyIonUpdate)</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>                       ? HepMCUpdate::always</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>                       : HepMCUpdate::never);</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>}</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span> </div>
<div class="foldopen" id="foldopen00932" data-start="{" data-end="}">
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno"><a class="line" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ae401f332e040327760de3e4e2c81b880">  932</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ae401f332e040327760de3e4e2c81b880">dimensionMCKeepStore</a>(std::vector&lt;std::vector&lt;std::unordered_map&lt;int, int&gt;&gt;&gt;&amp; store, <span class="keywordtype">int</span> Nsources, <span class="keywordtype">int</span> NEvents)</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>{</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>  store.resize(Nsources);</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a> = 0; <a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a> &lt; Nsources; ++<a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a>) {</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>    store[<a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a>].resize(NEvents);</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>  }</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>}</div>
</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span> </div>
<div class="foldopen" id="foldopen00940" data-start="{" data-end="}">
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno"><a class="line" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#af6892e1d3798257af69de8aac6396b2f">  940</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#af6892e1d3798257af69de8aac6396b2f">clearMCKeepStore</a>(std::vector&lt;std::vector&lt;std::unordered_map&lt;int, int&gt;&gt;&gt;&amp; store)</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>{</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a> = 0U; <a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a> &lt; store.size(); ++<a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a>) {</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> e = 0U; e &lt; store[<a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a>].size(); ++e) {</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>      store[<a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a>][e].clear();</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>    }</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>  }</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>}</div>
</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span> </div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span><span class="comment">// helper function to add a particle/track to the MC keep store</span></div>
<div class="foldopen" id="foldopen00950" data-start="{" data-end="}">
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno"><a class="line" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ac401ebb144c2be80966332aa64b74abd">  950</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ac401ebb144c2be80966332aa64b74abd">keepMCParticle</a>(std::vector&lt;std::vector&lt;std::unordered_map&lt;int, int&gt;&gt;&gt;&amp; store, <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a>, <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a03b04a5a978bad576866339075de01f6">event</a>, <span class="keywordtype">int</span> track, <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a> = 1, <span class="keywordtype">bool</span> useSigFilt = <span class="keyword">false</span>)</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>{</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>  <span class="keywordflow">if</span> (track &lt; 0) {</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;trackID is smaller than 0. Neglecting&quot;</span>;</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>  }</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>  <span class="keywordflow">if</span> (useSigFilt &amp;&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a> == 0) {</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>    store[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a>][<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a03b04a5a978bad576866339075de01f6">event</a>][track] = -1;</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    store[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a>][<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a03b04a5a978bad576866339075de01f6">event</a>][track] = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>;</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>  }</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>}</div>
</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span> </div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::fillMCParticlesTable(<a class="code hl_class" href="../../db/dde/classo2_1_1steer_1_1MCKinematicsReader.html">o2::steer::MCKinematicsReader</a>&amp; mcReader,</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>                                                  MCParticlesCursor&amp; mcParticlesCursor,</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>                                                  <span class="keyword">const</span> gsl::span&lt;const o2::dataformats::VtxTrackRef&gt;&amp; primVer2TRefs,</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>                                                  <span class="keyword">const</span> gsl::span&lt;const GIndex&gt;&amp; GIndices,</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>                                                  <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>,</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                                                  <span class="keyword">const</span> std::vector&lt;std::vector&lt;int&gt;&gt;&amp; mcColToEvSrc)</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>{</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>  <span class="keywordtype">int</span> NSources = 0;</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>  <span class="keywordtype">int</span> NEvents = 0;</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; p : mcColToEvSrc) {</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    NSources = std::max(p[1], NSources);</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    NEvents = std::max(p[2], NEvents);</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>  }</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>  NSources++; <span class="comment">// 0 - indexed</span></div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>  NEvents++;</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot; number of events &quot;</span> &lt;&lt; NEvents;</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot; number of sources &quot;</span> &lt;&lt; NSources;</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>  <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ae401f332e040327760de3e4e2c81b880">dimensionMCKeepStore</a>(mToStore, NSources, NEvents);</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span> </div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>  std::vector&lt;int&gt; particleIDsToKeep;</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span> </div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>  <span class="keyword">auto</span> markMCTrackForSrc = [&amp;](std::array&lt;GID, GID::NSources&gt;&amp; contributorsGID, uint8_t <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>) {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    <span class="keyword">auto</span> mcLabel = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackMCLabel(contributorsGID[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>]);</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>    <span class="keywordflow">if</span> (!mcLabel.isValid()) {</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>    }</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ac401ebb144c2be80966332aa64b74abd">keepMCParticle</a>(mToStore, mcLabel.getSourceID(), mcLabel.getEventID(), mcLabel.getTrackID(), 1, mUseSigFiltMC);</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>  };</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span> </div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>  <span class="comment">// mark reconstructed MC particles to store them into the table</span></div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; trackRef : primVer2TRefs) {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> = <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a516bf7c7bca5465cad0ac01b61f66468">GIndex::NSources</a>; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>--;) {</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>      <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> = trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7e85c4e425692f2a08b2a13c1ea980d4">getFirstEntryOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>      <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> + trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7def086c20e01197faca2b09f9093a46">getEntriesOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ti = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a>; ti &lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a>; ti++) {</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>        <span class="keyword">auto</span>&amp; trackIndex = GIndices[ti];</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>        <span class="keywordflow">if</span> (GIndex::includesSource(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>, mInputSources)) {</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>          <span class="keyword">auto</span> mcTruth = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackMCLabel(trackIndex);</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>          <span class="keywordflow">if</span> (!mcTruth.isValid()) {</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>          }</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>          <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ac401ebb144c2be80966332aa64b74abd">keepMCParticle</a>(mToStore, mcTruth.getSourceID(), mcTruth.getEventID(), mcTruth.getTrackID(), 1, mUseSigFiltMC);</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>          <span class="comment">// treating contributors of global tracks</span></div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>          <span class="keyword">auto</span> contributorsGID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getSingleDetectorRefs(trackIndex);</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>          <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::Source::TPC</a>].isIndexSet()) {</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>            markMCTrackForSrc(contributorsGID, <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::Source::TPC</a>);</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>          }</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>          <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::Source::ITS</a>].isIndexSet()) {</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>            markMCTrackForSrc(contributorsGID, <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::Source::ITS</a>);</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>          }</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>          <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aa07291753eb9dfbdde30f981e825f80c">GIndex::Source::TOF</a>].isIndexSet()) {</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; labelsTOF = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTOFClustersMCLabels()-&gt;getLabels(contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aa07291753eb9dfbdde30f981e825f80c">GIndex::Source::TOF</a>]);</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; mcLabel : labelsTOF) {</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>              <span class="keywordflow">if</span> (!mcLabel.isValid()) {</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>              }</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>              <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ac401ebb144c2be80966332aa64b74abd">keepMCParticle</a>(mToStore, mcLabel.getSourceID(), mcLabel.getEventID(), mcLabel.getTrackID(), 1, mUseSigFiltMC);</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            }</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>          }</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>        }</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>      }</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    }</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>  }</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>  <span class="comment">// mark calorimeter signals as reconstructed particles</span></div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>  <span class="keywordflow">if</span> (mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a5b9c0be2be7dc67f15d392a4f7c40614">GIndex::EMC</a>]) {</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    <span class="keyword">auto</span>&amp; mcCaloEMCCellLabels = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getEMCALCellsMCLabels()-&gt;getTruthArray();</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; mcTruth : mcCaloEMCCellLabels) {</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>      <span class="keywordflow">if</span> (!mcTruth.isValid()) {</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>      }</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>      <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ac401ebb144c2be80966332aa64b74abd">keepMCParticle</a>(mToStore, mcTruth.getSourceID(), mcTruth.getEventID(), mcTruth.getTrackID(), 1, mUseSigFiltMC);</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>    }</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>  }</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>  <span class="keywordflow">if</span> (mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a596e1824b6b17f37370f59fcca3f0f06">GIndex::PHS</a>]) {</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    <span class="keyword">auto</span>&amp; mcCaloPHOSCellLabels = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPHOSCellsMCLabels()-&gt;getTruthArray();</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; mcTruth : mcCaloPHOSCellLabels) {</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>      <span class="keywordflow">if</span> (!mcTruth.isValid()) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>      }</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>      <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ac401ebb144c2be80966332aa64b74abd">keepMCParticle</a>(mToStore, mcTruth.getSourceID(), mcTruth.getEventID(), mcTruth.getTrackID(), 1, mUseSigFiltMC);</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>    }</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>  }</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>  <span class="keyword">using namespace </span>aodmchelpers;</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>  <span class="keyword">using </span>MCTrackNavigator = <a class="code hl_class" href="../../d7/d39/classo2_1_1mcutils_1_1MCTrackNavigator.html">o2::mcutils::MCTrackNavigator</a>;</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span> </div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>  <span class="keywordtype">size_t</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8e8a78e36205bada4146dc581c95f82c">offset</a> = 0;</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; colInfo : mcColToEvSrc) { <span class="comment">// loop over &quot;&lt;eventID, sourceID&gt; &lt;-&gt; combined MC col. ID&quot; key pairs</span></div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>    <span class="keywordtype">int</span> <span class="keyword">event</span> = colInfo[2];</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a> = colInfo[1];</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>    <span class="keywordtype">int</span> mcColId = colInfo[0];</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    std::vector&lt;MCTrack&gt; <span class="keyword">const</span>&amp; mcParticles = mcReader.<a class="code hl_function" href="../../db/dde/classo2_1_1steer_1_1MCKinematicsReader.html#af9278fc3e3a54d859f44cb45048c4c3a">getTracks</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a>, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a03b04a5a978bad576866339075de01f6">event</a>);</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;Event=&quot;</span> &lt;&lt; <span class="keyword">event</span> &lt;&lt; <span class="stringliteral">&quot; source=&quot;</span> &lt;&lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a> &lt;&lt; <span class="stringliteral">&quot; collision=&quot;</span> &lt;&lt; mcColId;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <span class="keyword">auto</span>&amp; preselect = mToStore[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a>][<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a03b04a5a978bad576866339075de01f6">event</a>];</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span> </div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8e8a78e36205bada4146dc581c95f82c">offset</a> = <a class="code hl_function" href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#aad1b40c9a895d2b3b51155fbd926b783">updateParticles</a>(mcParticlesCursor,</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>                             mcColId,</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>                             mcParticles,</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>                             preselect,</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>                             <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8e8a78e36205bada4146dc581c95f82c">offset</a>,</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>                             mRecoOnly,</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>                             <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a> == 0, <span class="comment">// background</span></div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                             mMcParticleW,</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>                             mMcParticleMom,</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>                             mMcParticlePos,</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                             mUseSigFiltMC);</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span> </div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    mcReader.<a class="code hl_function" href="../../db/dde/classo2_1_1steer_1_1MCKinematicsReader.html#a88c7a709dbe1fa5a6733bbacd2d423eb">releaseTracksForSourceAndEvent</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a>, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a03b04a5a978bad576866339075de01f6">event</a>);</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>  }</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>}</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span> </div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> MCTrackLabelCursorType, <span class="keyword">typename</span> MCMFTTrackLabelCursorType, <span class="keyword">typename</span> MCFwdTrackLabelCursorType&gt;</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::fillMCTrackLabelsTable(MCTrackLabelCursorType&amp; mcTrackLabelCursor,</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>                                                    MCMFTTrackLabelCursorType&amp; mcMFTTrackLabelCursor,</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>                                                    MCFwdTrackLabelCursorType&amp; mcFwdTrackLabelCursor,</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>                                                    <span class="keyword">const</span> <a class="code hl_class" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html">o2::dataformats::VtxTrackRef</a>&amp; trackRef,</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>                                                    <span class="keyword">const</span> gsl::span&lt;const GIndex&gt;&amp; primVerGIs,</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>                                                    <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>,</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                                                    <span class="keywordtype">int</span> vertexId)</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>{</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>  <span class="comment">// labelMask (temporary) usage:</span></div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>  <span class="comment">//   bit 13 -- ITS/TPC with ITS label (track of AB tracklet) different from TPC</span></div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>  <span class="comment">//   bit 14 -- isNoise() == true</span></div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>  <span class="comment">//   bit 15 -- isFake() == true (defined by the fakeness of the top level global track, i.e. if TOF is present, fake means that the track of the TPC label does not contribute to TOF cluster)</span></div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>  <span class="comment">// labelID = -1 -- label is not set</span></div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span> </div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> = <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a516bf7c7bca5465cad0ac01b61f66468">GIndex::NSources</a>; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>--;) {</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> = trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7e85c4e425692f2a08b2a13c1ea980d4">getFirstEntryOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> + trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7def086c20e01197faca2b09f9093a46">getEntriesOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    mcMFTTrackLabelCursor.reserve(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> - <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> + mcMFTTrackLabelCursor.lastIndex());</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    mcFwdTrackLabelCursor.reserve(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> - <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> + mcFwdTrackLabelCursor.lastIndex());</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>    mcTrackLabelCursor.reserve(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> - <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> + mcTrackLabelCursor.lastIndex());</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ti = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a>; ti &lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a>; ti++) {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>      <span class="keyword">const</span> <span class="keyword">auto</span> trackIndex = primVerGIs[ti];</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span> </div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>      <span class="comment">// check if the label was already stored (or the track was rejected for some reason in the fillTrackTablesPerCollision)</span></div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>      <span class="keyword">auto</span> needToStore = [trackIndex](std::unordered_map&lt;GIndex, int&gt;&amp; mp) {</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>        <span class="keyword">auto</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a36862d7c6208bc30723fd06f2a0f9bfd">entry</a> = mp.find(trackIndex);</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a36862d7c6208bc30723fd06f2a0f9bfd">entry</a> == mp.end() || <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a36862d7c6208bc30723fd06f2a0f9bfd">entry</a>-&gt;second == -1) {</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>        }</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>        <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a36862d7c6208bc30723fd06f2a0f9bfd">entry</a>-&gt;second = -1;</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>      };</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span> </div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>      <span class="keywordflow">if</span> (GIndex::includesSource(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>, mInputSources)) {</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>        <span class="keyword">auto</span> mcTruth = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackMCLabel(trackIndex);</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>        MCLabels labelHolder{};</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>        <span class="keywordflow">if</span> ((<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84">GIndex::Source::MFT</a>) || (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a043188e1f1e971e828e90751b89686dd">GIndex::Source::MFTMCH</a>) || (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">GIndex::Source::MCH</a>) || (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">GIndex::Source::MCHMID</a>)) { <span class="comment">// treating mft and fwd labels separately</span></div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>          <span class="keywordflow">if</span> (!needToStore(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84">GIndex::Source::MFT</a> ? mGIDToTableMFTID : mGIDToTableFwdID)) {</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>          }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>          <span class="keywordflow">if</span> (mcTruth.isValid()) { <span class="comment">// if not set, -1 will be stored</span></div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>            labelHolder.labelID = (mToStore[mcTruth.getSourceID()][mcTruth.getEventID()])[mcTruth.getTrackID()];</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>          }</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>          <span class="keywordflow">if</span> (mcTruth.isFake()) {</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>            labelHolder.fwdLabelMask |= (0x1 &lt;&lt; 7);</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>          }</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>          <span class="keywordflow">if</span> (mcTruth.isNoise()) {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>            labelHolder.fwdLabelMask |= (0x1 &lt;&lt; 6);</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>          }</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>          <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84">GIndex::Source::MFT</a>) {</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>            mcMFTTrackLabelCursor(labelHolder.labelID,</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>                                  labelHolder.fwdLabelMask);</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>            mcFwdTrackLabelCursor(labelHolder.labelID,</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>                                  labelHolder.fwdLabelMask);</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>          }</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>          <span class="keywordflow">if</span> (!needToStore(mGIDToTableID)) {</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>          }</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>          <span class="keywordflow">if</span> (mcTruth.isValid()) {                                                                               <span class="comment">// if not set, -1 will be stored</span></div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>            labelHolder.labelID = (mToStore[mcTruth.getSourceID()][mcTruth.getEventID()])[mcTruth.getTrackID()]; <span class="comment">// defined by TPC if it contributes, otherwise: by ITS</span></div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>            <span class="keywordflow">if</span> (mcTruth.isFake()) {</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>              labelHolder.labelMask |= (0x1 &lt;&lt; 15);</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>            }</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>            <span class="keywordflow">if</span> (trackIndex.includesDet(<a class="code hl_variable" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#acf398e0e267ad5c4c68a4b25c64fcb43">DetID::TPC</a>) &amp;&amp; trackIndex.getSource() != <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::Source::TPC</a>) { <span class="comment">// this is global track</span></div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>              <span class="keyword">auto</span> contributorsGID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getSingleDetectorRefs(trackIndex);</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>              <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a26ebad14bf7d16ec3d7b00bd5dc612da">GIndex::Source::ITSTPC</a>].isIndexSet()) { <span class="comment">// there is a match to ITS tracks or ITSAB tracklet!</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>                <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackMCLabel(contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a26ebad14bf7d16ec3d7b00bd5dc612da">GIndex::Source::ITSTPC</a>]).isFake()) {</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>                  labelHolder.labelMask |= (0x1 &lt;&lt; 13);</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>                }</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>              }</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>            }</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>            <span class="keywordflow">if</span> (trackIndex.includesDet(<a class="code hl_variable" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a55dd27091d307d75e3bf0a313f33ca4d">DetID::ITS</a>)) {</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>              <span class="keyword">auto</span> itsGID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSContributorGID(trackIndex);</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>              <span class="keyword">auto</span> itsSource = itsGID.getSource();</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>              <span class="keywordflow">if</span> (itsSource == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::ITS</a>) {</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>                <span class="keyword">auto</span>&amp; itsTrack = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSTrack(itsGID);</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iL = 0; iL &lt; 7; ++iL) {</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>                  <span class="keywordflow">if</span> (itsTrack.isFakeOnLayer(iL)) {</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>                    labelHolder.labelMask |= (0x1 &lt;&lt; iL);</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>                  }</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>                }</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itsSource == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a37ab69e9f5d520a03ff3cd7d6173c72c">GIndex::ITSAB</a>) {</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>                labelHolder.labelMask |= (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackMCLabel(itsGID).isFake() &lt;&lt; 12);</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>              }</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>            }</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span> </div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mcTruth.isNoise()) {</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>            labelHolder.labelMask |= (0x1 &lt;&lt; 14);</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>          }</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>          mcTrackLabelCursor(labelHolder.labelID, labelHolder.labelMask);</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>        }</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>      }</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>    }</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>  }</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span> </div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>  <span class="comment">// filling the tables with the strangeness tracking labels</span></div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>  <span class="keyword">auto</span> sTrackLabels = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getStrangeTracksMCLabels();</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>  <span class="comment">// check if vertexId and vertexId + 1 maps into mVertexStrLUT</span></div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>  <span class="keywordflow">if</span> (!(vertexId &lt; 0 || vertexId &gt;= mVertexStrLUT.size() - 1)) {</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>    mcTrackLabelCursor.reserve(mVertexStrLUT[vertexId + 1] + mcTrackLabelCursor.lastIndex());</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iS{mVertexStrLUT[vertexId]}; iS &lt; mVertexStrLUT[vertexId + 1]; ++iS) {</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>      <span class="keyword">auto</span>&amp; collStrTrk = mCollisionStrTrk[iS];</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>      <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a> = sTrackLabels[collStrTrk.second];</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>      MCLabels labelHolder;</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>      labelHolder.labelID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>.isValid() ? (mToStore[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>.getSourceID()][<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>.getEventID()])[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>.getTrackID()] : -1;</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>      labelHolder.labelMask = (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>.isFake() &lt;&lt; 15) | (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>.isNoise() &lt;&lt; 14);</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>      mcTrackLabelCursor(labelHolder.labelID, labelHolder.labelMask);</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>    }</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>  }</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>}</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span> </div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> V0CursorType, <span class="keyword">typename</span> CascadeCursorType, <span class="keyword">typename</span> Decay3BodyCursorType&gt;</div>
<div class="foldopen" id="foldopen01188" data-start="{" data-end="}">
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"><a class="line" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a50385297b69cf34ca937fbbcd002a64d"> 1188</a></span><span class="keywordtype">void</span> AODProducerWorkflowDPL::fillSecondaryVertices(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; recoData, V0CursorType&amp; v0Cursor, CascadeCursorType&amp; cascadeCursor, Decay3BodyCursorType&amp; decay3BodyCursor)</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>{</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span> </div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>  <span class="keyword">auto</span> v0s = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aa4526f3e28d55f46081a75db729aeea4">getV0sIdx</a>();</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>  <span class="keyword">auto</span> cascades = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a5f2fa4ff3a68d0a149c71533e5c26f23">getCascadesIdx</a>();</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>  <span class="keyword">auto</span> decays3Body = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a1963d123d5967a4e4c7c1d631b0eae1a">getDecays3BodyIdx</a>();</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span> </div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>  v0Cursor.reserve(v0s.size());</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>  <span class="comment">// filling v0s table</span></div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iv0 = 0; iv0 &lt; v0s.size(); iv0++) {</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a> = v0s[iv0];</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <span class="keyword">auto</span> trPosID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>.getProngID(0);</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    <span class="keyword">auto</span> trNegID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>.getProngID(1);</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>    uint8_t v0flags = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>.getBits();</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>    <span class="keywordtype">int</span> posTableIdx = -1, negTableIdx = -1, collID = -1;</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    <span class="keyword">auto</span> item = mGIDToTableID.find(trPosID);</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>    <span class="keywordflow">if</span> (item != mGIDToTableID.end()) {</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>      posTableIdx = item-&gt;second;</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Could not find a positive track index for prong ID &quot;</span> &lt;&lt; trPosID;</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    }</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>    item = mGIDToTableID.find(trNegID);</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    <span class="keywordflow">if</span> (item != mGIDToTableID.end()) {</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>      negTableIdx = item-&gt;second;</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Could not find a negative track index for prong ID &quot;</span> &lt;&lt; trNegID;</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>    }</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    <span class="keyword">auto</span> itemV = mVtxToTableCollID.find(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>.getVertexID());</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>    <span class="keywordflow">if</span> (itemV == mVtxToTableCollID.end()) {</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Could not find V0 collisionID for the vertex ID &quot;</span> &lt;&lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>.getVertexID();</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>      collID = itemV-&gt;second;</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    }</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    <span class="keywordflow">if</span> (posTableIdx != -1 and negTableIdx != -1 and collID != -1) {</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>      v0Cursor(collID, posTableIdx, negTableIdx, v0flags);</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>      mV0ToTableID[<a class="code hl_class" href="../../d1/da0/classint.html">int</a>(iv0)] = mTableV0ID++;</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    }</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>  }</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span> </div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>  <span class="comment">// filling cascades table</span></div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>  cascadeCursor.reserve(cascades.size());</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cascade : cascades) {</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>    <span class="keyword">auto</span> itemV0 = mV0ToTableID.find(cascade.getV0ID());</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>    <span class="keywordflow">if</span> (itemV0 == mV0ToTableID.end()) {</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>    }</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    <span class="keywordtype">int</span> v0tableID = itemV0-&gt;second, bachTableIdx = -1, collID = -1;</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="keyword">auto</span> bachelorID = cascade.getBachelorID();</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <span class="keyword">auto</span> item = mGIDToTableID.find(bachelorID);</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    <span class="keywordflow">if</span> (item != mGIDToTableID.end()) {</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>      bachTableIdx = item-&gt;second;</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Could not find a bachelor track index&quot;</span>;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    }</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>    <span class="keyword">auto</span> itemV = mVtxToTableCollID.find(cascade.getVertexID());</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>    <span class="keywordflow">if</span> (itemV != mVtxToTableCollID.end()) {</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>      collID = itemV-&gt;second;</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Could not find cascade collisionID for the vertex ID &quot;</span> &lt;&lt; cascade.getVertexID();</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    }</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    cascadeCursor(collID, v0tableID, bachTableIdx);</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>  }</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span> </div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>  <span class="comment">// filling 3 body decays table</span></div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>  decay3BodyCursor.reserve(decays3Body.size());</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i3Body = 0; i3Body &lt; decays3Body.size(); i3Body++) {</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; decay3Body = decays3Body[i3Body];</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a> trIDs[3]{</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>      decay3Body.getProngID(0),</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>      decay3Body.getProngID(1),</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>      decay3Body.getProngID(2)};</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <span class="keywordtype">int</span> tableIdx[3]{-1, -1, -1}, collID = -1;</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>    <span class="keywordtype">bool</span> missing{<span class="keyword">false</span>};</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>{0}; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; 3; ++<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>) {</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>      <span class="keyword">auto</span> item = mGIDToTableID.find(trIDs[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]);</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>      <span class="keywordflow">if</span> (item != mGIDToTableID.end()) {</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>        tableIdx[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] = item-&gt;second;</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; fmt::format(<span class="stringliteral">&quot;Could not find a track index for prong ID {}&quot;</span>, (<span class="keywordtype">int</span>)trIDs[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]);</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>        missing = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>      }</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>    }</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <span class="keyword">auto</span> itemV = mVtxToTableCollID.find(decay3Body.getVertexID());</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    <span class="keywordflow">if</span> (itemV == mVtxToTableCollID.end()) {</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Could not find 3 body collisionID for the vertex ID &quot;</span> &lt;&lt; decay3Body.getVertexID();</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>      missing = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>      collID = itemV-&gt;second;</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    }</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    <span class="keywordflow">if</span> (missing) {</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>    }</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>    decay3BodyCursor(collID, tableIdx[0], tableIdx[1], tableIdx[2]);</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>  }</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>}</div>
</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span> </div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> FwdTrkClsCursorType&gt;</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::addClustersToFwdTrkClsTable(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; recoData, FwdTrkClsCursorType&amp; fwdTrkClsCursor, <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a> trackID, <span class="keywordtype">int</span> fwdTrackId)</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>{</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchTracks = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab55087fdd2a2ff3bcb7cd2b2b4172183">getMCHTracks</a>();</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchmidMatches = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a0b86e4d3dfa275a1a005388ed5365bd6">getMCHMIDMatches</a>();</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchClusters = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a51eb2aafdff1e86d5a6030e6b87a4837">getMCHTrackClusters</a>();</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span> </div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>  <span class="keywordtype">int</span> mchTrackID = -1;</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>  <span class="keywordflow">if</span> (trackID.getSource() == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">GIndex::MCH</a>) { <span class="comment">// This is an MCH track</span></div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    mchTrackID = trackID.getIndex();</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trackID.getSource() == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">GIndex::MCHMID</a>) { <span class="comment">// This is an MCH-MID track</span></div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <span class="keyword">auto</span> mchmidMatch = mchmidMatches[trackID.getIndex()];</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>    mchTrackID = mchmidMatch.getMCHRef().getIndex();</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>  } <span class="comment">// Others are Global Forward Tracks, their clusters will be or were added with the corresponding MCH track</span></div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span> </div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>  <span class="keywordflow">if</span> (mchTrackID &gt; -1 &amp;&amp; mchTrackID &lt; mchTracks.size()) {</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mchTrack = mchTracks[mchTrackID];</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    fwdTrkClsCursor.reserve(mchTrack.getNClusters() + fwdTrkClsCursor.lastIndex());</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../d1/da0/classint.html">first</a> = mchTrack.getFirstClusterIdx();</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>    <span class="keywordtype">int</span> last = mchTrack.getLastClusterIdx();</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt;= last; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cluster = mchClusters[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>];</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>      fwdTrkClsCursor(fwdTrackId,</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>                      truncateFloatFraction(cluster.x, mMuonCl),</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>                      truncateFloatFraction(cluster.y, mMuonCl),</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>                      truncateFloatFraction(cluster.z, mMuonCl),</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>                      (((cluster.ey &lt; 5.) &amp; 0x1) &lt;&lt; 12) | (((cluster.ex &lt; 5.) &amp; 0x1) &lt;&lt; 11) | cluster.getDEId());</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>    }</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>  }</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>}</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span> </div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> HMPCursorType&gt;</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::fillHMPID(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; recoData, HMPCursorType&amp; hmpCursor)</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>{</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>  <span class="keyword">auto</span> hmpMatches = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aba733844e7ab0066fc098cd36314cfac">getHMPMatches</a>();</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span> </div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>  hmpCursor.reserve(hmpMatches.size());</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span> </div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>  <span class="comment">// filling HMPs table</span></div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iHmp = 0; iHmp &lt; hmpMatches.size(); iHmp++) {</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span> </div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a> = hmpMatches[iHmp];</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span> </div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    <span class="keywordtype">float</span> xTrk, yTrk, theta, <a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a6165053352ad91e6afb11940eca08c1b">phi</a>;</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    <span class="keywordtype">float</span> xMip, yMip;</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a3a5a5583cf997a469e4210b22aee42de">charge</a>, nph;</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span> </div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    <a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a>.getHMPIDtrk(xTrk, yTrk, theta, <a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a6165053352ad91e6afb11940eca08c1b">phi</a>);</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    <a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a>.getHMPIDmip(xMip, yMip, <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a3a5a5583cf997a469e4210b22aee42de">charge</a>, nph);</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span> </div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    <span class="keyword">auto</span> photChargeVec = <a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a>.getPhotCharge();</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span> </div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>    <span class="keywordtype">float</span> photChargeVec2[10]; <span class="comment">// = {0.,0.,0.,0.,0.,0.,0.,0.,0.,0.};</span></div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span> </div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>    <span class="keywordflow">for</span> (Int_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; 10; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>      photChargeVec2[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] = photChargeVec[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>];</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>    }</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>    <span class="keyword">auto</span> tref = mGIDToTableID.find(<a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a>.getTrackRef());</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>    <span class="keywordflow">if</span> (tref != mGIDToTableID.end()) {</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>      hmpCursor(tref-&gt;second, <a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a>.getHMPsignal(), xTrk, yTrk, xMip, yMip, nph, <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a3a5a5583cf997a469e4210b22aee42de">charge</a>, <a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a>.getIdxHMPClus(), <a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a>.getHmpMom(), photChargeVec2);</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Could not find AOD track table entry for HMP-matched track &quot;</span> &lt;&lt; <a class="code hl_function" href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a>.getTrackRef().asString();</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>    }</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>  }</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>}</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span> </div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::prepareStrangenessTracking(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; recoData)</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>{</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>  <span class="keyword">auto</span> v0s = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aa4526f3e28d55f46081a75db729aeea4">getV0sIdx</a>();</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>  <span class="keyword">auto</span> cascades = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a5f2fa4ff3a68d0a149c71533e5c26f23">getCascadesIdx</a>();</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>  <span class="keyword">auto</span> decays3Body = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a1963d123d5967a4e4c7c1d631b0eae1a">getDecays3BodyIdx</a>();</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span> </div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>  <span class="keywordtype">int</span> sTrkID = 0;</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>  mCollisionStrTrk.clear();</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>  mCollisionStrTrk.reserve(recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a05d30dcfcace40777030e393a2c3f536">getStrangeTracks</a>().size());</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>  mVertexStrLUT.clear();</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>  mVertexStrLUT.resize(recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a425c9ea0abf31cc23d88a563326b6277">getPrimaryVertices</a>().size() + 1, 0);</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; sTrk : recoData.getStrangeTracks()) {</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>    <span class="keyword">auto</span> ITSIndex = <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a>{sTrk.mITSRef, <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::ITS</a>};</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <span class="keywordtype">int</span> vtxId{0};</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>    <span class="keywordflow">if</span> (sTrk.mPartType == <a class="code hl_enumvalue" href="../../d1/dea/namespaceo2_1_1dataformats.html#a21b566270662eb9bba290d166fb59250a942e5dbfbe3e1e46e7f5fc4cea1c10fc">dataformats::kStrkV0</a>) {</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>      vtxId = v0s[sTrk.mDecayRef].getVertexID();</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sTrk.mPartType == <a class="code hl_enumvalue" href="../../d1/dea/namespaceo2_1_1dataformats.html#a21b566270662eb9bba290d166fb59250abee6ef6b519cbb28a93416cdf0346fd5">dataformats::kStrkCascade</a>) {</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>      vtxId = cascades[sTrk.mDecayRef].getVertexID();</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>      vtxId = decays3Body[sTrk.mDecayRef].getVertexID();</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>    }</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>    mCollisionStrTrk.emplace_back(vtxId, sTrkID++);</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    mVertexStrLUT[vtxId]++;</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>  }</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>  std::exclusive_scan(mVertexStrLUT.begin(), mVertexStrLUT.end(), mVertexStrLUT.begin(), 0);</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span> </div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>  <span class="comment">// sort by collision ID</span></div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>  std::sort(mCollisionStrTrk.begin(), mCollisionStrTrk.end(), [](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>, <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a>) { return a.first &lt; b.first; });</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>  mStrTrkIndices.clear();</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>  mStrTrkIndices.resize(mCollisionStrTrk.size(), -1);</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>}</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span> </div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> V0C, <span class="keyword">typename</span> CC, <span class="keyword">typename</span> D3BC&gt;</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::fillStrangenessTrackingTables(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; recoData, V0C&amp; v0Curs, CC&amp; cascCurs, D3BC&amp; d3BodyCurs)</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>{</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>  <span class="keywordtype">int</span> itsTableIdx = -1;</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>  <span class="keywordtype">int</span> sTrkID = 0;</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>  <span class="keywordtype">int</span> nV0 = 0;</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>  <span class="keywordtype">int</span> nCasc = 0;</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>  <span class="keywordtype">int</span> nD3Body = 0;</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span> </div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; sTrk : recoData.getStrangeTracks()) {</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>    <span class="keywordflow">if</span> (sTrk.mPartType == <a class="code hl_enumvalue" href="../../d1/dea/namespaceo2_1_1dataformats.html#a21b566270662eb9bba290d166fb59250a942e5dbfbe3e1e46e7f5fc4cea1c10fc">dataformats::kStrkV0</a>) {</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>      nV0++;</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sTrk.mPartType == <a class="code hl_enumvalue" href="../../d1/dea/namespaceo2_1_1dataformats.html#a21b566270662eb9bba290d166fb59250abee6ef6b519cbb28a93416cdf0346fd5">dataformats::kStrkCascade</a>) {</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>      nCasc++;</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>      nD3Body++;</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>    }</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>  }</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span> </div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>  v0Curs.reserve(nV0);</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>  cascCurs.reserve(nCasc);</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>  d3BodyCurs.reserve(nD3Body);</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span> </div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; sTrk : recoData.getStrangeTracks()) {</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>    <span class="keyword">auto</span> ITSIndex = <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a>{sTrk.mITSRef, <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::ITS</a>};</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>    <span class="keyword">auto</span> item = mGIDToTableID.find(ITSIndex);</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    <span class="keywordflow">if</span> (item != mGIDToTableID.end()) {</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>      itsTableIdx = item-&gt;second;</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Could not find a ITS strange track index &quot;</span> &lt;&lt; ITSIndex;</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>    }</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>    <span class="keywordflow">if</span> (sTrk.mPartType == <a class="code hl_enumvalue" href="../../d1/dea/namespaceo2_1_1dataformats.html#a21b566270662eb9bba290d166fb59250a942e5dbfbe3e1e46e7f5fc4cea1c10fc">dataformats::kStrkV0</a>) {</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>      v0Curs(mStrTrkIndices[sTrkID++],</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>             itsTableIdx,</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>             sTrk.mDecayRef,</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>             sTrk.mDecayVtx[0],</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>             sTrk.mDecayVtx[1],</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>             sTrk.mDecayVtx[2],</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>             sTrk.mMasses[0],</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>             sTrk.mMasses[1],</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>             sTrk.mMatchChi2,</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>             sTrk.mTopoChi2,</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>             sTrk.getAverageClusterSize());</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sTrk.mPartType == <a class="code hl_enumvalue" href="../../d1/dea/namespaceo2_1_1dataformats.html#a21b566270662eb9bba290d166fb59250abee6ef6b519cbb28a93416cdf0346fd5">dataformats::kStrkCascade</a>) {</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>      cascCurs(mStrTrkIndices[sTrkID++],</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>               itsTableIdx,</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>               sTrk.mDecayRef,</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>               sTrk.mDecayVtx[0],</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>               sTrk.mDecayVtx[1],</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>               sTrk.mDecayVtx[2],</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>               sTrk.mMasses[0],</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>               sTrk.mMasses[1],</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>               sTrk.mMatchChi2,</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>               sTrk.mTopoChi2,</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>               sTrk.getAverageClusterSize());</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>      d3BodyCurs(mStrTrkIndices[sTrkID++],</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>                 itsTableIdx,</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>                 sTrk.mDecayRef,</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>                 sTrk.mDecayVtx[0],</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>                 sTrk.mDecayVtx[1],</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>                 sTrk.mDecayVtx[2],</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>                 sTrk.mMasses[0],</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>                 sTrk.mMasses[1],</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>                 sTrk.mMatchChi2,</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>                 sTrk.mTopoChi2,</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>                 sTrk.getAverageClusterSize());</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>    }</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>  }</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>}</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span> </div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::countTPCClusters(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>)</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>{</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpcTracks = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCTracks();</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpcClusRefs = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCTracksClusterRefs();</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpcClusShMap = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.clusterShMapTPC;</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpcClusAcc = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCClusters();</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>  <span class="keyword">constexpr</span> <span class="keywordtype">int</span> maxRows = 152;</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>  <span class="keyword">constexpr</span> <span class="keywordtype">int</span> neighbour = 2;</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>  <span class="keywordtype">int</span> ntr = tpcTracks.size();</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>  mTPCCounters.clear();</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>  mTPCCounters.resize(ntr);</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span><span class="preprocessor">#ifdef WITH_OPENMP</span></div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>  <span class="keywordtype">int</span> ngroup = std::min(50, std::max(1, ntr / mNThreads));</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span><span class="preprocessor">#pragma omp parallel for schedule(dynamic, ngroup) num_threads(mNThreads)</span></div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> itr = 0; itr &lt; ntr; itr++) {</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>    std::array&lt;bool, maxRows&gt; clMap{}, shMap{};</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>    <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a> sectorIndex, rowIndex;</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>    uint32_t clusterIndex;</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>    <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a38f39158ee22fbbad798f1493abc26b8">counters</a> = mTPCCounters[itr];</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; track = tpcTracks[itr];</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; track.getNClusterReferences(); <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>      o2::tpc::TrackTPC::getClusterReference(tpcClusRefs, <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>, sectorIndex, rowIndex, clusterIndex, track.getClusterRef());</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> absoluteIndex = tpcClusAcc.clusterOffset[sectorIndex][rowIndex] + clusterIndex;</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>      clMap[rowIndex] = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>      <span class="keywordflow">if</span> (tpcClusShMap[absoluteIndex] &amp; <a class="code hl_enumvalue" href="../../dd/d30/structo2_1_1gpu_1_1GPUTPCGMMergedTrackHit.html#ae381b3724c6fe10f07ad1dd2b0406067aa33195dc2a541b15a81fe620ee52ef93">o2::gpu::GPUTPCGMMergedTrackHit::flagShared</a>) {</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>        <span class="keywordflow">if</span> (!shMap[rowIndex]) {</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>          <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a38f39158ee22fbbad798f1493abc26b8">counters</a>.shared++;</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>        }</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>        shMap[rowIndex] = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>      }</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>    }</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>    <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a> = -1;</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; maxRows; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>      <span class="keywordflow">if</span> (clMap[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]) {</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>        <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a38f39158ee22fbbad798f1493abc26b8">counters</a>.crossed++;</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>        <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a38f39158ee22fbbad798f1493abc26b8">counters</a>.found++;</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>        <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a> = <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>;</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> - last) &lt;= neighbour) {</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>        <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a38f39158ee22fbbad798f1493abc26b8">counters</a>.crossed++;</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>        <span class="keywordtype">int</span> lim = std::min(<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> + 1 + neighbour, maxRows);</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> + 1; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; lim; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>          <span class="keywordflow">if</span> (clMap[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]) {</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>            <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a38f39158ee22fbbad798f1493abc26b8">counters</a>.crossed++;</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>          }</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>        }</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>      }</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>    }</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>  }</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>}</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span> </div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span><a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a> AODProducerWorkflowDPL::getTRDPattern(<span class="keyword">const</span> <a class="code hl_class" href="../../d4/d70/classo2_1_1gpu_1_1GPUTRDTrack__t.html">o2::trd::TrackTRD</a>&amp; track)</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>{</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>  <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a> <a class="code hl_variable" href="../../df/dcb/test__ctf__io__mid_8cxx.html#abc8fc01f9239d6900ca74bdff17157bf">pattern</a> = 0;</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> il = <a class="code hl_enumvalue" href="../../d4/d70/classo2_1_1gpu_1_1GPUTRDTrack__t.html#a249c4d163e6d96ce7a46df70fd71b9a4ad9d745eba8333658ba21b21537699b53">o2::trd::TrackTRD::EGPUTRDTrack::kNLayers</a> - 1; il &gt;= 0; il--) {</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>    <span class="keywordflow">if</span> (track.getTrackletIndex(il) != -1) {</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>      <a class="code hl_variable" href="../../df/dcb/test__ctf__io__mid_8cxx.html#abc8fc01f9239d6900ca74bdff17157bf">pattern</a> |= 0x1 &lt;&lt; il;</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>    }</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>  }</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>  <span class="keywordflow">if</span> (track.getHasNeighbor()) {</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>    <a class="code hl_variable" href="../../df/dcb/test__ctf__io__mid_8cxx.html#abc8fc01f9239d6900ca74bdff17157bf">pattern</a> |= 0x1 &lt;&lt; 6;</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>  }</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>  <span class="keywordflow">if</span> (track.getHasPadrowCrossing()) {</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>    <a class="code hl_variable" href="../../df/dcb/test__ctf__io__mid_8cxx.html#abc8fc01f9239d6900ca74bdff17157bf">pattern</a> |= 0x1 &lt;&lt; 7;</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>  }</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../df/dcb/test__ctf__io__mid_8cxx.html#abc8fc01f9239d6900ca74bdff17157bf">pattern</a>;</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>}</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span> </div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TCaloHandler, <span class="keyword">typename</span> TCaloCursor, <span class="keyword">typename</span> TCaloTRGCursor, <span class="keyword">typename</span> TMCCaloLabelCursor&gt;</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::addToCaloTable(TCaloHandler&amp; caloHandler, TCaloCursor&amp; caloCellCursor, TCaloTRGCursor&amp; caloTRGCursor,</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>                                            TMCCaloLabelCursor&amp; mcCaloCellLabelCursor, <span class="keywordtype">int</span> eventID, <span class="keywordtype">int</span> bcID, int8_t caloType)</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>{</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>  <span class="keyword">auto</span> inputEvent = caloHandler.buildEvent(eventID);</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>  <span class="keyword">auto</span> cellsInEvent = inputEvent.mCells;        <span class="comment">// get cells belonging to current event</span></div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>  <span class="keyword">auto</span> cellMClabels = inputEvent.mMCCellLabels; <span class="comment">// get MC labels belonging to current event (only implemented for EMCal currently!)</span></div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>  caloCellCursor.reserve(cellsInEvent.size() + caloCellCursor.lastIndex());</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>  caloTRGCursor.reserve(cellsInEvent.size() + caloTRGCursor.lastIndex());</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>  <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>    mcCaloCellLabelCursor.reserve(cellsInEvent.size() + mcCaloCellLabelCursor.lastIndex());</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>  }</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> iCell = 0U; iCell &lt; cellsInEvent.size(); iCell++) {</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>    caloCellCursor(bcID,</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>                   <a class="code hl_function" href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#a8bf106905e935972397d268cfa5358fa">CellHelper::getCellNumber</a>(cellsInEvent[iCell]),</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>                   truncateFloatFraction(<a class="code hl_function" href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#a3b0fd551cbf447831ffa7e3f9b21fe5b">CellHelper::getAmplitude</a>(cellsInEvent[iCell]), mCaloAmp),</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>                   truncateFloatFraction(<a class="code hl_function" href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#ae28498f74d3bebfea1ed2d98e6eb2732">CellHelper::getTimeStamp</a>(cellsInEvent[iCell]), mCaloTime),</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>                   cellsInEvent[iCell].<a class="code hl_function" href="../../d2/d51/GPU_2GPUbenchmark_2Shared_2Utils_8h.html#a9ae3d2daf571bac422233166a6b6b056">getType</a>(),</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>                   caloType); <span class="comment">// 1 = emcal, -1 = undefined, 0 = phos</span></div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span> </div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>    <span class="comment">// todo: fix dummy values in CellHelper when it is clear what is filled for trigger information</span></div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#ab1142b49edc204cf815e18274da3ac36">CellHelper::isTRU</a>(cellsInEvent[iCell])) { <span class="comment">// Write only trigger cells into this table</span></div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>      caloTRGCursor(bcID,</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>                    <a class="code hl_function" href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#aa57792dd450a124668691ec98356274d">CellHelper::getFastOrAbsID</a>(cellsInEvent[iCell]),</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>                    <a class="code hl_function" href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#a7120c18004f13b52df6fd072518aaae6">CellHelper::getLnAmplitude</a>(cellsInEvent[iCell]),</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>                    <a class="code hl_function" href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#a734b9fd3a12d181e9d2de7fd506c552e">CellHelper::getTriggerBits</a>(cellsInEvent[iCell]),</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>                    caloType);</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>    }</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>    <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>      <span class="comment">// Common for PHOS and EMCAL</span></div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>      <span class="comment">//  loop over all MC Labels for the current cell</span></div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>      std::vector&lt;int32_t&gt; particleIds;</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>      std::vector&lt;float&gt; amplitudeFraction;</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>      <span class="keywordflow">if</span> (!mEMCselectLeading) {</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>        particleIds.reserve(cellMClabels.size());</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>        amplitudeFraction.reserve(cellMClabels.size());</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>      }</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>      <span class="keywordtype">float</span> tmpMaxAmplitude = 0;</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>      int32_t tmpindex = 0;</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; mclabel : cellMClabels[iCell]) {</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>        <span class="comment">// do not fill noise lables!</span></div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>        <span class="keywordflow">if</span> (mclabel.isValid()) {</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>          <span class="keywordflow">if</span> (mEMCselectLeading) {</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>            <span class="keywordflow">if</span> (mclabel.getAmplitudeFraction() &gt; tmpMaxAmplitude) {</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>              <span class="comment">// Check if this MCparticle added to be kept?</span></div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>              <span class="keywordflow">if</span> (mToStore.at(mclabel.getSourceID()).at(mclabel.getEventID()).find(mclabel.getTrackID()) !=</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>                  mToStore.at(mclabel.getSourceID()).at(mclabel.getEventID()).end()) {</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>                tmpMaxAmplitude = mclabel.getAmplitudeFraction();</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>                tmpindex = (mToStore.at(mclabel.getSourceID()).at(mclabel.getEventID())).at(mclabel.getTrackID());</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>              }</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>            }</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>            <span class="keyword">auto</span> trackStore = mToStore.at(mclabel.getSourceID()).at(mclabel.getEventID());</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>            <span class="keyword">auto</span> iter = trackStore.find(mclabel.getTrackID());</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>            <span class="keywordflow">if</span> (iter != trackStore.end()) {</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>              amplitudeFraction.emplace_back(mclabel.getAmplitudeFraction());</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>              particleIds.emplace_back(iter-&gt;second);</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>              particleIds.emplace_back(-1); <span class="comment">// should the mc particle not be in mToStore make sure something (e.g. -1) is saved in particleIds so the length of particleIds is the same es amplitudeFraction!</span></div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>              amplitudeFraction.emplace_back(0.f);</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>              <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;CaloTable: Could not find track for mclabel (&quot;</span> &lt;&lt; mclabel.getSourceID() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; mclabel.getEventID() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; mclabel.getTrackID() &lt;&lt; <span class="stringliteral">&quot;) in the AOD MC store&quot;</span>;</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>              <span class="keywordflow">if</span> (mMCKineReader) {</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>                <span class="keyword">auto</span> mctrack = mMCKineReader-&gt;<a class="code hl_function" href="../../db/dde/classo2_1_1steer_1_1MCKinematicsReader.html#a1efc92a99a48631bffe38363264643d7">getTrack</a>(mclabel);</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>                TVector3 <a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1a5263dcba7ff66e43defdf020df657c">vec</a>;</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>                mctrack-&gt;<a class="code hl_function" href="../../d2/d67/classo2_1_1MCTrackT.html#ab6d8d1a91c9e143ac509bbba275cdb31">GetStartVertex</a>(<a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1a5263dcba7ff66e43defdf020df657c">vec</a>);</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>                <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot; ... this track is of PDG &quot;</span> &lt;&lt; mctrack-&gt;GetPdgCode() &lt;&lt; <span class="stringliteral">&quot; produced by &quot;</span> &lt;&lt; mctrack-&gt;getProdProcessAsString() &lt;&lt; <span class="stringliteral">&quot; at (&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1a5263dcba7ff66e43defdf020df657c">vec</a>.X() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1a5263dcba7ff66e43defdf020df657c">vec</a>.Y() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1a5263dcba7ff66e43defdf020df657c">vec</a>.Z() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>              }</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>            }</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>          }</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>        }</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>      } <span class="comment">// end of loop over all MC Labels for the current cell</span></div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>      <span class="keywordflow">if</span> (mEMCselectLeading) {</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>        amplitudeFraction.emplace_back(tmpMaxAmplitude);</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>        particleIds.emplace_back(tmpindex);</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>      }</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>      <span class="keywordflow">if</span> (particleIds.size() == 0) {</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>        particleIds.emplace_back(-1);</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>        amplitudeFraction.emplace_back(0.f);</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>      }</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>      mcCaloCellLabelCursor(particleIds,</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>                            amplitudeFraction);</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>    }</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>  } <span class="comment">// end of loop over cells in current event</span></div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>}</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span> </div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span><span class="comment">// fill calo related tables (cells and calotrigger table)</span></div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TCaloCursor, <span class="keyword">typename</span> TCaloTRGCursor, <span class="keyword">typename</span> TMCCaloLabelCursor&gt;</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::fillCaloTable(TCaloCursor&amp; caloCellCursor, TCaloTRGCursor&amp; caloTRGCursor,</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>                                           TMCCaloLabelCursor&amp; mcCaloCellLabelCursor, <span class="keyword">const</span> std::map&lt;uint64_t, int&gt;&amp; bcsMap,</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>                                           <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>)</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>{</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>  <span class="comment">// get calo information</span></div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>  <span class="keyword">auto</span> caloEMCCells = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getEMCALCells();</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>  <span class="keyword">auto</span> caloEMCCellsTRGR = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getEMCALTriggers();</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>  <span class="keyword">auto</span> mcCaloEMCCellLabels = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getEMCALCellsMCLabels();</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span> </div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>  <span class="keyword">auto</span> caloPHOSCells = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPHOSCells();</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>  <span class="keyword">auto</span> caloPHOSCellsTRGR = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPHOSTriggers();</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>  <span class="keyword">auto</span> mcCaloPHOSCellLabels = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPHOSCellsMCLabels();</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span> </div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>  <span class="keywordflow">if</span> (!mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a596e1824b6b17f37370f59fcca3f0f06">GIndex::PHS</a>]) {</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>    caloPHOSCells = {};</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>    caloPHOSCellsTRGR = {};</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>    mcCaloPHOSCellLabels = {};</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>  }</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span> </div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>  <span class="keywordflow">if</span> (!mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a5b9c0be2be7dc67f15d392a4f7c40614">GIndex::EMC</a>]) {</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>    caloEMCCells = {};</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>    caloEMCCellsTRGR = {};</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>    mcCaloEMCCellLabels = {};</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>  }</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span> </div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>  <a class="code hl_class" href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html">o2::emcal::EventHandler&lt;o2::emcal::Cell&gt;</a> emcEventHandler;</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>  <a class="code hl_class" href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html">o2::phos::EventHandler&lt;o2::phos::Cell&gt;</a> phsEventHandler;</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span> </div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>  <span class="comment">// get cell belonging to an eveffillnt instead of timeframe</span></div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>  emcEventHandler.<a class="code hl_function" href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#ab27078458ff3309db82ac95b9b1b998d">reset</a>();</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>  emcEventHandler.<a class="code hl_function" href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#abe5c09bf794ccd18aaeadb16bfa15136">setCellData</a>(caloEMCCells, caloEMCCellsTRGR);</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>  emcEventHandler.<a class="code hl_function" href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#ac55d98dd749d1188e9534456a355b700">setCellMCTruthContainer</a>(mcCaloEMCCellLabels);</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span> </div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>  phsEventHandler.<a class="code hl_function" href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#ab27078458ff3309db82ac95b9b1b998d">reset</a>();</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>  phsEventHandler.<a class="code hl_function" href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#aa40ca0b5ba8717f327d54428f07f6a24">setCellData</a>(caloPHOSCells, caloPHOSCellsTRGR);</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>  phsEventHandler.<a class="code hl_function" href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#a302a7f74242d8cc8d820a810396c71be">setCellMCTruthContainer</a>(mcCaloPHOSCellLabels);</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span> </div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>  <span class="keywordtype">int</span> emcNEvents = emcEventHandler.<a class="code hl_function" href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#ae328bccf88475a13a6ca4033b8cedfd1">getNumberOfEvents</a>();</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>  <span class="keywordtype">int</span> phsNEvents = phsEventHandler.<a class="code hl_function" href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#ae328bccf88475a13a6ca4033b8cedfd1">getNumberOfEvents</a>();</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span> </div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>  std::vector&lt;std::tuple&lt;uint64_t, int8_t, int&gt;&gt; caloEvents; <span class="comment">// &lt;bc, caloType, eventID&gt;</span></div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span> </div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>  caloEvents.reserve(emcNEvents + phsNEvents);</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span> </div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iev = 0; iev &lt; emcNEvents; ++iev) {</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>    uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = emcEventHandler.<a class="code hl_function" href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#adf8356a703c74f3d32a9d90abd603520">getInteractionRecordForEvent</a>(iev).<a class="code hl_function" href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">toLong</a>();</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>    caloEvents.emplace_back(std::make_tuple(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>, 1, iev));</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>  }</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span> </div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iev = 0; iev &lt; phsNEvents; ++iev) {</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>    uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = phsEventHandler.<a class="code hl_function" href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#adf8356a703c74f3d32a9d90abd603520">getInteractionRecordForEvent</a>(iev).<a class="code hl_function" href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">toLong</a>();</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>    caloEvents.emplace_back(std::make_tuple(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>, 0, iev));</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>  }</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span> </div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>  std::sort(caloEvents.begin(), caloEvents.end(),</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>            [](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_class" href="../../d1/da0/classint.html">left</a>, <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a5ffadbbacc6b89cf6218bc43b384d3fe">right</a>) { return std::get&lt;0&gt;(left) &lt; std::get&lt;0&gt;(right); });</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span> </div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>  <span class="comment">// loop over events</span></div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; emcNEvents + phsNEvents; ++<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>) {</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>    uint64_t globalBC = std::get&lt;0&gt;(caloEvents[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]);</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>    int8_t caloType = std::get&lt;1&gt;(caloEvents[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]);</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    <span class="keywordtype">int</span> eventID = std::get&lt;2&gt;(caloEvents[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]);</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    <span class="keyword">auto</span> item = bcsMap.find(globalBC);</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>    <span class="keywordtype">int</span> bcID = -1;</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>    <span class="keywordflow">if</span> (item != bcsMap.end()) {</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>      bcID = item-&gt;second;</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Error: could not find a corresponding BC ID for a calo point; globalBC = &quot;</span> &lt;&lt; globalBC &lt;&lt; <span class="stringliteral">&quot;, caloType = &quot;</span> &lt;&lt; (<a class="code hl_class" href="../../d1/da0/classint.html">int</a>)caloType;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>    }</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>    <span class="keywordflow">if</span> (caloType == 0) { <span class="comment">// phos</span></div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>      addToCaloTable(phsEventHandler, caloCellCursor, caloTRGCursor, mcCaloCellLabelCursor, eventID, bcID, caloType);</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>    }</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>    <span class="keywordflow">if</span> (caloType == 1) { <span class="comment">// emc</span></div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>      addToCaloTable(emcEventHandler, caloCellCursor, caloTRGCursor, mcCaloCellLabelCursor, eventID, bcID, caloType);</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>    }</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>  }</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span> </div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>  caloEvents.clear();</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>}</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span> </div>
<div class="foldopen" id="foldopen01693" data-start="{" data-end="}">
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"><a class="line" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#ae42a1434e1df87cdfc112135f9966519"> 1693</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#ae42a1434e1df87cdfc112135f9966519">AODProducerWorkflowDPL::init</a>(<a class="code hl_class" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">InitContext</a>&amp; ic)</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>{</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>  mTimer.Stop();</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>  <a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ac9cf926cbc032a82e62ad829314ec0a5">o2::base::GRPGeomHelper::instance</a>().<a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ae4113cead84239a97867fbfee31756ec">setRequest</a>(mGGCCDBRequest);</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>  mLPMProdTag = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;lpmp-prod-tag&quot;</span>);</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>  mAnchorPass = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;anchor-pass&quot;</span>);</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>  mAnchorProd = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;anchor-prod&quot;</span>);</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>  mUser = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;created-by&quot;</span>);</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>  mRecoPass = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;reco-pass&quot;</span>);</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>  mTFNumber = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;int64_t&gt;(<span class="stringliteral">&quot;aod-timeframe-id&quot;</span>);</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>  mRecoOnly = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;reco-mctracks-only&quot;</span>);</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>  mTruncate = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;enable-truncation&quot;</span>);</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>  mRunNumber = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;run-number&quot;</span>);</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>  mCTPReadout = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;ctpreadout-create&quot;</span>);</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>  mNThreads = std::max(1, ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;nthreads&quot;</span>));</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>  mEMCselectLeading = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;emc-select-leading&quot;</span>);</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>  mThinTracks = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;thin-tracks&quot;</span>);</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>  mPropTracks = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;propagate-tracks&quot;</span>);</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>  mMaxPropXiu = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;propagate-tracks-max-xiu&quot;</span>);</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>  mPropMuons = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;propagate-muons&quot;</span>);</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a> = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;with-streamers&quot;</span>); !<a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a>.empty()) {</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>    mStreamerFlags.<a class="code hl_function" href="../../db/ded/classo2_1_1utils_1_1EnumFlags.html#a6adc487f85b123eaf3e4b3af63580829">set</a>(<a class="code hl_variable" href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">s</a>);</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>    <span class="keywordflow">if</span> (mStreamerFlags) {</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>      LOGP(info, <span class="stringliteral">&quot;Writing streamer data with mask:&quot;</span>);</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; mStreamerFlags;</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>      LOGP(warn, <span class="stringliteral">&quot;Specified non-default empty streamer mask!&quot;</span>);</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    }</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>  }</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>  mTrackQCKeepGlobalTracks = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;trackqc-keepglobaltracks&quot;</span>);</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>  mTrackQCRetainOnlydEdx = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;trackqc-retainonlydedx&quot;</span>);</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>  mTrackQCFraction = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;trackqc-fraction&quot;</span>);</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>  mTrackQCNTrCut = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;int64_t&gt;(<span class="stringliteral">&quot;trackqc-NTrCut&quot;</span>);</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>  mTrackQCDCAxy = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;trackqc-tpc-dca&quot;</span>);</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>  mTrackQCPt = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;trackqc-tpc-pt&quot;</span>);</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>  mTrackQCNCls = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;trackqc-tpc-cls&quot;</span>);</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span> seed = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;seed&quot;</span>); seed == 0) {</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>    LOGP(info, <span class="stringliteral">&quot;Using random device for seeding&quot;</span>);</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>    std::random_device <a class="code hl_variable" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7071b0092ad8c5b57d6cc40c5f803df5">rd</a>;</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>    std::array&lt;int, std::mt19937::state_size&gt; seed_data{};</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>    std::generate(std::begin(seed_data), std::end(seed_data), std::ref(<a class="code hl_variable" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7071b0092ad8c5b57d6cc40c5f803df5">rd</a>));</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>    std::seed_seq seq(std::begin(seed_data), std::end(seed_data));</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>    mGenerator = std::mt19937(seq);</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>    LOGP(info, <span class="stringliteral">&quot;Using seed {} for sampling&quot;</span>, seed);</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>    mGenerator.seed(seed);</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>  }</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span><span class="preprocessor">#ifdef WITH_OPENMP</span></div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>  LOGP(info, <span class="stringliteral">&quot;Multi-threaded parts will run with {} OpenMP threads&quot;</span>, mNThreads);</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>  mNThreads = 1;</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;OpenMP is disabled&quot;</span>;</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>  <span class="keywordflow">if</span> (mTFNumber == -1L) {</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;TFNumber will be obtained from CCDB&quot;</span>;</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>  }</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>  <span class="keywordflow">if</span> (mRunNumber == -1L) {</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;The Run number will be obtained from DPL headers&quot;</span>;</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>  }</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span> </div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>  mUseSigFiltMC = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;mc-signal-filt&quot;</span>);</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span> </div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>  <span class="comment">// set no truncation if selected by user</span></div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>  <span class="keywordflow">if</span> (mTruncate != 1) {</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Truncation is not used!&quot;</span>;</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>    mCollisionPosition = 0xFFFFFFFF;</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>    mCollisionPositionCov = 0xFFFFFFFF;</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    mTrackX = 0xFFFFFFFF;</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>    mTrackAlpha = 0xFFFFFFFF;</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>    mTrackSnp = 0xFFFFFFFF;</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>    mTrackTgl = 0xFFFFFFFF;</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>    mTrack1Pt = 0xFFFFFFFF;</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>    mTrackChi2 = 0xFFFFFFFF;</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>    mTrackCovDiag = 0xFFFFFFFF;</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>    mTrackCovOffDiag = 0xFFFFFFFF;</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>    mTrackSignal = 0xFFFFFFFF;</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>    mTrackTime = 0xFFFFFFFF;</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>    mTPCTime0 = 0xFFFFFFFF;</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>    mTrackTimeError = 0xFFFFFFFF;</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>    mTrackPosEMCAL = 0xFFFFFFFF;</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    mTracklets = 0xFFFFFFFF;</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>    mMcParticleW = 0xFFFFFFFF;</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>    mMcParticlePos = 0xFFFFFFFF;</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>    mMcParticleMom = 0xFFFFFFFF;</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>    mCaloAmp = 0xFFFFFFFF;</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>    mCaloTime = 0xFFFFFFFF;</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>    mCPVPos = 0xFFFFFFFF;</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>    mCPVAmpl = 0xFFFFFFFF;</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>    mMuonTr1P = 0xFFFFFFFF;</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>    mMuonTrThetaX = 0xFFFFFFFF;</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>    mMuonTrThetaY = 0xFFFFFFFF;</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>    mMuonTrZmu = 0xFFFFFFFF;</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>    mMuonTrBend = 0xFFFFFFFF;</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>    mMuonTrNonBend = 0xFFFFFFFF;</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>    mMuonTrCov = 0xFFFFFFFF;</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>    mMuonCl = 0xFFFFFFFF;</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>    mMuonClErr = 0xFFFFFFFF;</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>    mV0Time = 0xFFFFFFFF;</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>    mV0ChannelTime = 0xFFFFFFFF;</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>    mFDDTime = 0xFFFFFFFF;</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>    mFDDChannelTime = 0xFFFFFFFF;</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>    mT0Time = 0xFFFFFFFF;</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>    mT0ChannelTime = 0xFFFFFFFF;</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>    mV0Amplitude = 0xFFFFFFFF;</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>    mFDDAmplitude = 0xFFFFFFFF;</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>    mT0Amplitude = 0xFFFFFFFF;</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>  }</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>  <span class="comment">// Initialize ZDC helper maps</span></div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ic = 0; ic &lt; <a class="code hl_variable" href="../../d5/d10/namespaceo2_1_1zdc.html#a4a7eba00705fcd689cb348399f8ef933">o2::zdc::NChannels</a>; ic++) {</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>    mZDCEnergyMap[ic] = -std::numeric_limits&lt;float&gt;::infinity();</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>  }</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ic = 0; ic &lt; <a class="code hl_variable" href="../../d5/d10/namespaceo2_1_1zdc.html#a3ca33c4a113eaa085fad49f3afb93e22">o2::zdc::NTDCChannels</a>; ic++) {</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>    mZDCTDCMap[ic] = -std::numeric_limits&lt;float&gt;::infinity();</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>  }</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span> </div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>  std::string hepmcUpdate = ic.<a class="code hl_function" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">options</a>().<a class="code hl_function" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;hepmc-update&quot;</span>);</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>  <a class="code hl_enumeration" href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#a00d5ca1f7d5708b324d67c40f1d9fa9b">HepMCUpdate</a> when = (hepmcUpdate == <span class="stringliteral">&quot;never&quot;</span> ? HepMCUpdate::never : hepmcUpdate == <span class="stringliteral">&quot;always&quot;</span> ? HepMCUpdate::always</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>                                                                  : hepmcUpdate == <span class="stringliteral">&quot;all&quot;</span>    ? HepMCUpdate::allKeys</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>                                                                                            : HepMCUpdate::anyKey);</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>  mXSectionUpdate = when;</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>  mPdfInfoUpdate = when;</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>  mHeavyIonUpdate = when;</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span> </div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>  mTimer.Reset();</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span> </div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>  <span class="keywordflow">if</span> (mStreamerFlags) {</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>    mStreamer = std::make_unique&lt;o2::utils::TreeStreamRedirector&gt;(<span class="stringliteral">&quot;AO2DStreamer.root&quot;</span>, <span class="stringliteral">&quot;RECREATE&quot;</span>);</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>  }</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>}</div>
</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span> </div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span><span class="keyword">namespace</span></div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>{</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span><span class="keywordtype">void</span> add_additional_meta_info(std::vector&lt;TString&gt;&amp; keys, std::vector&lt;TString&gt;&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a875a12becbd897c8760d054b49738856">values</a>)</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>{</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>  <span class="comment">// see if we should put additional meta info (e.g. from MC)</span></div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>  <span class="keyword">auto</span> aod_external_meta_info_file = getenv(<span class="stringliteral">&quot;AOD_ADDITIONAL_METADATA_FILE&quot;</span>);</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>  <span class="keywordflow">if</span> (aod_external_meta_info_file != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Trying to inject additional AOD meta-data from &quot;</span> &lt;&lt; aod_external_meta_info_file;</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>    <span class="keywordflow">if</span> (std::filesystem::exists(aod_external_meta_info_file)) {</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>      std::ifstream input_file(aod_external_meta_info_file);</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>      <span class="keywordflow">if</span> (input_file) {</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>        nlohmann::json json_data;</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>          input_file &gt;&gt; json_data;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>        } <span class="keywordflow">catch</span> (nlohmann::json::parse_error&amp; e) {</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>          std::cerr &lt;&lt; <span class="stringliteral">&quot;JSON Parse Error: &quot;</span> &lt;&lt; e.what() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>          std::cerr &lt;&lt; <span class="stringliteral">&quot;Exception ID: &quot;</span> &lt;&lt; e.id &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>          std::cerr &lt;&lt; <span class="stringliteral">&quot;Byte position: &quot;</span> &lt;&lt; e.byte &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>        }</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>        <span class="comment">// If parsing succeeds, iterate over key-value pairs</span></div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [<a class="code hl_variable" href="../../dd/d6e/catch__amalgamated_8cxx.html#ab44666b6e91e2bbae6bcf104d48726d6">key</a>, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>] : json_data.items()) {</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>          <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Adding AOD MetaData&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d6e/catch__amalgamated_8cxx.html#ab44666b6e91e2bbae6bcf104d48726d6">key</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>;</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>          keys.push_back(<a class="code hl_variable" href="../../dd/d6e/catch__amalgamated_8cxx.html#ab44666b6e91e2bbae6bcf104d48726d6">key</a>.c_str());</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>          <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a875a12becbd897c8760d054b49738856">values</a>.push_back(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>.get&lt;std::string&gt;());</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>        }</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>      }</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>    }</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>  }</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>}</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>} <span class="comment">// namespace</span></div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span> </div>
<div class="foldopen" id="foldopen01855" data-start="{" data-end="}">
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"><a class="line" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#abc9971657075e6273b7c3383d8f72d93"> 1855</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#abc9971657075e6273b7c3383d8f72d93">AODProducerWorkflowDPL::run</a>(<a class="code hl_class" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">ProcessingContext</a>&amp; pc)</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>{</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>  mTimer.Start(<span class="keyword">false</span>);</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>  <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a> recoData;</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>  recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a9994c31d0f7db330f69c4dd5d4ad1032">collectData</a>(pc, *mDataRequest);</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>  updateTimeDependentParams(pc); <span class="comment">// Make sure that this is called after the RecoContainer collect data, since some condition objects are fetched there</span></div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span> </div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>  mStartIR = recoData.<a class="code hl_variable" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a155d6c74abe4d0193c011369160eefe5">startIR</a>;</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span> </div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>  <span class="keyword">auto</span> primVertices = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a425c9ea0abf31cc23d88a563326b6277">getPrimaryVertices</a>();</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>  <span class="keyword">auto</span> primVer2TRefs = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a61768a5b047e3ddf42028e2d7167f650">getPrimaryVertexMatchedTrackRefs</a>();</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>  <span class="keyword">auto</span> primVerGIs = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a4c5ea239ad9d8b4426ed61ba1e348ed3">getPrimaryVertexMatchedTracks</a>();</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>  <span class="keyword">auto</span> primVerLabels = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aa159c18d7e6bfa238da2e373b5387ffc">getPrimaryVertexMCLabels</a>();</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span> </div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>  <span class="keyword">auto</span> fddChData = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#adaa08fd14218893c1f8fc13cd89555bd">getFDDChannelsData</a>();</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>  <span class="keyword">auto</span> fddRecPoints = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a0a3b6bd02335bb5024ea228eb5786a50">getFDDRecPoints</a>();</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>  <span class="keyword">auto</span> ft0ChData = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ac994d5cf54e268eac066638ebdb452da">getFT0ChannelsData</a>();</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>  <span class="keyword">auto</span> ft0RecPoints = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab1f5dbd4fe43d0ce5ca6910ab7bb46a5">getFT0RecPoints</a>();</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>  <span class="keyword">auto</span> fv0ChData = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a8547e86298ff951b532833fc2432cf3f">getFV0ChannelsData</a>();</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>  <span class="keyword">auto</span> fv0RecPoints = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab8efbeff8fecc165b679cb2dfc3c5b7c">getFV0RecPoints</a>();</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span> </div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>  <span class="keyword">auto</span> zdcEnergies = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aa5a1370a1d9bfaab180a31b8e9e50a85">getZDCEnergy</a>();</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>  <span class="keyword">auto</span> zdcBCRecData = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ade21f7f92eacfeb5fc593235ea5e5eab">getZDCBCRecData</a>();</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>  <span class="keyword">auto</span> zdcTDCData = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a0208352a4da38b3c81d1cba6ee20dd31">getZDCTDCData</a>();</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span> </div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>  <span class="keyword">auto</span> cpvClusters = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a6d0f8b029e422101f7c3060a827cf378">getCPVClusters</a>();</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>  <span class="keyword">auto</span> cpvTrigRecs = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a988b2a2d038375f0924c4fb776adab93">getCPVTriggers</a>();</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span> </div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>  <span class="keyword">auto</span> ctpDigits = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a5a35a16acdb56a180c153b4a2b551d06">getCTPDigits</a>();</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tinfo = pc.<a class="code hl_function" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#aa236d4d55c7ef46fe86a822195ea00b0">services</a>().<a class="code hl_function" href="../../d7/da4/classo2_1_1framework_1_1ServiceRegistryRef.html#ab34ff207fce452a23aa9170d6a5c35aa">get</a>&lt;<a class="code hl_struct" href="../../d4/d11/structo2_1_1framework_1_1TimingInfo.html">o2::framework::TimingInfo</a>&gt;();</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>  std::vector&lt;o2::ctp::CTPDigit&gt; ctpDigitsCreated;</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>  <span class="keywordflow">if</span> (mCTPReadout == 1) {</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;CTP : creating ctpreadout in AOD producer&quot;</span>;</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>    createCTPReadout(recoData, ctpDigitsCreated, pc);</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;CTP : ctpreadout created from AOD&quot;</span>;</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>    ctpDigits = gsl::span&lt;o2::ctp::CTPDigit&gt;(ctpDigitsCreated);</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>  }</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;FOUND &quot;</span> &lt;&lt; primVertices.size() &lt;&lt; <span class="stringliteral">&quot; primary vertices&quot;</span>;</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;FOUND &quot;</span> &lt;&lt; ft0RecPoints.size() &lt;&lt; <span class="stringliteral">&quot; FT0 rec. points&quot;</span>;</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;FOUND &quot;</span> &lt;&lt; fv0RecPoints.size() &lt;&lt; <span class="stringliteral">&quot; FV0 rec. points&quot;</span>;</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;FOUND &quot;</span> &lt;&lt; fddRecPoints.size() &lt;&lt; <span class="stringliteral">&quot; FDD rec. points&quot;</span>;</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;FOUND &quot;</span> &lt;&lt; cpvClusters.size() &lt;&lt; <span class="stringliteral">&quot; CPV clusters&quot;</span>;</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;FOUND &quot;</span> &lt;&lt; cpvTrigRecs.size() &lt;&lt; <span class="stringliteral">&quot; CPV trigger records&quot;</span>;</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span> </div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;FOUND &quot;</span> &lt;&lt; primVertices.size() &lt;&lt; <span class="stringliteral">&quot; primary vertices&quot;</span>;</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span> </div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>  <span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d3/d53/namespaceo2_1_1aodhelpers.html">o2::aodhelpers</a>;</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span> </div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>  <span class="keyword">auto</span> bcCursor = createTableCursor&lt;o2::aod::BCs&gt;(pc);</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>  <span class="keyword">auto</span> bcFlagsCursor = createTableCursor&lt;o2::aod::BCFlags&gt;(pc);</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>  <span class="keyword">auto</span> cascadesCursor = createTableCursor&lt;o2::aod::Cascades&gt;(pc);</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>  <span class="keyword">auto</span> collisionsCursor = createTableCursor&lt;o2::aod::Collisions&gt;(pc);</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>  <span class="keyword">auto</span> decay3BodyCursor = createTableCursor&lt;o2::aod::Decay3Bodys&gt;(pc);</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>  <span class="keyword">auto</span> trackedCascadeCursor = createTableCursor&lt;o2::aod::TrackedCascades&gt;(pc);</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>  <span class="keyword">auto</span> trackedV0Cursor = createTableCursor&lt;o2::aod::TrackedV0s&gt;(pc);</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>  <span class="keyword">auto</span> tracked3BodyCurs = createTableCursor&lt;o2::aod::Tracked3Bodys&gt;(pc);</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>  <span class="keyword">auto</span> fddCursor = createTableCursor&lt;o2::aod::FDDs&gt;(pc);</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>  <span class="keyword">auto</span> fddExtraCursor = createTableCursor&lt;o2::aod::FDDsExtra&gt;(pc);</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>  <span class="keyword">auto</span> ft0Cursor = createTableCursor&lt;o2::aod::FT0s&gt;(pc);</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>  <span class="keyword">auto</span> ft0ExtraCursor = createTableCursor&lt;o2::aod::FT0sExtra&gt;(pc);</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>  <span class="keyword">auto</span> fv0aCursor = createTableCursor&lt;o2::aod::FV0As&gt;(pc);</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>  <span class="keyword">auto</span> fv0aExtraCursor = createTableCursor&lt;o2::aod::FV0AsExtra&gt;(pc);</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>  <span class="keyword">auto</span> fwdTracksCursor = createTableCursor&lt;o2::aod::StoredFwdTracks&gt;(pc);</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>  <span class="keyword">auto</span> fwdTracksCovCursor = createTableCursor&lt;o2::aod::StoredFwdTracksCov&gt;(pc);</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>  <span class="keyword">auto</span> fwdTrkClsCursor = createTableCursor&lt;o2::aod::FwdTrkCls&gt;(pc);</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>  <span class="keyword">auto</span> mftTracksCursor = createTableCursor&lt;o2::aod::StoredMFTTracks&gt;(pc);</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>  <span class="keyword">auto</span> mftTracksCovCursor = createTableCursor&lt;o2::aod::StoredMFTTracksCov&gt;(pc);</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>  <span class="keyword">auto</span> tracksCursor = createTableCursor&lt;o2::aod::StoredTracksIU&gt;(pc);</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>  <span class="keyword">auto</span> tracksCovCursor = createTableCursor&lt;o2::aod::StoredTracksCovIU&gt;(pc);</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>  <span class="keyword">auto</span> tracksExtraCursor = createTableCursor&lt;o2::aod::StoredTracksExtra&gt;(pc);</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>  <span class="keyword">auto</span> tracksQACursor = createTableCursor&lt;o2::aod::TracksQAVersion&gt;(pc);</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>  <span class="keyword">auto</span> ambigTracksCursor = createTableCursor&lt;o2::aod::AmbiguousTracks&gt;(pc);</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>  <span class="keyword">auto</span> ambigMFTTracksCursor = createTableCursor&lt;o2::aod::AmbiguousMFTTracks&gt;(pc);</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>  <span class="keyword">auto</span> ambigFwdTracksCursor = createTableCursor&lt;o2::aod::AmbiguousFwdTracks&gt;(pc);</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>  <span class="keyword">auto</span> v0sCursor = createTableCursor&lt;o2::aod::V0s&gt;(pc);</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>  <span class="keyword">auto</span> zdcCursor = createTableCursor&lt;o2::aod::Zdcs&gt;(pc);</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>  <span class="keyword">auto</span> hmpCursor = createTableCursor&lt;o2::aod::HMPIDs&gt;(pc);</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>  <span class="keyword">auto</span> caloCellsCursor = createTableCursor&lt;o2::aod::Calos&gt;(pc);</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>  <span class="keyword">auto</span> caloCellsTRGTableCursor = createTableCursor&lt;o2::aod::CaloTriggers&gt;(pc);</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>  <span class="keyword">auto</span> cpvClustersCursor = createTableCursor&lt;o2::aod::CPVClusters&gt;(pc);</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>  <span class="keyword">auto</span> originCursor = createTableCursor&lt;o2::aod::Origins&gt;(pc);</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span> </div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>  <span class="comment">// Declare MC cursors type without adding the output for a table</span></div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::McCollisionLabels&gt;</a> mcColLabelsCursor;</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::McCollisions&gt;</a> mcCollisionsCursor;</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::HepMCXSections&gt;</a> hepmcXSectionsCursor;</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::HepMCPdfInfos&gt;</a> hepmcPdfInfosCursor;</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::HepMCHeavyIons&gt;</a> hepmcHeavyIonsCursor;</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::McMFTTrackLabels&gt;</a> mcMFTTrackLabelCursor;</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::McFwdTrackLabels&gt;</a> mcFwdTrackLabelCursor;</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::StoredMcParticles_001&gt;</a> mcParticlesCursor;</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::McTrackLabels&gt;</a> mcTrackLabelCursor;</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>  <a class="code hl_struct" href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces&lt;o2::aod::McCaloLabels_001&gt;</a> mcCaloLabelsCursor;</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>  <span class="keywordflow">if</span> (mUseMC) { <span class="comment">// This creates the actual writercursor</span></div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>    mcColLabelsCursor = createTableCursor&lt;o2::aod::McCollisionLabels&gt;(pc);</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>    mcCollisionsCursor = createTableCursor&lt;o2::aod::McCollisions&gt;(pc);</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>    hepmcXSectionsCursor = createTableCursor&lt;o2::aod::HepMCXSections&gt;(pc);</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>    hepmcPdfInfosCursor = createTableCursor&lt;o2::aod::HepMCPdfInfos&gt;(pc);</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>    hepmcHeavyIonsCursor = createTableCursor&lt;o2::aod::HepMCHeavyIons&gt;(pc);</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>    mcMFTTrackLabelCursor = createTableCursor&lt;o2::aod::McMFTTrackLabels&gt;(pc);</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>    mcFwdTrackLabelCursor = createTableCursor&lt;o2::aod::McFwdTrackLabels&gt;(pc);</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>    mcParticlesCursor = createTableCursor&lt;o2::aod::StoredMcParticles_001&gt;(pc);</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>    mcTrackLabelCursor = createTableCursor&lt;o2::aod::McTrackLabels&gt;(pc);</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>    mcCaloLabelsCursor = createTableCursor&lt;o2::aod::McCaloLabels_001&gt;(pc);</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>  }</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span> </div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>  std::unique_ptr&lt;o2::steer::MCKinematicsReader&gt; mcReader;</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>  <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>    mcReader = std::make_unique&lt;o2::steer::MCKinematicsReader&gt;(<span class="stringliteral">&quot;collisioncontext.root&quot;</span>);</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>  }</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>  mMCKineReader = mcReader.get(); <span class="comment">// for use in different functions</span></div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>  std::map&lt;uint64_t, int&gt; bcsMap;</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>  collectBCs(recoData, mUseMC ? mcReader-&gt;getDigitizationContext()-&gt;getEventRecords() : std::vector&lt;o2::InteractionTimeRecord&gt;{}, bcsMap);</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>  <span class="keywordflow">if</span> (!primVer2TRefs.empty()) { <span class="comment">// if the vertexing was done, the last slot refers to orphan tracks</span></div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>    addRefGlobalBCsForTOF(primVer2TRefs.back(), primVerGIs, recoData, bcsMap);</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>  }</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>  <span class="comment">// initialize the bunch crossing container for further use below</span></div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>  mBCLookup.<a class="code hl_function" href="../../d2/de8/classo2_1_1aodproducer_1_1BunchCrossings.html#a61142004d0c1ad11dadf0eab4e8749ee">init</a>(bcsMap);</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span> </div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>  uint64_t tfNumber;</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> runNumber = (mRunNumber == -1) ? <span class="keywordtype">int</span>(tinfo.runNumber) : mRunNumber;</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>  <span class="keywordflow">if</span> (mTFNumber == -1L) {</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>    <span class="comment">// TODO has to use absolute time of TF</span></div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>    tfNumber = uint64_t(tinfo.firstTForbit) + (uint64_t(tinfo.runNumber) &lt;&lt; 32); <span class="comment">// getTFNumber(mStartIR, runNumber);</span></div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>    tfNumber = mTFNumber;</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>  }</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span> </div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>  std::vector&lt;float&gt; aAmplitudes, aTimes;</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>  std::vector&lt;uint8_t&gt; aChannels;</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>  fv0aCursor.reserve(fv0RecPoints.size());</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; fv0RecPoint : fv0RecPoints) {</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>    aAmplitudes.clear();</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>    aChannels.clear();</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>    aTimes.clear();</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>    <span class="keyword">const</span> <span class="keyword">auto</span> channelData = fv0RecPoint.getBunchChannelData(fv0ChData);</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; channel : channelData) {</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>      <span class="keywordflow">if</span> (channel.charge &gt; 0) {</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>        aAmplitudes.push_back(truncateFloatFraction(channel.charge, mV0Amplitude));</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>        aTimes.push_back(truncateFloatFraction(channel.time * 1.E-3, mV0ChannelTime));</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>        aChannels.push_back(channel.channel);</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>      }</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>    }</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>    uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = fv0RecPoint.getInteractionRecord().toLong();</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>    <span class="keyword">auto</span> item = bcsMap.find(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>);</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>    <span class="keywordtype">int</span> bcID = -1;</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>    <span class="keywordflow">if</span> (item != bcsMap.end()) {</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>      bcID = item-&gt;second;</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;Error: could not find a corresponding BC ID for a FV0 rec. point; BC = &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>;</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>    }</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>    fv0aCursor(bcID,</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>               aAmplitudes,</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>               aChannels,</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>               truncateFloatFraction(fv0RecPoint.getCollisionGlobalMeanTime() * 1E-3, mV0Time), <span class="comment">// ps to ns</span></div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>               fv0RecPoint.getTrigger().getTriggersignals());</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span> </div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>    <span class="keywordflow">if</span> (mEnableFITextra) {</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>      fv0aExtraCursor(bcID,</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>                      aTimes);</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>    }</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>  }</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span> </div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>  std::vector&lt;float&gt; zdcEnergy, zdcAmplitudes, zdcTime;</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>  std::vector&lt;uint8_t&gt; zdcChannelsE, zdcChannelsT;</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>  zdcCursor.reserve(zdcBCRecData.size());</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> zdcRecData : zdcBCRecData) {</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>    uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = zdcRecData.ir.toLong();</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>    <span class="keyword">auto</span> item = bcsMap.find(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>);</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>    <span class="keywordtype">int</span> bcID = -1;</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>    <span class="keywordflow">if</span> (item != bcsMap.end()) {</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>      bcID = item-&gt;second;</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;Error: could not find a corresponding BC ID for a ZDC rec. point; BC = &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>;</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>    }</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>    <span class="keywordtype">int</span> fe, ne, ft, nt, fi, ni;</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>    zdcRecData.getRef(fe, ne, ft, nt, fi, ni);</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>    zdcEnergy.clear();</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>    zdcChannelsE.clear();</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>    zdcAmplitudes.clear();</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>    zdcTime.clear();</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>    zdcChannelsT.clear();</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ie = 0; ie &lt; ne; ie++) {</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>      <span class="keyword">auto</span>&amp; zdcEnergyData = zdcEnergies[fe + ie];</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>      zdcEnergy.emplace_back(zdcEnergyData.energy());</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>      zdcChannelsE.emplace_back(zdcEnergyData.ch());</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>    }</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> it = 0; it &lt; nt; it++) {</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>      <span class="keyword">auto</span>&amp; tdc = zdcTDCData[ft + it];</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>      zdcAmplitudes.emplace_back(tdc.amplitude());</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>      zdcTime.emplace_back(tdc.value());</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>      zdcChannelsT.emplace_back(<a class="code hl_variable" href="../../d5/d10/namespaceo2_1_1zdc.html#a1b3e33f771dac943d3eac22cd4ca72dc">o2::zdc::TDCSignal</a>[tdc.ch()]);</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>    }</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>    zdcCursor(bcID,</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>              zdcEnergy,</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>              zdcChannelsE,</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>              zdcAmplitudes,</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>              zdcTime,</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>              zdcChannelsT);</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>  }</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span> </div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>  <span class="comment">// keep track event/source id for each mc-collision</span></div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>  <span class="comment">// using map and not unordered_map to ensure</span></div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>  <span class="comment">// correct ordering when iterating over container elements</span></div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>  std::vector&lt;std::vector&lt;int&gt;&gt; mcColToEvSrc;</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span> </div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>  <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>    <span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html">o2::aodmchelpers</a>;</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span> </div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>    <span class="comment">// filling mcCollision table</span></div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>    <span class="keywordtype">int</span> nMCCollisions = mcReader-&gt;getDigitizationContext()-&gt;getNCollisions();</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mcRecords = mcReader-&gt;getDigitizationContext()-&gt;getEventRecords();</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mcParts = mcReader-&gt;getDigitizationContext()-&gt;getEventParts();</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span> </div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>    <span class="comment">// if signal filtering enabled, let&#39;s check if there are more than one source; otherwise fatalise</span></div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>    <span class="keywordflow">if</span> (mUseSigFiltMC) {</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>      std::vector&lt;int&gt; sourceIDs{};</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iCol = 0; iCol &lt; nMCCollisions; iCol++) {</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; colPart : mcParts[iCol]) {</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>          <span class="keywordtype">int</span> sourceID = colPart.sourceID;</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>          <span class="keywordflow">if</span> (std::find(sourceIDs.begin(), sourceIDs.end(), sourceID) == sourceIDs.end()) {</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>            sourceIDs.push_back(sourceID);</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>          }</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>          <span class="keywordflow">if</span> (sourceIDs.size() &gt; 1) { <span class="comment">// we found more than one, exit</span></div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>          }</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>        }</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>        <span class="keywordflow">if</span> (sourceIDs.size() &gt; 1) { <span class="comment">// we found more than one, exit</span></div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>        }</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>      }</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>      <span class="keywordflow">if</span> (sourceIDs.size() &lt;= 1) {</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>        LOGP(fatal, <span class="stringliteral">&quot;Signal filtering cannot be enabled without embedding. Please fix the configuration either enabling the embedding, or turning off the signal filtering.&quot;</span>);</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>      }</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>    }</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span> </div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>    <span class="comment">// count all parts</span></div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>    <span class="keywordtype">int</span> totalNParts = 0;</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iCol = 0; iCol &lt; nMCCollisions; iCol++) {</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>      totalNParts += mcParts[iCol].size();</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>    }</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>    mcCollisionsCursor.<a class="code hl_function" href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#aab8b295819acc295a335e89a70f1ce53">reserve</a>(totalNParts);</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span> </div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iCol = 0; iCol &lt; nMCCollisions; iCol++) {</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>      <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a> = mcRecords[iCol].getTimeOffsetWrtBC();</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>      <span class="keyword">auto</span> globalBC = mcRecords[iCol].toLong();</div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>      <span class="keyword">auto</span> item = bcsMap.find(globalBC);</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>      <span class="keywordtype">int</span> bcID = -1;</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>      <span class="keywordflow">if</span> (item != bcsMap.end()) {</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>        bcID = item-&gt;second;</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;Error: could not find a corresponding BC ID &quot;</span></div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>                   &lt;&lt; <span class="stringliteral">&quot;for MC collision; BC = &quot;</span> &lt;&lt; globalBC</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>                   &lt;&lt; <span class="stringliteral">&quot;, mc collision = &quot;</span> &lt;&lt; iCol;</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>      }</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>      <span class="keyword">auto</span>&amp; colParts = mcParts[iCol];</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>      <span class="keyword">auto</span> nParts = colParts.size();</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> colPart : colParts) {</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>        <span class="keyword">auto</span> eventID = colPart.entryID;</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>        <span class="keyword">auto</span> sourceID = colPart.sourceID;</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>        <span class="comment">// enable embedding: if several colParts exist, then they are</span></div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>        <span class="comment">// saved as one collision</span></div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>        <span class="keywordflow">if</span> (nParts == 1 || sourceID == 0) {</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>          <span class="comment">// FIXME:</span></div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>          <span class="comment">// use generators&#39; names for generatorIDs (?)</span></div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>          <span class="keyword">auto</span>&amp; header = mcReader-&gt;getMCEventHeader(sourceID, eventID);</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>          updateMCHeader(mcCollisionsCursor.<a class="code hl_variable" href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#a1f04c6fea0ad600f0f601535e5347986">cursor</a>,</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>                         hepmcXSectionsCursor.<a class="code hl_variable" href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#a1f04c6fea0ad600f0f601535e5347986">cursor</a>,</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>                         hepmcPdfInfosCursor.<a class="code hl_variable" href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#a1f04c6fea0ad600f0f601535e5347986">cursor</a>,</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>                         hepmcHeavyIonsCursor.<a class="code hl_variable" href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#a1f04c6fea0ad600f0f601535e5347986">cursor</a>,</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>                         header,</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>                         iCol,</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>                         bcID,</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>                         <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a>,</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>                         0,</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>                         sourceID);</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>        }</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>        mcColToEvSrc.emplace_back(std::vector&lt;int&gt;{iCol, sourceID, eventID}); <span class="comment">// point background and injected signal events to one collision</span></div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>      }</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>    }</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>  }</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span> </div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>  std::sort(mcColToEvSrc.begin(), mcColToEvSrc.end(),</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>            [](<span class="keyword">const</span> std::vector&lt;int&gt;&amp; <a class="code hl_class" href="../../d1/da0/classint.html">left</a>, <span class="keyword">const</span> std::vector&lt;int&gt;&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a5ffadbbacc6b89cf6218bc43b384d3fe">right</a>) { return (left[0] &lt; right[0]); });</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span> </div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>  <span class="comment">// vector of FDD amplitudes</span></div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>  int16_t aFDDAmplitudesA[8] = {0u}, aFDDAmplitudesC[8] = {0u};</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>  <span class="keywordtype">float</span> aFDDTimesA[8] = {0.f}, aFDDTimesC[8] = {0.f};</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>  <span class="comment">// filling FDD table</span></div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>  fddCursor.reserve(fddRecPoints.size());</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; fddRecPoint : fddRecPoints) {</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; 8; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>      aFDDAmplitudesA[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] = 0;</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>      aFDDAmplitudesC[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] = 0;</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>      aFDDTimesA[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] = 0.f;</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>      aFDDTimesC[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] = 0.f;</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>    }</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>    uint64_t globalBC = fddRecPoint.getInteractionRecord().toLong();</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>    uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = globalBC;</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>    <span class="keyword">auto</span> item = bcsMap.find(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>);</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>    <span class="keywordtype">int</span> bcID = -1;</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>    <span class="keywordflow">if</span> (item != bcsMap.end()) {</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>      bcID = item-&gt;second;</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;Error: could not find a corresponding BC ID for a FDD rec. point; BC = &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>;</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>    }</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>    <span class="keyword">const</span> <span class="keyword">auto</span> channelData = fddRecPoint.getBunchChannelData(fddChData);</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; channel : channelData) {</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>      <span class="keywordflow">if</span> (channel.mPMNumber &lt; 8) {</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>        aFDDAmplitudesC[channel.mPMNumber] = channel.mChargeADC;                                      <span class="comment">// amplitude</span></div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>        aFDDTimesC[channel.mPMNumber] = truncateFloatFraction(channel.mTime * 1E-3, mFDDChannelTime); <span class="comment">// time</span></div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>        aFDDAmplitudesA[channel.mPMNumber - 8] = channel.mChargeADC;                                      <span class="comment">// amplitude</span></div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>        aFDDTimesA[channel.mPMNumber - 8] = truncateFloatFraction(channel.mTime * 1E-3, mFDDChannelTime); <span class="comment">// time</span></div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>      }</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>    }</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span> </div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>    fddCursor(bcID,</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>              aFDDAmplitudesA,</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>              aFDDAmplitudesC,</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>              truncateFloatFraction(fddRecPoint.getCollisionTimeA() * 1E-3, mFDDTime), <span class="comment">// ps to ns</span></div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>              truncateFloatFraction(fddRecPoint.getCollisionTimeC() * 1E-3, mFDDTime), <span class="comment">// ps to ns</span></div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>              fddRecPoint.getTrigger().getTriggersignals());</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>    <span class="keywordflow">if</span> (mEnableFITextra) {</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>      fddExtraCursor(bcID,</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>                     aFDDTimesA,</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>                     aFDDTimesC);</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>    }</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>  }</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span> </div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>  <span class="comment">// filling FT0 table</span></div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>  std::vector&lt;float&gt; aAmplitudesA, aAmplitudesC, aTimesA, aTimesC;</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>  std::vector&lt;uint8_t&gt; aChannelsA, aChannelsC;</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>  ft0Cursor.reserve(ft0RecPoints.size());</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; ft0RecPoint : ft0RecPoints) {</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>    aAmplitudesA.clear();</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>    aAmplitudesC.clear();</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>    aTimesA.clear();</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>    aTimesC.clear();</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>    aChannelsA.clear();</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>    aChannelsC.clear();</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>    <span class="keyword">const</span> <span class="keyword">auto</span> channelData = ft0RecPoint.getBunchChannelData(ft0ChData);</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; channel : channelData) {</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>      <span class="comment">// TODO: switch to calibrated amplitude</span></div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>      <span class="keywordflow">if</span> (channel.QTCAmpl &gt; 0) {</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>        <span class="keyword">constexpr</span> <span class="keywordtype">int</span> nFT0ChannelsAside = <a class="code hl_variable" href="../../d1/db6/classo2_1_1ft0_1_1Geometry.html#a73218802411ed622f3ce4b3c4118e7fb">o2::ft0::Geometry::NCellsA</a> * 4;</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>        <span class="keywordflow">if</span> (channel.ChId &lt; nFT0ChannelsAside) {</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>          aChannelsA.push_back(channel.ChId);</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>          aAmplitudesA.push_back(truncateFloatFraction(channel.QTCAmpl, mT0Amplitude));</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>          aTimesA.push_back(truncateFloatFraction(channel.CFDTime * 1E-3, mT0ChannelTime));</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>          aChannelsC.push_back(channel.ChId - nFT0ChannelsAside);</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>          aAmplitudesC.push_back(truncateFloatFraction(channel.QTCAmpl, mT0Amplitude));</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>          aTimesC.push_back(truncateFloatFraction(channel.CFDTime * 1E-3, mT0ChannelTime));</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>        }</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>      }</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>    }</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>    uint64_t globalBC = ft0RecPoint.getInteractionRecord().toLong();</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>    uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = globalBC;</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>    <span class="keyword">auto</span> item = bcsMap.find(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>);</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>    <span class="keywordtype">int</span> bcID = -1;</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>    <span class="keywordflow">if</span> (item != bcsMap.end()) {</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>      bcID = item-&gt;second;</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;Error: could not find a corresponding BC ID for a FT0 rec. point; BC = &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>;</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>    }</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>    ft0Cursor(bcID,</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>              aAmplitudesA,</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>              aChannelsA,</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>              aAmplitudesC,</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>              aChannelsC,</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>              truncateFloatFraction(ft0RecPoint.getCollisionTimeA() * 1E-3, mT0Time), <span class="comment">// ps to ns</span></div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>              truncateFloatFraction(ft0RecPoint.getCollisionTimeC() * 1E-3, mT0Time), <span class="comment">// ps to ns</span></div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>              ft0RecPoint.getTrigger().getTriggersignals());</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>    <span class="keywordflow">if</span> (mEnableFITextra) {</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>      ft0ExtraCursor(bcID,</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>                     aTimesA,</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>                     aTimesC);</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>    }</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>  }</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span> </div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>  <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>    <span class="comment">// filling MC collision labels</span></div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>    mcColLabelsCursor.<a class="code hl_function" href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#aab8b295819acc295a335e89a70f1ce53">reserve</a>(primVerLabels.size());</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a> : primVerLabels) {</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>      <span class="keyword">auto</span> it = std::find_if(mcColToEvSrc.begin(), mcColToEvSrc.end(),</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>                             [&amp;<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a>](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; mcColInfo) { return mcColInfo[1] == label.getSourceID() &amp;&amp; mcColInfo[2] == label.getEventID(); });</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>      int32_t mcCollisionID = -1;</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>      <span class="keywordflow">if</span> (it != mcColToEvSrc.end()) {</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>        mcCollisionID = it-&gt;at(0);</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>      }</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>      uint16_t mcMask = 0; <span class="comment">// todo: set mask using normalized weights?</span></div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>      mcColLabelsCursor(mcCollisionID, mcMask);</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>    }</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>  }</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span> </div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>  cacheTriggers(recoData);</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>  countTPCClusters(recoData);</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span> </div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>  <span class="keywordtype">int</span> collisionID = 0;</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>  mIndexTableMFT.resize(recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aeeea5bedf4bc74b1f037e4c0d589d5ff">getMFTTracks</a>().size());</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>  mIndexTableFwd.resize(recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab55087fdd2a2ff3bcb7cd2b2b4172183">getMCHTracks</a>().size());</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span> </div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>  <span class="keyword">auto</span>&amp; trackReffwd = primVer2TRefs.back();</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>  fillIndexTablesPerCollision(trackReffwd, primVerGIs, recoData);</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>  collisionID = 0;</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a> : primVertices) {</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>    <span class="keyword">auto</span>&amp; trackReffwd = primVer2TRefs[collisionID];</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>    fillIndexTablesPerCollision(trackReffwd, primVerGIs, recoData); <span class="comment">// this function must follow the same track order as &#39;fillTrackTablesPerCollision&#39; to fill the map of track indices</span></div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>    collisionID++;</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>  }</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span> </div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>  prepareStrangenessTracking(recoData);</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span> </div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>  mGIDToTableFwdID.clear(); <span class="comment">// reset the tables to be used by &#39;fillTrackTablesPerCollision&#39;</span></div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>  mGIDToTableMFTID.clear();</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span> </div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>  <span class="keywordflow">if</span> (mPropTracks || mThinTracks) {</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>    <span class="keyword">auto</span> v0s = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aa4526f3e28d55f46081a75db729aeea4">getV0sIdx</a>();</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>    <span class="keyword">auto</span> cascades = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a5f2fa4ff3a68d0a149c71533e5c26f23">getCascadesIdx</a>();</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>    <span class="keyword">auto</span> decays3Body = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a1963d123d5967a4e4c7c1d631b0eae1a">getDecays3BodyIdx</a>();</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>    mGIDUsedBySVtx.reserve(v0s.size() * 2 + cascades.size() + decays3Body.size() * 3);</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a> : v0s) {</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>      mGIDUsedBySVtx.insert(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>.getProngID(0));</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>      mGIDUsedBySVtx.insert(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>.getProngID(1));</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    }</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cascade : cascades) {</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>      mGIDUsedBySVtx.insert(cascade.getBachelorID());</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>    }</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; id3Body : decays3Body) {</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>      mGIDUsedBySVtx.insert(id3Body.getProngID(0));</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>      mGIDUsedBySVtx.insert(id3Body.getProngID(1));</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>      mGIDUsedBySVtx.insert(id3Body.getProngID(2));</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>    }</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span> </div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>    mGIDUsedByStr.reserve(recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a05d30dcfcace40777030e393a2c3f536">getStrangeTracks</a>().size());</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; sTrk : recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a05d30dcfcace40777030e393a2c3f536">getStrangeTracks</a>()) {</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>      mGIDUsedByStr.emplace(sTrk.mITSRef, <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::ITS</a>);</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>    }</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>  }</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span> </div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>  <span class="comment">// filling unassigned tracks first</span></div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>  <span class="comment">// so that all unassigned tracks are stored in the beginning of the table together</span></div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>  <span class="keyword">auto</span>&amp; trackRef = primVer2TRefs.back(); <span class="comment">// references to unassigned tracks are at the end</span></div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>  <span class="comment">// fixme: interaction time is undefined for unassigned tracks (?)</span></div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>  fillTrackTablesPerCollision(-1, std::uint64_t(-1), trackRef, primVerGIs, recoData, tracksCursor, tracksCovCursor, tracksExtraCursor, tracksQACursor,</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>                              ambigTracksCursor, mftTracksCursor, mftTracksCovCursor, ambigMFTTracksCursor,</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>                              fwdTracksCursor, fwdTracksCovCursor, ambigFwdTracksCursor, fwdTrkClsCursor, bcsMap);</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span> </div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>  <span class="comment">// filling collisions and tracks into tables</span></div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>  collisionID = 0;</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>  collisionsCursor.reserve(primVertices.size());</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a> : primVertices) {</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>    <span class="keyword">auto</span>&amp; cov = <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getCov();</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>    <span class="keyword">auto</span>&amp; timeStamp = <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getTimeStamp();                       <span class="comment">// this is a relative time</span></div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> interactionTime = timeStamp.getTimeStamp() * 1E3; <span class="comment">// mus to ns</span></div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>    uint64_t globalBC = relativeTime_to_GlobalBC(interactionTime);</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>    uint64_t localBC = relativeTime_to_LocalBC(interactionTime);</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;global BC &quot;</span> &lt;&lt; globalBC &lt;&lt; <span class="stringliteral">&quot; local BC &quot;</span> &lt;&lt; localBC &lt;&lt; <span class="stringliteral">&quot; relative interaction time &quot;</span> &lt;&lt; interactionTime;</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>    <span class="comment">// collision timestamp in ns wrt the beginning of collision BC</span></div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> relInteractionTime = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(localBC * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a> - interactionTime);</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>    <span class="keyword">auto</span> item = bcsMap.find(globalBC);</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>    <span class="keywordtype">int</span> bcID = -1;</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>    <span class="keywordflow">if</span> (item != bcsMap.end()) {</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>      bcID = item-&gt;second;</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>      <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;Error: could not find a corresponding BC ID for a collision; BC = &quot;</span> &lt;&lt; globalBC &lt;&lt; <span class="stringliteral">&quot;, collisionID = &quot;</span> &lt;&lt; collisionID;</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>    }</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>    collisionsCursor(bcID,</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>                     truncateFloatFraction(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getX(), mCollisionPosition),</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>                     truncateFloatFraction(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getY(), mCollisionPosition),</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>                     truncateFloatFraction(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getZ(), mCollisionPosition),</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>                     truncateFloatFraction(cov[0], mCollisionPositionCov),</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>                     truncateFloatFraction(cov[1], mCollisionPositionCov),</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>                     truncateFloatFraction(cov[2], mCollisionPositionCov),</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>                     truncateFloatFraction(cov[3], mCollisionPositionCov),</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>                     truncateFloatFraction(cov[4], mCollisionPositionCov),</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>                     truncateFloatFraction(cov[5], mCollisionPositionCov),</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>                     <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getFlags(),</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>                     truncateFloatFraction(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getChi2(), mCollisionPositionCov),</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>                     <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a>.getNContributors(),</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>                     truncateFloatFraction(relInteractionTime, mCollisionPosition),</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>                     truncateFloatFraction(timeStamp.getTimeStampError() * 1E3, mCollisionPositionCov));</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>    mVtxToTableCollID[collisionID] = mTableCollID++;</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span> </div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>    <span class="keyword">auto</span>&amp; trackRef = primVer2TRefs[collisionID];</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>    <span class="comment">// passing interaction time in [ps]</span></div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>    fillTrackTablesPerCollision(collisionID, globalBC, trackRef, primVerGIs, recoData, tracksCursor, tracksCovCursor, tracksExtraCursor, tracksQACursor, ambigTracksCursor,</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>                                mftTracksCursor, mftTracksCovCursor, ambigMFTTracksCursor,</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>                                fwdTracksCursor, fwdTracksCovCursor, ambigFwdTracksCursor, fwdTrkClsCursor, bcsMap);</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>    collisionID++;</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>  }</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span> </div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>  fillSecondaryVertices(recoData, v0sCursor, cascadesCursor, decay3BodyCursor);</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>  fillHMPID(recoData, hmpCursor);</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>  fillStrangenessTrackingTables(recoData, trackedV0Cursor, trackedCascadeCursor, tracked3BodyCurs);</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span> </div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>  <span class="comment">// helper map for fast search of a corresponding class mask for a bc</span></div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>  <span class="keyword">auto</span> emcalIncomplete = filterEMCALIncomplete(recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ae1a3fc004aeec8aa5291c493aa973b9f">getEMCALTriggers</a>());</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>  std::unordered_map&lt;uint64_t, std::pair&lt;uint64_t, uint64_t&gt;&gt; bcToClassMask;</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>  <span class="keywordflow">if</span> (mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aee53e854415cd94aeb620bd06edb6c90">GID::CTP</a>]) {</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;CTP input available&quot;</span>;</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; ctpDigit : ctpDigits) {</div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>      uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = ctpDigit.intRecord.toLong();</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>      uint64_t classMask = ctpDigit.CTPClassMask.to_ulong();</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>      uint64_t inputMask = ctpDigit.CTPInputMask.to_ulong();</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>      <span class="keywordflow">if</span> (emcalIncomplete.find(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>) != emcalIncomplete.end()) {</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>        <span class="comment">// reject EMCAL triggers as BC was rejected as incomplete at readout level</span></div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>        <span class="keyword">auto</span> classMaskOrig = classMask;</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>        classMask = classMask &amp; ~mEMCALTrgClassMask;</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;Found EMCAL incomplete event, mask before &quot;</span> &lt;&lt; std::bitset&lt;64&gt;(classMaskOrig) &lt;&lt; <span class="stringliteral">&quot;, after &quot;</span> &lt;&lt; std::bitset&lt;64&gt;(classMask);</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>      }</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>      bcToClassMask[<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>] = {classMask, inputMask};</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>      <span class="comment">// LOG(debug) &lt;&lt; Form(&quot;classmask:0x%llx&quot;, classMask);</span></div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>    }</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>  }</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span> </div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>  <span class="comment">// filling BC table</span></div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>  bcCursor.reserve(bcsMap.size());</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; item : bcsMap) {</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>    uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = item.first;</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>    std::pair&lt;uint64_t, uint64_t&gt; masks{0, 0};</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>    <span class="keywordflow">if</span> (mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aee53e854415cd94aeb620bd06edb6c90">GID::CTP</a>]) {</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>      <span class="keyword">auto</span> bcClassPair = bcToClassMask.find(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>);</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>      <span class="keywordflow">if</span> (bcClassPair != bcToClassMask.end()) {</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>        masks = bcClassPair-&gt;second;</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>      }</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>    }</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>    bcCursor(runNumber,</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>             <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>,</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>             masks.first,</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>             masks.second);</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>  }</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span> </div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>  bcToClassMask.clear();</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span> </div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>  <span class="comment">// filling BC flags table:</span></div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>  <span class="keyword">auto</span> bcFlags = fillBCFlags(recoData, bcsMap);</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>  bcFlagsCursor.reserve(bcFlags.size());</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> : bcFlags) {</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>    bcFlagsCursor(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>);</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>  }</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span> </div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>  <span class="comment">// fill cpvcluster table</span></div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>  <span class="keywordflow">if</span> (mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a51e15696a65701d33be1ada5b4952bc1">GIndex::CPV</a>]) {</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>    <span class="keywordtype">float</span> posX, posZ;</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>    cpvClustersCursor.reserve(cpvTrigRecs.size());</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cpvEvent : cpvTrigRecs) {</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>      uint64_t <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = cpvEvent.getBCData().toLong();</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>      <span class="keyword">auto</span> item = bcsMap.find(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>);</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>      <span class="keywordtype">int</span> bcID = -1;</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>      <span class="keywordflow">if</span> (item != bcsMap.end()) {</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>        bcID = item-&gt;second;</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;Error: could not find a corresponding BC ID for a CPV Trigger Record; BC = &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>;</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>      }</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iClu = cpvEvent.getFirstEntry(); iClu &lt; cpvEvent.getFirstEntry() + cpvEvent.getNumberOfObjects(); iClu++) {</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>        <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a3fbcc99525a77d67e5b943a244c81273">clu</a> = cpvClusters[iClu];</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>        <a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a3fbcc99525a77d67e5b943a244c81273">clu</a>.getLocalPosition(posX, posZ);</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>        cpvClustersCursor(bcID,</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>                          truncateFloatFraction(posX, mCPVPos),</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>                          truncateFloatFraction(posZ, mCPVPos),</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>                          truncateFloatFraction(<a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a3fbcc99525a77d67e5b943a244c81273">clu</a>.getEnergy(), mCPVAmpl),</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>                          <a class="code hl_variable" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a3fbcc99525a77d67e5b943a244c81273">clu</a>.getPackedClusterStatus());</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>      }</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>    }</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>  }</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span> </div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>  <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>    TStopwatch timer;</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>    timer.Start();</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>    <span class="comment">// filling mc particles table</span></div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>    fillMCParticlesTable(*mcReader,</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>                         mcParticlesCursor.<a class="code hl_variable" href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#a1f04c6fea0ad600f0f601535e5347986">cursor</a>,</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>                         primVer2TRefs,</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>                         primVerGIs,</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>                         recoData,</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>                         mcColToEvSrc);</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>    timer.Stop();</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;FILL MC took &quot;</span> &lt;&lt; timer.RealTime() &lt;&lt; <span class="stringliteral">&quot; s&quot;</span>;</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>    mcColToEvSrc.clear();</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span> </div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>    <span class="comment">// ------------------------------------------------------</span></div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>    <span class="comment">// filling track labels</span></div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span> </div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>    <span class="comment">// need to go through labels in the same order as for tracks</span></div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>    fillMCTrackLabelsTable(mcTrackLabelCursor, mcMFTTrackLabelCursor, mcFwdTrackLabelCursor, primVer2TRefs.back(), primVerGIs, recoData);</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> iref = 0U; iref &lt; primVer2TRefs.size() - 1; iref++) {</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>      <span class="keyword">auto</span>&amp; trackRef = primVer2TRefs[iref];</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>      fillMCTrackLabelsTable(mcTrackLabelCursor, mcMFTTrackLabelCursor, mcFwdTrackLabelCursor, trackRef, primVerGIs, recoData, iref);</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>    }</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>  }</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span> </div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>  <span class="comment">// Fill calo tables and if MC also the MCCaloTable, therefore, has to be after fillMCParticlesTable call!</span></div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>  <span class="keywordflow">if</span> (mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a596e1824b6b17f37370f59fcca3f0f06">GIndex::PHS</a>] || mInputSources[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a5b9c0be2be7dc67f15d392a4f7c40614">GIndex::EMC</a>]) {</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>    fillCaloTable(caloCellsCursor, caloCellsTRGTableCursor, mcCaloLabelsCursor, bcsMap, recoData);</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>  }</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span> </div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>  bcsMap.clear();</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>  <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#af6892e1d3798257af69de8aac6396b2f">clearMCKeepStore</a>(mToStore);</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>  mGIDToTableID.clear();</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>  mTableTrID = 0;</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>  mGIDToTableFwdID.clear();</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>  mTableTrFwdID = 0;</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>  mGIDToTableMFTID.clear();</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>  mTableTrMFTID = 0;</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>  mVtxToTableCollID.clear();</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>  mTableCollID = 0;</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>  mV0ToTableID.clear();</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>  mTableV0ID = 0;</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span> </div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>  mIndexTableFwd.clear();</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>  mIndexFwdID = 0;</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>  mIndexTableMFT.clear();</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>  mIndexMFTID = 0;</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span> </div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>  mBCLookup.<a class="code hl_function" href="../../d2/de8/classo2_1_1aodproducer_1_1BunchCrossings.html#aba2467db48befffc36ba5cbd22a69e7f">clear</a>();</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span> </div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>  mGIDUsedBySVtx.clear();</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>  mGIDUsedByStr.clear();</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span> </div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>  originCursor(tfNumber);</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span> </div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>  <span class="comment">// sending metadata to writer</span></div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>  TString dataType = mUseMC ? <span class="stringliteral">&quot;MC&quot;</span> : <span class="stringliteral">&quot;RAW&quot;</span>;</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>  TString O2Version = <a class="code hl_function" href="../../d4/d7c/namespaceo2.html#aaf9dcf961ac0173c5beca24659e39414">o2::fullVersion</a>();</div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>  TString ROOTVersion = ROOT_RELEASE;</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>  mMetaDataKeys = {<span class="stringliteral">&quot;DataType&quot;</span>, <span class="stringliteral">&quot;Run&quot;</span>, <span class="stringliteral">&quot;O2Version&quot;</span>, <span class="stringliteral">&quot;ROOTVersion&quot;</span>, <span class="stringliteral">&quot;RecoPassName&quot;</span>, <span class="stringliteral">&quot;AnchorProduction&quot;</span>, <span class="stringliteral">&quot;AnchorPassName&quot;</span>, <span class="stringliteral">&quot;LPMProductionTag&quot;</span>, <span class="stringliteral">&quot;CreatedBy&quot;</span>};</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>  mMetaDataVals = {dataType, <span class="stringliteral">&quot;3&quot;</span>, O2Version, ROOTVersion, mRecoPass, mAnchorProd, mAnchorPass, mLPMProdTag, mUser};</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>  add_additional_meta_info(mMetaDataKeys, mMetaDataVals);</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span> </div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>  pc.<a class="code hl_function" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a23b32b0b8cac7abcbf46c1d6580be859">outputs</a>().<a class="code hl_function" href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a2304984f68389854f3aad16b1457c22b">snapshot</a>(<a class="code hl_struct" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<span class="stringliteral">&quot;AMD&quot;</span>, <span class="stringliteral">&quot;AODMetadataKeys&quot;</span>, 0}, mMetaDataKeys);</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>  pc.<a class="code hl_function" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a23b32b0b8cac7abcbf46c1d6580be859">outputs</a>().<a class="code hl_function" href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a2304984f68389854f3aad16b1457c22b">snapshot</a>(<a class="code hl_struct" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<span class="stringliteral">&quot;AMD&quot;</span>, <span class="stringliteral">&quot;AODMetadataVals&quot;</span>, 0}, mMetaDataVals);</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span> </div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>  pc.<a class="code hl_function" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a23b32b0b8cac7abcbf46c1d6580be859">outputs</a>().<a class="code hl_function" href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a2304984f68389854f3aad16b1457c22b">snapshot</a>(<a class="code hl_struct" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<span class="stringliteral">&quot;TFN&quot;</span>, <span class="stringliteral">&quot;TFNumber&quot;</span>, 0}, tfNumber);</div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>  pc.<a class="code hl_function" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a23b32b0b8cac7abcbf46c1d6580be859">outputs</a>().<a class="code hl_function" href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a2304984f68389854f3aad16b1457c22b">snapshot</a>(<a class="code hl_struct" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<span class="stringliteral">&quot;TFF&quot;</span>, <span class="stringliteral">&quot;TFFilename&quot;</span>, 0}, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span> </div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span>  mTimer.Stop();</div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>}</div>
</div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span> </div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::cacheTriggers(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; recoData)</div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>{</div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>  <span class="comment">// ITS tracks-&gt;ROF</span></div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>  {</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>    mITSROFs.clear();</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rofs = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab453120224ac2e56e5ab5ac39ca8241a">getITSTracksROFRecords</a>();</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>    uint16_t <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = 0;</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rof : rofs) {</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../d1/da0/classint.html">first</a> = rof.getFirstEntry(), last = <a class="code hl_class" href="../../d1/da0/classint.html">first</a> + rof.getNEntries();</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; last; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>        mITSROFs.push_back(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>);</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>      }</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>++;</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>    }</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>  }</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>  <span class="comment">// MFT tracks-&gt;ROF</span></div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>  {</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>    mMFTROFs.clear();</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rofs = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a88b3a25a0fa452eb8f92933cd1bb7019">getMFTTracksROFRecords</a>();</div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>    uint16_t <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = 0;</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rof : rofs) {</div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../d1/da0/classint.html">first</a> = rof.getFirstEntry(), <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a> + rof.getNEntries();</div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>        mMFTROFs.push_back(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>);</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>      }</div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>++;</div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>    }</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>  }</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>  <span class="comment">// ITSTPCTRD tracks -&gt; TRD trigger</span></div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>  {</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>    mITSTPCTRDTriggers.clear();</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; itstpctrigs = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#abd2331a61a5e0b2c1285ffe09e89ed54">getITSTPCTRDTriggers</a>();</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = 0;</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; trig : itstpctrigs) {</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../d1/da0/classint.html">first</a> = trig.getFirstTrack(), <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a> + trig.getNumberOfTracks();</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>        mITSTPCTRDTriggers.push_back(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>);</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>      }</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>++;</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>    }</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>  }</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>  <span class="comment">// TPCTRD tracks -&gt; TRD trigger</span></div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>  {</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>    mTPCTRDTriggers.clear();</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpctrigs = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a334c3e93d4d778af8f8a86ed5b5b93e6">getTPCTRDTriggers</a>();</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = 0;</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; trig : tpctrigs) {</div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../d1/da0/classint.html">first</a> = trig.getFirstTrack(), <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a> + trig.getNumberOfTracks();</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>        mTPCTRDTriggers.push_back(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>);</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>      }</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>++;</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>    }</div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>  }</div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>  <span class="comment">// MCH tracks-&gt;ROF</span></div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>  {</div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>    mMCHROFs.clear();</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rofs = recoData.<a class="code hl_function" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a525098d9a58bdf9a39ce7ce0076dfeb5">getMCHTracksROFRecords</a>();</div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>    uint16_t <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = 0;</div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rof : rofs) {</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../d1/da0/classint.html">first</a> = rof.getFirstIdx(), <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a> + rof.getNEntries();</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = <a class="code hl_class" href="../../d1/da0/classint.html">first</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_enumvalue" href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">last</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>        mMCHROFs.push_back(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>);</div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>      }</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>++;</div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>    }</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>  }</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>}</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span> </div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>AODProducerWorkflowDPL::TrackExtraInfo AODProducerWorkflowDPL::processBarrelTrack(<span class="keywordtype">int</span> collisionID, std::uint64_t collisionBC, <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a> trackIndex,</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>                                                                                  <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, <span class="keyword">const</span> std::map&lt;uint64_t, int&gt;&amp; bcsMap)</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>{</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>  TrackExtraInfo extraInfoHolder;</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>  <span class="keywordflow">if</span> (collisionID &lt; 0) {</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>    extraInfoHolder.flags |= <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90ace867b6a1d48381a5fcf2df4d137b622">o2::aod::track::OrphanTrack</a>;</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>  }</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>  <span class="keywordtype">bool</span> needBCSlice = collisionID &lt; 0;                     <span class="comment">// track is associated to multiple vertices</span></div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>  uint64_t bcOfTimeRef = collisionBC - mStartIR.<a class="code hl_function" href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">toLong</a>(); <span class="comment">// by default track time is wrt collision BC (unless no collision assigned)</span></div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span> </div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>  <span class="keyword">auto</span> setTrackTime = [&amp;](<span class="keywordtype">double</span> t, <span class="keywordtype">double</span> terr, <span class="keywordtype">bool</span> gaussian) {</div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>    <span class="comment">// set track time and error, for ambiguous tracks define the bcSlice as it was used in vertex-track association</span></div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>    <span class="comment">// provided track time (wrt TF start) and its error should be in ns, gaussian flag tells if the error is assumed to be gaussin or half-interval</span></div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>    <span class="keywordflow">if</span> (!gaussian) {</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>      extraInfoHolder.flags |= <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a84b0135edb579be1a23dd50fd87e43f7">o2::aod::track::TrackTimeResIsRange</a>;</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>    }</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>    extraInfoHolder.trackTimeRes = terr;</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>    <span class="keywordflow">if</span> (needBCSlice) { <span class="comment">// need to define BC slice</span></div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>      <span class="keywordtype">double</span> error = this-&gt;mTimeMarginTrackTime + (gaussian ? extraInfoHolder.trackTimeRes * this-&gt;mNSigmaTimeTrack : extraInfoHolder.trackTimeRes);</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>      bcOfTimeRef = fillBCSlice(extraInfoHolder.bcSlice, t - error, t + error, bcsMap);</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>    }</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>    extraInfoHolder.trackTime = float(t - bcOfTimeRef * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a>);</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>    extraInfoHolder.diffBCRef = <a class="code hl_class" href="../../d1/da0/classint.html">int</a>(bcOfTimeRef);</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>    LOGP(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>, <span class="stringliteral">&quot;time : {}/{} -&gt; {}/{} -&gt; trunc: {}/{} CollID: {} Amb: {}&quot;</span>, t, terr, t - bcOfTimeRef * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a>, terr,</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>         truncateFloatFraction(extraInfoHolder.trackTime, mTrackTime), truncateFloatFraction(extraInfoHolder.trackTimeRes, mTrackTimeError),</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>         collisionID, trackIndex.<a class="code hl_function" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html#aff5aff7ac80107a7dc31e29ad4f3a118">isAmbiguous</a>());</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>  };</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>  <span class="keyword">auto</span> contributorsGID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getSingleDetectorRefs(trackIndex);</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trackPar = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackParam(trackIndex);</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>  extraInfoHolder.flags |= trackPar.getPID() &lt;&lt; 28;</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>  <span class="keyword">auto</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> = trackIndex.getSource();</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>  <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aa07291753eb9dfbdde30f981e825f80c">GIndex::Source::TOF</a>].isIndexSet()) { <span class="comment">// ITS-TPC-TRD-TOF, ITS-TPC-TOF, TPC-TRD-TOF, TPC-TOF</span></div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tofMatch = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTOFMatch(trackIndex);</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>    extraInfoHolder.tofChi2 = tofMatch.getChi2();</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tofInt = tofMatch.getLTIntegralOut();</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>    <span class="keywordtype">float</span> intLen = tofInt.getL();</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>    extraInfoHolder.length = intLen;</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> mass = <a class="code hl_variable" href="../../d7/df9/namespaceo2_1_1constants_1_1physics.html#afcff1b8c0ffb9ff6a21020323709d485">o2::constants::physics::MassPionCharged</a>; <span class="comment">// default pid = pion</span></div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>    <span class="keywordflow">if</span> (tofInt.getTOF(<a class="code hl_variable" href="../../d9/d0f/classo2_1_1track_1_1PID.html#a6db3f58ad4060aae142d35f3fbc8685f">o2::track::PID::Pion</a>) &gt; 0.f) {</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>      <span class="keywordtype">float</span> expBeta = (intLen / (tofInt.getTOF(<a class="code hl_variable" href="../../d9/d0f/classo2_1_1track_1_1PID.html#a6db3f58ad4060aae142d35f3fbc8685f">o2::track::PID::Pion</a>) * cSpeed));</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>      <span class="keywordflow">if</span> (expBeta &gt; <a class="code hl_variable" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#acff1f02c7cd46f9b6c4751df2eb34b11">o2::constants::math::Almost1</a>) {</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>        expBeta = <a class="code hl_variable" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#acff1f02c7cd46f9b6c4751df2eb34b11">o2::constants::math::Almost1</a>;</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>      }</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>      extraInfoHolder.tofExpMom = mass * expBeta / std::sqrt(1.f - expBeta * expBeta);</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>    }</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>    <span class="comment">// correct the time of the track</span></div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> massZ = o2::track::PID::getMass2Z(trackPar.getPID());</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> energy = sqrt((massZ * massZ) + (extraInfoHolder.tofExpMom * extraInfoHolder.tofExpMom));</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_function" href="../../d2/d41/Detectors_2DCS_2src_2StringUtils_8cxx.html#ace2160f4712f738ceb0e0ee8c80fa04e">exp</a> = extraInfoHolder.length * energy / (cSpeed * extraInfoHolder.tofExpMom);</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>    <span class="keyword">auto</span> tofSignal = (tofMatch.getSignal() - <a class="code hl_function" href="../../d2/d41/Detectors_2DCS_2src_2StringUtils_8cxx.html#ace2160f4712f738ceb0e0ee8c80fa04e">exp</a>) * 1e-3; <span class="comment">// time in ns wrt TF start</span></div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>    setTrackTime(tofSignal, 0.2, <span class="keyword">true</span>);                   <span class="comment">// FIXME: calculate actual resolution (if possible?)</span></div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>  }</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>  <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a65413089b5649238ad468a359d7b4dc7">GIndex::Source::TRD</a>].isIndexSet()) {                                        <span class="comment">// ITS-TPC-TRD-TOF, TPC-TRD-TOF, TPC-TRD, ITS-TPC-TRD</span></div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trdOrig = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrack&lt;<a class="code hl_class" href="../../d4/d70/classo2_1_1gpu_1_1GPUTRDTrack__t.html">o2::trd::TrackTRD</a>&gt;(contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a65413089b5649238ad468a359d7b4dc7">GIndex::Source::TRD</a>]); <span class="comment">// refitted TRD trac</span></div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>    extraInfoHolder.trdChi2 = trdOrig.getChi2();</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>    extraInfoHolder.trdSignal = trdOrig.getSignal();</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>    extraInfoHolder.trdPattern = getTRDPattern(trdOrig);</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>    <span class="keywordflow">if</span> (extraInfoHolder.trackTimeRes &lt; 0.) { <span class="comment">// time is not set yet, this is possible only for TPC-TRD and ITS-TPC-TRD tracks, since those with TOF are set upstream</span></div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>      <span class="comment">// TRD is triggered: time uncertainty is within a BC</span></div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trdTrig = (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aa2a6898926ca93fca679266141729aae">GIndex::Source::TPCTRD</a>) ? <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCTRDTriggers()[mTPCTRDTriggers[trackIndex.getIndex()]] : <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSTPCTRDTriggers()[mITSTPCTRDTriggers[trackIndex.getIndex()]];</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>      <span class="keywordtype">double</span> ttrig = trdTrig.getBCData().differenceInBC(mStartIR) * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a>; <span class="comment">// 1st get time wrt TF start</span></div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>      setTrackTime(ttrig, 1., <span class="keyword">true</span>);                                                                       <span class="comment">// FIXME: calculate actual resolution (if possible?)</span></div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>    }</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>  }</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>  <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::Source::ITS</a>].isIndexSet()) {</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; itsTrack = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSTrack(contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::ITS</a>]);</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d2/d12/bench__Clusterizer_8cxx.html#adc2980dd50ea866e70e476f11dca803b">nClusters</a> = itsTrack.getNClusters();</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>    <span class="keywordtype">float</span> chi2 = itsTrack.getChi2();</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>    extraInfoHolder.itsChi2NCl = <a class="code hl_variable" href="../../d2/d12/bench__Clusterizer_8cxx.html#adc2980dd50ea866e70e476f11dca803b">nClusters</a> != 0 ? chi2 / (float)<a class="code hl_variable" href="../../d2/d12/bench__Clusterizer_8cxx.html#adc2980dd50ea866e70e476f11dca803b">nClusters</a> : 0;</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>    extraInfoHolder.itsClusterSizes = itsTrack.getClusterSizes();</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>    <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GIndex::ITS</a>) { <span class="comment">// standalone ITS track should set its time from the ROF</span></div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rof = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSTracksROFRecords()[mITSROFs[trackIndex.getIndex()]];</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>      <span class="keywordtype">double</span> t = rof.getBCData().differenceInBC(mStartIR) * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a> + mITSROFrameHalfLengthNS + mITSROFBiasNS;</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>      setTrackTime(t, mITSROFrameHalfLengthNS, <span class="keyword">false</span>);</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>    }</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a37ab69e9f5d520a03ff3cd7d6173c72c">GIndex::Source::ITSAB</a>].isIndexSet()) { <span class="comment">// this is an ITS-TPC afterburner contributor</span></div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>    extraInfoHolder.itsClusterSizes = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSABRefs()[contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a37ab69e9f5d520a03ff3cd7d6173c72c">GIndex::Source::ITSAB</a>].getIndex()].getClusterSizes();</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>  }</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>  <span class="keywordflow">if</span> (contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::Source::TPC</a>].isIndexSet()) {</div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpcOrig = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCTrack(contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::TPC</a>]);</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpcClData = mTPCCounters[contributorsGID[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::TPC</a>]];</div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; dEdx = tpcOrig.getdEdx().dEdxTotTPC &gt; 0 ? tpcOrig.getdEdx() : tpcOrig.getdEdxAlt();</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>    <span class="keywordflow">if</span> (tpcOrig.getdEdx().dEdxTotTPC == 0) {</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>      extraInfoHolder.flags |= <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a701fb86b2a8d9b3303e7806ee710d579">o2::aod::track::TPCdEdxAlt</a>;</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>    }</div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>    <span class="keywordflow">if</span> (tpcOrig.hasASideClusters()) {</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>      extraInfoHolder.flags |= <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a37a1ab316b370051ed8eafe0e36fd2d9">o2::aod::track::TPCSideA</a>;</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>    }</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>    <span class="keywordflow">if</span> (tpcOrig.hasCSideClusters()) {</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>      extraInfoHolder.flags |= <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a9ab35da4cdebb9688516041b2cde73c1">o2::aod::track::TPCSideC</a>;</div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>    }</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>    extraInfoHolder.tpcInnerParam = tpcOrig.getP() / tpcOrig.getAbsCharge();</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>    extraInfoHolder.tpcChi2NCl = tpcOrig.getNClusters() ? tpcOrig.getChi2() / tpcOrig.getNClusters() : 0;</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>    extraInfoHolder.tpcSignal = dEdx.dEdxTotTPC;</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>    extraInfoHolder.tpcNClsFindable = tpcOrig.getNClusters();</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>    extraInfoHolder.tpcNClsFindableMinusFound = tpcOrig.getNClusters() - tpcClData.found;</div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>    extraInfoHolder.tpcNClsFindableMinusCrossedRows = tpcOrig.getNClusters() - tpcClData.crossed;</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>    extraInfoHolder.tpcNClsShared = tpcClData.shared;</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>    uint32_t clsUsedForPID = dEdx.NHitsIROC + dEdx.NHitsOROC1 + dEdx.NHitsOROC2 + dEdx.NHitsOROC3;</div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>    extraInfoHolder.tpcNClsFindableMinusPID = tpcOrig.getNClusters() - clsUsedForPID;</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>    <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GIndex::TPC</a>) { <span class="comment">// standalone TPC track should set its time from their timebins range</span></div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>      <span class="keywordflow">if</span> (needBCSlice) {</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>        <span class="keywordtype">double</span> t = (tpcOrig.getTime0() + 0.5 * (tpcOrig.getDeltaTFwd() - tpcOrig.getDeltaTBwd())) * mTPCBinNS; <span class="comment">// central value</span></div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>        <span class="keywordtype">double</span> terr = 0.5 * (tpcOrig.getDeltaTFwd() + tpcOrig.getDeltaTBwd()) * mTPCBinNS;</div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>        <span class="keywordtype">double</span> err = mTimeMarginTrackTime + terr;</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>        bcOfTimeRef = fillBCSlice(extraInfoHolder.bcSlice, t - err, t + err, bcsMap);</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>      }</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>      <a class="code hl_struct" href="../../d6/dd7/structo2_1_1aod_1_1track_1_1extensions_1_1TPCTimeErrEncoding.html">aod::track::extensions::TPCTimeErrEncoding</a> <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a>;</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>      <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a>.setDeltaTFwd(tpcOrig.getDeltaTFwd());</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>      <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a>.setDeltaTBwd(tpcOrig.getDeltaTBwd());</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>      extraInfoHolder.trackTimeRes = <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a>.getTimeErr();</div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>      extraInfoHolder.trackTime = float(tpcOrig.getTime0() * mTPCBinNS - bcOfTimeRef * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a>);</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>      extraInfoHolder.diffBCRef = <a class="code hl_class" href="../../d1/da0/classint.html">int</a>(bcOfTimeRef);</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>      extraInfoHolder.isTPConly = <span class="keyword">true</span>; <span class="comment">// no truncation</span></div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>      extraInfoHolder.flags |= <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a4ac7266a17959accab2fdcdd343484ff">o2::aod::track::TrackTimeAsym</a>;</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> == <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a26ebad14bf7d16ec3d7b00bd5dc612da">GIndex::ITSTPC</a>) { <span class="comment">// its-tpc matched tracks have gaussian time error and the time was not set above</span></div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trITSTPC = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCITSTrack(trackIndex);</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>      <span class="keyword">auto</span> ts = trITSTPC.getTimeMUS();</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>      setTrackTime(ts.getTimeStamp() * 1.e3, ts.getTimeStampError() * 1.e3, <span class="keyword">true</span>);</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>    }</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>  }</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span> </div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>  extrapolateToCalorimeters(extraInfoHolder, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackParamOut(trackIndex));</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>  <span class="comment">// set bit encoding for PVContributor property as part of the flag field</span></div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>  <span class="keywordflow">if</span> (trackIndex.<a class="code hl_function" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html#a275b9da99dae9099b2565ed0dffd235d">isPVContributor</a>()) {</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>    extraInfoHolder.flags |= <a class="code hl_enumvalue" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a61d54fb66a00029840737c813dd535f6">o2::aod::track::PVContributor</a>;</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>  }</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>  <span class="keywordflow">return</span> extraInfoHolder;</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>}</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span> </div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>AODProducerWorkflowDPL::TrackQA AODProducerWorkflowDPL::processBarrelTrackQA(<span class="keywordtype">int</span> collisionID, std::uint64_t collisionBC, <a class="code hl_class" href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">GIndex</a> trackIndex,</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>                                                                             <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, <span class="keyword">const</span> std::map&lt;uint64_t, int&gt;&amp; bcsMap)</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>{</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>  <a class="code hl_enumvalue" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ae53f095186cc45fe9d3f6ba714d09047ad313fa03fe7d48393c7e3d7d7073e0a1">TrackQA</a> trackQAHolder;</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>  <span class="keyword">auto</span> contributorsGID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCContributorGID(trackIndex);</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trackPar = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackParam(trackIndex);</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>  <span class="keywordflow">if</span> (contributorsGID.isIndexSet()) {</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>    <span class="keyword">auto</span> prop = <a class="code hl_function" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#ae2d15b8a99ba7e2ea3b892704edad6e5">o2::base::Propagator::Instance</a>();</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpcOrig = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCTrack(contributorsGID);</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>    <a class="code hl_class" href="../../d0/dc6/classo2_1_1track_1_1TrackParametrization.html">o2::track::TrackParametrization&lt;float&gt;</a> tpcTMP = tpcOrig;                                             </div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>    <span class="keyword">const</span> <a class="code hl_enumeration" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a37e21e14c8991b4f61e32fe71508a37a">o2::base::Propagator::MatCorrType</a> mMatType = o2::base::Propagator::MatCorrType::USEMatCorrLUT; </div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../dc/d08/classo2_1_1dataformats_1_1VertexBase.html">o2::dataformats::VertexBase</a> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> = mVtx.<a class="code hl_function" href="../../da/ddf/classo2_1_1dataformats_1_1MeanVertexObject.html#a5c324515cb0be10d5c3db0ac4d1eb4a7">getMeanVertex</a>(collisionID &lt; 0 ? 0.f : <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPrimaryVertex(collisionID).getZ());</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>    std::array&lt;float, 2&gt; dcaInfo{-999., -999.};</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>    <span class="keywordflow">if</span> (prop-&gt;propagateToDCABxByBz({v.getX(), v.getY(), v.getZ()}, tpcTMP, 2.f, mMatType, &amp;dcaInfo)) {</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>      trackQAHolder.tpcdcaR = 100. * dcaInfo[0] / sqrt(1. + trackPar.getQ2Pt() * trackPar.getQ2Pt());</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>      trackQAHolder.tpcdcaZ = 100. * dcaInfo[1] / sqrt(1. + trackPar.getQ2Pt() * trackPar.getQ2Pt());</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>    }</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>    <span class="comment">// This allows to safely clamp any float to one byte, using the</span></div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>    <span class="comment">// minmal/maximum values as under-/overflow borders and rounding to the nearest integer</span></div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>    <span class="keyword">auto</span> safeInt8Clamp = [](<span class="keyword">auto</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>) -&gt; int8_t {</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>      <span class="keyword">using </span>ValType = <span class="keyword">decltype</span>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>);</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(TMath::Nint(std::clamp(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>, <span class="keyword">static_cast&lt;</span>ValType<span class="keyword">&gt;</span>(std::numeric_limits&lt;int8_t&gt;::min()), <span class="keyword">static_cast&lt;</span>ValType<span class="keyword">&gt;</span>(std::numeric_limits&lt;int8_t&gt;::max()))));</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>    };</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>    <span class="keyword">auto</span> safeUInt8Clamp = [](<span class="keyword">auto</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>) -&gt; uint8_t {</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>      <span class="keyword">using </span>ValType = <span class="keyword">decltype</span>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>);</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a><span class="keyword">&gt;</span>(TMath::Nint(std::clamp(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a>, <span class="keyword">static_cast&lt;</span>ValType<span class="keyword">&gt;</span>(std::numeric_limits&lt;uint8_t&gt;::min()), <span class="keyword">static_cast&lt;</span>ValType<span class="keyword">&gt;</span>(std::numeric_limits&lt;uint8_t&gt;::max()))));</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>    };</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span> </div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>    <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a> clusterCounters[8] = {0};</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>    {</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>      <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a> sectorIndex, rowIndex;</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>      uint32_t clusterIndex;</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tpcClusRefs = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTPCTracksClusterRefs();</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; tpcOrig.getNClusterReferences(); <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>        o2::tpc::TrackTPC::getClusterReference(tpcClusRefs, <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>, sectorIndex, rowIndex, clusterIndex, tpcOrig.getClusterRef());</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>        <span class="keywordtype">char</span> indexTracklet = (rowIndex % 152) / 19;</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>        clusterCounters[indexTracklet]++;</div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>      }</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>    }</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>    <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a> byteMask = 0;</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; 8; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>      <span class="keywordflow">if</span> (clusterCounters[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] &gt; 5) {</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>        byteMask |= (1 &lt;&lt; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>);</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>      }</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>    }</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>    trackQAHolder.tpcTime0 = tpcOrig.getTime0();</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>    trackQAHolder.tpcClusterByteMask = byteMask;</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; dEdxInfoAlt = tpcOrig.getdEdxAlt(); <span class="comment">// tpcOrig.getdEdx()</span></div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> dEdxNorm = (dEdxInfoAlt.dEdxTotTPC &gt; 0) ? 100. / dEdxInfoAlt.dEdxTotTPC : 0;</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>    trackQAHolder.tpcdEdxNorm = dEdxInfoAlt.dEdxTotTPC;</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>    trackQAHolder.tpcdEdxMax0R = safeUInt8Clamp(dEdxInfoAlt.dEdxMaxIROC * dEdxNorm);</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>    trackQAHolder.tpcdEdxMax1R = safeUInt8Clamp(dEdxInfoAlt.dEdxMaxOROC1 * dEdxNorm);</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>    trackQAHolder.tpcdEdxMax2R = safeUInt8Clamp(dEdxInfoAlt.dEdxMaxOROC2 * dEdxNorm);</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>    trackQAHolder.tpcdEdxMax3R = safeUInt8Clamp(dEdxInfoAlt.dEdxMaxOROC3 * dEdxNorm);</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>    trackQAHolder.tpcdEdxTot0R = safeUInt8Clamp(dEdxInfoAlt.dEdxTotIROC * dEdxNorm);</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>    trackQAHolder.tpcdEdxTot1R = safeUInt8Clamp(dEdxInfoAlt.dEdxTotOROC1 * dEdxNorm);</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>    trackQAHolder.tpcdEdxTot2R = safeUInt8Clamp(dEdxInfoAlt.dEdxTotOROC2 * dEdxNorm);</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>    trackQAHolder.tpcdEdxTot3R = safeUInt8Clamp(dEdxInfoAlt.dEdxTotOROC3 * dEdxNorm);</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>    <span class="keywordtype">float</span> scaleTOF{0};</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>    <span class="keyword">auto</span> contributorsGIDA = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getSingleDetectorRefs(trackIndex);</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>    <span class="keywordflow">if</span> (contributorsGIDA[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aa07291753eb9dfbdde30f981e825f80c">GIndex::Source::TOF</a>].isIndexSet()) { <span class="comment">// ITS-TPC-TRD-TOF, ITS-TPC-TOF, TPC-TRD-TOF, TPC-TOF</span></div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tofMatch = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTOFMatch(trackIndex);</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>      <span class="keyword">const</span> <span class="keywordtype">float</span> qpt = trackPar.getQ2Pt();</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>      scaleTOF = std::sqrt(<a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a53c7bf2aff5431289f284a4c8cf94275">o2::aod::track::trackQAScaledTOF</a>[0] * <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a53c7bf2aff5431289f284a4c8cf94275">o2::aod::track::trackQAScaledTOF</a>[0] + qpt * qpt * <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a53c7bf2aff5431289f284a4c8cf94275">o2::aod::track::trackQAScaledTOF</a>[1] * <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a53c7bf2aff5431289f284a4c8cf94275">o2::aod::track::trackQAScaledTOF</a>[1]) / (2. * <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#acfa1bff691a8dddd48f6739321f8c24a">o2::aod::track::trackQAScaleBins</a>);</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>      trackQAHolder.dTofdX = safeInt8Clamp(tofMatch.getDXatTOF() / scaleTOF);</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>      trackQAHolder.dTofdZ = safeInt8Clamp(tofMatch.getDZatTOF() / scaleTOF);</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>    }</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span> </div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>    <span class="comment">// Add matching information at a reference point (defined by</span></div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>    <span class="comment">// o2::aod::track::trackQARefRadius) in the same frame as the global track</span></div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>    <span class="comment">// without material corrections and error propagation</span></div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> itsContGID = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSContributorGID(trackIndex); itsContGID.isIndexSet() &amp;&amp; itsContGID.getSource() != <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a37ab69e9f5d520a03ff3cd7d6173c72c">GIndex::ITSAB</a>) {</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; itsOrig = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSTrack(itsContGID);</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>      <a class="code hl_class" href="../../d0/dc6/classo2_1_1track_1_1TrackParametrization.html">o2::track::TrackPar</a> gloCopy = trackPar;</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>      <a class="code hl_class" href="../../d0/dc6/classo2_1_1track_1_1TrackParametrization.html">o2::track::TrackPar</a> itsCopy = itsOrig.getParamOut();</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>      <a class="code hl_class" href="../../d0/dc6/classo2_1_1track_1_1TrackParametrization.html">o2::track::TrackPar</a> tpcCopy = tpcOrig;</div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>      <span class="keywordflow">if</span> (prop-&gt;propagateToX(gloCopy, <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ade41c511b1e19ea1663e1bb736c74cff">o2::aod::track::trackQARefRadius</a>, prop-&gt;getNominalBz(), <a class="code hl_variable" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a422466380ea1dac7650c901472c45247">o2::base::Propagator::MAX_SIN_PHI</a>, <a class="code hl_variable" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a5aba54d06d26074134bfcd39ff120c96">o2::base::Propagator::MAX_STEP</a>, mMatCorr) &amp;&amp;</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>          prop-&gt;propagateToAlphaX(tpcCopy, gloCopy.getAlpha(), <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ade41c511b1e19ea1663e1bb736c74cff">o2::aod::track::trackQARefRadius</a>, <span class="keyword">false</span>, <a class="code hl_variable" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a422466380ea1dac7650c901472c45247">o2::base::Propagator::MAX_SIN_PHI</a>, <a class="code hl_variable" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a5aba54d06d26074134bfcd39ff120c96">o2::base::Propagator::MAX_STEP</a>, 1, mMatCorr) &amp;&amp;</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>          prop-&gt;propagateToAlphaX(itsCopy, gloCopy.getAlpha(), <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ade41c511b1e19ea1663e1bb736c74cff">o2::aod::track::trackQARefRadius</a>, <span class="keyword">false</span>, <a class="code hl_variable" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a422466380ea1dac7650c901472c45247">o2::base::Propagator::MAX_SIN_PHI</a>, <a class="code hl_variable" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a5aba54d06d26074134bfcd39ff120c96">o2::base::Propagator::MAX_STEP</a>, 1, mMatCorr)) {</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>        <span class="comment">// All tracks are now at the same radius and in the same frame and we can calculate the deltas wrt. to the global track</span></div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>        <span class="comment">// The scale is defined by the global track scaling depending on beta0</span></div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> beta0 = std::sqrt(std::min(50.f / tpcOrig.getdEdx().dEdxMaxTPC, 1.f));</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> qpt = gloCopy.getQ2Pt();</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a> = qpt / beta0;</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>        <span class="comment">// scaling is defined as sigmaBins/sqrt(p0^2 + (p1 * q/pt / beta)^2)</span></div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>        <span class="keyword">auto</span> scaleCont = [&amp;<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>](<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>) -&gt; <span class="keywordtype">float</span> {</div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>          <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#acfa1bff691a8dddd48f6739321f8c24a">o2::aod::track::trackQAScaleBins</a> / std::sqrt(<a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a98da7fac8530f5796b4c729a1ad8cd47">o2::aod::track::trackQAScaleContP0</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] * <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a98da7fac8530f5796b4c729a1ad8cd47">o2::aod::track::trackQAScaleContP0</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] + (<a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a76ec669ee4fb20ab5f63b623e6251049">o2::aod::track::trackQAScaleContP1</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] * <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>) * (<a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a76ec669ee4fb20ab5f63b623e6251049">o2::aod::track::trackQAScaleContP1</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] * <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>));</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>        };</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>        <span class="keyword">auto</span> scaleGlo = [&amp;<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>](<span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>) -&gt; <span class="keywordtype">float</span> {</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>          <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#acfa1bff691a8dddd48f6739321f8c24a">o2::aod::track::trackQAScaleBins</a> / std::sqrt(<a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a98dfbc3ee782243b9140b6b80d123eac">o2::aod::track::trackQAScaleGloP0</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] * <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a98dfbc3ee782243b9140b6b80d123eac">o2::aod::track::trackQAScaleGloP0</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] + (<a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#abeddd0542ef96af8bd26810f95ceaad3">o2::aod::track::trackQAScaleGloP1</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] * <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>) * (<a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#abeddd0542ef96af8bd26810f95ceaad3">o2::aod::track::trackQAScaleGloP1</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] * <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>));</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>        };</div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span> </div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>        <span class="comment">// Calculate deltas for contributors</span></div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>        trackQAHolder.dRefContY = safeInt8Clamp((itsCopy.getY() - tpcCopy.getY()) * scaleCont(0));</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>        trackQAHolder.dRefContZ = safeInt8Clamp((itsCopy.getZ() - tpcCopy.getZ()) * scaleCont(1));</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>        trackQAHolder.dRefContSnp = safeInt8Clamp((itsCopy.getSnp() - tpcCopy.getSnp()) * scaleCont(2));</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span>        trackQAHolder.dRefContTgl = safeInt8Clamp((itsCopy.getTgl() - tpcCopy.getTgl()) * scaleCont(3));</div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>        trackQAHolder.dRefContQ2Pt = safeInt8Clamp((itsCopy.getQ2Pt() - tpcCopy.getQ2Pt()) * scaleCont(4));</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>        <span class="comment">// Calculate deltas for global track against averaged contributors</span></div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>        trackQAHolder.dRefGloY = safeInt8Clamp(((itsCopy.getY() + tpcCopy.getY()) * 0.5f - gloCopy.getY()) * scaleGlo(0));</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>        trackQAHolder.dRefGloZ = safeInt8Clamp(((itsCopy.getZ() + tpcCopy.getZ()) * 0.5f - gloCopy.getZ()) * scaleGlo(1));</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>        trackQAHolder.dRefGloSnp = safeInt8Clamp(((itsCopy.getSnp() + tpcCopy.getSnp()) * 0.5f - gloCopy.getSnp()) * scaleGlo(2));</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>        trackQAHolder.dRefGloTgl = safeInt8Clamp(((itsCopy.getTgl() + tpcCopy.getTgl()) * 0.5f - gloCopy.getTgl()) * scaleGlo(3));</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>        trackQAHolder.dRefGloQ2Pt = safeInt8Clamp(((itsCopy.getQ2Pt() + tpcCopy.getQ2Pt()) * 0.5f - gloCopy.getQ2Pt()) * scaleGlo(4));</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>        <span class="comment">//</span></div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span> </div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>        <span class="keywordflow">if</span> (mStreamerFlags[<a class="code hl_enumvalue" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ae53f095186cc45fe9d3f6ba714d09047ad313fa03fe7d48393c7e3d7d7073e0a1">AODProducerStreamerFlags::TrackQA</a>]) {</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>          (*mStreamer) &lt;&lt; <span class="stringliteral">&quot;trackQA&quot;</span></div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>                       &lt;&lt; <span class="stringliteral">&quot;trackITSOrig=&quot;</span> &lt;&lt; itsOrig</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>                       &lt;&lt; <span class="stringliteral">&quot;trackTPCOrig=&quot;</span> &lt;&lt; tpcOrig</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>                       &lt;&lt; <span class="stringliteral">&quot;trackITSTPCOrig=&quot;</span> &lt;&lt; trackPar</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>                       &lt;&lt; <span class="stringliteral">&quot;trackITSProp=&quot;</span> &lt;&lt; itsCopy</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>                       &lt;&lt; <span class="stringliteral">&quot;trackTPCProp=&quot;</span> &lt;&lt; tpcCopy</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>                       &lt;&lt; <span class="stringliteral">&quot;trackITSTPCProp=&quot;</span> &lt;&lt; gloCopy</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>                       &lt;&lt; <span class="stringliteral">&quot;refRadius=&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ade41c511b1e19ea1663e1bb736c74cff">o2::aod::track::trackQARefRadius</a></div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleBins=&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#acfa1bff691a8dddd48f6739321f8c24a">o2::aod::track::trackQAScaleBins</a></div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleCont0=&quot;</span> &lt;&lt; scaleCont(0)</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleCont1=&quot;</span> &lt;&lt; scaleCont(1)</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleCont2=&quot;</span> &lt;&lt; scaleCont(2)</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleCont3=&quot;</span> &lt;&lt; scaleCont(3)</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleCont4=&quot;</span> &lt;&lt; scaleCont(4)</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleGlo0=&quot;</span> &lt;&lt; scaleGlo(0)</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleGlo1=&quot;</span> &lt;&lt; scaleGlo(1)</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleGlo2=&quot;</span> &lt;&lt; scaleGlo(2)</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleGlo3=&quot;</span> &lt;&lt; scaleGlo(3)</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleGlo4=&quot;</span> &lt;&lt; scaleGlo(4)</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcTime0=&quot;</span> &lt;&lt; trackQAHolder.tpcTime0</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxNorm=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxNorm</div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdcaR=&quot;</span> &lt;&lt; trackQAHolder.tpcdcaR</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdcaZ=&quot;</span> &lt;&lt; trackQAHolder.tpcdcaZ</div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdcaClusterByteMask=&quot;</span> &lt;&lt; trackQAHolder.tpcClusterByteMask</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxMax0R=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxMax0R</div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxMax1R=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxMax1R</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxMax2R=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxMax2R</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxMax3R=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxMax3R</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxTot0R=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxTot0R</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxTot1R=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxTot1R</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxTot2R=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxTot2R</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.tpcdEdxTot3R=&quot;</span> &lt;&lt; trackQAHolder.tpcdEdxTot3R</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefContY=&quot;</span> &lt;&lt; trackQAHolder.dRefContY</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefContZ=&quot;</span> &lt;&lt; trackQAHolder.dRefContZ</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefContSnp=&quot;</span> &lt;&lt; trackQAHolder.dRefContSnp</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefContTgl=&quot;</span> &lt;&lt; trackQAHolder.dRefContTgl</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefContQ2Pt=&quot;</span> &lt;&lt; trackQAHolder.dRefContQ2Pt</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefGloY=&quot;</span> &lt;&lt; trackQAHolder.dRefGloY</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefGloZ=&quot;</span> &lt;&lt; trackQAHolder.dRefGloZ</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefGloSnp=&quot;</span> &lt;&lt; trackQAHolder.dRefGloSnp</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefGloTgl=&quot;</span> &lt;&lt; trackQAHolder.dRefGloTgl</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dRefGloQ2Pt=&quot;</span> &lt;&lt; trackQAHolder.dRefGloQ2Pt</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dTofdX=&quot;</span> &lt;&lt; trackQAHolder.dTofdX</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>                       &lt;&lt; <span class="stringliteral">&quot;trackQAHolder.dTofdZ=&quot;</span> &lt;&lt; trackQAHolder.dTofdZ</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>                       &lt;&lt; <span class="stringliteral">&quot;scaleTOF=&quot;</span> &lt;&lt; scaleTOF</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>                       &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>        }</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>      }</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>    }</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>  }</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span> </div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>  <span class="keywordflow">return</span> trackQAHolder;</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>}</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span> </div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span><span class="keywordtype">bool</span> AODProducerWorkflowDPL::propagateTrackToPV(<a class="code hl_class" href="../../dc/dbe/classo2_1_1track_1_1TrackParametrizationWithError.html">o2::track::TrackParametrizationWithError&lt;float&gt;</a>&amp; trackPar,</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>                                                <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>,</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>                                                <span class="keywordtype">int</span> colID)</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>{</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>  <a class="code hl_class" href="../../db/d0f/classo2_1_1dataformats_1_1DCA.html">o2::dataformats::DCA</a> dcaInfo;</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>  dcaInfo.set(999.f, 999.f, 999.f, 999.f, 999.f);</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>  <a class="code hl_class" href="../../dc/d08/classo2_1_1dataformats_1_1VertexBase.html">o2::dataformats::VertexBase</a> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> = mVtx.<a class="code hl_function" href="../../da/ddf/classo2_1_1dataformats_1_1MeanVertexObject.html#a5c324515cb0be10d5c3db0ac4d1eb4a7">getMeanVertex</a>(colID &lt; 0 ? 0.f : <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getPrimaryVertex(colID).getZ());</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#ae2d15b8a99ba7e2ea3b892704edad6e5">o2::base::Propagator::Instance</a>()-&gt;propagateToDCABxByBz(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>, trackPar, 2.f, mMatCorr, &amp;dcaInfo);</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>}</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span> </div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::extrapolateToCalorimeters(TrackExtraInfo&amp; extraInfoHolder, <span class="keyword">const</span> <a class="code hl_class" href="../../d0/dc6/classo2_1_1track_1_1TrackParametrization.html">o2::track::TrackPar</a>&amp; track)</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>{</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>  <span class="keyword">constexpr</span> <span class="keywordtype">float</span> XEMCAL = 440.f, XPHOS = 460.f, XEMCAL2 = XEMCAL * XEMCAL;</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>  <span class="keyword">constexpr</span> <span class="keywordtype">float</span> ETAEMCAL = 0.75;                                  <span class="comment">// eta of EMCAL/DCAL with margin</span></div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>  <span class="keyword">constexpr</span> <span class="keywordtype">float</span> ZEMCALFastCheck = 460.;                           <span class="comment">// Max Z (with margin to check with straightline extrapolarion)</span></div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>  <span class="keyword">constexpr</span> <span class="keywordtype">float</span> ETADCALINNER = 0.22;                              <span class="comment">// eta of the DCAL PHOS Hole (at XEMCAL)</span></div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>  <span class="keyword">constexpr</span> <span class="keywordtype">float</span> ETAPHOS = 0.13653194;                             <span class="comment">// nominal eta of the PHOS acceptance (at XPHOS): -log(tan((TMath::Pi()/2 - atan2(63, 460))/2))</span></div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>  <span class="keyword">constexpr</span> <span class="keywordtype">float</span> ETAPHOSMARGIN = 0.17946979;                       <span class="comment">// etat of the PHOS acceptance with 20 cm margin (at XPHOS): -log(tan((TMath::Pi()/2 + atan2(63+20., 460))/2)), not used, for the ref only</span></div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>  <span class="keyword">constexpr</span> <span class="keywordtype">float</span> ETADCALPHOSSWITCH = (ETADCALINNER + ETAPHOS) / 2; <span class="comment">// switch to DCAL to PHOS check if eta &lt; this value</span></div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>  <span class="keyword">constexpr</span> <span class="keywordtype">short</span> SNONE = 0, SEMCAL = 0x1, SPHOS = 0x2;</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>  <span class="keyword">constexpr</span> <span class="keywordtype">short</span> SECTORTYPE[18] = {</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>    SNONE, SNONE, SNONE, SNONE,                     <span class="comment">// 0:3</span></div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>    SEMCAL, SEMCAL, SEMCAL, SEMCAL, SEMCAL, SEMCAL, <span class="comment">// 3:9 EMCAL only</span></div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>    SNONE, SNONE,                                   <span class="comment">// 10:11</span></div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>    SPHOS,                                          <span class="comment">// 12 PHOS only</span></div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>    SPHOS | SEMCAL, SPHOS | SEMCAL, SPHOS | SEMCAL, <span class="comment">// 13:15 PHOS &amp; DCAL</span></div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>    SEMCAL,                                         <span class="comment">// 16 DCAL only</span></div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>    SNONE                                           <span class="comment">// 17</span></div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>  };</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span> </div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>  <a class="code hl_class" href="../../d0/dc6/classo2_1_1track_1_1TrackParametrization.html">o2::track::TrackPar</a> outTr{track};</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>  <span class="keyword">auto</span> prop = <a class="code hl_function" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#ae2d15b8a99ba7e2ea3b892704edad6e5">o2::base::Propagator::Instance</a>();</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>  <span class="comment">// 1st propagate to EMCAL nominal radius</span></div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>  <span class="keywordtype">float</span> xtrg = 0;</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>  <span class="comment">// quick check with straight line propagtion</span></div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>  <span class="keywordflow">if</span> (!outTr.getXatLabR(XEMCAL, xtrg, prop-&gt;getNominalBz(), <a class="code hl_enumvalue" href="../../d1/dec/namespaceo2_1_1track.html#aa4ee9a4303d6355e268d170a55dcd549ab1f0a6f7cb4d4d526476e424f6a79532">o2::track::DirType::DirOutward</a>) ||</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>      (std::abs(outTr.getZAt(xtrg, 0)) &gt; ZEMCALFastCheck) ||</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>      !prop-&gt;PropagateToXBxByBz(outTr, xtrg, 0.95, 10, o2::base::Propagator::MatCorrType::USEMatCorrLUT)) {</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>    LOGP(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>, <span class="stringliteral">&quot;preliminary step: does not reach R={} {}&quot;</span>, XEMCAL, outTr.asString());</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>  }</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>  <span class="comment">// we do not necessarilly reach wanted radius in a single propagation</span></div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>  <span class="keywordflow">if</span> ((outTr.getX() * outTr.getX() + outTr.getY() * outTr.getY() &lt; XEMCAL2) &amp;&amp;</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>      (!outTr.rotateParam(outTr.getPhi()) ||</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>       !outTr.getXatLabR(XEMCAL, xtrg, prop-&gt;getNominalBz(), <a class="code hl_enumvalue" href="../../d1/dec/namespaceo2_1_1track.html#aa4ee9a4303d6355e268d170a55dcd549ab1f0a6f7cb4d4d526476e424f6a79532">o2::track::DirType::DirOutward</a>) ||</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>       !prop-&gt;PropagateToXBxByBz(outTr, xtrg, 0.95, 10, o2::base::Propagator::MatCorrType::USEMatCorrLUT))) {</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>    LOGP(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>, <span class="stringliteral">&quot;does not reach R={} {}&quot;</span>, XEMCAL, outTr.asString());</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>  }</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>  <span class="comment">// rotate to proper sector</span></div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>  <span class="keywordtype">int</span> sector = <a class="code hl_function" href="../../d9/d2e/namespaceo2_1_1math__utils.html#a6798caafc5ff1a5d43e447fce8c074fd">o2::math_utils::angle2Sector</a>(outTr.getPhiPos());</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span> </div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>  <span class="keyword">auto</span> propExactSector = [&amp;outTr, &amp;sector, prop](<span class="keywordtype">float</span> xprop) -&gt; <span class="keywordtype">bool</span> { <span class="comment">// propagate exactly to xprop in the proper sector frame</span></div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>    <span class="keywordtype">int</span> ntri = 0;</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>    <span class="keywordflow">while</span> (ntri &lt; 2) {</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>      <span class="keyword">auto</span> outTrTmp = outTr;</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>      <span class="keywordtype">float</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a090ebe65994a3ee4bb60ae3472abffc5">alpha</a> = <a class="code hl_function" href="../../d9/d2e/namespaceo2_1_1math__utils.html#ad197130429f45badc6b2db9bca23fc03">o2::math_utils::sector2Angle</a>(sector);</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>      <span class="keywordflow">if</span> ((std::abs(outTr.getZ()) &gt; ZEMCALFastCheck) || !outTrTmp.rotateParam(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a090ebe65994a3ee4bb60ae3472abffc5">alpha</a>) ||</div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>          !prop-&gt;PropagateToXBxByBz(outTrTmp, xprop, 0.95, 10, o2::base::Propagator::MatCorrType::USEMatCorrLUT)) {</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>        LOGP(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>, <span class="stringliteral">&quot;failed on rotation to {} (sector {}) or propagation to X={} {}&quot;</span>, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a090ebe65994a3ee4bb60ae3472abffc5">alpha</a>, sector, xprop, outTrTmp.asString());</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>      }</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>      <span class="comment">// make sure we are still in the target sector</span></div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>      <span class="keywordtype">int</span> sectorTmp = <a class="code hl_function" href="../../d9/d2e/namespaceo2_1_1math__utils.html#a6798caafc5ff1a5d43e447fce8c074fd">o2::math_utils::angle2Sector</a>(outTrTmp.getPhiPos());</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>      <span class="keywordflow">if</span> (sectorTmp == sector) {</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>        outTr = outTrTmp;</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>      }</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>      sector = sectorTmp;</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>      ntri++;</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>    }</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>    <span class="keywordflow">if</span> (ntri == 2) {</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>      LOGP(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>, <span class="stringliteral">&quot;failed to rotate to sector, {}&quot;</span>, outTr.asString());</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span>    }</div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>  };</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span> </div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>  <span class="comment">// we are at the EMCAL X, check if we are in the good sector</span></div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>  <span class="keywordflow">if</span> (!propExactSector(XEMCAL) || SECTORTYPE[sector] == SNONE) { <span class="comment">// propagation failed or neither EMCAL not DCAL/PHOS</span></div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>  }</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span> </div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>  <span class="comment">// check if we are in a good eta range</span></div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>  <span class="keywordtype">float</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a> = std::sqrt(outTr.getX() * outTr.getX() + outTr.getY() * outTr.getY()), tg = std::atan2(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a>, outTr.getZ());</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>  <span class="keywordtype">float</span> eta = -std::log(std::tan(0.5f * tg)), etaAbs = std::abs(eta);</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>  <span class="keywordflow">if</span> (etaAbs &gt; ETAEMCAL) {</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>    LOGP(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>, <span class="stringliteral">&quot;eta = {} is off at EMCAL radius&quot;</span>, eta, outTr.asString());</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>  }</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>  <span class="comment">// are we in the PHOS hole (with margin)?</span></div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>  <span class="keywordflow">if</span> ((SECTORTYPE[sector] &amp; SPHOS) &amp;&amp; etaAbs &lt; ETADCALPHOSSWITCH) { <span class="comment">// propagate to PHOS radius</span></div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>    <span class="keywordflow">if</span> (!propExactSector(XPHOS)) {</div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>    }</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>    <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a> = std::sqrt(outTr.getX() * outTr.getX() + outTr.getY() * outTr.getY());</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>    tg = std::atan2(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a>, outTr.getZ());</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>    eta = -std::log(std::tan(0.5f * tg));</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(SECTORTYPE[sector] &amp; SEMCAL)) { <span class="comment">// are in the sector with PHOS only</span></div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>  }</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>  extraInfoHolder.trackPhiEMCAL = outTr.getPhiPos();</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>  extraInfoHolder.trackEtaEMCAL = eta;</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>  LOGP(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>, <span class="stringliteral">&quot;eta = {} phi = {} sector {} for {}&quot;</span>, extraInfoHolder.trackEtaEMCAL, extraInfoHolder.trackPhiEMCAL, sector, outTr.asString());</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>  <span class="comment">//</span></div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>}</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span> </div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>std::set&lt;uint64_t&gt; AODProducerWorkflowDPL::filterEMCALIncomplete(<span class="keyword">const</span> gsl::span&lt;const o2::emcal::TriggerRecord&gt; triggers)</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>{</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>  std::set&lt;uint64_t&gt; emcalIncompletes;</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; trg : triggers) {</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>    <span class="keywordflow">if</span> (trg.getTriggerBits() &amp; o2::emcal::triggerbits::Inc) {</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>      <span class="comment">// trigger record masked at incomplete at readout level</span></div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>      emcalIncompletes.insert(trg.getBCData().toLong());</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>    }</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span>  }</div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>  <span class="keywordflow">return</span> emcalIncompletes;</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>}</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span> </div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::updateTimeDependentParams(<a class="code hl_class" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">ProcessingContext</a>&amp; pc)</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>{</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>  <a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ac9cf926cbc032a82e62ad829314ec0a5">o2::base::GRPGeomHelper::instance</a>().<a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#a1edaf4c168d4d1e10bd2732beff726a3">checkUpdates</a>(pc);</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>  <span class="keyword">static</span> <span class="keywordtype">bool</span> initOnceDone = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>  <span class="keywordflow">if</span> (!initOnceDone) { <span class="comment">// this params need to be queried only once</span></div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>    initOnceDone = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>    <span class="comment">// Note: DPLAlpideParam for ITS and MFT will be loaded by the RecoContainer</span></div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>    mSqrtS = <a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ac9cf926cbc032a82e62ad829314ec0a5">o2::base::GRPGeomHelper::instance</a>().<a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#a3894b6c8b46fc9d6849ee95f33085316">getGRPLHCIF</a>()-&gt;getSqrtS();</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>    <span class="comment">// apply settings</span></div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span>    <span class="keyword">auto</span> grpECS = <a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ac9cf926cbc032a82e62ad829314ec0a5">o2::base::GRPGeomHelper::instance</a>().<a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#aa704dae605b1b130c2bd663717cb2b09">getGRPECS</a>();</div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>    <a class="code hl_class" href="../../d6/dca/classo2_1_1BunchFilling.html">o2::BunchFilling</a> bcf = <a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ac9cf926cbc032a82e62ad829314ec0a5">o2::base::GRPGeomHelper::instance</a>().<a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#a3894b6c8b46fc9d6849ee95f33085316">getGRPLHCIF</a>()-&gt;getBunchFilling();</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>    std::bitset&lt;3564&gt; bs = bcf.<a class="code hl_function" href="../../d6/dca/classo2_1_1BunchFilling.html#ad4e1496a0108d0ef47631ec0735a42df">getBCPattern</a>();</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0U; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; bs.size(); <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>      <span class="keywordflow">if</span> (bs.test(<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>)) {</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>        <a class="code hl_function" href="../../d5/d2e/classo2_1_1tof_1_1Utils.html#a4be163090c417c31d4e67672767bb6ff">o2::tof::Utils::addInteractionBC</a>(<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>);</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>      }</div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>    }</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span> </div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; alpParamsITS = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::itsmft::DPLAlpideParam&lt;o2::detectors::DetID::ITS&gt;::Instance</a>();</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>    mITSROFrameHalfLengthNS = 0.5 * (grpECS-&gt;isDetContinuousReadOut(<a class="code hl_variable" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a55dd27091d307d75e3bf0a313f33ca4d">o2::detectors::DetID::ITS</a>) ? alpParamsITS.roFrameLengthInBC * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a> : alpParamsITS.roFrameLengthTrig);</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>    mITSROFBiasNS = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::itsmft::DPLAlpideParam&lt;o2::detectors::DetID::ITS&gt;::Instance</a>().roFrameBiasInBC * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a>;</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; alpParamsMFT = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::itsmft::DPLAlpideParam&lt;o2::detectors::DetID::MFT&gt;::Instance</a>();</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>    mMFTROFrameHalfLengthNS = 0.5 * (grpECS-&gt;isDetContinuousReadOut(<a class="code hl_variable" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a6f359c45ab3fc588145eb84b35f566e3">o2::detectors::DetID::MFT</a>) ? alpParamsMFT.roFrameLengthInBC * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a> : alpParamsMFT.roFrameLengthTrig);</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>    mMFTROFBiasNS = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::itsmft::DPLAlpideParam&lt;o2::detectors::DetID::MFT&gt;::Instance</a>().roFrameBiasInBC * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a>;</div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span> </div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>    <span class="comment">// RS FIXME: this is not yet fetched from the CCDB</span></div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>    <span class="keyword">auto</span>&amp; elParam = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::tpc::ParameterElectronics::Instance</a>();</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>    mTPCBinNS = elParam.ZbinWidth * 1.e3;</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span> </div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pvParams = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::vertexing::PVertexerParams::Instance</a>();</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>    mNSigmaTimeTrack = pvParams.nSigmaTimeTrack;</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>    mTimeMarginTrackTime = pvParams.timeMarginTrackTime * 1.e3;</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>    mFieldON = std::abs(<a class="code hl_function" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#ae2d15b8a99ba7e2ea3b892704edad6e5">o2::base::Propagator::Instance</a>()-&gt;getNominalBz()) &gt; 0.01;</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span> </div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>    pc.<a class="code hl_function" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a7862af0201c6d6a574a054d811f0eab3">inputs</a>().<a class="code hl_function" href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">get</a>&lt;<a class="code hl_class" href="../../da/df6/classo2_1_1ctp_1_1CTPConfiguration.html">o2::ctp::CTPConfiguration</a>*&gt;(<span class="stringliteral">&quot;ctpconfig&quot;</span>);</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>  }</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>  <span class="keywordflow">if</span> (mPropTracks) {</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>    pc.<a class="code hl_function" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a7862af0201c6d6a574a054d811f0eab3">inputs</a>().<a class="code hl_function" href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">get</a>&lt;<a class="code hl_class" href="../../da/ddf/classo2_1_1dataformats_1_1MeanVertexObject.html">o2::dataformats::MeanVertexObject</a>*&gt;(<span class="stringliteral">&quot;meanvtx&quot;</span>);</div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>  }</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>}</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span> </div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span><span class="comment">//_______________________________________</span></div>
<div class="foldopen" id="foldopen03021" data-start="{" data-end="}">
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"><a class="line" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a91da03feda3b580c499c76545a5a4894"> 3021</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a91da03feda3b580c499c76545a5a4894">AODProducerWorkflowDPL::finaliseCCDB</a>(<a class="code hl_struct" href="../../dd/d69/structo2_1_1framework_1_1ConcreteDataMatcher.html">ConcreteDataMatcher</a>&amp; matcher, <span class="keywordtype">void</span>* obj)</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>{</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>  <span class="comment">// Note: strictly speaking, for Configurable params we don&#39;t need finaliseCCDB check, the singletons are updated at the CCDB fetcher level</span></div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ac9cf926cbc032a82e62ad829314ec0a5">o2::base::GRPGeomHelper::instance</a>().<a class="code hl_function" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a91da03feda3b580c499c76545a5a4894">finaliseCCDB</a>(matcher, obj)) {</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>    <span class="keywordflow">if</span> (matcher == <a class="code hl_struct" href="../../dd/d69/structo2_1_1framework_1_1ConcreteDataMatcher.html">ConcreteDataMatcher</a>(<span class="stringliteral">&quot;GLO&quot;</span>, <span class="stringliteral">&quot;GRPMAGFIELD&quot;</span>, 0)) {</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>      <a class="code hl_function" href="../../d5/d6f/classo2_1_1mch_1_1TrackExtrap.html#a3820068e4ae7e7b3c7a0a668d40e21e1">o2::mch::TrackExtrap::setField</a>();</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>    }</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>  }</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>  <span class="keywordflow">if</span> (matcher == <a class="code hl_struct" href="../../dd/d69/structo2_1_1framework_1_1ConcreteDataMatcher.html">ConcreteDataMatcher</a>(<span class="stringliteral">&quot;ITS&quot;</span>, <span class="stringliteral">&quot;ALPIDEPARAM&quot;</span>, 0)) {</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;ITS Alpide param updated&quot;</span>;</div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; par = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::itsmft::DPLAlpideParam&lt;o2::detectors::DetID::ITS&gt;::Instance</a>();</div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>    par.printKeyValues();</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>  }</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>  <span class="keywordflow">if</span> (matcher == <a class="code hl_struct" href="../../dd/d69/structo2_1_1framework_1_1ConcreteDataMatcher.html">ConcreteDataMatcher</a>(<span class="stringliteral">&quot;MFT&quot;</span>, <span class="stringliteral">&quot;ALPIDEPARAM&quot;</span>, 0)) {</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;MFT Alpide param updated&quot;</span>;</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; par = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::itsmft::DPLAlpideParam&lt;o2::detectors::DetID::MFT&gt;::Instance</a>();</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>    par.printKeyValues();</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>  }</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>  <span class="keywordflow">if</span> (matcher == <a class="code hl_struct" href="../../dd/d69/structo2_1_1framework_1_1ConcreteDataMatcher.html">ConcreteDataMatcher</a>(<span class="stringliteral">&quot;GLO&quot;</span>, <span class="stringliteral">&quot;MEANVERTEX&quot;</span>, 0)) {</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Imposing new MeanVertex: &quot;</span> &lt;&lt; ((<span class="keyword">const</span> <a class="code hl_class" href="../../da/ddf/classo2_1_1dataformats_1_1MeanVertexObject.html">o2::dataformats::MeanVertexObject</a>*)obj)-&gt;asString();</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>    mVtx = *(<span class="keyword">const</span> <a class="code hl_class" href="../../da/ddf/classo2_1_1dataformats_1_1MeanVertexObject.html">o2::dataformats::MeanVertexObject</a>*)obj;</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>  }</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>  <span class="keywordflow">if</span> (matcher == <a class="code hl_struct" href="../../dd/d69/structo2_1_1framework_1_1ConcreteDataMatcher.html">ConcreteDataMatcher</a>(<span class="stringliteral">&quot;CTP&quot;</span>, <span class="stringliteral">&quot;CTPCONFIG&quot;</span>, 0)) {</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>    <span class="comment">// construct mask with EMCAL trigger classes for rejection of incomplete triggers</span></div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>    <span class="keyword">auto</span> ctpconfig = *(<span class="keyword">const</span> <a class="code hl_class" href="../../da/df6/classo2_1_1ctp_1_1CTPConfiguration.html">o2::ctp::CTPConfiguration</a>*)obj;</div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>    mEMCALTrgClassMask = 0;</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; trgclass : ctpconfig.getCTPClasses()) {</div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>      <span class="keywordflow">if</span> (trgclass.cluster-&gt;maskCluster[<a class="code hl_variable" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#ada6b92907ed98c5087c0c40784f8e8e5">o2::detectors::DetID::EMC</a>]) {</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>        mEMCALTrgClassMask |= trgclass.classMask;</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>      }</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>    }</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>    <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Loaded EMCAL trigger class mask: &quot;</span> &lt;&lt; std::bitset&lt;64&gt;(mEMCALTrgClassMask);</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>  }</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>}</div>
</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span> </div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span><span class="keywordtype">void</span> AODProducerWorkflowDPL::addRefGlobalBCsForTOF(<span class="keyword">const</span> <a class="code hl_class" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html">o2::dataformats::VtxTrackRef</a>&amp; trackRef, <span class="keyword">const</span> gsl::span&lt;const GIndex&gt;&amp; GIndices,</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>                                                   <span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, std::map&lt;uint64_t, int&gt;&amp; bcsMap)</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>{</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>  <span class="comment">// Orphan tracks need to refer to some globalBC and for tracks with TOF this BC should be whithin an orbit</span></div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>  <span class="comment">// from the track abs time (to guarantee time precision). Therefore, we may need to insert some dummy globalBCs</span></div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>  <span class="comment">// to guarantee proper reference.</span></div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>  <span class="comment">// complete globalBCs by dummy entries necessary to provide BC references for TOF tracks with requested precision</span></div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>  <span class="comment">// to provide a reference for the time of the orphan tracks we should make sure that there are no gaps longer</span></div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>  <span class="comment">// than needed to store the time with sufficient precision</span></div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span> </div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>  <span class="comment">// estimate max distance in BCs between TOF time and eventual reference BC</span></div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>  <span class="keywordtype">int</span> nbitsFrac = 24 - (32 - o2::math_utils::popcount(mTrackTime)); <span class="comment">// number of bits used to encode the fractional part of float truncated by the mask</span></div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>  <span class="keywordtype">int</span> nbitsLoss = std::max(0, <span class="keywordtype">int</span>(std::log2(TOFTimePrecPS)));       <span class="comment">// allowed bit loss guaranteeing needed precision in PS</span></div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>  assert(nbitsFrac &gt; 1);</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>  std::uint64_t maxRangePS = std::uint64_t(0x1) &lt;&lt; (nbitsFrac + nbitsLoss);</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>  <span class="keywordtype">int</span> maxGapBC = maxRangePS / (<a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a> * 1e3); <span class="comment">// max gap in BCs allowing to store time with required precision</span></div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Max gap of &quot;</span> &lt;&lt; maxGapBC &lt;&lt; <span class="stringliteral">&quot; BCs to closest globalBC reference is needed for TOF tracks to provide precision of &quot;</span></div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>            &lt;&lt; TOFTimePrecPS &lt;&lt; <span class="stringliteral">&quot; ps&quot;</span>;</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span> </div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>  <span class="comment">// check if there are tracks orphan tracks at all</span></div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>  <span class="keywordflow">if</span> (!trackRef.getEntries()) {</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>  }</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>  <span class="comment">// the bscMap has at least TF start BC</span></div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>  std::uint64_t maxBC = mStartIR.<a class="code hl_function" href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">toLong</a>();</div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tofClus = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTOFClusters();</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> = <a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a516bf7c7bca5465cad0ac01b61f66468">GIndex::NSources</a>; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>--;) {</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>    <span class="keywordflow">if</span> (!GIndex::getSourceDetectorsMask(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>)[<a class="code hl_variable" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#af7baa889d44ebd4ba11a43bc123c936e">o2::detectors::DetID::TOF</a>]) { <span class="comment">// check only tracks with TOF contribution</span></div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>    }</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> = trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7e85c4e425692f2a08b2a13c1ea980d4">getFirstEntryOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>    <span class="keywordtype">int</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a> = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a> + trackRef.<a class="code hl_function" href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7def086c20e01197faca2b09f9093a46">getEntriesOfSource</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>);</div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ti = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a>; ti &lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a>; ti++) {</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>      <span class="keyword">auto</span>&amp; trackIndex = GIndices[ti];</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tofMatch = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTOFMatch(trackIndex);</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tofInt = tofMatch.getLTIntegralOut();</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>      <span class="keywordtype">float</span> intLen = tofInt.getL();</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>      <span class="keywordtype">float</span> tofExpMom = 0.;</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>      <span class="keywordflow">if</span> (tofInt.getTOF(<a class="code hl_variable" href="../../d9/d0f/classo2_1_1track_1_1PID.html#a6db3f58ad4060aae142d35f3fbc8685f">o2::track::PID::Pion</a>) &gt; 0.f) {</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>        <span class="keywordtype">float</span> expBeta = (intLen / (tofInt.getTOF(<a class="code hl_variable" href="../../d9/d0f/classo2_1_1track_1_1PID.html#a6db3f58ad4060aae142d35f3fbc8685f">o2::track::PID::Pion</a>) * cSpeed));</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>        <span class="keywordflow">if</span> (expBeta &gt; <a class="code hl_variable" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#acff1f02c7cd46f9b6c4751df2eb34b11">o2::constants::math::Almost1</a>) {</div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>          expBeta = <a class="code hl_variable" href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#acff1f02c7cd46f9b6c4751df2eb34b11">o2::constants::math::Almost1</a>;</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>        }</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>        tofExpMom = <a class="code hl_variable" href="../../d7/df9/namespaceo2_1_1constants_1_1physics.html#afcff1b8c0ffb9ff6a21020323709d485">o2::constants::physics::MassPionCharged</a> * expBeta / std::sqrt(1.f - expBeta * expBeta);</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>      }</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>      <span class="keywordtype">double</span> massZ = o2::track::PID::getMass2Z(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getTrackParam(trackIndex).getPID());</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>      <span class="keywordtype">double</span> energy = sqrt((massZ * massZ) + (tofExpMom * tofExpMom));</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>      <span class="keywordtype">double</span> <a class="code hl_function" href="../../d2/d41/Detectors_2DCS_2src_2StringUtils_8cxx.html#ace2160f4712f738ceb0e0ee8c80fa04e">exp</a> = intLen * energy / (cSpeed * tofExpMom);</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>      <span class="keyword">auto</span> tofSignal = (tofMatch.getSignal() - <a class="code hl_function" href="../../d2/d41/Detectors_2DCS_2src_2StringUtils_8cxx.html#ace2160f4712f738ceb0e0ee8c80fa04e">exp</a>) * 1e-3; <span class="comment">// time in ns wrt TF start</span></div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>      <span class="keyword">auto</span> <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> = relativeTime_to_GlobalBC(tofSignal);</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span> </div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>      <span class="keyword">auto</span> it = bcsMap.lower_bound(<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>);</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>      <span class="keywordflow">if</span> (it == bcsMap.end() || it-&gt;first &gt; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> + maxGapBC) {</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>        bcsMap.emplace_hint(it, <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>, 1);</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;adding dummy BC &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>;</div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>      }</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a> &gt; maxBC) {</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>        maxBC = <a class="code hl_variable" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a>;</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>      }</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>    }</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>  }</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>  <span class="comment">// make sure there is a globalBC exceeding the max encountered bc</span></div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>  <span class="keywordflow">if</span> ((--bcsMap.end())-&gt;first &lt;= maxBC) {</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>    bcsMap.emplace_hint(bcsMap.end(), maxBC + 1, 1);</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>  }</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>  <span class="comment">// renumber BCs</span></div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>  <span class="keywordtype">int</span> bcID = 0;</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; item : bcsMap) {</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>    item.second = bcID;</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>    bcID++;</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>  }</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>}</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span> </div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>std::uint64_t AODProducerWorkflowDPL::fillBCSlice(<span class="keywordtype">int</span> (&amp;slice)[2], <span class="keywordtype">double</span> tmin, <span class="keywordtype">double</span> tmax, <span class="keyword">const</span> std::map&lt;uint64_t, int&gt;&amp; bcsMap)<span class="keyword"> const</span></div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span><span class="keyword"></span>{</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>  <span class="comment">// for ambiguous tracks (no or multiple vertices) we store the BC slice corresponding to track time window used for track-vertex matching,</span></div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>  <span class="comment">// see VertexTrackMatcher::extractTracks creator method, i.e. central time estimated +- uncertainty defined as:</span></div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>  <span class="comment">// 1) for tracks having a gaussian time error: PVertexerParams.nSigmaTimeTrack * trackSigma + PVertexerParams.timeMarginTrackTime</span></div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>  <span class="comment">// 2) for tracks having time uncertainty in a fixed time interval (TPC,ITS,MFT..): half of the interval + PVertexerParams.timeMarginTrackTime</span></div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>  <span class="comment">// The track time in the TrackExtraInfo is stored in ns wrt the collision BC for unambigous tracks and wrt bcSlice[0] for ambiguous ones,</span></div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>  <span class="comment">// with convention for errors: trackSigma in case (1) and half of the time interval for case (2) above.</span></div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span> </div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>  <span class="comment">// find indices of widest slice of global BCs in the map compatible with provided BC range. bcsMap is guaranteed to be non-empty.</span></div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>  <span class="comment">// We also assume that tmax &gt;= tmin.</span></div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span> </div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>  uint64_t bcMin = relativeTime_to_GlobalBC(tmin), bcMax = relativeTime_to_GlobalBC(tmax);</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span> </div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>  <span class="comment">/*</span></div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span><span class="comment">    // brute force way of searching bcs via direct binary search in the map</span></div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span><span class="comment">    auto lower = bcsMap.lower_bound(bcMin), upper = bcsMap.upper_bound(bcMax);</span></div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span><span class="comment"></span> </div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span><span class="comment">    if (lower == bcsMap.end()) {</span></div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span><span class="comment">      --lower;</span></div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span><span class="comment">    }</span></div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span><span class="comment">    if (upper != lower) {</span></div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span><span class="comment">      --upper;</span></div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span><span class="comment">    }</span></div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span><span class="comment">    slice[0] = std::distance(bcsMap.begin(), lower);</span></div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span><span class="comment">    slice[1] = std::distance(bcsMap.begin(), upper);</span></div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span><span class="comment">  */</span></div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span> </div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>  <span class="comment">// faster way to search in bunch crossing via the accelerated bunch crossing lookup structure</span></div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a> = mBCLookup.<a class="code hl_function" href="../../d2/de8/classo2_1_1aodproducer_1_1BunchCrossings.html#a3f3ce8875e0e5e9de9f11bf74a273c78">lower_bound</a>(bcMin);</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>  <span class="comment">// assuming that bcMax will be &gt;= bcMin and close to bcMin; we can find</span></div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>  <span class="comment">// the upper bound quickly by lineary iterating from p.first to the point where</span></div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>  <span class="comment">// the time becomes larger than bcMax.</span></div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>  <span class="comment">// (if this is not the case we could determine it with a similar call to mBCLookup)</span></div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>  <span class="keyword">auto</span>&amp; bcvector = mBCLookup.<a class="code hl_function" href="../../d2/de8/classo2_1_1aodproducer_1_1BunchCrossings.html#ae4d9cf3d445ce44b86aae3422daaeecf">getBCTimeVector</a>();</div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>  <span class="keyword">auto</span> upperindex = <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a>.first;</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>  <span class="keywordflow">while</span> (upperindex &lt; bcvector.size() &amp;&amp; bcvector[upperindex] &lt;= bcMax) {</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>    upperindex++;</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>  }</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>  <span class="keywordflow">if</span> (upperindex != <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a>.first) {</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>    upperindex--;</div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>  }</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>  slice[0] = <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a>.first;</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>  slice[1] = upperindex;</div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span> </div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>  <span class="keyword">auto</span> bcOfTimeRef = <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">p</a>.second - this-&gt;mStartIR.<a class="code hl_function" href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">toLong</a>();</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>  <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(<a class="code hl_variable" href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;BC slice t:&quot;</span> &lt;&lt; tmin &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; slice[0]</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>             &lt;&lt; <span class="stringliteral">&quot; t: &quot;</span> &lt;&lt; tmax &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; slice[1]</div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>             &lt;&lt; <span class="stringliteral">&quot; bcref: &quot;</span> &lt;&lt; bcOfTimeRef;</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>  <span class="keywordflow">return</span> bcOfTimeRef;</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>}</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span> </div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>std::vector&lt;uint8_t&gt; AODProducerWorkflowDPL::fillBCFlags(<span class="keyword">const</span> <a class="code hl_struct" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>, std::map&lt;uint64_t, int&gt;&amp; bcsMap)<span class="keyword"> const</span></div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span><span class="keyword"></span>{</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>  std::vector&lt;uint8_t&gt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa9459b47e7388437191d2d9a69c10d98">flags</a>(bcsMap.size());</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span> </div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>  <span class="comment">// flag BCs belonging to UPC mode ITS ROFs</span></div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>  <span class="keyword">auto</span> bcIt = bcsMap.begin();</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>  <span class="keyword">auto</span> itsrofs = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.getITSTracksROFRecords();</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>  <span class="keyword">auto</span> lROF = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::itsmft::DPLAlpideParam&lt;o2::detectors::DetID::ITS&gt;::Instance</a>().roFrameLengthInBC;</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>  <span class="keyword">auto</span> bROF = <a class="code hl_function" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::itsmft::DPLAlpideParam&lt;o2::detectors::DetID::ITS&gt;::Instance</a>().roFrameBiasInBC;</div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; rof : itsrofs) {</div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>    <span class="keywordflow">if</span> (!rof.getFlag(o2::itsmft::ROFRecord::VtxUPCMode)) {</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>    }</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>    uint64_t globalBC0 = rof.getBCData().toLong() + bROF, globalBC1 = globalBC0 + lROF - 1;</div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>    <span class="comment">// BCs are sorted, iterate until the start of ROF</span></div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>    <span class="keywordflow">while</span> (bcIt != bcsMap.end()) {</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>      <span class="keywordflow">if</span> (bcIt-&gt;first &lt; globalBC0) {</div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>        ++bcIt;</div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>      }</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>      <span class="keywordflow">if</span> (bcIt-&gt;first &gt; globalBC1) {</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>      }</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa9459b47e7388437191d2d9a69c10d98">flags</a>[bcIt-&gt;second] |= <a class="code hl_enumvalue" href="../../dd/d67/namespaceo2_1_1aod_1_1bc.html#afb1f2486ea016dba6a191a49ce0ff83bafbab8fc8fb1527843974e805c3f6e463">o2::aod::bc::ITSUPCMode</a>;</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>      ++bcIt;</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>    }</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>  }</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>  <span class="keywordflow">return</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#aa9459b47e7388437191d2d9a69c10d98">flags</a>;</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>}</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span> </div>
<div class="foldopen" id="foldopen03217" data-start="{" data-end="}">
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"><a class="line" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a76e868033dcfce5db1a9a02ddbd7756f"> 3217</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a76e868033dcfce5db1a9a02ddbd7756f">AODProducerWorkflowDPL::endOfStream</a>(<a class="code hl_class" href="../../da/de0/classo2_1_1framework_1_1EndOfStreamContext.html">EndOfStreamContext</a>&amp; <span class="comment">/*ec*/</span>)</div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span>{</div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>  LOGF(info, <span class="stringliteral">&quot;aod producer dpl total timing: Cpu: %.3e Real: %.3e s in %d slots&quot;</span>,</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>       mTimer.CpuTime(), mTimer.RealTime(), mTimer.Counter() - 1);</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span> </div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>  mStreamer.reset();</div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>}</div>
</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span> </div>
<div class="foldopen" id="foldopen03225" data-start="{" data-end="}">
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"><a class="line" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#aaee3fa668f4d09e1113891bf6e7a02a9"> 3225</a></span><a class="code hl_struct" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a> <a class="code hl_function" href="../../d3/dcc/namespaceo2_1_1aodproducer.html#aaee3fa668f4d09e1113891bf6e7a02a9">getAODProducerWorkflowSpec</a>(<a class="code hl_class" href="../../de/d8a/classo2_1_1gpu_1_1gpustd_1_1bitset.html">GID::mask_t</a> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>, <span class="keywordtype">bool</span> enableSV, <span class="keywordtype">bool</span> enableStrangenessTracking, <span class="keywordtype">bool</span> useMC, <span class="keywordtype">bool</span> CTPConfigPerRun, <span class="keywordtype">bool</span> enableFITextra)</div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>{</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>  <span class="keyword">auto</span> dataRequest = std::make_shared&lt;DataRequest&gt;();</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>  dataRequest-&gt;inputs.emplace_back(<span class="stringliteral">&quot;ctpconfig&quot;</span>, <span class="stringliteral">&quot;CTP&quot;</span>, <span class="stringliteral">&quot;CTPCONFIG&quot;</span>, 0, Lifetime::Condition, <a class="code hl_function" href="../../dd/d8d/namespaceo2_1_1framework.html#a8413f7e9639d0fe61b22c6fc672d421e">ccdbParamSpec</a>(<span class="stringliteral">&quot;CTP/Config/Config&quot;</span>, CTPConfigPerRun));</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span> </div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>  dataRequest-&gt;requestTracks(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>, useMC);</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>  dataRequest-&gt;requestPrimaryVertices(useMC);</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span>  <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aee53e854415cd94aeb620bd06edb6c90">GID::CTP</a>]) {</div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>    dataRequest-&gt;requestCTPDigits(useMC);</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>  }</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>  <span class="keywordflow">if</span> (enableSV) {</div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span>    dataRequest-&gt;requestSecondaryVertices(useMC);</div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span>  }</div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>  <span class="keywordflow">if</span> (enableStrangenessTracking) {</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>    dataRequest-&gt;requestStrangeTracks(useMC);</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>    LOGF(info, <span class="stringliteral">&quot;requestStrangeTracks Finish&quot;</span>);</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>  }</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>  <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">GID::ITS</a>]) {</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span>    dataRequest-&gt;requestClusters(<a class="code hl_function" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#a267749d16c9724ae4ef03ad25137bb6d">GIndex::getSourcesMask</a>(<span class="stringliteral">&quot;ITS&quot;</span>), <span class="keyword">false</span>);</div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>  }</div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span>  <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">GID::TPC</a>]) {</div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span>    dataRequest-&gt;requestClusters(<a class="code hl_function" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#a267749d16c9724ae4ef03ad25137bb6d">GIndex::getSourcesMask</a>(<span class="stringliteral">&quot;TPC&quot;</span>), <span class="keyword">false</span>); <span class="comment">// no need to ask for TOF clusters as they are requested with TOF tracks</span></div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>  }</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>  <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aa07291753eb9dfbdde30f981e825f80c">GID::TOF</a>]) {</div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>    dataRequest-&gt;requestTOFClusters(useMC);</div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>  }</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>  <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a596e1824b6b17f37370f59fcca3f0f06">GID::PHS</a>]) {</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>    dataRequest-&gt;requestPHOSCells(useMC);</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span>  }</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>  <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a65413089b5649238ad468a359d7b4dc7">GID::TRD</a>]) {</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>    dataRequest-&gt;requestTRDTracklets(<span class="keyword">false</span>);</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>  }</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>  <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a5b9c0be2be7dc67f15d392a4f7c40614">GID::EMC</a>]) {</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>    dataRequest-&gt;requestEMCALCells(useMC);</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>  }</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>  <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>[<a class="code hl_enumvalue" href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a51e15696a65701d33be1ada5b4952bc1">GID::CPV</a>]) {</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>    dataRequest-&gt;requestCPVClusters(useMC);</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>  }</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span> </div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>  <span class="keyword">auto</span> ggRequest = std::make_shared&lt;o2::base::GRPGeomRequest&gt;(<span class="keyword">true</span>,                              <span class="comment">// orbitResetTime</span></div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>                                                              <span class="keyword">true</span>,                              <span class="comment">// GRPECS=true</span></div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>                                                              <span class="keyword">true</span>,                              <span class="comment">// GRPLHCIF</span></div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>                                                              <span class="keyword">true</span>,                              <span class="comment">// GRPMagField</span></div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>                                                              <span class="keyword">true</span>,                              <span class="comment">// askMatLUT</span></div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>                                                              <a class="code hl_enumvalue" href="../../d8/d02/structo2_1_1base_1_1GRPGeomRequest.html#a919d6de2f837ec97126ab2f6b40ca029afc66371359756dd80ab4902da8b0efbd">o2::base::GRPGeomRequest::Aligned</a>, <span class="comment">// geometry</span></div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>                                                              dataRequest-&gt;inputs,</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>                                                              <span class="keyword">true</span>); <span class="comment">// query only once all objects except mag.field</span></div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span> </div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>  dataRequest-&gt;inputs.emplace_back(<span class="stringliteral">&quot;meanvtx&quot;</span>, <span class="stringliteral">&quot;GLO&quot;</span>, <span class="stringliteral">&quot;MEANVERTEX&quot;</span>, 0, Lifetime::Condition, <a class="code hl_function" href="../../dd/d8d/namespaceo2_1_1framework.html#a8413f7e9639d0fe61b22c6fc672d421e">ccdbParamSpec</a>(<span class="stringliteral">&quot;GLO/Calib/MeanVertex&quot;</span>, {}, 1));</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span> </div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>  <span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d0/d82/namespaceo2_1_1aod.html">o2::aod</a>;</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>  <span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d3/dcc/namespaceo2_1_1aodproducer.html">o2::aodproducer</a>;</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span> </div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>  std::vector&lt;OutputSpec&gt; outputs{</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;BCs&gt;::spec</a>(),</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;BCFlags&gt;::spec</a>(),</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;Cascades&gt;::spec</a>(),</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;Collisions&gt;::spec</a>(),</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;Decay3Bodys&gt;::spec</a>(),</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;FDDs&gt;::spec</a>(),</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;FDDsExtra&gt;::spec</a>(),</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;FT0s&gt;::spec</a>(),</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;FT0sExtra&gt;::spec</a>(),</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;FV0As&gt;::spec</a>(),</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;FV0AsExtra&gt;::spec</a>(),</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;StoredFwdTracks&gt;::spec</a>(),</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;StoredFwdTracksCov&gt;::spec</a>(),</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;StoredMFTTracks&gt;::spec</a>(),</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;StoredMFTTracksCov&gt;::spec</a>(),</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;StoredTracksIU&gt;::spec</a>(),</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;StoredTracksCovIU&gt;::spec</a>(),</div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;StoredTracksExtra&gt;::spec</a>(),</div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;TracksQA&gt;::spec</a>(),</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;TrackedCascades&gt;::spec</a>(),</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;TrackedV0s&gt;::spec</a>(),</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;Tracked3Bodys&gt;::spec</a>(),</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;AmbiguousTracks&gt;::spec</a>(),</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;AmbiguousMFTTracks&gt;::spec</a>(),</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;AmbiguousFwdTracks&gt;::spec</a>(),</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;FwdTrkCls&gt;::spec</a>(),</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;V0s&gt;::spec</a>(),</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;HMPIDs&gt;::spec</a>(),</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;Zdcs&gt;::spec</a>(),</div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;Calos&gt;::spec</a>(),</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;CaloTriggers&gt;::spec</a>(),</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;CPVClusters&gt;::spec</a>(),</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>    <a class="code hl_function" href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">OutputForTable&lt;Origins&gt;::spec</a>(),</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>    <a class="code hl_struct" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;TFN&quot;</span>, <span class="stringliteral">&quot;TFNumber&quot;</span>},</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>    <a class="code hl_struct" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;TFF&quot;</span>, <span class="stringliteral">&quot;TFFilename&quot;</span>},</div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>    <a class="code hl_struct" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;AMD&quot;</span>, <span class="stringliteral">&quot;AODMetadataKeys&quot;</span>},</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span>    <a class="code hl_struct" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;AMD&quot;</span>, <span class="stringliteral">&quot;AODMetadataVals&quot;</span>}};</div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span> </div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>  <span class="keywordflow">if</span> (useMC) {</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>    outputs.insert(outputs.end(),</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>                   {OutputForTable&lt;McCollisions&gt;::spec(),</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>                    OutputForTable&lt;HepMCXSections&gt;::spec(),</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>                    OutputForTable&lt;HepMCPdfInfos&gt;::spec(),</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>                    OutputForTable&lt;HepMCHeavyIons&gt;::spec(),</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>                    OutputForTable&lt;McMFTTrackLabels&gt;::spec(),</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>                    OutputForTable&lt;McFwdTrackLabels&gt;::spec(),</div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>                    OutputForTable&lt;StoredMcParticles_001&gt;::spec(),</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>                    OutputForTable&lt;McTrackLabels&gt;::spec(),</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>                    OutputForTable&lt;McCaloLabels_001&gt;::spec(),</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>                    <span class="comment">// todo: use addTableToOuput helper?</span></div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>                    <span class="comment">//  currently the description is MCCOLLISLABEL, so</span></div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>                    <span class="comment">//  the name in AO2D would be O2mccollislabel</span></div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>                    <span class="comment">// addTableToOutput&lt;McCollisionLabels&gt;(outputs);</span></div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>                    {OutputLabel{<span class="stringliteral">&quot;McCollisionLabels&quot;</span>}, <span class="stringliteral">&quot;AOD&quot;</span>, <span class="stringliteral">&quot;MCCOLLISIONLABEL&quot;</span>, 0, Lifetime::Timeframe}});</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>  }</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span> </div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span>  <span class="keywordflow">return</span> <a class="code hl_struct" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a>{</div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>    <span class="stringliteral">&quot;aod-producer-workflow&quot;</span>,</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>    dataRequest-&gt;<a class="code hl_variable" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html#aa23ca254935e2620924628468a1b4135">inputs</a>,</div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>    outputs,</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>    <a class="code hl_struct" href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">AlgorithmSpec</a>{adaptFromTask&lt;AODProducerWorkflowDPL&gt;(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>, dataRequest, ggRequest, enableSV, useMC, enableFITextra)},</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>    <a class="code hl_struct" href="../../db/d4f/structOptions.html">Options</a>{</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;run-number&quot;</span>, VariantType::Int64, -1L, {<span class="stringliteral">&quot;The run-number. If left default we try to get it from DPL header.&quot;</span>}},</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;aod-timeframe-id&quot;</span>, VariantType::Int64, -1L, {<span class="stringliteral">&quot;Set timeframe number&quot;</span>}},</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;fill-calo-cells&quot;</span>, VariantType::Int, 1, {<span class="stringliteral">&quot;Fill calo cells into cell table&quot;</span>}},</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;enable-truncation&quot;</span>, VariantType::Int, 1, {<span class="stringliteral">&quot;Truncation parameter: 1 -- on, != 1 -- off&quot;</span>}},</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;lpmp-prod-tag&quot;</span>, VariantType::String, <span class="stringliteral">&quot;&quot;</span>, {<span class="stringliteral">&quot;LPMProductionTag&quot;</span>}},</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;anchor-pass&quot;</span>, VariantType::String, <span class="stringliteral">&quot;&quot;</span>, {<span class="stringliteral">&quot;AnchorPassName&quot;</span>}},</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;anchor-prod&quot;</span>, VariantType::String, <span class="stringliteral">&quot;&quot;</span>, {<span class="stringliteral">&quot;AnchorProduction&quot;</span>}},</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;reco-pass&quot;</span>, VariantType::String, <span class="stringliteral">&quot;&quot;</span>, {<span class="stringliteral">&quot;RecoPassName&quot;</span>}},</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;created-by&quot;</span>, VariantType::String, <span class="stringliteral">&quot;&quot;</span>, {<span class="stringliteral">&quot;Who created this AO2D&quot;</span>}},</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;nthreads&quot;</span>, VariantType::Int, std::max(1, <span class="keywordtype">int</span>(std::thread::hardware_concurrency() / 2)), {<span class="stringliteral">&quot;Number of threads&quot;</span>}},</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;reco-mctracks-only&quot;</span>, VariantType::Int, 0, {<span class="stringliteral">&quot;Store only reconstructed MC tracks and their mothers/daughters. 0 -- off, != 0 -- on&quot;</span>}},</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;ctpreadout-create&quot;</span>, VariantType::Int, 0, {<span class="stringliteral">&quot;Create CTP digits from detector readout and CTP inputs. !=1 -- off, 1 -- on&quot;</span>}},</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;emc-select-leading&quot;</span>, VariantType::Bool, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Flag to select if only the leading contributing particle for an EMCal cell should be stored&quot;</span>}},</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;propagate-tracks&quot;</span>, VariantType::Bool, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Propagate tracks (not used for secondary vertices) to IP&quot;</span>}},</div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;propagate-tracks-max-xiu&quot;</span>, VariantType::Float, 5.0f, {<span class="stringliteral">&quot;Propagate tracks to IP if X_IU smaller than this value (and if propagate tracks enabled)&quot;</span>}},</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;hepmc-update&quot;</span>, VariantType::String, <span class="stringliteral">&quot;always&quot;</span>, {<span class="stringliteral">&quot;When to update HepMC Aux tables: always - force update, never - never update, all - if all keys are present, any - when any key is present (not valid yet)&quot;</span>}},</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;propagate-muons&quot;</span>, VariantType::Bool, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Propagate muons to IP&quot;</span>}},</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;thin-tracks&quot;</span>, VariantType::Bool, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Produce thinned track tables&quot;</span>}},</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;trackqc-keepglobaltracks&quot;</span>, VariantType::Bool, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Always keep TrackQA for global tracks&quot;</span>}},</div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;trackqc-retainonlydedx&quot;</span>, VariantType::Bool, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Keep only dEdx information, zero out everything else&quot;</span>}},</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;trackqc-fraction&quot;</span>, VariantType::Float, float(0.1), {<span class="stringliteral">&quot;Fraction of tracks to QC&quot;</span>}},</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;trackqc-NTrCut&quot;</span>, VariantType::Int64, 4L, {<span class="stringliteral">&quot;Minimal length of the track - in amount of tracklets&quot;</span>}},</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;trackqc-tpc-dca&quot;</span>, VariantType::Float, 3.f, {<span class="stringliteral">&quot;Keep TPC standalone track with this DCAxy to the PV&quot;</span>}},</div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;trackqc-tpc-cls&quot;</span>, VariantType::Int, 80, {<span class="stringliteral">&quot;Keep TPC standalone track with this #clusters&quot;</span>}},</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;trackqc-tpc-pt&quot;</span>, VariantType::Float, 0.2f, {<span class="stringliteral">&quot;Keep TPC standalone track with this pt&quot;</span>}},</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;with-streamers&quot;</span>, VariantType::String, <span class="stringliteral">&quot;&quot;</span>, {<span class="stringliteral">&quot;Bit-mask to steer writing of intermediate streamer files&quot;</span>}},</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;seed&quot;</span>, VariantType::Int, 0, {<span class="stringliteral">&quot;Set seed for random generator used for sampling (0 (default) means using a random_device)&quot;</span>}},</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>      <a class="code hl_class" href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">ConfigParamSpec</a>{<span class="stringliteral">&quot;mc-signal-filt&quot;</span>, VariantType::Bool, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Enable usage of signal filtering (only for MC with embedding)&quot;</span>}}}};</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>}</div>
</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span> </div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>} <span class="comment">// namespace o2::aodproducer</span></div>
<div class="ttc" id="aAODMcProducerHelpers_8h_html"><div class="ttname"><a href="../../dc/dcc/AODMcProducerHelpers_8h.html">AODMcProducerHelpers.h</a></div></div>
<div class="ttc" id="aAODProducerHelpers_8h_html"><div class="ttname"><a href="../../d2/d47/AODProducerHelpers_8h.html">AODProducerHelpers.h</a></div></div>
<div class="ttc" id="aAODProducerWorkflowSpec_8h_html"><div class="ttname"><a href="../../d2/d09/AODProducerWorkflowSpec_8h.html">AODProducerWorkflowSpec.h</a></div></div>
<div class="ttc" id="aAnalysisDataModel_8h_html"><div class="ttname"><a href="../../d2/d8c/AnalysisDataModel_8h.html">AnalysisDataModel.h</a></div></div>
<div class="ttc" id="aBCRecData_8h_html"><div class="ttname"><a href="../../d3/d82/BCRecData_8h.html">BCRecData.h</a></div><div class="ttdoc">Class to refer to the reconstructed information.</div></div>
<div class="ttc" id="aBasicCCDBManager_8h_html"><div class="ttname"><a href="../../d5/df3/BasicCCDBManager_8h.html">BasicCCDBManager.h</a></div></div>
<div class="ttc" id="aCCDBParamSpec_8h_html"><div class="ttname"><a href="../../d1/dcc/CCDBParamSpec_8h.html">CCDBParamSpec.h</a></div></div>
<div class="ttc" id="aCPV_2include_2DataFormatsCPV_2TriggerRecord_8h_html"><div class="ttname"><a href="../../d6/d7a/CPV_2include_2DataFormatsCPV_2TriggerRecord_8h.html">TriggerRecord.h</a></div></div>
<div class="ttc" id="aCascade_8h_html"><div class="ttname"><a href="../../d8/d16/Cascade_8h.html">Cascade.h</a></div></div>
<div class="ttc" id="aCommon_2Constants_2include_2CommonConstants_2Triggers_8h_html"><div class="ttname"><a href="../../d0/d0b/Common_2Constants_2include_2CommonConstants_2Triggers_8h.html">Triggers.h</a></div><div class="ttdoc">Definition of the 32 Central Trigger System (CTS) Trigger Types defined in https://twiki....</div></div>
<div class="ttc" id="aCommon_2MathUtils_2include_2MathUtils_2Utils_8h_html"><div class="ttname"><a href="../../d9/d52/Common_2MathUtils_2include_2MathUtils_2Utils_8h.html">Utils.h</a></div><div class="ttdoc">General auxilliary methods.</div></div>
<div class="ttc" id="aConfigParamRegistry_8h_html"><div class="ttname"><a href="../../de/dc6/ConfigParamRegistry_8h.html">ConfigParamRegistry.h</a></div></div>
<div class="ttc" id="aDPLAlpideParam_8h_html"><div class="ttname"><a href="../../d4/d35/DPLAlpideParam_8h.html">DPLAlpideParam.h</a></div></div>
<div class="ttc" id="aDataFormats_2Detectors_2CPV_2include_2DataFormatsCPV_2Cluster_8h_html"><div class="ttname"><a href="../../d1/d8b/DataFormats_2Detectors_2CPV_2include_2DataFormatsCPV_2Cluster_8h.html">Cluster.h</a></div></div>
<div class="ttc" id="aDataFormats_2Detectors_2CTP_2include_2DataFormatsCTP_2Configuration_8h_html"><div class="ttname"><a href="../../db/d7b/DataFormats_2Detectors_2CTP_2include_2DataFormatsCTP_2Configuration_8h.html">Configuration.h</a></div><div class="ttdoc">definition of CTPConfiguration and related CTP structures</div></div>
<div class="ttc" id="aDataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_html"><div class="ttname"><a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h.html">RecoContainer.h</a></div><div class="ttdoc">Wrapper container for different reconstructed object types.</div></div>
<div class="ttc" id="aDataFormats_2Detectors_2MUON_2MCH_2include_2DataFormatsMCH_2Cluster_8h_html"><div class="ttname"><a href="../../d1/d32/DataFormats_2Detectors_2MUON_2MCH_2include_2DataFormatsMCH_2Cluster_8h.html">Cluster.h</a></div><div class="ttdoc">Definition of the MCH cluster minimal structure.</div></div>
<div class="ttc" id="aDataFormats_2Detectors_2MUON_2MID_2include_2DataFormatsMID_2Track_8h_html"><div class="ttname"><a href="../../d4/d54/DataFormats_2Detectors_2MUON_2MID_2include_2DataFormatsMID_2Track_8h.html">Track.h</a></div><div class="ttdoc">Reconstructed MID track.</div></div>
<div class="ttc" id="aDataFormats_2Reconstruction_2include_2ReconstructionDataFormats_2Track_8h_html"><div class="ttname"><a href="../../d7/d8b/DataFormats_2Reconstruction_2include_2ReconstructionDataFormats_2Track_8h.html">Track.h</a></div><div class="ttdoc">Base track model for the Barrel, params only, w/o covariance.</div></div>
<div class="ttc" id="aDataTypes_8h_html"><div class="ttname"><a href="../../d2/d12/DataTypes_8h.html">DataTypes.h</a></div></div>
<div class="ttc" id="aDetectors_2DCS_2src_2StringUtils_8cxx_html_ace2160f4712f738ceb0e0ee8c80fa04e"><div class="ttname"><a href="../../d2/d41/Detectors_2DCS_2src_2StringUtils_8cxx.html#ace2160f4712f738ceb0e0ee8c80fa04e">exp</a></div><div class="ttdeci">uint64_t exp(uint64_t base, uint8_t exp) noexcept</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d41/Detectors_2DCS_2src_2StringUtils_8cxx_source.html#l00192">StringUtils.cxx:192</a></div></div>
<div class="ttc" id="aDetectors_2TOF_2base_2include_2TOFBase_2Utils_8h_html"><div class="ttname"><a href="../../df/da4/Detectors_2TOF_2base_2include_2TOFBase_2Utils_8h.html">Utils.h</a></div></div>
<div class="ttc" id="aDetectors_2ZDC_2base_2include_2ZDCBase_2Constants_8h_html"><div class="ttname"><a href="../../d3/dd7/Detectors_2ZDC_2base_2include_2ZDCBase_2Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aDigitizationContext_8h_html"><div class="ttname"><a href="../../d1/def/DigitizationContext_8h.html">DigitizationContext.h</a></div></div>
<div class="ttc" id="aDigits_8h_html"><div class="ttname"><a href="../../db/dfa/Digits_8h.html">Digits.h</a></div><div class="ttdoc">definition of CTPDigit, CTPInputDigit</div></div>
<div class="ttc" id="aEMCAL_2include_2DataFormatsEMCAL_2EventHandler_8h_html"><div class="ttname"><a href="../../d2/d5b/EMCAL_2include_2DataFormatsEMCAL_2EventHandler_8h.html">EventHandler.h</a></div></div>
<div class="ttc" id="aEMCAL_2include_2DataFormatsEMCAL_2TriggerRecord_8h_html"><div class="ttname"><a href="../../d9/d38/EMCAL_2include_2DataFormatsEMCAL_2TriggerRecord_8h.html">TriggerRecord.h</a></div></div>
<div class="ttc" id="aExpressionJSONHelpers_8cxx_html_a92b9653745b1ddd58664de621c944ba2"><div class="ttname"><a href="../../d8/d3c/ExpressionJSONHelpers_8cxx.html#a92b9653745b1ddd58664de621c944ba2">debug</a></div><div class="ttdeci">std::ostringstream debug</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/ExpressionJSONHelpers_8cxx_source.html#l00083">ExpressionJSONHelpers.cxx:83</a></div></div>
<div class="ttc" id="aFIT_2FT0_2base_2include_2FT0Base_2Geometry_8h_html"><div class="ttname"><a href="../../db/df4/FIT_2FT0_2base_2include_2FT0Base_2Geometry_8h.html">Geometry.h</a></div></div>
<div class="ttc" id="aFIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_html_a3a5a5583cf997a469e4210b22aee42de"><div class="ttname"><a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a3a5a5583cf997a469e4210b22aee42de">charge</a></div><div class="ttdeci">int16_t charge</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_source.html#l00005">RawEventData.h:5</a></div></div>
<div class="ttc" id="aFIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_html_a69f57c665a7c1786ab1cabe8248c91b4"><div class="ttname"><a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a69f57c665a7c1786ab1cabe8248c91b4">vertex</a></div><div class="ttdeci">uint64_t vertex</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_source.html#l00009">RawEventData.h:9</a></div></div>
<div class="ttc" id="aFIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_html_ac355e22520ebac0c4ddd29b9bf2af62f"><div class="ttname"><a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ac355e22520ebac0c4ddd29b9bf2af62f">bc</a></div><div class="ttdeci">uint64_t bc</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_source.html#l00005">RawEventData.h:5</a></div></div>
<div class="ttc" id="aFIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_html_ada647bc214b6ea2c35e94324a030afea"><div class="ttname"><a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#ada647bc214b6ea2c35e94324a030afea">time</a></div><div class="ttdeci">int16_t time</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_source.html#l00004">RawEventData.h:4</a></div></div>
<div class="ttc" id="aFT0_2include_2DataFormatsFT0_2RecPoints_8h_html"><div class="ttname"><a href="../../d2/d1e/FT0_2include_2DataFormatsFT0_2RecPoints_8h.html">RecPoints.h</a></div><div class="ttdoc">Definition of the FIT RecPoints class.</div></div>
<div class="ttc" id="aFV0_2include_2DataFormatsFV0_2RecPoints_8h_html"><div class="ttname"><a href="../../d8/d62/FV0_2include_2DataFormatsFV0_2RecPoints_8h.html">RecPoints.h</a></div><div class="ttdoc">Definition of the FV0 RecPoints class.</div></div>
<div class="ttc" id="aGPUCommonAlgorithm_8h_html_ad9484f5522d0e5f033037c369365ec61"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a></div><div class="ttdeci">int32_t i</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00435">GPUCommonAlgorithm.h:436</a></div></div>
<div class="ttc" id="aGPUTPCGMMergedTrackHit_8h_html"><div class="ttname"><a href="../../d3/dcc/GPUTPCGMMergedTrackHit_8h.html">GPUTPCGMMergedTrackHit.h</a></div></div>
<div class="ttc" id="aGPU_2GPUbenchmark_2Shared_2Utils_8h_html_a9ae3d2daf571bac422233166a6b6b056"><div class="ttname"><a href="../../d2/d51/GPU_2GPUbenchmark_2Shared_2Utils_8h.html#a9ae3d2daf571bac422233166a6b6b056">getType</a></div><div class="ttdeci">std::string getType()</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d51/GPU_2GPUbenchmark_2Shared_2Utils_8h_source.html#l00138">Utils.h:138</a></div></div>
<div class="ttc" id="aGRPECSObject_8h_html"><div class="ttname"><a href="../../db/dff/GRPECSObject_8h.html">GRPECSObject.h</a></div><div class="ttdoc">Header of the AggregatedRunInfo struct.</div></div>
<div class="ttc" id="aGlobalFwdTrack_8h_html"><div class="ttname"><a href="../../db/d6b/GlobalFwdTrack_8h.html">GlobalFwdTrack.h</a></div><div class="ttdoc">Global Forward Muon tracks.</div></div>
<div class="ttc" id="aGlobalTrackID_8h_html"><div class="ttname"><a href="../../da/d2b/GlobalTrackID_8h.html">GlobalTrackID.h</a></div><div class="ttdoc">Global index for barrel track: provides provenance (detectors combination), index in respective array...</div></div>
<div class="ttc" id="aInteractionRecord_8h_html"><div class="ttname"><a href="../../d9/d80/InteractionRecord_8h.html">InteractionRecord.h</a></div></div>
<div class="ttc" id="aMCEventLabel_8h_html"><div class="ttname"><a href="../../da/df0/MCEventLabel_8h.html">MCEventLabel.h</a></div></div>
<div class="ttc" id="aMCGenProperties_8h_html"><div class="ttname"><a href="../../d5/d80/MCGenProperties_8h.html">MCGenProperties.h</a></div></div>
<div class="ttc" id="aMCTrack_8h_html"><div class="ttname"><a href="../../d2/de2/MCTrack_8h.html">MCTrack.h</a></div><div class="ttdoc">Definition of the MCTrack class.</div></div>
<div class="ttc" id="aMCTruthContainer_8h_html"><div class="ttname"><a href="../../db/d14/MCTruthContainer_8h.html">MCTruthContainer.h</a></div><div class="ttdoc">Definition of a container to keep Monte Carlo truth external to simulation objects.</div></div>
<div class="ttc" id="aMCUtils_8h_html"><div class="ttname"><a href="../../de/d68/MCUtils_8h.html">MCUtils.h</a></div><div class="ttdoc">Utility functions for MC particles.</div></div>
<div class="ttc" id="aMUON_2MCH_2include_2DataFormatsMCH_2ROFRecord_8h_html"><div class="ttname"><a href="../../d1/d4b/MUON_2MCH_2include_2DataFormatsMCH_2ROFRecord_8h.html">ROFRecord.h</a></div><div class="ttdoc">Definition of the MCH ROFrame record.</div></div>
<div class="ttc" id="aMatchGlobalFwd_8h_html"><div class="ttname"><a href="../../de/dec/MatchGlobalFwd_8h.html">MatchGlobalFwd.h</a></div><div class="ttdoc">Class to perform MFT MCH (and MID) matching.</div></div>
<div class="ttc" id="aMatchInfoHMP_8h_html"><div class="ttname"><a href="../../d5/dc4/MatchInfoHMP_8h.html">MatchInfoHMP.h</a></div><div class="ttdoc">Class to store the output of the matching to HMPID.</div></div>
<div class="ttc" id="aMatchTOF_8h_html"><div class="ttname"><a href="../../d0/d74/MatchTOF_8h.html">MatchTOF.h</a></div><div class="ttdoc">Class to perform TOF matching to global tracks.</div></div>
<div class="ttc" id="aO2Version_8h_html"><div class="ttname"><a href="../../d7/d34/O2Version_8h.html">O2Version.h</a></div></div>
<div class="ttc" id="aPHOS_2include_2DataFormatsPHOS_2EventHandler_8h_html"><div class="ttname"><a href="../../dc/d78/PHOS_2include_2DataFormatsPHOS_2EventHandler_8h.html">EventHandler.h</a></div></div>
<div class="ttc" id="aPHOS_2include_2DataFormatsPHOS_2TriggerRecord_8h_html"><div class="ttname"><a href="../../d2/df1/PHOS_2include_2DataFormatsPHOS_2TriggerRecord_8h.html">TriggerRecord.h</a></div></div>
<div class="ttc" id="aPVertexerParams_8h_html"><div class="ttname"><a href="../../d4/deb/PVertexerParams_8h.html">PVertexerParams.h</a></div></div>
<div class="ttc" id="aParameterElectronics_8h_html"><div class="ttname"><a href="../../d3/d47/ParameterElectronics_8h.html">ParameterElectronics.h</a></div><div class="ttdoc">Definition of the parameter class for the detector electronics.</div></div>
<div class="ttc" id="aPhysicsConstants_8h_html"><div class="ttname"><a href="../../d3/d9d/PhysicsConstants_8h.html">PhysicsConstants.h</a></div><div class="ttdoc">Header to collect physics constants.</div></div>
<div class="ttc" id="aPrimaryVertex_8h_html"><div class="ttname"><a href="../../d7/d82/PrimaryVertex_8h.html">PrimaryVertex.h</a></div></div>
<div class="ttc" id="aRawData_8h_html_a5ee9234d389c6be7f0a75b450da09722"><div class="ttname"><a href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a></div><div class="ttdeci">uint32_t j</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d62/RawData_8h_source.html#l00000">RawData.h:0</a></div></div>
<div class="ttc" id="aRecPoint_8h_html"><div class="ttname"><a href="../../d8/d0c/RecPoint_8h.html">RecPoint.h</a></div><div class="ttdoc">Definition of the FDD RecPoint class.</div></div>
<div class="ttc" id="aStrangeTrack_8h_html"><div class="ttname"><a href="../../d4/dc9/StrangeTrack_8h.html">StrangeTrack.h</a></div></div>
<div class="ttc" id="aTRD_2include_2DataFormatsTRD_2TriggerRecord_8h_html"><div class="ttname"><a href="../../d9/dbe/TRD_2include_2DataFormatsTRD_2TriggerRecord_8h.html">TriggerRecord.h</a></div></div>
<div class="ttc" id="aTableBuilder_8h_html"><div class="ttname"><a href="../../d5/d98/TableBuilder_8h.html">TableBuilder.h</a></div></div>
<div class="ttc" id="aTrackExtrap_8h_html"><div class="ttname"><a href="../../d8/d9c/TrackExtrap_8h.html">TrackExtrap.h</a></div><div class="ttdoc">Definition of tools for track extrapolation.</div></div>
<div class="ttc" id="aTrackITS_8h_html"><div class="ttname"><a href="../../d1/d71/TrackITS_8h.html">TrackITS.h</a></div><div class="ttdoc">Definition of the ITS track.</div></div>
<div class="ttc" id="aTrackMCHMID_8h_html"><div class="ttname"><a href="../../d5/d28/TrackMCHMID_8h.html">TrackMCHMID.h</a></div><div class="ttdoc">Definition of the MUON track.</div></div>
<div class="ttc" id="aTrackMCH_8h_html"><div class="ttname"><a href="../../d1/d0b/TrackMCH_8h.html">TrackMCH.h</a></div><div class="ttdoc">Definition of the MCH track.</div></div>
<div class="ttc" id="aTrackMFT_8h_html"><div class="ttname"><a href="../../db/dd0/TrackMFT_8h.html">TrackMFT.h</a></div></div>
<div class="ttc" id="aTrackParam_8h_html"><div class="ttname"><a href="../../de/d4b/TrackParam_8h.html">TrackParam.h</a></div><div class="ttdoc">Definition of the MCH track parameters for internal use.</div></div>
<div class="ttc" id="aTrackTPCITS_8h_html"><div class="ttname"><a href="../../d5/d1e/TrackTPCITS_8h.html">TrackTPCITS.h</a></div><div class="ttdoc">Result of refitting TPC-ITS matched track.</div></div>
<div class="ttc" id="aTrackTPC_8h_html"><div class="ttname"><a href="../../d5/dc9/TrackTPC_8h.html">TrackTPC.h</a></div></div>
<div class="ttc" id="aTrackTRD_8h_html"><div class="ttname"><a href="../../dc/d2e/TrackTRD_8h.html">TrackTRD.h</a></div></div>
<div class="ttc" id="aTrackTriggerRecord_8h_html"><div class="ttname"><a href="../../da/d19/TrackTriggerRecord_8h.html">TrackTriggerRecord.h</a></div></div>
<div class="ttc" id="aTreeStreamRedirector_8h_html"><div class="ttname"><a href="../../d1/d22/TreeStreamRedirector_8h.html">TreeStreamRedirector.h</a></div></div>
<div class="ttc" id="aTsallis_8h_html"><div class="ttname"><a href="../../d5/dd5/Tsallis_8h.html">Tsallis.h</a></div></div>
<div class="ttc" id="aV0_8h_html"><div class="ttname"><a href="../../d0/d0c/V0_8h.html">V0.h</a></div></div>
<div class="ttc" id="aVtxTrackIndex_8h_html"><div class="ttname"><a href="../../d0/d00/VtxTrackIndex_8h.html">VtxTrackIndex.h</a></div><div class="ttdoc">Extention of GlobalTrackID by flags relevant for verter-track association.</div></div>
<div class="ttc" id="aVtxTrackRef_8h_html"><div class="ttname"><a href="../../d7/dac/VtxTrackRef_8h.html">VtxTrackRef.h</a></div><div class="ttdoc">Referenc on track indices contributing to the vertex, with possibility chose tracks from specific sou...</div></div>
<div class="ttc" id="aZDCEnergy_8h_html"><div class="ttname"><a href="../../d9/dc5/ZDCEnergy_8h.html">ZDCEnergy.h</a></div><div class="ttdoc">Container class to store energy released in the ZDC.</div></div>
<div class="ttc" id="aZDCTDCData_8h_html"><div class="ttname"><a href="../../d2/de7/ZDCTDCData_8h.html">ZDCTDCData.h</a></div><div class="ttdoc">Container class to store a TDC hit in a ZDC channel.</div></div>
<div class="ttc" id="abench__Clusterizer_8cxx_html_adc2980dd50ea866e70e476f11dca803b"><div class="ttname"><a href="../../d2/d12/bench__Clusterizer_8cxx.html#adc2980dd50ea866e70e476f11dca803b">nClusters</a></div><div class="ttdeci">int nClusters</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/bench__Clusterizer_8cxx_source.html#l00120">bench_Clusterizer.cxx:120</a></div></div>
<div class="ttc" id="acatch__amalgamated_8cxx_html_ab44666b6e91e2bbae6bcf104d48726d6"><div class="ttname"><a href="../../dd/d6e/catch__amalgamated_8cxx.html#ab44666b6e91e2bbae6bcf104d48726d6">key</a></div><div class="ttdeci">StringRef key</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d6e/catch__amalgamated_8cxx_source.html#l04853">catch_amalgamated.cxx:4853</a></div></div>
<div class="ttc" id="aclassROOT_1_1Math_1_1SMatrix_html"><div class="ttname"><a href="../../dc/d65/classROOT_1_1Math_1_1SMatrix.html">ROOT::Math::SMatrix&lt; double, 5, 5, ROOT::Math::MatRepSym&lt; double, 5 &gt; &gt;</a></div></div>
<div class="ttc" id="aclassint_html"><div class="ttname"><a href="../../d1/da0/classint.html">int</a></div></div>
<div class="ttc" id="aclasso2_1_1BunchFilling_html"><div class="ttname"><a href="../../d6/dca/classo2_1_1BunchFilling.html">o2::BunchFilling</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/d5f/BunchFilling_8h_source.html#l00025">BunchFilling.h:26</a></div></div>
<div class="ttc" id="aclasso2_1_1BunchFilling_html_ad4e1496a0108d0ef47631ec0735a42df"><div class="ttname"><a href="../../d6/dca/classo2_1_1BunchFilling.html#ad4e1496a0108d0ef47631ec0735a42df">o2::BunchFilling::getBCPattern</a></div><div class="ttdeci">const auto &amp; getBCPattern() const</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d5f/BunchFilling_8h_source.html#l00045">BunchFilling.h:45</a></div></div>
<div class="ttc" id="aclasso2_1_1MCTrackT_html_ab6d8d1a91c9e143ac509bbba275cdb31"><div class="ttname"><a href="../../d2/d67/classo2_1_1MCTrackT.html#ab6d8d1a91c9e143ac509bbba275cdb31">o2::MCTrackT::GetStartVertex</a></div><div class="ttdeci">void GetStartVertex(TVector3 &amp;vertex) const</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de2/MCTrack_8h_source.html#l00326">MCTrack.h:326</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1AODProducerWorkflowDPL_html_a76e868033dcfce5db1a9a02ddbd7756f"><div class="ttname"><a href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a76e868033dcfce5db1a9a02ddbd7756f">o2::aodproducer::AODProducerWorkflowDPL::endOfStream</a></div><div class="ttdeci">void endOfStream(framework::EndOfStreamContext &amp;ec) final</div><div class="ttdoc">This is invoked whenever we have an EndOfStream event.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx_source.html#l03217">AODProducerWorkflowSpec.cxx:3217</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1AODProducerWorkflowDPL_html_a91da03feda3b580c499c76545a5a4894"><div class="ttname"><a href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#a91da03feda3b580c499c76545a5a4894">o2::aodproducer::AODProducerWorkflowDPL::finaliseCCDB</a></div><div class="ttdeci">void finaliseCCDB(ConcreteDataMatcher &amp;matcher, void *obj) final</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx_source.html#l03021">AODProducerWorkflowSpec.cxx:3021</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1AODProducerWorkflowDPL_html_abc9971657075e6273b7c3383d8f72d93"><div class="ttname"><a href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#abc9971657075e6273b7c3383d8f72d93">o2::aodproducer::AODProducerWorkflowDPL::run</a></div><div class="ttdeci">void run(ProcessingContext &amp;pc) final</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx_source.html#l01855">AODProducerWorkflowSpec.cxx:1855</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1AODProducerWorkflowDPL_html_ae42a1434e1df87cdfc112135f9966519"><div class="ttname"><a href="../../dd/de8/classo2_1_1aodproducer_1_1AODProducerWorkflowDPL.html#ae42a1434e1df87cdfc112135f9966519">o2::aodproducer::AODProducerWorkflowDPL::init</a></div><div class="ttdeci">void init(InitContext &amp;ic) final</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx_source.html#l01693">AODProducerWorkflowSpec.cxx:1693</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1BunchCrossings_html_a3f3ce8875e0e5e9de9f11bf74a273c78"><div class="ttname"><a href="../../d2/de8/classo2_1_1aodproducer_1_1BunchCrossings.html#a3f3ce8875e0e5e9de9f11bf74a273c78">o2::aodproducer::BunchCrossings::lower_bound</a></div><div class="ttdeci">std::pair&lt; size_t, uint64_t &gt; lower_bound(uint64_t timestamp) const</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00082">AODProducerWorkflowSpec.h:82</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1BunchCrossings_html_a61142004d0c1ad11dadf0eab4e8749ee"><div class="ttname"><a href="../../d2/de8/classo2_1_1aodproducer_1_1BunchCrossings.html#a61142004d0c1ad11dadf0eab4e8749ee">o2::aodproducer::BunchCrossings::init</a></div><div class="ttdeci">void init(std::map&lt; uint64_t, int &gt; const &amp;bcs)</div><div class="ttdoc">initialize this container (to be ready for lookup/search queries)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00056">AODProducerWorkflowSpec.h:56</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1BunchCrossings_html_aba2467db48befffc36ba5cbd22a69e7f"><div class="ttname"><a href="../../d2/de8/classo2_1_1aodproducer_1_1BunchCrossings.html#aba2467db48befffc36ba5cbd22a69e7f">o2::aodproducer::BunchCrossings::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">clear/reset this container</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00119">AODProducerWorkflowSpec.h:119</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1BunchCrossings_html_ae4d9cf3d445ce44b86aae3422daaeecf"><div class="ttname"><a href="../../d2/de8/classo2_1_1aodproducer_1_1BunchCrossings.html#ae4d9cf3d445ce44b86aae3422daaeecf">o2::aodproducer::BunchCrossings::getBCTimeVector</a></div><div class="ttdeci">std::vector&lt; uint64_t &gt; const &amp; getBCTimeVector() const</div><div class="ttdoc">return the sorted vector of increaing BC times</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00067">AODProducerWorkflowSpec.h:67</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1CellHelper_html_a3b0fd551cbf447831ffa7e3f9b21fe5b"><div class="ttname"><a href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#a3b0fd551cbf447831ffa7e3f9b21fe5b">o2::aodproducer::CellHelper::getAmplitude</a></div><div class="ttdeci">static float getAmplitude(const o2::emcal::Cell &amp;cell)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00732">AODProducerWorkflowSpec.h:732</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1CellHelper_html_a7120c18004f13b52df6fd072518aaae6"><div class="ttname"><a href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#a7120c18004f13b52df6fd072518aaae6">o2::aodproducer::CellHelper::getLnAmplitude</a></div><div class="ttdeci">static int16_t getLnAmplitude(const o2::emcal::Cell &amp;)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00742">AODProducerWorkflowSpec.h:742</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1CellHelper_html_a734b9fd3a12d181e9d2de7fd506c552e"><div class="ttname"><a href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#a734b9fd3a12d181e9d2de7fd506c552e">o2::aodproducer::CellHelper::getTriggerBits</a></div><div class="ttdeci">static int8_t getTriggerBits(const o2::emcal::Cell &amp;)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00689">AODProducerWorkflowSpec.h:689</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1CellHelper_html_a8bf106905e935972397d268cfa5358fa"><div class="ttname"><a href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#a8bf106905e935972397d268cfa5358fa">o2::aodproducer::CellHelper::getCellNumber</a></div><div class="ttdeci">static int16_t getCellNumber(const o2::emcal::Cell &amp;cell)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00699">AODProducerWorkflowSpec.h:699</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1CellHelper_html_aa57792dd450a124668691ec98356274d"><div class="ttname"><a href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#aa57792dd450a124668691ec98356274d">o2::aodproducer::CellHelper::getFastOrAbsID</a></div><div class="ttdeci">static int16_t getFastOrAbsID(const o2::emcal::Cell &amp;)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00722">AODProducerWorkflowSpec.h:722</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1CellHelper_html_ab1142b49edc204cf815e18274da3ac36"><div class="ttname"><a href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#ab1142b49edc204cf815e18274da3ac36">o2::aodproducer::CellHelper::isTRU</a></div><div class="ttdeci">static bool isTRU(const o2::emcal::Cell &amp;cell)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00712">AODProducerWorkflowSpec.h:712</a></div></div>
<div class="ttc" id="aclasso2_1_1aodproducer_1_1CellHelper_html_ae28498f74d3bebfea1ed2d98e6eb2732"><div class="ttname"><a href="../../d2/dd8/classo2_1_1aodproducer_1_1CellHelper.html#ae28498f74d3bebfea1ed2d98e6eb2732">o2::aodproducer::CellHelper::getTimeStamp</a></div><div class="ttdeci">static float getTimeStamp(const o2::emcal::Cell &amp;cell)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00752">AODProducerWorkflowSpec.h:752</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1GRPGeomHelper_html_a1edaf4c168d4d1e10bd2732beff726a3"><div class="ttname"><a href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#a1edaf4c168d4d1e10bd2732beff726a3">o2::base::GRPGeomHelper::checkUpdates</a></div><div class="ttdeci">void checkUpdates(o2::framework::ProcessingContext &amp;pc)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d91/GRPGeomHelper_8cxx_source.html#l00178">GRPGeomHelper.cxx:178</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1GRPGeomHelper_html_a3894b6c8b46fc9d6849ee95f33085316"><div class="ttname"><a href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#a3894b6c8b46fc9d6849ee95f33085316">o2::base::GRPGeomHelper::getGRPLHCIF</a></div><div class="ttdeci">auto getGRPLHCIF() const</div><div class="ttdef"><b>Definition</b> <a href="../../db/d00/GRPGeomHelper_8h_source.html#l00132">GRPGeomHelper.h:132</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1GRPGeomHelper_html_aa704dae605b1b130c2bd663717cb2b09"><div class="ttname"><a href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#aa704dae605b1b130c2bd663717cb2b09">o2::base::GRPGeomHelper::getGRPECS</a></div><div class="ttdeci">auto getGRPECS() const</div><div class="ttdef"><b>Definition</b> <a href="../../db/d00/GRPGeomHelper_8h_source.html#l00131">GRPGeomHelper.h:131</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1GRPGeomHelper_html_ac9cf926cbc032a82e62ad829314ec0a5"><div class="ttname"><a href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ac9cf926cbc032a82e62ad829314ec0a5">o2::base::GRPGeomHelper::instance</a></div><div class="ttdeci">static GRPGeomHelper &amp; instance()</div><div class="ttdef"><b>Definition</b> <a href="../../db/d00/GRPGeomHelper_8h_source.html#l00120">GRPGeomHelper.h:120</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1GRPGeomHelper_html_ae4113cead84239a97867fbfee31756ec"><div class="ttname"><a href="../../da/db3/classo2_1_1base_1_1GRPGeomHelper.html#ae4113cead84239a97867fbfee31756ec">o2::base::GRPGeomHelper::setRequest</a></div><div class="ttdeci">void setRequest(std::shared_ptr&lt; GRPGeomRequest &gt; req)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d91/GRPGeomHelper_8cxx_source.html#l00101">GRPGeomHelper.cxx:101</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1PropagatorImpl_html_a37e21e14c8991b4f61e32fe71508a37a"><div class="ttname"><a href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a37e21e14c8991b4f61e32fe71508a37a">o2::base::PropagatorImpl&lt; float &gt;::MatCorrType</a></div><div class="ttdeci">MatCorrType</div><div class="ttdef"><b>Definition</b> <a href="../../d2/df9/Propagator_8h_source.html#l00066">Propagator.h:66</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1PropagatorImpl_html_a422466380ea1dac7650c901472c45247"><div class="ttname"><a href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a422466380ea1dac7650c901472c45247">o2::base::PropagatorImpl&lt; float &gt;::MAX_SIN_PHI</a></div><div class="ttdeci">static constexpr float MAX_SIN_PHI</div><div class="ttdef"><b>Definition</b> <a href="../../d2/df9/Propagator_8h_source.html#l00072">Propagator.h:72</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1PropagatorImpl_html_a5aba54d06d26074134bfcd39ff120c96"><div class="ttname"><a href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a5aba54d06d26074134bfcd39ff120c96">o2::base::PropagatorImpl&lt; float &gt;::MAX_STEP</a></div><div class="ttdeci">static constexpr float MAX_STEP</div><div class="ttdef"><b>Definition</b> <a href="../../d2/df9/Propagator_8h_source.html#l00073">Propagator.h:73</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1PropagatorImpl_html_ae2d15b8a99ba7e2ea3b892704edad6e5"><div class="ttname"><a href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#ae2d15b8a99ba7e2ea3b892704edad6e5">o2::base::PropagatorImpl&lt; float &gt;::Instance</a></div><div class="ttdeci">GPUd() value_type estimateLTFast(o2 static GPUd() float estimateLTIncrement(const o2 PropagatorImpl * Instance(bool uninitialized=false)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/df9/Propagator_8h_source.html#l00178">Propagator.h:178</a></div></div>
<div class="ttc" id="aclasso2_1_1conf_1_1ConfigurableParamHelper_html_a8c7d4cc9dc1f34d578b77cc5d6cf1df0"><div class="ttname"><a href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#a8c7d4cc9dc1f34d578b77cc5d6cf1df0">o2::conf::ConfigurableParamHelper&lt; DPLAlpideParam&lt; N &gt; &gt;::Instance</a></div><div class="ttdeci">static const DPLAlpideParam&lt; N &gt; &amp; Instance()</div><div class="ttdef"><b>Definition</b> <a href="../../da/d6b/ConfigurableParamHelper_8h_source.html#l00081">ConfigurableParamHelper.h:81</a></div></div>
<div class="ttc" id="aclasso2_1_1ctp_1_1CTPConfiguration_html"><div class="ttname"><a href="../../da/df6/classo2_1_1ctp_1_1CTPConfiguration.html">o2::ctp::CTPConfiguration</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d7b/DataFormats_2Detectors_2CTP_2include_2DataFormatsCTP_2Configuration_8h_source.html#l00132">Configuration.h:133</a></div></div>
<div class="ttc" id="aclasso2_1_1ctp_1_1CTPConfiguration_html_aaf7fbb447171d983ace06520068e7f9e"><div class="ttname"><a href="../../da/df6/classo2_1_1ctp_1_1CTPConfiguration.html#aaf7fbb447171d983ace06520068e7f9e">o2::ctp::CTPConfiguration::printStream</a></div><div class="ttdeci">void printStream(std::ostream &amp;stream) const</div><div class="ttdef"><b>Definition</b> <a href="../../de/dd9/DataFormats_2Detectors_2CTP_2src_2Configuration_8cxx_source.html#l00731">Configuration.cxx:731</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1DCA_html"><div class="ttname"><a href="../../db/d0f/classo2_1_1dataformats_1_1DCA.html">o2::dataformats::DCA</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d99/DCA_8h_source.html#l00031">DCA.h:32</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html">o2::dataformats::GlobalTrackID</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00035">GlobalTrackID.h:36</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_a267749d16c9724ae4ef03ad25137bb6d"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#a267749d16c9724ae4ef03ad25137bb6d">o2::dataformats::GlobalTrackID::getSourcesMask</a></div><div class="ttdeci">static mask_t getSourcesMask(const std::string_view srcList)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d1c/GlobalTrackID_8cxx_source.html#l00031">GlobalTrackID.cxx:31</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a026a1635ca1cf29c8357ad565288ece3">o2::dataformats::GlobalTrackID::TPC</a></div><div class="ttdeci">@ TPC</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00042">GlobalTrackID.h:42</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a043188e1f1e971e828e90751b89686dd"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a043188e1f1e971e828e90751b89686dd">o2::dataformats::GlobalTrackID::MFTMCH</a></div><div class="ttdeci">@ MFTMCH</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00059">GlobalTrackID.h:59</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a10bcb37846370611501cb6a12800d591">o2::dataformats::GlobalTrackID::ITS</a></div><div class="ttdeci">@ ITS</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00041">GlobalTrackID.h:41</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a26ebad14bf7d16ec3d7b00bd5dc612da"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a26ebad14bf7d16ec3d7b00bd5dc612da">o2::dataformats::GlobalTrackID::ITSTPC</a></div><div class="ttdeci">@ ITSTPC</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00056">GlobalTrackID.h:56</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a37ab69e9f5d520a03ff3cd7d6173c72c"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a37ab69e9f5d520a03ff3cd7d6173c72c">o2::dataformats::GlobalTrackID::ITSAB</a></div><div class="ttdeci">@ ITSAB</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00065">GlobalTrackID.h:65</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a516bf7c7bca5465cad0ac01b61f66468"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a516bf7c7bca5465cad0ac01b61f66468">o2::dataformats::GlobalTrackID::NSources</a></div><div class="ttdeci">@ NSources</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00071">GlobalTrackID.h:70</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a51e15696a65701d33be1ada5b4952bc1"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a51e15696a65701d33be1ada5b4952bc1">o2::dataformats::GlobalTrackID::CPV</a></div><div class="ttdeci">@ CPV</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00046">GlobalTrackID.h:46</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a596e1824b6b17f37370f59fcca3f0f06"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a596e1824b6b17f37370f59fcca3f0f06">o2::dataformats::GlobalTrackID::PHS</a></div><div class="ttdeci">@ PHS</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00045">GlobalTrackID.h:45</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a5b9c0be2be7dc67f15d392a4f7c40614"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a5b9c0be2be7dc67f15d392a4f7c40614">o2::dataformats::GlobalTrackID::EMC</a></div><div class="ttdeci">@ EMC</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00047">GlobalTrackID.h:47</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546a65413089b5649238ad468a359d7b4dc7"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546a65413089b5649238ad468a359d7b4dc7">o2::dataformats::GlobalTrackID::TRD</a></div><div class="ttdeci">@ TRD</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00043">GlobalTrackID.h:43</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546aa07291753eb9dfbdde30f981e825f80c"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aa07291753eb9dfbdde30f981e825f80c">o2::dataformats::GlobalTrackID::TOF</a></div><div class="ttdeci">@ TOF</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00044">GlobalTrackID.h:44</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546aa2a6898926ca93fca679266141729aae"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aa2a6898926ca93fca679266141729aae">o2::dataformats::GlobalTrackID::TPCTRD</a></div><div class="ttdeci">@ TPCTRD</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00058">GlobalTrackID.h:58</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ab6368101361654188b6b9a0b2d775a84">o2::dataformats::GlobalTrackID::MFT</a></div><div class="ttdeci">@ MFT</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00049">GlobalTrackID.h:49</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546ad9133a96d3072c3019e74a47b90295ae">o2::dataformats::GlobalTrackID::MCH</a></div><div class="ttdeci">@ MCH</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00050">GlobalTrackID.h:50</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546aee53e854415cd94aeb620bd06edb6c90"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546aee53e854415cd94aeb620bd06edb6c90">o2::dataformats::GlobalTrackID::CTP</a></div><div class="ttdeci">@ CTP</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00066">GlobalTrackID.h:66</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1GlobalTrackID_html_ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff"><div class="ttname"><a href="../../d8/d9e/classo2_1_1dataformats_1_1GlobalTrackID.html#ac29d7ca90346cc81ec819fd618f2b546af1bc605578fa9e9d38a8bdb7ded2f2ff">o2::dataformats::GlobalTrackID::MCHMID</a></div><div class="ttdeci">@ MCHMID</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/GlobalTrackID_8h_source.html#l00068">GlobalTrackID.h:68</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MeanVertexObject_html"><div class="ttname"><a href="../../da/ddf/classo2_1_1dataformats_1_1MeanVertexObject.html">o2::dataformats::MeanVertexObject</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/dfb/MeanVertexObject_8h_source.html#l00023">MeanVertexObject.h:24</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MeanVertexObject_html_a5c324515cb0be10d5c3db0ac4d1eb4a7"><div class="ttname"><a href="../../da/ddf/classo2_1_1dataformats_1_1MeanVertexObject.html#a5c324515cb0be10d5c3db0ac4d1eb4a7">o2::dataformats::MeanVertexObject::getMeanVertex</a></div><div class="ttdeci">VertexBase getMeanVertex(float z) const</div><div class="ttdef"><b>Definition</b> <a href="../../de/dfb/MeanVertexObject_8h_source.html#l00075">MeanVertexObject.h:75</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1PrimaryVertex_html"><div class="ttname"><a href="../../d1/d87/classo2_1_1dataformats_1_1PrimaryVertex.html">o2::dataformats::PrimaryVertex</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d82/PrimaryVertex_8h_source.html#l00025">PrimaryVertex.h:26</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1VertexBase_html"><div class="ttname"><a href="../../dc/d08/classo2_1_1dataformats_1_1VertexBase.html">o2::dataformats::VertexBase</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/d6f/DataFormats_2Reconstruction_2include_2ReconstructionDataFormats_2Vertex_8h_source.html#l00036">Vertex.h:37</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1VtxTrackIndex_html"><div class="ttname"><a href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html">o2::dataformats::VtxTrackIndex</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d00/VtxTrackIndex_8h_source.html#l00030">VtxTrackIndex.h:31</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1VtxTrackIndex_html_a275b9da99dae9099b2565ed0dffd235d"><div class="ttname"><a href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html#a275b9da99dae9099b2565ed0dffd235d">o2::dataformats::VtxTrackIndex::isPVContributor</a></div><div class="ttdeci">bool isPVContributor() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d00/VtxTrackIndex_8h_source.html#l00043">VtxTrackIndex.h:43</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1VtxTrackIndex_html_aff5aff7ac80107a7dc31e29ad4f3a118"><div class="ttname"><a href="../../db/dd9/classo2_1_1dataformats_1_1VtxTrackIndex.html#aff5aff7ac80107a7dc31e29ad4f3a118">o2::dataformats::VtxTrackIndex::isAmbiguous</a></div><div class="ttdeci">bool isAmbiguous() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d00/VtxTrackIndex_8h_source.html#l00046">VtxTrackIndex.h:46</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1VtxTrackRef_html"><div class="ttname"><a href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html">o2::dataformats::VtxTrackRef</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/dac/VtxTrackRef_8h_source.html#l00041">VtxTrackRef.h:42</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1VtxTrackRef_html_a7def086c20e01197faca2b09f9093a46"><div class="ttname"><a href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7def086c20e01197faca2b09f9093a46">o2::dataformats::VtxTrackRef::getEntriesOfSource</a></div><div class="ttdeci">int getEntriesOfSource(int s) const</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dac/VtxTrackRef_8h_source.html#l00062">VtxTrackRef.h:62</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1VtxTrackRef_html_a7e85c4e425692f2a08b2a13c1ea980d4"><div class="ttname"><a href="../../db/dfd/classo2_1_1dataformats_1_1VtxTrackRef.html#a7e85c4e425692f2a08b2a13c1ea980d4">o2::dataformats::VtxTrackRef::getFirstEntryOfSource</a></div><div class="ttdeci">int getFirstEntryOfSource(int s) const</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dac/VtxTrackRef_8h_source.html#l00055">VtxTrackRef.h:55</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html">o2::detectors::DetID</a></div><div class="ttdoc">Static class with identifiers, bitmasks and names for ALICE detectors.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d31/DetID_8h_source.html#l00057">DetID.h:58</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_a55dd27091d307d75e3bf0a313f33ca4d"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a55dd27091d307d75e3bf0a313f33ca4d">o2::detectors::DetID::ITS</a></div><div class="ttdeci">static constexpr ID ITS</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d31/DetID_8h_source.html#l00063">DetID.h:63</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_a6f359c45ab3fc588145eb84b35f566e3"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a6f359c45ab3fc588145eb84b35f566e3">o2::detectors::DetID::MFT</a></div><div class="ttdeci">static constexpr ID MFT</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d31/DetID_8h_source.html#l00071">DetID.h:71</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_acf398e0e267ad5c4c68a4b25c64fcb43"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#acf398e0e267ad5c4c68a4b25c64fcb43">o2::detectors::DetID::TPC</a></div><div class="ttdeci">static constexpr ID TPC</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d31/DetID_8h_source.html#l00064">DetID.h:64</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_ada6b92907ed98c5087c0c40784f8e8e5"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#ada6b92907ed98c5087c0c40784f8e8e5">o2::detectors::DetID::EMC</a></div><div class="ttdeci">static constexpr ID EMC</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d31/DetID_8h_source.html#l00069">DetID.h:69</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_af7baa889d44ebd4ba11a43bc123c936e"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#af7baa889d44ebd4ba11a43bc123c936e">o2::detectors::DetID::TOF</a></div><div class="ttdeci">static constexpr ID TOF</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d31/DetID_8h_source.html#l00066">DetID.h:66</a></div></div>
<div class="ttc" id="aclasso2_1_1emcal_1_1EventHandler_html"><div class="ttname"><a href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html">o2::emcal::EventHandler</a></div><div class="ttdoc">Handler for EMCAL event data.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d5b/EMCAL_2include_2DataFormatsEMCAL_2EventHandler_8h_source.html#l00086">EventHandler.h:87</a></div></div>
<div class="ttc" id="aclasso2_1_1emcal_1_1EventHandler_html_ab27078458ff3309db82ac95b9b1b998d"><div class="ttname"><a href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#ab27078458ff3309db82ac95b9b1b998d">o2::emcal::EventHandler::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset containers with empty ranges.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/EMCAL_2src_2EventHandler_8cxx_source.html#l00172">EventHandler.cxx:172</a></div></div>
<div class="ttc" id="aclasso2_1_1emcal_1_1EventHandler_html_abe5c09bf794ccd18aaeadb16bfa15136"><div class="ttname"><a href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#abe5c09bf794ccd18aaeadb16bfa15136">o2::emcal::EventHandler::setCellData</a></div><div class="ttdeci">void setCellData(CellRange cells, TriggerRange triggers)</div><div class="ttdoc">Setting the data at cell level.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d5b/EMCAL_2include_2DataFormatsEMCAL_2EventHandler_8h_source.html#l00411">EventHandler.h:411</a></div></div>
<div class="ttc" id="aclasso2_1_1emcal_1_1EventHandler_html_ac55d98dd749d1188e9534456a355b700"><div class="ttname"><a href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#ac55d98dd749d1188e9534456a355b700">o2::emcal::EventHandler::setCellMCTruthContainer</a></div><div class="ttdeci">void setCellMCTruthContainer(const o2::dataformats::MCTruthContainer&lt; o2::emcal::MCLabel &gt; *mclabels)</div><div class="ttdoc">Setting the pointer for the MCTruthContainer for cells.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d5b/EMCAL_2include_2DataFormatsEMCAL_2EventHandler_8h_source.html#l00419">EventHandler.h:419</a></div></div>
<div class="ttc" id="aclasso2_1_1emcal_1_1EventHandler_html_adf8356a703c74f3d32a9d90abd603520"><div class="ttname"><a href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#adf8356a703c74f3d32a9d90abd603520">o2::emcal::EventHandler::getInteractionRecordForEvent</a></div><div class="ttdeci">InteractionRecord getInteractionRecordForEvent(int eventID) const</div><div class="ttdoc">Get the interaction record for the given event.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/EMCAL_2src_2EventHandler_8cxx_source.html#l00056">EventHandler.cxx:56</a></div></div>
<div class="ttc" id="aclasso2_1_1emcal_1_1EventHandler_html_ae328bccf88475a13a6ca4033b8cedfd1"><div class="ttname"><a href="../../d6/d23/classo2_1_1emcal_1_1EventHandler.html#ae328bccf88475a13a6ca4033b8cedfd1">o2::emcal::EventHandler::getNumberOfEvents</a></div><div class="ttdeci">int getNumberOfEvents() const</div><div class="ttdoc">Get the number of events handled by the event handler.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/EMCAL_2src_2EventHandler_8cxx_source.html#l00042">EventHandler.cxx:42</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ConfigParamRegistry_html_ae86d66faf0b5cdc42a725d722be54d5e"><div class="ttname"><a href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">o2::framework::ConfigParamRegistry::get</a></div><div class="ttdeci">T get(const char *key) const</div><div class="ttdef"><b>Definition</b> <a href="../../de/dc6/ConfigParamRegistry_8h_source.html#l00098">ConfigParamRegistry.h:98</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1DataAllocator_html_a2304984f68389854f3aad16b1457c22b"><div class="ttname"><a href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a2304984f68389854f3aad16b1457c22b">o2::framework::DataAllocator::snapshot</a></div><div class="ttdeci">void snapshot(const Output &amp;spec, T const &amp;object)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d28/DataAllocator_8h_source.html#l00317">DataAllocator.h:317</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1EndOfStreamContext_html"><div class="ttname"><a href="../../da/de0/classo2_1_1framework_1_1EndOfStreamContext.html">o2::framework::EndOfStreamContext</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d77/EndOfStreamContext_8h_source.html#l00021">EndOfStreamContext.h:22</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1InitContext_html"><div class="ttname"><a href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">o2::framework::InitContext</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/d2b/InitContext_8h_source.html#l00024">InitContext.h:25</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1InitContext_html_ada83dc23c159df009861ac98633eefe6"><div class="ttname"><a href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#ada83dc23c159df009861ac98633eefe6">o2::framework::InitContext::options</a></div><div class="ttdeci">ConfigParamRegistry const &amp; options()</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d2b/InitContext_8h_source.html#l00033">InitContext.h:33</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1InputRecord_html_a1c777bf7e242f8ba17b89275446a1225"><div class="ttname"><a href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">o2::framework::InputRecord::get</a></div><div class="ttdeci">decltype(auto) get(R binding, int part=0) const</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d5c/InputRecord_8h_source.html#l00249">InputRecord.h:249</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ProcessingContext_html"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">o2::framework::ProcessingContext</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00026">ProcessingContext.h:27</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ProcessingContext_html_a23b32b0b8cac7abcbf46c1d6580be859"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a23b32b0b8cac7abcbf46c1d6580be859">o2::framework::ProcessingContext::outputs</a></div><div class="ttdeci">DataAllocator &amp; outputs()</div><div class="ttdoc">The data allocator is used to allocate memory for the output data.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00041">ProcessingContext.h:41</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ProcessingContext_html_a7862af0201c6d6a574a054d811f0eab3"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#a7862af0201c6d6a574a054d811f0eab3">o2::framework::ProcessingContext::inputs</a></div><div class="ttdeci">InputRecord &amp; inputs()</div><div class="ttdoc">The inputs associated with this processing context.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00037">ProcessingContext.h:37</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ProcessingContext_html_aa236d4d55c7ef46fe86a822195ea00b0"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#aa236d4d55c7ef46fe86a822195ea00b0">o2::framework::ProcessingContext::services</a></div><div class="ttdeci">ServiceRegistryRef services()</div><div class="ttdoc">The services registry associated with this processing context.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00039">ProcessingContext.h:39</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ServiceRegistryRef_html_ab34ff207fce452a23aa9170d6a5c35aa"><div class="ttname"><a href="../../d7/da4/classo2_1_1framework_1_1ServiceRegistryRef.html#ab34ff207fce452a23aa9170d6a5c35aa">o2::framework::ServiceRegistryRef::get</a></div><div class="ttdeci">T &amp; get() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d58/ServiceRegistryRef_8h_source.html#l00085">ServiceRegistryRef.h:85</a></div></div>
<div class="ttc" id="aclasso2_1_1ft0_1_1Geometry_html_a73218802411ed622f3ce4b3c4118e7fb"><div class="ttname"><a href="../../d1/db6/classo2_1_1ft0_1_1Geometry.html#a73218802411ed622f3ce4b3c4118e7fb">o2::ft0::Geometry::NCellsA</a></div><div class="ttdeci">static constexpr int NCellsA</div><div class="ttdef"><b>Definition</b> <a href="../../db/df4/FIT_2FT0_2base_2include_2FT0Base_2Geometry_8h_source.html#l00052">Geometry.h:52</a></div></div>
<div class="ttc" id="aclasso2_1_1globaltracking_1_1MatchGlobalFwd_html_ae199ddc753ebf9c5e5957dce37b4695e"><div class="ttname"><a href="../../dc/d78/classo2_1_1globaltracking_1_1MatchGlobalFwd.html#ae199ddc753ebf9c5e5957dce37b4695e">o2::globaltracking::MatchGlobalFwd::MCHtoFwd</a></div><div class="ttdeci">o2::dataformats::GlobalFwdTrack MCHtoFwd(const o2::mch::TrackParam &amp;mchTrack)</div><div class="ttdoc">Converts mchTrack parameters to Forward coordinate system.</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d3d/MatchGlobalFwd_8cxx_source.html#l00738">MatchGlobalFwd.cxx:738</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTRDTrack__t_html"><div class="ttname"><a href="../../d4/d70/classo2_1_1gpu_1_1GPUTRDTrack__t.html">o2::gpu::GPUTRDTrack_t</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/dca/GPUTRDTrack_8h_source.html#l00042">GPUTRDTrack.h:43</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTRDTrack__t_html_a249c4d163e6d96ce7a46df70fd71b9a4ad9d745eba8333658ba21b21537699b53"><div class="ttname"><a href="../../d4/d70/classo2_1_1gpu_1_1GPUTRDTrack__t.html#a249c4d163e6d96ce7a46df70fd71b9a4ad9d745eba8333658ba21b21537699b53">o2::gpu::GPUTRDTrack_t::kNLayers</a></div><div class="ttdeci">@ kNLayers</div><div class="ttdef"><b>Definition</b> <a href="../../db/dca/GPUTRDTrack_8h_source.html#l00046">GPUTRDTrack.h:46</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1gpustd_1_1bitset_html"><div class="ttname"><a href="../../de/d8a/classo2_1_1gpu_1_1gpustd_1_1bitset.html">o2::gpu::gpustd::bitset&lt; 32 &gt;</a></div></div>
<div class="ttc" id="aclasso2_1_1mch_1_1TrackExtrap_html_a1a356eebdd9dfa2ab2ebb5b2c5d34ca6"><div class="ttname"><a href="../../d5/d6f/classo2_1_1mch_1_1TrackExtrap.html#a1a356eebdd9dfa2ab2ebb5b2c5d34ca6">o2::mch::TrackExtrap::extrapToZ</a></div><div class="ttdeci">static bool extrapToZ(TrackParam &amp;trackParam, double zEnd)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/deb/TrackExtrap_8cxx_source.html#l00145">TrackExtrap.cxx:145</a></div></div>
<div class="ttc" id="aclasso2_1_1mch_1_1TrackExtrap_html_a3820068e4ae7e7b3c7a0a668d40e21e1"><div class="ttname"><a href="../../d5/d6f/classo2_1_1mch_1_1TrackExtrap.html#a3820068e4ae7e7b3c7a0a668d40e21e1">o2::mch::TrackExtrap::setField</a></div><div class="ttdeci">static void setField()</div><div class="ttdef"><b>Definition</b> <a href="../../d2/deb/TrackExtrap_8cxx_source.html#l00042">TrackExtrap.cxx:42</a></div></div>
<div class="ttc" id="aclasso2_1_1mch_1_1TrackExtrap_html_a4ae2c19ef50c791d9305207c83453c9c"><div class="ttname"><a href="../../d5/d6f/classo2_1_1mch_1_1TrackExtrap.html#a4ae2c19ef50c791d9305207c83453c9c">o2::mch::TrackExtrap::extrapToVertex</a></div><div class="ttdeci">static bool extrapToVertex(TrackParam &amp;trackParam, double xVtx, double yVtx, double zVtx, double errXVtx, double errYVtx)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d9c/TrackExtrap_8h_source.html#l00062">TrackExtrap.h:62</a></div></div>
<div class="ttc" id="aclasso2_1_1mch_1_1TrackExtrap_html_a71c6113c85df663e6abafc2ebb6016eb"><div class="ttname"><a href="../../d5/d6f/classo2_1_1mch_1_1TrackExtrap.html#a71c6113c85df663e6abafc2ebb6016eb">o2::mch::TrackExtrap::extrapToVertexWithoutBranson</a></div><div class="ttdeci">static bool extrapToVertexWithoutBranson(TrackParam &amp;trackParam, double zVtx, double xUpstream=0., double yUpstream=0., std::optional&lt; double &gt; zUpstream=std::nullopt)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d9c/TrackExtrap_8h_source.html#l00074">TrackExtrap.h:74</a></div></div>
<div class="ttc" id="aclasso2_1_1mch_1_1TrackParam_html"><div class="ttname"><a href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html">o2::mch::TrackParam</a></div><div class="ttdoc">track parameters for internal use</div><div class="ttdef"><b>Definition</b> <a href="../../de/d4b/TrackParam_8h_source.html#l00033">TrackParam.h:34</a></div></div>
<div class="ttc" id="aclasso2_1_1mch_1_1TrackParam_html_a3270667ed541999064ec1ea8d578df04"><div class="ttname"><a href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html#a3270667ed541999064ec1ea8d578df04">o2::mch::TrackParam::getNonBendingCoor</a></div><div class="ttdeci">Double_t getNonBendingCoor() const</div><div class="ttdoc">return non bending coordinate (cm)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d4b/TrackParam_8h_source.html#l00051">TrackParam.h:51</a></div></div>
<div class="ttc" id="aclasso2_1_1mch_1_1TrackParam_html_aa712d841f1781437b0ecc35bbf320e80"><div class="ttname"><a href="../../d6/d0f/classo2_1_1mch_1_1TrackParam.html#aa712d841f1781437b0ecc35bbf320e80">o2::mch::TrackParam::getBendingCoor</a></div><div class="ttdeci">Double_t getBendingCoor() const</div><div class="ttdoc">return bending coordinate (cm)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d4b/TrackParam_8h_source.html#l00059">TrackParam.h:59</a></div></div>
<div class="ttc" id="aclasso2_1_1mcutils_1_1MCTrackNavigator_html"><div class="ttname"><a href="../../d7/d39/classo2_1_1mcutils_1_1MCTrackNavigator.html">o2::mcutils::MCTrackNavigator</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d68/MCUtils_8h_source.html#l00032">MCUtils.h:33</a></div></div>
<div class="ttc" id="aclasso2_1_1phos_1_1EventHandler_html"><div class="ttname"><a href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html">o2::phos::EventHandler</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/d78/PHOS_2include_2DataFormatsPHOS_2EventHandler_8h_source.html#l00036">EventHandler.h:37</a></div></div>
<div class="ttc" id="aclasso2_1_1phos_1_1EventHandler_html_a302a7f74242d8cc8d820a810396c71be"><div class="ttname"><a href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#a302a7f74242d8cc8d820a810396c71be">o2::phos::EventHandler::setCellMCTruthContainer</a></div><div class="ttdeci">void setCellMCTruthContainer(const o2::dataformats::MCTruthContainer&lt; o2::phos::MCLabel &gt; *mclabels)</div><div class="ttdoc">Setting the pointer for the MCTruthContainer for cells.</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d78/PHOS_2include_2DataFormatsPHOS_2EventHandler_8h_source.html#l00315">EventHandler.h:315</a></div></div>
<div class="ttc" id="aclasso2_1_1phos_1_1EventHandler_html_aa40ca0b5ba8717f327d54428f07f6a24"><div class="ttname"><a href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#aa40ca0b5ba8717f327d54428f07f6a24">o2::phos::EventHandler::setCellData</a></div><div class="ttdeci">void setCellData(CellRange cells, TriggerRange triggers)</div><div class="ttdoc">Setting the data at cell level.</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d78/PHOS_2include_2DataFormatsPHOS_2EventHandler_8h_source.html#l00307">EventHandler.h:307</a></div></div>
<div class="ttc" id="aclasso2_1_1phos_1_1EventHandler_html_ab27078458ff3309db82ac95b9b1b998d"><div class="ttname"><a href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#ab27078458ff3309db82ac95b9b1b998d">o2::phos::EventHandler::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset containers with empty ranges.</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d5e/PHOS_2src_2EventHandler_8cxx_source.html#l00142">EventHandler.cxx:142</a></div></div>
<div class="ttc" id="aclasso2_1_1phos_1_1EventHandler_html_adf8356a703c74f3d32a9d90abd603520"><div class="ttname"><a href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#adf8356a703c74f3d32a9d90abd603520">o2::phos::EventHandler::getInteractionRecordForEvent</a></div><div class="ttdeci">InteractionRecord getInteractionRecordForEvent(int eventID) const</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d5e/PHOS_2src_2EventHandler_8cxx_source.html#l00056">EventHandler.cxx:56</a></div></div>
<div class="ttc" id="aclasso2_1_1phos_1_1EventHandler_html_ae328bccf88475a13a6ca4033b8cedfd1"><div class="ttname"><a href="../../d2/de7/classo2_1_1phos_1_1EventHandler.html#ae328bccf88475a13a6ca4033b8cedfd1">o2::phos::EventHandler::getNumberOfEvents</a></div><div class="ttdeci">int getNumberOfEvents() const</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d5e/PHOS_2src_2EventHandler_8cxx_source.html#l00042">EventHandler.cxx:42</a></div></div>
<div class="ttc" id="aclasso2_1_1steer_1_1MCKinematicsReader_html"><div class="ttname"><a href="../../db/dde/classo2_1_1steer_1_1MCKinematicsReader.html">o2::steer::MCKinematicsReader</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/de5/MCKinematicsReader_8h_source.html#l00031">MCKinematicsReader.h:32</a></div></div>
<div class="ttc" id="aclasso2_1_1steer_1_1MCKinematicsReader_html_a1efc92a99a48631bffe38363264643d7"><div class="ttname"><a href="../../db/dde/classo2_1_1steer_1_1MCKinematicsReader.html#a1efc92a99a48631bffe38363264643d7">o2::steer::MCKinematicsReader::getTrack</a></div><div class="ttdeci">MCTrack const * getTrack(o2::MCCompLabel const &amp;) const</div><div class="ttdef"><b>Definition</b> <a href="../../dd/de5/MCKinematicsReader_8h_source.html#l00144">MCKinematicsReader.h:144</a></div></div>
<div class="ttc" id="aclasso2_1_1steer_1_1MCKinematicsReader_html_a88c7a709dbe1fa5a6733bbacd2d423eb"><div class="ttname"><a href="../../db/dde/classo2_1_1steer_1_1MCKinematicsReader.html#a88c7a709dbe1fa5a6733bbacd2d423eb">o2::steer::MCKinematicsReader::releaseTracksForSourceAndEvent</a></div><div class="ttdeci">void releaseTracksForSourceAndEvent(int source, int event)</div><div class="ttdoc">API to ask releasing tracks (freeing memory) for source + event.</div><div class="ttdef"><b>Definition</b> <a href="../../db/dd9/MCKinematicsReader_8cxx_source.html#l00080">MCKinematicsReader.cxx:80</a></div></div>
<div class="ttc" id="aclasso2_1_1steer_1_1MCKinematicsReader_html_af9278fc3e3a54d859f44cb45048c4c3a"><div class="ttname"><a href="../../db/dde/classo2_1_1steer_1_1MCKinematicsReader.html#af9278fc3e3a54d859f44cb45048c4c3a">o2::steer::MCKinematicsReader::getTracks</a></div><div class="ttdeci">std::vector&lt; MCTrack &gt; const &amp; getTracks(int source, int event) const</div><div class="ttdoc">variant returning all tracks for source and event at once</div><div class="ttdef"><b>Definition</b> <a href="../../dd/de5/MCKinematicsReader_8h_source.html#l00162">MCKinematicsReader.h:162</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1Utils_html_a4be163090c417c31d4e67672767bb6ff"><div class="ttname"><a href="../../d5/d2e/classo2_1_1tof_1_1Utils.html#a4be163090c417c31d4e67672767bb6ff">o2::tof::Utils::addInteractionBC</a></div><div class="ttdeci">static void addInteractionBC(int bc, bool fromCollisonCotext=false)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d61/Detectors_2TOF_2base_2src_2Utils_8cxx_source.html#l00052">Utils.cxx:52</a></div></div>
<div class="ttc" id="aclasso2_1_1track_1_1PID_html_a6db3f58ad4060aae142d35f3fbc8685f"><div class="ttname"><a href="../../d9/d0f/classo2_1_1track_1_1PID.html#a6db3f58ad4060aae142d35f3fbc8685f">o2::track::PID::Pion</a></div><div class="ttdeci">static constexpr ID Pion</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d08/DataFormats_2Reconstruction_2include_2ReconstructionDataFormats_2PID_8h_source.html#l00096">PID.h:96</a></div></div>
<div class="ttc" id="aclasso2_1_1track_1_1TrackParFwd_html_ae5ca1c7f2e604514a7e0227f72a2a697"><div class="ttname"><a href="../../d8/d10/classo2_1_1track_1_1TrackParFwd.html#ae5ca1c7f2e604514a7e0227f72a2a697">o2::track::TrackParFwd::getX</a></div><div class="ttdeci">Double_t getX() const</div><div class="ttdef"><b>Definition</b> <a href="../../d7/df7/TrackFwd_8h_source.html#l00049">TrackFwd.h:49</a></div></div>
<div class="ttc" id="aclasso2_1_1track_1_1TrackParametrizationWithError_html"><div class="ttname"><a href="../../dc/dbe/classo2_1_1track_1_1TrackParametrizationWithError.html">o2::track::TrackParametrizationWithError</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/d30/TrackParametrizationWithError_8h_source.html#l00029">TrackParametrizationWithError.h:30</a></div></div>
<div class="ttc" id="aclasso2_1_1track_1_1TrackParametrization_html"><div class="ttname"><a href="../../d0/dc6/classo2_1_1track_1_1TrackParametrization.html">o2::track::TrackParametrization</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d98/TrackParametrization_8h_source.html#l00129">TrackParametrization.h:130</a></div></div>
<div class="ttc" id="aclasso2_1_1utils_1_1EnumFlags_html_a6adc487f85b123eaf3e4b3af63580829"><div class="ttname"><a href="../../db/ded/classo2_1_1utils_1_1EnumFlags.html#a6adc487f85b123eaf3e4b3af63580829">o2::utils::EnumFlags::set</a></div><div class="ttdeci">void set(const std::string &amp;s, int base=DefaultBase)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc8/EnumFlags_8h_source.html#l00420">EnumFlags.h:420</a></div></div>
<div class="ttc" id="adcs-ccdb_8cxx_html_a3d4ea54dc78dac8ebf0309edcec514ca"><div class="ttname"><a href="../../dd/d98/dcs-ccdb_8cxx.html#a3d4ea54dc78dac8ebf0309edcec514ca">match</a></div><div class="ttdeci">bool match(const std::vector&lt; std::string &gt; &amp;queries, const char *pattern)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d98/dcs-ccdb_8cxx_source.html#l00229">dcs-ccdb.cxx:229</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a03b04a5a978bad576866339075de01f6"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a03b04a5a978bad576866339075de01f6">event</a></div><div class="ttdeci">struct _cl_event * event</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02982">glcorearb.h:2982</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a090ebe65994a3ee4bb60ae3472abffc5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a090ebe65994a3ee4bb60ae3472abffc5">alpha</a></div><div class="ttdeci">GLfloat GLfloat GLfloat alpha</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00279">glcorearb.h:279</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a0cdec8e97a75ee9458b23d152bf962d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00403">glcorearb.h:403</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a2a98ddb6f79ec1048ff9e15cdd2422ba"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a></div><div class="ttdeci">GLenum src</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01767">glcorearb.h:1767</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a31eafbeac9256b106b6acfd78f305200"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a></div><div class="ttdeci">GLint GLsizei count</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00399">glcorearb.h:399</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a36862d7c6208bc30723fd06f2a0f9bfd"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a36862d7c6208bc30723fd06f2a0f9bfd">entry</a></div><div class="ttdeci">GLuint entry</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l05735">glcorearb.h:5735</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a38f39158ee22fbbad798f1493abc26b8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a38f39158ee22fbbad798f1493abc26b8">counters</a></div><div class="ttdeci">GLint GLint GLsizei GLuint * counters</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l03985">glcorearb.h:3985</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a432111147038972f06e049e18a837002"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a432111147038972f06e049e18a837002">end</a></div><div class="ttdeci">GLuint GLuint end</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00469">glcorearb.h:469</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a4568fc090febc136eed4577a600739ca"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a></div><div class="ttdeci">const GLdouble * v</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00832">glcorearb.h:832</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a5ffadbbacc6b89cf6218bc43b384d3fe"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5ffadbbacc6b89cf6218bc43b384d3fe">right</a></div><div class="ttdeci">GLdouble GLdouble right</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l04077">glcorearb.h:4077</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a6a8efad2e332fcd916bde9e19ddef215"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a></div><div class="ttdeci">GLdouble f</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00310">glcorearb.h:310</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a6b425be07cfa8ac09043ef8391e7e514"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6b425be07cfa8ac09043ef8391e7e514">weight</a></div><div class="ttdeci">GLuint GLuint GLfloat weight</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l05477">glcorearb.h:5477</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a6eba317e3cf44d6d26c04a5a8f197dcb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6eba317e3cf44d6d26c04a5a8f197dcb">b</a></div><div class="ttdeci">GLboolean GLboolean GLboolean b</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01233">glcorearb.h:1233</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a6ffd2192cbc75d017665e95207ee36a7"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6ffd2192cbc75d017665e95207ee36a7">source</a></div><div class="ttdeci">GLsizei GLsizei GLchar * source</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00798">glcorearb.h:798</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a79169be77d7e02a24f68a5bfe627dc29"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a79169be77d7e02a24f68a5bfe627dc29">value</a></div><div class="ttdeci">GLsizei const GLfloat * value</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00819">glcorearb.h:819</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a7d05960f4f1c1b11f3177dc963a45d86"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a></div><div class="ttdeci">GLint GLint GLsizei GLint GLenum GLenum type</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00275">glcorearb.h:275</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a875a12becbd897c8760d054b49738856"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a875a12becbd897c8760d054b49738856">values</a></div><div class="ttdeci">GLenum GLsizei GLsizei GLint * values</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01576">glcorearb.h:1576</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a8922a680b00df660c57f47c1971d04c5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a></div><div class="ttdeci">GLboolean * data</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00298">glcorearb.h:298</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a8e8a78e36205bada4146dc581c95f82c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8e8a78e36205bada4146dc581c95f82c">offset</a></div><div class="ttdeci">GLintptr offset</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00660">glcorearb.h:660</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a9371a1f53f8067997cd15aaf657c62d0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9371a1f53f8067997cd15aaf657c62d0">label</a></div><div class="ttdeci">GLuint GLsizei const GLchar * label</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02519">glcorearb.h:2519</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_aa13d73852e3d050fbad707978af4ce40"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a></div><div class="ttdeci">GLfloat v0</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00811">glcorearb.h:811</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_aa9459b47e7388437191d2d9a69c10d98"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa9459b47e7388437191d2d9a69c10d98">flags</a></div><div class="ttdeci">GLbitfield flags</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01570">glcorearb.h:1570</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_abe08814c2f72843fde4d8df41440d5a0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a></div><div class="ttdeci">GLboolean r</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01233">glcorearb.h:1233</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_ac55adc720a3098c1b454d2a4647f4361"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac55adc720a3098c1b454d2a4647f4361">start</a></div><div class="ttdeci">GLuint start</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00469">glcorearb.h:469</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_ac8729153468b5dcf13f971b21d84d4e5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a></div><div class="ttdeci">GLboolean GLboolean GLboolean GLboolean a</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01233">glcorearb.h:1233</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1bc_html_afb1f2486ea016dba6a191a49ce0ff83bafbab8fc8fb1527843974e805c3f6e463"><div class="ttname"><a href="../../dd/d67/namespaceo2_1_1aod_1_1bc.html#afb1f2486ea016dba6a191a49ce0ff83bafbab8fc8fb1527843974e805c3f6e463">o2::aod::bc::ITSUPCMode</a></div><div class="ttdeci">@ ITSUPCMode</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00024">DataTypes.h:23</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1fwdtrack_html_a309e6fb874be38d514f742d129f1e769a1acf9f15fc03dbc3b7ddf2f6a86763e8"><div class="ttname"><a href="../../dc/d04/namespaceo2_1_1aod_1_1fwdtrack.html#a309e6fb874be38d514f742d129f1e769a1acf9f15fc03dbc3b7ddf2f6a86763e8">o2::aod::fwdtrack::MCHStandaloneTrack</a></div><div class="ttdeci">@ MCHStandaloneTrack</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00148">DataTypes.h:147</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1fwdtrack_html_a309e6fb874be38d514f742d129f1e769a7b270c391f4a953196799a425f81c54e"><div class="ttname"><a href="../../dc/d04/namespaceo2_1_1aod_1_1fwdtrack.html#a309e6fb874be38d514f742d129f1e769a7b270c391f4a953196799a425f81c54e">o2::aod::fwdtrack::MuonStandaloneTrack</a></div><div class="ttdeci">@ MuonStandaloneTrack</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00146">DataTypes.h:146</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1fwdtrack_html_a309e6fb874be38d514f742d129f1e769abd27214630e1956c957b687763815689"><div class="ttname"><a href="../../dc/d04/namespaceo2_1_1aod_1_1fwdtrack.html#a309e6fb874be38d514f742d129f1e769abd27214630e1956c957b687763815689">o2::aod::fwdtrack::GlobalMuonTrack</a></div><div class="ttdeci">@ GlobalMuonTrack</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00143">DataTypes.h:143</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1fwdtrack_html_a309e6fb874be38d514f742d129f1e769adaf42f98da1152c88a8b216937ed9c0f"><div class="ttname"><a href="../../dc/d04/namespaceo2_1_1aod_1_1fwdtrack.html#a309e6fb874be38d514f742d129f1e769adaf42f98da1152c88a8b216937ed9c0f">o2::aod::fwdtrack::GlobalForwardTrack</a></div><div class="ttdeci">@ GlobalForwardTrack</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00145">DataTypes.h:145</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a103128c0c18f91068440c49f4de3e2e2"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a103128c0c18f91068440c49f4de3e2e2">o2::aod::track::TrackTypeEnum</a></div><div class="ttdeci">TrackTypeEnum</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00041">DataTypes.h:41</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a103128c0c18f91068440c49f4de3e2e2a25a993df094535f2f23619e08bbdd0fe"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a103128c0c18f91068440c49f4de3e2e2a25a993df094535f2f23619e08bbdd0fe">o2::aod::track::StrangeTrack</a></div><div class="ttdeci">@ StrangeTrack</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00044">DataTypes.h:44</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a103128c0c18f91068440c49f4de3e2e2a4506d657a2a2ba0d653d5238b2c38158"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a103128c0c18f91068440c49f4de3e2e2a4506d657a2a2ba0d653d5238b2c38158">o2::aod::track::Track</a></div><div class="ttdeci">@ Track</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00043">DataTypes.h:43</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a103128c0c18f91068440c49f4de3e2e2a6cc442993cb940c5657119f8e5069019"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a103128c0c18f91068440c49f4de3e2e2a6cc442993cb940c5657119f8e5069019">o2::aod::track::TrackIU</a></div><div class="ttdeci">@ TrackIU</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00042">DataTypes.h:42</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a53c7bf2aff5431289f284a4c8cf94275"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a53c7bf2aff5431289f284a4c8cf94275">o2::aod::track::trackQAScaledTOF</a></div><div class="ttdeci">constexpr std::array&lt; float, 2 &gt; trackQAScaledTOF</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00137">DataTypes.h:137</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a76ec669ee4fb20ab5f63b623e6251049"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a76ec669ee4fb20ab5f63b623e6251049">o2::aod::track::trackQAScaleContP1</a></div><div class="ttdeci">constexpr std::array&lt; float, 5 &gt; trackQAScaleContP1</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00134">DataTypes.h:134</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a825747040c3055d6c96911fa0ff75092"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">o2::aod::track::uint8_t</a></div><div class="ttdeci">uint8_t itsSharedClusterMap uint8_t</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d8c/AnalysisDataModel_8h_source.html#l00446">AnalysisDataModel.h:446</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a98da7fac8530f5796b4c729a1ad8cd47"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a98da7fac8530f5796b4c729a1ad8cd47">o2::aod::track::trackQAScaleContP0</a></div><div class="ttdeci">constexpr std::array&lt; float, 5 &gt; trackQAScaleContP0</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00133">DataTypes.h:133</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a98dfbc3ee782243b9140b6b80d123eac"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a98dfbc3ee782243b9140b6b80d123eac">o2::aod::track::trackQAScaleGloP0</a></div><div class="ttdeci">constexpr std::array&lt; float, 5 &gt; trackQAScaleGloP0</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00135">DataTypes.h:135</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_abeddd0542ef96af8bd26810f95ceaad3"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#abeddd0542ef96af8bd26810f95ceaad3">o2::aod::track::trackQAScaleGloP1</a></div><div class="ttdeci">constexpr std::array&lt; float, 5 &gt; trackQAScaleGloP1</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00136">DataTypes.h:136</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_ac5084a7a40f2fa9f5fd220f7e2164e90a37a1ab316b370051ed8eafe0e36fd2d9"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a37a1ab316b370051ed8eafe0e36fd2d9">o2::aod::track::TPCSideA</a></div><div class="ttdeci">@ TPCSideA</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00054">DataTypes.h:54</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_ac5084a7a40f2fa9f5fd220f7e2164e90a4ac7266a17959accab2fdcdd343484ff"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a4ac7266a17959accab2fdcdd343484ff">o2::aod::track::TrackTimeAsym</a></div><div class="ttdeci">@ TrackTimeAsym</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00052">DataTypes.h:52</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_ac5084a7a40f2fa9f5fd220f7e2164e90a61d54fb66a00029840737c813dd535f6"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a61d54fb66a00029840737c813dd535f6">o2::aod::track::PVContributor</a></div><div class="ttdeci">@ PVContributor</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00050">DataTypes.h:50</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_ac5084a7a40f2fa9f5fd220f7e2164e90a701fb86b2a8d9b3303e7806ee710d579"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a701fb86b2a8d9b3303e7806ee710d579">o2::aod::track::TPCdEdxAlt</a></div><div class="ttdeci">@ TPCdEdxAlt</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00053">DataTypes.h:53</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_ac5084a7a40f2fa9f5fd220f7e2164e90a84b0135edb579be1a23dd50fd87e43f7"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a84b0135edb579be1a23dd50fd87e43f7">o2::aod::track::TrackTimeResIsRange</a></div><div class="ttdeci">@ TrackTimeResIsRange</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00049">DataTypes.h:49</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_ac5084a7a40f2fa9f5fd220f7e2164e90a9ab35da4cdebb9688516041b2cde73c1"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90a9ab35da4cdebb9688516041b2cde73c1">o2::aod::track::TPCSideC</a></div><div class="ttdeci">@ TPCSideC</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00055">DataTypes.h:55</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_ac5084a7a40f2fa9f5fd220f7e2164e90ace867b6a1d48381a5fcf2df4d137b622"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ac5084a7a40f2fa9f5fd220f7e2164e90ace867b6a1d48381a5fcf2df4d137b622">o2::aod::track::OrphanTrack</a></div><div class="ttdeci">@ OrphanTrack</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00051">DataTypes.h:51</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_acfa1bff691a8dddd48f6739321f8c24a"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#acfa1bff691a8dddd48f6739321f8c24a">o2::aod::track::trackQAScaleBins</a></div><div class="ttdeci">constexpr float trackQAScaleBins</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00131">DataTypes.h:131</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_ade41c511b1e19ea1663e1bb736c74cff"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#ade41c511b1e19ea1663e1bb736c74cff">o2::aod::track::trackQARefRadius</a></div><div class="ttdeci">constexpr float trackQARefRadius</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00130">DataTypes.h:130</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_html"><div class="ttname"><a href="../../d0/d82/namespaceo2_1_1aod.html">o2::aod</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d8c/AnalysisDataModel_8h_source.html#l00031">AnalysisDataModel.h:32</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodhelpers_html"><div class="ttname"><a href="../../d3/d53/namespaceo2_1_1aodhelpers.html">o2::aodhelpers</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d47/AODProducerHelpers_8h_source.html#l00023">AODProducerHelpers.h:24</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodmchelpers_html"><div class="ttname"><a href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html">o2::aodmchelpers</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/dcc/AODMcProducerHelpers_8h_source.html#l00071">AODMcProducerHelpers.h:72</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodmchelpers_html_a00d5ca1f7d5708b324d67c40f1d9fa9b"><div class="ttname"><a href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#a00d5ca1f7d5708b324d67c40f1d9fa9b">o2::aodmchelpers::HepMCUpdate</a></div><div class="ttdeci">HepMCUpdate</div><div class="ttdef"><b>Definition</b> <a href="../../dc/dcc/AODMcProducerHelpers_8h_source.html#l00095">AODMcProducerHelpers.h:95</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodmchelpers_html_a1dd83c3cbb8dbd6fe29833795358c32a"><div class="ttname"><a href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#a1dd83c3cbb8dbd6fe29833795358c32a">o2::aodmchelpers::updateHepMCHeavyIon</a></div><div class="ttdeci">bool updateHepMCHeavyIon(const HeavyIonCursor &amp;cursor, int collisionID, short generatorID, o2::dataformats::MCEventHeader const &amp;header, HepMCUpdate when=HepMCUpdate::anyKey)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dca/AODMcProducerHelpers_8cxx_source.html#l00147">AODMcProducerHelpers.cxx:147</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodmchelpers_html_a6837ac5d8a3f6fefd6126020579ed4e3"><div class="ttname"><a href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#a6837ac5d8a3f6fefd6126020579ed4e3">o2::aodmchelpers::updateMCCollisions</a></div><div class="ttdeci">short updateMCCollisions(const CollisionCursor &amp;cursor, int bcId, float time, o2::dataformats::MCEventHeader const &amp;header, short generatorId=0, int sourceId=0, unsigned int mask=0xFFFFFFF0)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dca/AODMcProducerHelpers_8cxx_source.html#l00038">AODMcProducerHelpers.cxx:38</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodmchelpers_html_a696ecab3d7bfb316d2d5188dbcd575c0"><div class="ttname"><a href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#a696ecab3d7bfb316d2d5188dbcd575c0">o2::aodmchelpers::updateHepMCPdfInfo</a></div><div class="ttdeci">bool updateHepMCPdfInfo(const PdfInfoCursor &amp;cursor, int collisionID, short generatorID, o2::dataformats::MCEventHeader const &amp;header, HepMCUpdate when=HepMCUpdate::anyKey)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dca/AODMcProducerHelpers_8cxx_source.html#l00107">AODMcProducerHelpers.cxx:107</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodmchelpers_html_aad1b40c9a895d2b3b51155fbd926b783"><div class="ttname"><a href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#aad1b40c9a895d2b3b51155fbd926b783">o2::aodmchelpers::updateParticles</a></div><div class="ttdeci">uint32_t updateParticles(const ParticleCursor &amp;cursor, int collisionID, std::vector&lt; MCTrack &gt; const &amp;tracks, TrackToIndex &amp;preselect, uint32_t offset=0, bool filter=false, bool background=false, uint32_t weightMask=0xFFFFFFF0, uint32_t momentumMask=0xFFFFFFF0, uint32_t positionMask=0xFFFFFFF0, bool signalFilter=false)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dca/AODMcProducerHelpers_8cxx_source.html#l00299">AODMcProducerHelpers.cxx:299</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodmchelpers_html_ab95b3ef77b0bf4fab5c85d42e803434c"><div class="ttname"><a href="../../d7/dfc/namespaceo2_1_1aodmchelpers.html#ab95b3ef77b0bf4fab5c85d42e803434c">o2::aodmchelpers::updateHepMCXSection</a></div><div class="ttdeci">bool updateHepMCXSection(const XSectionCursor &amp;cursor, int collisionID, short generatorID, o2::dataformats::MCEventHeader const &amp;header, HepMCUpdate when=HepMCUpdate::anyKey)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dca/AODMcProducerHelpers_8cxx_source.html#l00073">AODMcProducerHelpers.cxx:73</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodproducer_html"><div class="ttname"><a href="../../d3/dcc/namespaceo2_1_1aodproducer.html">o2::aodproducer</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d09/AODProducerWorkflowSpec_8h_source.html#l00045">AODProducerWorkflowSpec.h:46</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodproducer_html_aaee3fa668f4d09e1113891bf6e7a02a9"><div class="ttname"><a href="../../d3/dcc/namespaceo2_1_1aodproducer.html#aaee3fa668f4d09e1113891bf6e7a02a9">o2::aodproducer::getAODProducerWorkflowSpec</a></div><div class="ttdeci">framework::DataProcessorSpec getAODProducerWorkflowSpec(GID::mask_t src, bool enableSV, bool enableST, bool useMC, bool CTPConfigPerRun, bool enableFITextra)</div><div class="ttdoc">create a processor spec</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx_source.html#l03225">AODProducerWorkflowSpec.cxx:3225</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodproducer_html_ac401ebb144c2be80966332aa64b74abd"><div class="ttname"><a href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ac401ebb144c2be80966332aa64b74abd">o2::aodproducer::keepMCParticle</a></div><div class="ttdeci">void keepMCParticle(std::vector&lt; std::vector&lt; std::unordered_map&lt; int, int &gt; &gt; &gt; &amp;store, int source, int event, int track, int value=1, bool useSigFilt=false)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx_source.html#l00950">AODProducerWorkflowSpec.cxx:950</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodproducer_html_ae401f332e040327760de3e4e2c81b880"><div class="ttname"><a href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ae401f332e040327760de3e4e2c81b880">o2::aodproducer::dimensionMCKeepStore</a></div><div class="ttdeci">void dimensionMCKeepStore(std::vector&lt; std::vector&lt; std::unordered_map&lt; int, int &gt; &gt; &gt; &amp;store, int Nsources, int NEvents)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx_source.html#l00932">AODProducerWorkflowSpec.cxx:932</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aodproducer_html_ae53f095186cc45fe9d3f6ba714d09047ad313fa03fe7d48393c7e3d7d7073e0a1"><div class="ttname"><a href="../../d3/dcc/namespaceo2_1_1aodproducer.html#ae53f095186cc45fe9d3f6ba714d09047ad313fa03fe7d48393c7e3d7d7073e0a1">o2::aodproducer::AODProducerStreamerFlags::TrackQA</a></div><div class="ttdeci">@ TrackQA</div></div>
<div class="ttc" id="anamespaceo2_1_1aodproducer_html_af6892e1d3798257af69de8aac6396b2f"><div class="ttname"><a href="../../d3/dcc/namespaceo2_1_1aodproducer.html#af6892e1d3798257af69de8aac6396b2f">o2::aodproducer::clearMCKeepStore</a></div><div class="ttdeci">void clearMCKeepStore(std::vector&lt; std::vector&lt; std::unordered_map&lt; int, int &gt; &gt; &gt; &amp;store)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dc9/AODProducerWorkflowSpec_8cxx_source.html#l00940">AODProducerWorkflowSpec.cxx:940</a></div></div>
<div class="ttc" id="anamespaceo2_1_1constants_1_1lhc_html_a296bf820b93d969ac714d0aa4ea82d7c"><div class="ttname"><a href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a296bf820b93d969ac714d0aa4ea82d7c">o2::constants::lhc::LHCMaxBunches</a></div><div class="ttdeci">constexpr int LHCMaxBunches</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc6/LHCConstants_8h_source.html#l00031">LHCConstants.h:31</a></div></div>
<div class="ttc" id="anamespaceo2_1_1constants_1_1lhc_html_a578084f1cb4e924667d451c021ae29c6"><div class="ttname"><a href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a578084f1cb4e924667d451c021ae29c6">o2::constants::lhc::LHCBunchSpacingNS</a></div><div class="ttdeci">constexpr double LHCBunchSpacingNS</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc6/LHCConstants_8h_source.html#l00033">LHCConstants.h:33</a></div></div>
<div class="ttc" id="anamespaceo2_1_1constants_1_1math_html_acff1f02c7cd46f9b6c4751df2eb34b11"><div class="ttname"><a href="../../d2/d3a/namespaceo2_1_1constants_1_1math.html#acff1f02c7cd46f9b6c4751df2eb34b11">o2::constants::math::Almost1</a></div><div class="ttdeci">constexpr float Almost1</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d84/MathConstants_8h_source.html#l00027">MathConstants.h:27</a></div></div>
<div class="ttc" id="anamespaceo2_1_1constants_1_1physics_html_afcff1b8c0ffb9ff6a21020323709d485"><div class="ttname"><a href="../../d7/df9/namespaceo2_1_1constants_1_1physics.html#afcff1b8c0ffb9ff6a21020323709d485">o2::constants::physics::MassPionCharged</a></div><div class="ttdeci">constexpr double MassPionCharged</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d9d/PhysicsConstants_8h_source.html#l00224">PhysicsConstants.h:224</a></div></div>
<div class="ttc" id="anamespaceo2_1_1dataformats_html_a21b566270662eb9bba290d166fb59250a942e5dbfbe3e1e46e7f5fc4cea1c10fc"><div class="ttname"><a href="../../d1/dea/namespaceo2_1_1dataformats.html#a21b566270662eb9bba290d166fb59250a942e5dbfbe3e1e46e7f5fc4cea1c10fc">o2::dataformats::kStrkV0</a></div><div class="ttdeci">@ kStrkV0</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc9/StrangeTrack_8h_source.html#l00027">StrangeTrack.h:27</a></div></div>
<div class="ttc" id="anamespaceo2_1_1dataformats_html_a21b566270662eb9bba290d166fb59250abee6ef6b519cbb28a93416cdf0346fd5"><div class="ttname"><a href="../../d1/dea/namespaceo2_1_1dataformats.html#a21b566270662eb9bba290d166fb59250abee6ef6b519cbb28a93416cdf0346fd5">o2::dataformats::kStrkCascade</a></div><div class="ttdeci">@ kStrkCascade</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc9/StrangeTrack_8h_source.html#l00028">StrangeTrack.h:28</a></div></div>
<div class="ttc" id="anamespaceo2_1_1event__visualisation_html_a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2"><div class="ttname"><a href="../../d3/d14/namespaceo2_1_1event__visualisation.html#a17ab5ce7283b3c19faad5cbe7ec4a397a0da93a2c3dcb91c103aa7748138edbc2">o2::event_visualisation::last</a></div><div class="ttdeci">@ last</div><div class="ttdef"><b>Definition</b> <a href="../../d8/dc8/VisualisationEventOpenGLSerializer_8cxx_source.html#l00045">VisualisationEventOpenGLSerializer.cxx:44</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html">o2::framework</a></div><div class="ttdoc">Defining PrimaryVertex explicitly as messageable.</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d5f/BunchFilling_8h_source.html#l00111">BunchFilling.h:112</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html_a8413f7e9639d0fe61b22c6fc672d421e"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a8413f7e9639d0fe61b22c6fc672d421e">o2::framework::ccdbParamSpec</a></div><div class="ttdeci">std::vector&lt; ConfigParamSpec &gt; ccdbParamSpec(std::string const &amp;path, int runDependent, std::vector&lt; CCDBMetadata &gt; metadata={}, int qrate=0)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d22/CCDBParamSpec_8cxx_source.html#l00048">CCDBParamSpec.cxx:48</a></div></div>
<div class="ttc" id="anamespaceo2_1_1its_1_1math__utils_html_a4e3a3e36bb0ec4eb73a62f41acee85b2"><div class="ttname"><a href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#a4e3a3e36bb0ec4eb73a62f41acee85b2">o2::its::math_utils::p</a></div><div class="ttdeci">float p</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d3e/MathUtils_8h_source.html#l00099">MathUtils.h:99</a></div></div>
<div class="ttc" id="anamespaceo2_1_1math__utils_1_1detail_html"><div class="ttname"><a href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html">o2::math_utils::detail</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/dad/CartesianGPU_8h_source.html#l00023">CartesianGPU.h:24</a></div></div>
<div class="ttc" id="anamespaceo2_1_1math__utils_1_1detail_html_a6165053352ad91e6afb11940eca08c1b"><div class="ttname"><a href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a6165053352ad91e6afb11940eca08c1b">o2::math_utils::detail::phi</a></div><div class="ttdeci">T phi</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d7d/trigonometric_8h_source.html#l00220">trigonometric.h:221</a></div></div>
<div class="ttc" id="anamespaceo2_1_1math__utils_1_1detail_html_a89a72b9ac0d2b73caf618918a82cc2be"><div class="ttname"><a href="../../d4/dbd/namespaceo2_1_1math__utils_1_1detail.html#a89a72b9ac0d2b73caf618918a82cc2be">o2::math_utils::detail::s</a></div><div class="ttdeci">T &amp; s</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d7d/trigonometric_8h_source.html#l00121">trigonometric.h:121</a></div></div>
<div class="ttc" id="anamespaceo2_1_1math__utils_html_a6798caafc5ff1a5d43e447fce8c074fd"><div class="ttname"><a href="../../d9/d2e/namespaceo2_1_1math__utils.html#a6798caafc5ff1a5d43e447fce8c074fd">o2::math_utils::angle2Sector</a></div><div class="ttdeci">int angle2Sector(float phi)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d52/Common_2MathUtils_2include_2MathUtils_2Utils_8h_source.html#l00183">Utils.h:183</a></div></div>
<div class="ttc" id="anamespaceo2_1_1math__utils_html_ad197130429f45badc6b2db9bca23fc03"><div class="ttname"><a href="../../d9/d2e/namespaceo2_1_1math__utils.html#ad197130429f45badc6b2db9bca23fc03">o2::math_utils::sector2Angle</a></div><div class="ttdeci">float sector2Angle(int sect)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d52/Common_2MathUtils_2include_2MathUtils_2Utils_8h_source.html#l00193">Utils.h:193</a></div></div>
<div class="ttc" id="anamespaceo2_1_1track_html_a481bf229764c1bf6aabcdb06c0a49a9a"><div class="ttname"><a href="../../d1/dec/namespaceo2_1_1track.html#a481bf229764c1bf6aabcdb06c0a49a9a">o2::track::TrackParCov</a></div><div class="ttdeci">TrackParCovF TrackParCov</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d8b/DataFormats_2Reconstruction_2include_2ReconstructionDataFormats_2Track_8h_source.html#l00033">Track.h:33</a></div></div>
<div class="ttc" id="anamespaceo2_1_1track_html_aa4ee9a4303d6355e268d170a55dcd549ab1f0a6f7cb4d4d526476e424f6a79532"><div class="ttname"><a href="../../d1/dec/namespaceo2_1_1track.html#aa4ee9a4303d6355e268d170a55dcd549ab1f0a6f7cb4d4d526476e424f6a79532">o2::track::DirOutward</a></div><div class="ttdeci">@ DirOutward</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d98/TrackParametrization_8h_source.html#l00095">TrackParametrization.h:95</a></div></div>
<div class="ttc" id="anamespaceo2_1_1trigger_html_ad1c05a0d6d360b714ac4b02bffac82c9"><div class="ttname"><a href="../../df/d7e/namespaceo2_1_1trigger.html#ad1c05a0d6d360b714ac4b02bffac82c9">o2::trigger::Cal</a></div><div class="ttdeci">constexpr uint32_t Cal</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d0b/Common_2Constants_2include_2CommonConstants_2Triggers_8h_source.html#l00032">Triggers.h:32</a></div></div>
<div class="ttc" id="anamespaceo2_1_1zdc_html_a1b3e33f771dac943d3eac22cd4ca72dc"><div class="ttname"><a href="../../d5/d10/namespaceo2_1_1zdc.html#a1b3e33f771dac943d3eac22cd4ca72dc">o2::zdc::TDCSignal</a></div><div class="ttdeci">const int TDCSignal[NTDCChannels]</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dd7/Detectors_2ZDC_2base_2include_2ZDCBase_2Constants_8h_source.html#l00181">Constants.h:181</a></div></div>
<div class="ttc" id="anamespaceo2_1_1zdc_html_a3ca33c4a113eaa085fad49f3afb93e22"><div class="ttname"><a href="../../d5/d10/namespaceo2_1_1zdc.html#a3ca33c4a113eaa085fad49f3afb93e22">o2::zdc::NTDCChannels</a></div><div class="ttdeci">constexpr int NTDCChannels</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dd7/Detectors_2ZDC_2base_2include_2ZDCBase_2Constants_8h_source.html#l00090">Constants.h:90</a></div></div>
<div class="ttc" id="anamespaceo2_1_1zdc_html_a4a7eba00705fcd689cb348399f8ef933"><div class="ttname"><a href="../../d5/d10/namespaceo2_1_1zdc.html#a4a7eba00705fcd689cb348399f8ef933">o2::zdc::NChannels</a></div><div class="ttdeci">constexpr int NChannels</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dd7/Detectors_2ZDC_2base_2include_2ZDCBase_2Constants_8h_source.html#l00065">Constants.h:65</a></div></div>
<div class="ttc" id="anamespaceo2_html_aaf9dcf961ac0173c5beca24659e39414"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html#aaf9dcf961ac0173c5beca24659e39414">o2::fullVersion</a></div><div class="ttdeci">std::string fullVersion()</div><div class="ttdoc">get full version information (official O2 release and git commit)</div></div>
<div class="ttc" id="astandalone_8cxx_html_a89fc507a8313a2c8530b05526aee23af"><div class="ttname"><a href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a></div><div class="ttdeci">GPUReconstruction * rec</div><div class="ttdef"><b>Definition</b> <a href="../../dc/df9/standalone_8cxx_source.html#l00074">standalone.cxx:74</a></div></div>
<div class="ttc" id="astructOptions_html"><div class="ttname"><a href="../../db/d4f/structOptions.html">Options</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/dea/TreeMergerTool_8cxx_source.html#l00026">TreeMergerTool.cxx:26</a></div></div>
<div class="ttc" id="astructo2_1_1InteractionRecord_html_aa79f026ab22d81e3dcff0a4938d08689"><div class="ttname"><a href="../../d1/d21/structo2_1_1InteractionRecord.html#aa79f026ab22d81e3dcff0a4938d08689">o2::InteractionRecord::toLong</a></div><div class="ttdeci">int64_t toLong() const</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d80/InteractionRecord_8h_source.html#l00116">InteractionRecord.h:116</a></div></div>
<div class="ttc" id="astructo2_1_1aod_1_1track_1_1extensions_1_1TPCTimeErrEncoding_html"><div class="ttname"><a href="../../d6/dd7/structo2_1_1aod_1_1track_1_1extensions_1_1TPCTimeErrEncoding.html">o2::aod::track::extensions::TPCTimeErrEncoding</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d12/DataTypes_8h_source.html#l00084">DataTypes.h:84</a></div></div>
<div class="ttc" id="astructo2_1_1base_1_1GRPGeomRequest_html_a919d6de2f837ec97126ab2f6b40ca029afc66371359756dd80ab4902da8b0efbd"><div class="ttname"><a href="../../d8/d02/structo2_1_1base_1_1GRPGeomRequest.html#a919d6de2f837ec97126ab2f6b40ca029afc66371359756dd80ab4902da8b0efbd">o2::base::GRPGeomRequest::Aligned</a></div><div class="ttdeci">@ Aligned</div><div class="ttdef"><b>Definition</b> <a href="../../db/d00/GRPGeomHelper_8h_source.html#l00092">GRPGeomHelper.h:92</a></div></div>
<div class="ttc" id="astructo2_1_1ctp_1_1CTPDigit_html"><div class="ttname"><a href="../../da/de2/structo2_1_1ctp_1_1CTPDigit.html">o2::ctp::CTPDigit</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/dfa/Digits_8h_source.html#l00050">Digits.h:50</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1AlgorithmSpec_html"><div class="ttname"><a href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">o2::framework::AlgorithmSpec</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d14/AlgorithmSpec_8h_source.html#l00043">AlgorithmSpec.h:43</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1ConcreteDataMatcher_html"><div class="ttname"><a href="../../dd/d69/structo2_1_1framework_1_1ConcreteDataMatcher.html">o2::framework::ConcreteDataMatcher</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d1b/ConcreteDataMatcher_8h_source.html#l00054">ConcreteDataMatcher.h:54</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1ConfigParamSpec_html"><div class="ttname"><a href="../../de/d87/structo2_1_1framework_1_1ConfigParamSpec.html">o2::framework::ConfigParamSpec</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d1c/ConfigParamSpec_8h_source.html#l00031">ConfigParamSpec.h:31</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1DataProcessorSpec_html"><div class="ttname"><a href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">o2::framework::DataProcessorSpec</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/df4/DataProcessorSpec_8h_source.html#l00041">DataProcessorSpec.h:41</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1DataProcessorSpec_html_aa23ca254935e2620924628468a1b4135"><div class="ttname"><a href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html#aa23ca254935e2620924628468a1b4135">o2::framework::DataProcessorSpec::inputs</a></div><div class="ttdeci">Inputs inputs</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df4/DataProcessorSpec_8h_source.html#l00043">DataProcessorSpec.h:43</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1OutputForTable_html_a1a7a781a13904a2683caf76cb8103440"><div class="ttname"><a href="../../df/d67/structo2_1_1framework_1_1OutputForTable.html#a1a7a781a13904a2683caf76cb8103440">o2::framework::OutputForTable::spec</a></div><div class="ttdeci">static OutputSpec const spec()</div><div class="ttdef"><b>Definition</b> <a href="../../db/d34/AnalysisHelpers_8h_source.html#l00507">AnalysisHelpers.h:507</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1OutputSpec_html"><div class="ttname"><a href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">o2::framework::OutputSpec</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d2d/OutputSpec_8h_source.html#l00033">OutputSpec.h:33</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1Output_html"><div class="ttname"><a href="../../d1/dc1/structo2_1_1framework_1_1Output.html">o2::framework::Output</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/ddf/Output_8h_source.html#l00027">Output.h:27</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1Produces_html"><div class="ttname"><a href="../../d6/d86/structo2_1_1framework_1_1Produces.html">o2::framework::Produces</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d34/AnalysisHelpers_8h_source.html#l00523">AnalysisHelpers.h:523</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1TimingInfo_html"><div class="ttname"><a href="../../d4/d11/structo2_1_1framework_1_1TimingInfo.html">o2::framework::TimingInfo</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/d2b/TimingInfo_8h_source.html#l00024">TimingInfo.h:24</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1WritingCursor_html_a1f04c6fea0ad600f0f601535e5347986"><div class="ttname"><a href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#a1f04c6fea0ad600f0f601535e5347986">o2::framework::WritingCursor::cursor</a></div><div class="ttdeci">decltype(FFL(std::declval&lt; cursor_t &gt;())) cursor</div><div class="ttdef"><b>Definition</b> <a href="../../db/d34/AnalysisHelpers_8h_source.html#l00468">AnalysisHelpers.h:468</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1WritingCursor_html_aab8b295819acc295a335e89a70f1ce53"><div class="ttname"><a href="../../d5/dc5/structo2_1_1framework_1_1WritingCursor.html#aab8b295819acc295a335e89a70f1ce53">o2::framework::WritingCursor::reserve</a></div><div class="ttdeci">void reserve(int64_t size)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d34/AnalysisHelpers_8h_source.html#l00458">AnalysisHelpers.h:458</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1DataRequest_html"><div class="ttname"><a href="../../dc/d1e/structo2_1_1globaltracking_1_1DataRequest.html">o2::globaltracking::DataRequest</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00191">RecoContainer.h:191</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00265">RecoContainer.h:265</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a0208352a4da38b3c81d1cba6ee20dd31"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a0208352a4da38b3c81d1cba6ee20dd31">o2::globaltracking::RecoContainer::getZDCTDCData</a></div><div class="ttdeci">auto getZDCTDCData() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00666">RecoContainer.h:666</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a05d30dcfcace40777030e393a2c3f536"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a05d30dcfcace40777030e393a2c3f536">o2::globaltracking::RecoContainer::getStrangeTracks</a></div><div class="ttdeci">auto getStrangeTracks() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00717">RecoContainer.h:717</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a0a3b6bd02335bb5024ea228eb5786a50"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a0a3b6bd02335bb5024ea228eb5786a50">o2::globaltracking::RecoContainer::getFDDRecPoints</a></div><div class="ttdeci">auto getFDDRecPoints() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00660">RecoContainer.h:660</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a0b86e4d3dfa275a1a005388ed5365bd6"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a0b86e4d3dfa275a1a005388ed5365bd6">o2::globaltracking::RecoContainer::getMCHMIDMatches</a></div><div class="ttdeci">auto getMCHMIDMatches() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00568">RecoContainer.h:568</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a155d6c74abe4d0193c011369160eefe5"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a155d6c74abe4d0193c011369160eefe5">o2::globaltracking::RecoContainer::startIR</a></div><div class="ttdeci">o2::InteractionRecord startIR</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00327">RecoContainer.h:327</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a1963d123d5967a4e4c7c1d631b0eae1a"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a1963d123d5967a4e4c7c1d631b0eae1a">o2::globaltracking::RecoContainer::getDecays3BodyIdx</a></div><div class="ttdeci">auto getDecays3BodyIdx() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00712">RecoContainer.h:712</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a334c3e93d4d778af8f8a86ed5b5b93e6"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a334c3e93d4d778af8f8a86ed5b5b93e6">o2::globaltracking::RecoContainer::getTPCTRDTriggers</a></div><div class="ttdeci">auto getTPCTRDTriggers() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00602">RecoContainer.h:602</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a425c9ea0abf31cc23d88a563326b6277"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a425c9ea0abf31cc23d88a563326b6277">o2::globaltracking::RecoContainer::getPrimaryVertices</a></div><div class="ttdeci">auto getPrimaryVertices() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00691">RecoContainer.h:691</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a4c5ea239ad9d8b4426ed61ba1e348ed3"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a4c5ea239ad9d8b4426ed61ba1e348ed3">o2::globaltracking::RecoContainer::getPrimaryVertexMatchedTracks</a></div><div class="ttdeci">auto getPrimaryVertexMatchedTracks() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00692">RecoContainer.h:692</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a51eb2aafdff1e86d5a6030e6b87a4837"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a51eb2aafdff1e86d5a6030e6b87a4837">o2::globaltracking::RecoContainer::getMCHTrackClusters</a></div><div class="ttdeci">auto getMCHTrackClusters() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00522">RecoContainer.h:522</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a525098d9a58bdf9a39ce7ce0076dfeb5"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a525098d9a58bdf9a39ce7ce0076dfeb5">o2::globaltracking::RecoContainer::getMCHTracksROFRecords</a></div><div class="ttdeci">auto getMCHTracksROFRecords() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00521">RecoContainer.h:521</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a5a35a16acdb56a180c153b4a2b551d06"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a5a35a16acdb56a180c153b4a2b551d06">o2::globaltracking::RecoContainer::getCTPDigits</a></div><div class="ttdeci">auto getCTPDigits() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00670">RecoContainer.h:670</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a5f2fa4ff3a68d0a149c71533e5c26f23"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a5f2fa4ff3a68d0a149c71533e5c26f23">o2::globaltracking::RecoContainer::getCascadesIdx</a></div><div class="ttdeci">auto getCascadesIdx() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00708">RecoContainer.h:708</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a61768a5b047e3ddf42028e2d7167f650"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a61768a5b047e3ddf42028e2d7167f650">o2::globaltracking::RecoContainer::getPrimaryVertexMatchedTrackRefs</a></div><div class="ttdeci">auto getPrimaryVertexMatchedTrackRefs() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00694">RecoContainer.h:694</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a6958d9e2fd8765ff7639c563bd29b962"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a6958d9e2fd8765ff7639c563bd29b962">o2::globaltracking::RecoContainer::getTRDTriggerRecords</a></div><div class="ttdeci">gsl::span&lt; const o2::trd::TriggerRecord &gt; getTRDTriggerRecords() const</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d62/DataFormats_2Detectors_2GlobalTracking_2src_2RecoContainer_8cxx_source.html#l01287">RecoContainer.cxx:1287</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a6d0f8b029e422101f7c3060a827cf378"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a6d0f8b029e422101f7c3060a827cf378">o2::globaltracking::RecoContainer::getCPVClusters</a></div><div class="ttdeci">auto getCPVClusters() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00674">RecoContainer.h:674</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a8547e86298ff951b532833fc2432cf3f"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a8547e86298ff951b532833fc2432cf3f">o2::globaltracking::RecoContainer::getFV0ChannelsData</a></div><div class="ttdeci">auto getFV0ChannelsData() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00657">RecoContainer.h:657</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a88b3a25a0fa452eb8f92933cd1bb7019"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a88b3a25a0fa452eb8f92933cd1bb7019">o2::globaltracking::RecoContainer::getMFTTracksROFRecords</a></div><div class="ttdeci">auto getMFTTracksROFRecords() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00509">RecoContainer.h:509</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a988b2a2d038375f0924c4fb776adab93"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a988b2a2d038375f0924c4fb776adab93">o2::globaltracking::RecoContainer::getCPVTriggers</a></div><div class="ttdeci">auto getCPVTriggers() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00675">RecoContainer.h:675</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_a9994c31d0f7db330f69c4dd5d4ad1032"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#a9994c31d0f7db330f69c4dd5d4ad1032">o2::globaltracking::RecoContainer::collectData</a></div><div class="ttdeci">void collectData(o2::framework::ProcessingContext &amp;pc, const DataRequest &amp;request)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d62/DataFormats_2Detectors_2GlobalTracking_2src_2RecoContainer_8cxx_source.html#l00615">RecoContainer.cxx:615</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_aa159c18d7e6bfa238da2e373b5387ffc"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aa159c18d7e6bfa238da2e373b5387ffc">o2::globaltracking::RecoContainer::getPrimaryVertexMCLabels</a></div><div class="ttdeci">auto getPrimaryVertexMCLabels() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00696">RecoContainer.h:696</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_aa4526f3e28d55f46081a75db729aeea4"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aa4526f3e28d55f46081a75db729aeea4">o2::globaltracking::RecoContainer::getV0sIdx</a></div><div class="ttdeci">auto getV0sIdx() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00704">RecoContainer.h:704</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_aa5a1370a1d9bfaab180a31b8e9e50a85"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aa5a1370a1d9bfaab180a31b8e9e50a85">o2::globaltracking::RecoContainer::getZDCEnergy</a></div><div class="ttdeci">auto getZDCEnergy() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00665">RecoContainer.h:665</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_ab1f5dbd4fe43d0ce5ca6910ab7bb46a5"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab1f5dbd4fe43d0ce5ca6910ab7bb46a5">o2::globaltracking::RecoContainer::getFT0RecPoints</a></div><div class="ttdeci">auto getFT0RecPoints() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00652">RecoContainer.h:652</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_ab453120224ac2e56e5ab5ac39ca8241a"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab453120224ac2e56e5ab5ac39ca8241a">o2::globaltracking::RecoContainer::getITSTracksROFRecords</a></div><div class="ttdeci">auto getITSTracksROFRecords() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00492">RecoContainer.h:492</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_ab55087fdd2a2ff3bcb7cd2b2b4172183"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab55087fdd2a2ff3bcb7cd2b2b4172183">o2::globaltracking::RecoContainer::getMCHTracks</a></div><div class="ttdeci">auto getMCHTracks() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00520">RecoContainer.h:520</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_ab8efbeff8fecc165b679cb2dfc3c5b7c"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ab8efbeff8fecc165b679cb2dfc3c5b7c">o2::globaltracking::RecoContainer::getFV0RecPoints</a></div><div class="ttdeci">auto getFV0RecPoints() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00656">RecoContainer.h:656</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_aba733844e7ab0066fc098cd36314cfac"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aba733844e7ab0066fc098cd36314cfac">o2::globaltracking::RecoContainer::getHMPMatches</a></div><div class="ttdeci">auto getHMPMatches() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00639">RecoContainer.h:639</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_abd2331a61a5e0b2c1285ffe09e89ed54"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#abd2331a61a5e0b2c1285ffe09e89ed54">o2::globaltracking::RecoContainer::getITSTPCTRDTriggers</a></div><div class="ttdeci">auto getITSTPCTRDTriggers() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00582">RecoContainer.h:582</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_ac994d5cf54e268eac066638ebdb452da"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ac994d5cf54e268eac066638ebdb452da">o2::globaltracking::RecoContainer::getFT0ChannelsData</a></div><div class="ttdeci">auto getFT0ChannelsData() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00653">RecoContainer.h:653</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_adaa08fd14218893c1f8fc13cd89555bd"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#adaa08fd14218893c1f8fc13cd89555bd">o2::globaltracking::RecoContainer::getFDDChannelsData</a></div><div class="ttdeci">auto getFDDChannelsData() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00661">RecoContainer.h:661</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_ade21f7f92eacfeb5fc593235ea5e5eab"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ade21f7f92eacfeb5fc593235ea5e5eab">o2::globaltracking::RecoContainer::getZDCBCRecData</a></div><div class="ttdeci">auto getZDCBCRecData() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00664">RecoContainer.h:664</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_ae1a3fc004aeec8aa5291c493aa973b9f"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#ae1a3fc004aeec8aa5291c493aa973b9f">o2::globaltracking::RecoContainer::getEMCALTriggers</a></div><div class="ttdeci">auto getEMCALTriggers() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00685">RecoContainer.h:685</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_aeeea5bedf4bc74b1f037e4c0d589d5ff"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#aeeea5bedf4bc74b1f037e4c0d589d5ff">o2::globaltracking::RecoContainer::getMFTTracks</a></div><div class="ttdeci">auto getMFTTracks() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00508">RecoContainer.h:508</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html_af172a5e470747af9cc58a71e83a6f57c"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html#af172a5e470747af9cc58a71e83a6f57c">o2::globaltracking::RecoContainer::getPHOSTriggers</a></div><div class="ttdeci">auto getPHOSTriggers() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d5a/DataFormats_2Detectors_2GlobalTracking_2include_2DataFormatsGlobalTracking_2RecoContainer_8h_source.html#l00680">RecoContainer.h:680</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCGMMergedTrackHit_html_ae381b3724c6fe10f07ad1dd2b0406067aa33195dc2a541b15a81fe620ee52ef93"><div class="ttname"><a href="../../dd/d30/structo2_1_1gpu_1_1GPUTPCGMMergedTrackHit.html#ae381b3724c6fe10f07ad1dd2b0406067aa33195dc2a541b15a81fe620ee52ef93">o2::gpu::GPUTPCGMMergedTrackHit::flagShared</a></div><div class="ttdeci">@ flagShared</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dcc/GPUTPCGMMergedTrackHit_8h_source.html#l00033">GPUTPCGMMergedTrackHit.h:33</a></div></div>
<div class="ttc" id="astructo2_1_1math__utils_1_1Tsallis_html_aa3aca711a107c7483836a927c65c6807"><div class="ttname"><a href="../../d1/d99/structo2_1_1math__utils_1_1Tsallis.html#aa3aca711a107c7483836a927c65c6807">o2::math_utils::Tsallis::downsampleTsallisCharged</a></div><div class="ttdeci">static bool downsampleTsallisCharged(float pt, float factorPt, float sqrts, float &amp;weight, float rnd, float mass=0.13957)</div><div class="ttdef"><b>Definition</b> <a href="../../df/d2e/Tsallis_8cxx_source.html#l00031">Tsallis.cxx:31</a></div></div>
<div class="ttc" id="atest__ctf__io__cpv_8cxx_html_a1a5263dcba7ff66e43defdf020df657c"><div class="ttname"><a href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1a5263dcba7ff66e43defdf020df657c">vec</a></div><div class="ttdeci">std::vector&lt; o2::ctf::BufferType &gt; vec</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da7/test__ctf__io__cpv_8cxx_source.html#l00065">test_ctf_io_cpv.cxx:65</a></div></div>
<div class="ttc" id="atest__ctf__io__cpv_8cxx_html_a1ef7964b771b9b29688dfa8810b27d00"><div class="ttname"><a href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a></div><div class="ttdeci">LOG(info)&lt;&lt; &quot;Compressed in &quot;&lt;&lt; sw.CpuTime()&lt;&lt; &quot; s&quot;</div></div>
<div class="ttc" id="atest__ctf__io__cpv_8cxx_html_a3fbcc99525a77d67e5b943a244c81273"><div class="ttname"><a href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a3fbcc99525a77d67e5b943a244c81273">clu</a></div><div class="ttdeci">Cluster clu</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da7/test__ctf__io__cpv_8cxx_source.html#l00046">test_ctf_io_cpv.cxx:46</a></div></div>
<div class="ttc" id="atest__ctf__io__ctp_8cxx_html_a433203debbef4e29c03236b60e0e7aa7"><div class="ttname"><a href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a433203debbef4e29c03236b60e0e7aa7">distr</a></div><div class="ttdeci">std::uniform_int_distribution&lt; unsigned long long &gt; distr</div><div class="ttdef"><b>Definition</b> <a href="../../db/dbc/test__ctf__io__ctp_8cxx_source.html#l00047">test_ctf_io_ctp.cxx:47</a></div></div>
<div class="ttc" id="atest__ctf__io__ctp_8cxx_html_a7071b0092ad8c5b57d6cc40c5f803df5"><div class="ttname"><a href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7071b0092ad8c5b57d6cc40c5f803df5">rd</a></div><div class="ttdeci">std::random_device rd</div><div class="ttdef"><b>Definition</b> <a href="../../db/dbc/test__ctf__io__ctp_8cxx_source.html#l00045">test_ctf_io_ctp.cxx:45</a></div></div>
<div class="ttc" id="atest__ctf__io__mid_8cxx_html_abc8fc01f9239d6900ca74bdff17157bf"><div class="ttname"><a href="../../df/dcb/test__ctf__io__mid_8cxx.html#abc8fc01f9239d6900ca74bdff17157bf">pattern</a></div><div class="ttdeci">std::array&lt; uint16_t, 5 &gt; pattern</div><div class="ttdef"><b>Definition</b> <a href="../../df/dcb/test__ctf__io__mid_8cxx_source.html#l00051">test_ctf_io_mid.cxx:51</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_051dca18e802f8e9474f2e30d29c04e0.html">Detectors</a></li><li class="navelem"><a class="el" href="../../dir_4bc9293565017e583d6e787c95b29081.html">AOD</a></li><li class="navelem"><a class="el" href="../../dir_987b5f226d08c625380477afd193b36d.html">src</a></li><li class="navelem"><a class="el" href="../../d6/dc9/AODProducerWorkflowSpec_8cxx.html">AODProducerWorkflowSpec.cxx</a></li>
    <li class="footer">Generated on Sat Feb 21 2026 17:58:36 for Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
