<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: Configuration options</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('df/da9/md__2home_2runner_2work_2AliceO2_2AliceO2_2prodtests_2full-system-test_2documentation_2dpl-workflow-options.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Configuration options</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>You can use the following options to change the workflow behavior:</p><ul>
<li><code>DDMODE</code> (default <code>processing</code>) : Must be <code>processing</code> (synchronous processing) or <code>processing-disk</code> (synchronous processing + storing of raw time frames to disk, note that this is the raw time frame not the CTF!). The <code>DDMODE</code> <code>discard</code> and <code>disk</code> are not compatible with the synchronous processing workflow, you must use the <code>no-processing.desc</code> workflow instead!.</li>
<li><code>WORKFLOW_DETECTORS</code> (default <code>ALL</code>) : Comma-separated list of detectors for which the processing is enabled. If these are less detectors than participating in the run, data of the other detectors is ignored. If these are more detectors than participating in the run, the processes for the additional detectors will be started but will not do anything.</li>
<li><code>WORKFLOW_DETECTORS_QC</code> (default <code>ALL</code>) : Comma-separated list of detectors for which to run QC, can be a subset of <code>WORKFLOW_DETECTORS</code> (for standalone detectors QC) and <code>WORKFLOW_DETECTORS_MATCHING</code> (for matching/vertexing QC). If a detector (matching/vertexing step) is not listed in <code>WORKFLOW_DETECTORS</code> (<code>WORKFLOW_DETECTORS_MATCHING</code>), the QC is automatically disabled for that detector. Only active if the <code>WORKFLOW_PARAMETER=QC</code> is set.</li>
<li><code>WORKFLOW_DETECTORS_CALIB</code> (default <code>ALL</code>) : Comma-separated list of detectors for which to run calibration, can be a subset of <code>WORKFLOW_DETECTORS</code>. If a detector is not listed in <code>WORKFLOW_DETECTORS</code>, the calibration is automatically disabled for that detector. Only active if the <code>WORKFLOW_PARAMETER=CALIB</code> is set.</li>
<li><code>WORKFLOW_DETECTORS_FLP_PROCESSING</code> (default <code>TOF</code> for sync processing on EPN, <code>NONE</code> otherwise) : Signals that these detectors have processing on the FLP enabled. The corresponding steps are thus inactive in the EPN epl-workflow, and the raw-proxy is configured to receive the FLP-processed data instead of the raw data in that case.</li>
<li><code>WORKFLOW_DETECTORS_RECO</code> (default <code>ALL</code>) : Comma-separated list of detectors for which to run reconstruction.</li>
<li><code>WORKFLOW_DETECTORS_CTF</code> (default <code>ALL</code>) : Comma-separated list of detectors to include in CTF.</li>
<li><code>WORKFLOW_DETECTORS_MATCHING</code> (default selected corresponding to default workflow for sync or async mode respectively) : Comma-separated list of matching / vertexing algorithms to run. Use <code>ALL</code> to enable all of them. Currently supported options (see LIST_OF_GLORECO in common/setenv.h): <code>ITSTPC</code>, <code>TPCTRD</code>, <code>ITSTPCTRD</code>, <code>TPCTOF</code>, <code>ITSTPCTOF</code>, <code>MFTMCH</code>, <code>PRIMVTX</code>, <code>SECVTX</code>.</li>
<li><code>WORKFLOW_EXTRA_PROCESSING_STEPS</code> Enable additional processing steps not in the preset for the SYNC / ASYNC mode. Possible values are: <code>MID_RECO</code> <code>MCH_RECO</code> <code>MFT_RECO</code> <code>FDD_RECO</code> <code>FV0_RECO</code> <code>ZDC_RECO</code> <code>ENTROPY_ENCODER</code> <code>MATCH_ITSTPC</code> <code>MATCH_TPCTRD</code> <code>MATCH_ITSTPCTRD</code> <code>MATCH_TPCTOF</code> <code>MATCH_ITSTPCTOF</code> <code>MATCH_MFTMCH</code> <code>MATCH_MFTMCH</code> <code>MATCH_PRIMVTX</code> <code>MATCH_SECVTX</code>. (Here <code>_RECO</code> means full async reconstruction, and can be used to enable it also in sync mode.)</li>
<li><code>WORKFLOW_PARAMETERS</code> (default <code>NONE</code>) : Comma-separated list, enables additional features of the workflow. Currently the following features are available:<ul>
<li><code>GPU</code> : Performs the TPC processing on the GPU, otherwise everything is processed on the CPU.</li>
<li><code>CTF</code> : Write the CTF to disk (CTF creation is always enabled, but if this parameter is missing, it is not stored).</li>
<li><code>EVENT_DISPLAY</code> : Enable JSON export for event display.</li>
<li><code>QC</code> : Enable QC.</li>
<li><code>CALIB</code> : Enable calibration (not yet working!)</li>
</ul>
</li>
<li><code>RECO_NUM_NODES_OVERRIDE</code> (default <code>0</code>) : Overrides the number of EPN nodes used for the reconstruction (<code>0</code> or empty means default).</li>
<li><code>MULTIPLICITY_FACTOR_RAWDECODERS</code> (default <code>1</code>) : Scales the number of parallel processes used for raw decoding by this factor.</li>
<li><code>MULTIPLICITY_FACTOR_CTFENCODERS</code> (default <code>1</code>) : Scales the number of parallel processes used for CTF encoding by this factor.</li>
<li><code>MULTIPLICITY_FACTOR_REST</code> (default <code>1</code>) : Scales the number of other reconstruction processes by this factor.</li>
<li><code>QC_JSON_EXTRA</code> (default <code>NONE</code>) : extra QC jsons to add (if does not fit to those defined in WORKFLOW_DETECTORS_QC &amp; (WORKFLOW_DETECTORS | WORKFLOW_DETECTORS_MATCHING) Most of these settings are configurable in the AliECS GUI. But some of the uncommon settings (<code>WORKFLOW_DETECTORS_FLP_PROCESSING</code>, <code>WORKFLOW_DETECTORS_CTF</code>, <code>WORKFLOW_DETECTORS_RECO</code>, <code>WORKFLOW_DETECTORS_MATCHING</code>, <code>WORKFLOW_EXTRA_PROCESSING_STEPS</code>, advanced <code>MULTIPLICITY_FACTOR</code> settings) can only be set via the "Additional environment variables field" in the GUI using bash syntax, e.g. <code>WORKFLOW_DETECTORS_FLP_PROCESSING=TPC</code>.</li>
</ul>
<h1>Process multiplicity factors</h1>
<ul>
<li>The production workflow has internally a default value how many instances of a process to run in parallel (which was tuned for Pb-Pb processing)</li>
<li>Some critical processes for synchronous pp processing are automatically scaled by the inverse of the number of nodes, i.e. the multiplicity is increased by a factor of 2 if 125 instead of 250 nodes are used, to enable the processing using only a subset of the nodes.</li>
<li>Factors can be provided externally to scale the multiplicity of processes further. All these factors are multiplied.<ul>
<li>One factor can be provided based on the type of the processes: raw decoder (<code>MULTIPLICITY_FACTOR_RAWDECODERS</code>), CTF encoder (<code>MULTIPLICITY_FACTOR_CTFENCODERS</code>), or other reconstruction process (<code>MULTIPLICITY_FACTOR_REST</code>)</li>
<li>One factor can be provided per detector via <code>MULTIPLICITY_FACTOR_DETECTOR_[DET]</code> using the 3 character detector representation, or <code>MATCH</code> for the global matching and vertexing workflows.</li>
<li>One factor can be provided per process via <code>MULTIPLICITY_FACTOR_PROCESS_[PROCESS_NAME]</code>. In the process name, dashes <code>-</code> must be replaced by underscores <code>_</code>.</li>
</ul>
</li>
<li>The multiplicity of an individual process can be overridden externally (this is an override, no scaling factor) by using <code>MULTIPLICITY_PROCESS_[PROCESS_NAME]</code>. In the process name, dashes <code>-</code> must be replaced by underscores <code>_</code>.</li>
<li>For example, creating the workflow with <code>MULTIPLICITY_FACTOR_RAWDECODERS=2 MULTIPLICITY_FACTOR_DETECTOR_ITS=3 MULTIPLICITY_FACTOR_PROCESS_mft_stf_decoder=5</code> will scale the number of ITS raw decoders by 6, of other ITS processes by 3, of other raw decoders by 2, and will run exactly 5 <code>mft-stf-decoder</code> processes.</li>
</ul>
<h1>Additional custom control variables</h1>
<p>For user modification of the workflow settings, the folloing <em>EXTRA</em> environment variables exist:</p><ul>
<li><code>ARGS_ALL_EXTRA</code> : Extra command line options added to all workflows</li>
<li><code>ALL_EXTRA_CONFIG</code> : Extra config key values added to all workflows</li>
<li><code>GPU_EXTRA_CONFIG</code> : Extra options added to the configKeyValues of the GPU workflow</li>
<li><code>ARGS_EXTRA_PROCESS_[WORKFLOW_NAME]</code> : Extra command line arguments for the workflow binary <code>WORKFLOW_NAME</code>. Dashes <code>-</code> must be replaced by underscores <code>_</code> in the name! E.g. &lsquo;ARGS_EXTRA_PROCESS_o2_tof_reco_workflow=&rsquo;&ndash;output-type clusters'<code> -</code>CONFIG_EXTRA_PROCESS_[WORKFLOW_NAME]<code>: Extra</code>&ndash;configKeyValues<code>arguments for the workflow binary</code>WORKFLOW_NAME<code>. Dashes</code>-<code>must be replaced by underscores</code>_<code>in the name! E.g.</code>CONFIG_EXTRA_PROCESS_o2_gpu_reco_workflow='GPU_proc.debugLevel=1;GPU_proc.ompKernels=0;'`</li>
</ul>
<p><b>IMPORTANT:</b> When providing additional environment variables please always use single quotes &lsquo;&rsquo;<code>instead of double quotes</code>"`, because otherwise there can be issues with whitespaces. E.g. `ARGS_EXTRA_PROCESS_o2_eve_display='--filter-time-min 0 --filter-time-max 120'` does work while `ARGS_EXTRA_PROCESS_o2_eve_display="&ndash;filter-time-min 0 &ndash;filter-time-max 120"` does not.</p>
<p>In case the CTF dictionaries were created from the data drastically different from the one being compressed, the default memory allocation for the CTF buffer might be insufficient. One can apply scaling factor to the buffer size estimate (default=1.5) of particular detector by defining variable e.g. <code>TPC_ENC_MEMFACT=3.5</code></p>
<h1>File input for ctf-reader / raw-tf-reader</h1>
<ul>
<li>The variable <code>$INPUT_FILE_LIST</code> can be a comma-seperated list of files, or a file with a file-list of CTFs/raw TFs.</li>
<li>The variable <code>$INPUT_FILE_COPY_CMD</code> can provide a custom copy command (default is to fetch the files from EOS).</li>
</ul>
<h1>Remarks on QC</h1>
<p>The JSON files for the individual detectors are merged into one JSON file, which is cached during the run on the shared EPN home folder. The default JSON file per detector is defined in <code>qc-workflow.sh</code>. JSONs per detector can be overridden by exporting <code>QC_JSON_[DETECTOR_NAME]</code>, e.g. <code>QC_JSON_TPC</code>, when creating the workflow. The global section of the merged qc JSON config is taken from qc-sync/qc-global.json </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Oct 31 2025 12:28:23 for Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
