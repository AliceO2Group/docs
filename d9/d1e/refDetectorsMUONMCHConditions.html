<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: Conditions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d9/d1e/refDetectorsMUONMCHConditions.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Conditions</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>MCH Conditions</h1>
<p>The condition data we have are :</p>
<ul>
<li>the DCS datapoints (for HV and LV)</li>
<li>the Bad Channel list (obtained from pedestal calibration runs)</li>
<li>the Reject list (manual input)</li>
</ul>
<p>Those objects are stored at the following CCDB paths :</p>
<ul>
<li>MCH/Calib/HV</li>
<li>MCH/Calib/LV</li>
<li>MCH/Calib/BadChannel</li>
<li>MCH/Calib/RejectList</li>
</ul>
<h1>o2-mch-bad-channels-ccdb</h1>
<p>The BadChannel and RejectList objects can be uploaded, e.g. for debug purposes, using the <code>o2-mch-bad-channels-ccdb</code> program:</p>
<div class="fragment"><div class="line">$ o2-mch-bad-channels-ccdb --help</div>
<div class="line">This program get/set MCH bad channels CCDB object</div>
<div class="line">Usage:</div>
<div class="line">  -h [ --help ]                         produce help message</div>
<div class="line">  -c [ --ccdb ] arg (=http://localhost:6464)</div>
<div class="line">                                        ccdb url</div>
<div class="line">  --starttimestamp arg (=1677687518645) timestamp for query or put -</div>
<div class="line">                                        (default=now)</div>
<div class="line">  --endtimestamp arg (=1677773918645)   end of validity (for put) - default=1</div>
<div class="line">                                        day from now</div>
<div class="line">  -l [ --list ]                         list timestamps, within the given</div>
<div class="line">                                        range, when the bad channels change</div>
<div class="line">  -p [ --put ]                          upload bad channel object</div>
<div class="line">  -r [ --referenceccdb ] arg (=http://alice-ccdb.cern.ch)</div>
<div class="line">                                        reference ccdb url</div>
<div class="line">  -u [ --upload-default-values ]        upload default values</div>
<div class="line">  -t [ --type ] arg (=BadChannel)       type of bad channel (BadChannel or</div>
<div class="line">                                        RejectList)</div>
<div class="line">  -q [ --query ]                        dump bad channel object from CCDB</div>
<div class="line">  -v [ --verbose ]                      verbose output</div>
<div class="line">  -s [ --solar ] arg                    solar ids to reject</div>
<div class="line">  -d [ --ds ] arg                       dual sampas indices to reject</div>
<div class="line">  -e [ --de ] arg                       DE ids to reject</div>
<div class="line">  -a [ --alias ] arg                    DCS alias (HV or LV) to reject</div>
</div><!-- fragment --><p>For instance, to create in a local CCDB a RejectList object which declares solar number 32 as bad, from Tuesday 1 November 2022 00:00:01 UTC to Saturday 31 December 2022 23:59:59, use:</p>
<div class="fragment"><div class="line">$ o2-mch-bad-channels-ccdb -p -s 32 -t RejectList --starttimestamp 1667260801000 --endtimestamp 1672531199000</div>
</div><!-- fragment --><p>The program will search the reference CCDB (defined with <code>--referenceccdb</code>) for existing objects valid during this period and propose you to either overwrite them or update them. In the first case, a single object will be created, valid for the whole period, containing only the new bad channels. In the second case, as many objects as necessary will be created with appropriate validity ranges, adding the new bad channels to the existing ones.</p>
<h1>o2-mch-scan-hvlv-ccdb</h1>
<p>the HV or LV DCS datapoints stored in the CCDB (<a href="http://alice-ccdb.cern.ch">http://alice-ccdb.cern.ch</a>) can be scanned using the <code>o2-mch-scan-hvlv-ccdb</code> program:</p>
<div class="fragment"><div class="line">$ o2-mch-scan-hvlv-ccdb -h</div>
<div class="line">This program scans HV or LV channels looking for issues</div>
<div class="line">Usage:</div>
<div class="line">  -h [ --help ]                    produce help message</div>
<div class="line">  -r [ --runs ] arg                run(s) to scan (comma separated list of runs</div>
<div class="line">                                   or ASCII file with one run per line)</div>
<div class="line">  -c [ --channels ] arg            channel(s) to scan (&quot;HV&quot; or &quot;LV&quot; or comma</div>
<div class="line">                                   separated list of (part of) DCS aliases)</div>
<div class="line">  --configKeyValues arg            Semicolon separated key=value strings to</div>
<div class="line">                                   change HV thresholds</div>
<div class="line">  -d [ --duration ] arg (=0)       minimum duration (ms) of HV/LV issues to</div>
<div class="line">                                   consider</div>
<div class="line">  -i [ --interval ] arg (=30)      creation time interval (minutes) between</div>
<div class="line">                                   CCDB files</div>
<div class="line">  -w [ --warning ] arg (=1)        warning level (0, 1 or 2)</div>
<div class="line">  -p [ --print ] arg (=1)          print level (0, 1, 2 or 3)</div>
<div class="line">  -o [ --output ] arg (=scan.root) output root file name</div>
</div><!-- fragment --><p>It takes as input a list of runs and a list of either HV or LV channels to scan. <b>Note that it will scan the CCDB from the begining of the first run to the end of the last one, which can represent quite of lot of files.</b> More details about the options are given below.</p>
<p>It produces as output a list of detected issues, with time, duration and affected runs, and a root file with the displays of the data points per channel per chamber for a visual inspection. Issues are triggered when HV/LV values go below a given threshold. For HV channels it also compares the issues found by the internal algorithm with the ones found by <a href="../../../Status/src/HVStatusCreator.cxx">Detectors/MUON/MCH/Status/src/HVStatusCreator.cxx</a>.</p>
<p>For instance, to scan all HV channels for runs 545222 and 545223 and detect issues of a minimum duration of 10s, use: </p><div class="fragment"><div class="line">o2-mch-scan-hvlv-ccdb -r 545222,545223 -c HV -d 10000</div>
</div><!-- fragment --><h3>channel input formats:</h3>
<ul>
<li>"HV" to scan all HV channels</li>
<li>"LV" to scan all LV channels</li>
<li>comma separated list of (part of) DCS aliases, which must be all of the same type, i.e contain either Quad/Slat (type = HV), or Group/an/di/Sol (type = LV)</li>
</ul>
<h3>warning levels:</h3>
<ul>
<li>0: no warning</li>
<li>1: check data points timestamp w.r.t. HV/LV file validity range with ±5s tolerance</li>
<li>2: check data points timestamp w.r.t. HV/LV file validity range without tolerance</li>
</ul>
<h3>print levels:</h3>
<ul>
<li>0: print detected issues</li>
<li>1: same as 0 + print validity range of runs and HV/LV files</li>
<li>2: same as 1 + print the first and last data points of each selected channel</li>
<li>3: same as 1 + print all the data points of each selected channel </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/d2f/refDetectors.html">Module &#39;Detectors&#39;</a></li><li class="navelem"><a class="el" href="../../d4/dff/refDetectorsMUON.html">MUON</a></li><li class="navelem"><a class="el" href="../../d0/daf/refDetectorsMUONMCH.html">MCH</a></li>
    <li class="footer">Generated on Fri Oct 31 2025 12:28:23 for Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
