<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/runner/work/AliceO2/AliceO2/GPU/GPUTracking/Global/GPUChainTrackingClusterizer.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d4/d96/GPUChainTrackingClusterizer_8cxx_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">GPUChainTrackingClusterizer.cxx</div></div>
</div><!--header-->
<div class="contents">
<a href="../../d4/d96/GPUChainTrackingClusterizer_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2019-2020 CERN and copyright holders of ALICE O2.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// See https://alice-o2.web.cern.ch/copyright for details of the copyright holders.</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// All rights not expressly granted are reserved.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">//</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// This software is distributed under the terms of the GNU General Public</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">// License v3 (GPL Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">//</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// or submit itself to any jurisdiction.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/ded/GPUChainTracking_8h.html">GPUChainTracking.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/d8c/GPUChainTrackingDefs_8h.html">GPUChainTrackingDefs.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/dca/GPUChainTrackingDebug_8h.html">GPUChainTrackingDebug.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="../../df/ddc/GPULogging_8h.html">GPULogging.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d5c/GPUO2DataTypes_8h.html">GPUO2DataTypes.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="../../d3/d36/GPUMemorySizeScalers_8h.html">GPUMemorySizeScalers.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="../../dd/dc8/GPUTrackingInputProvider_8h.html">GPUTrackingInputProvider.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/d6e/GPUNewCalibValues_8h.html">GPUNewCalibValues.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/df8/GPUConstantMem_8h.html">GPUConstantMem.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="../../d0/d02/CfChargePos_8h.html">CfChargePos.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="../../dd/da3/CfArray2D_8h.html">CfArray2D.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="../../d9/de5/GPUGeneralKernels_8h.html">GPUGeneralKernels.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;GPUDefParametersRuntime.h&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/deb/GPUTPCCFStreamCompaction_8h.html">GPUTPCCFStreamCompaction.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/d10/GPUTPCCFChargeMapFiller_8h.html">GPUTPCCFChargeMapFiller.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/d65/GPUTPCCFDecodeZS_8h.html">GPUTPCCFDecodeZS.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="../../df/d52/GPUTPCCFCheckPadBaseline_8h.html">GPUTPCCFCheckPadBaseline.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/d92/GPUTPCCFPeakFinder_8h.html">GPUTPCCFPeakFinder.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="../../d7/d30/GPUTPCCFNoiseSuppression_8h.html">GPUTPCCFNoiseSuppression.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/d21/GPUTPCCFDeconvolution_8h.html">GPUTPCCFDeconvolution.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="../../dd/d99/GPUTPCCFClusterizer_8h.html">GPUTPCCFClusterizer.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d54/GPUTPCCFGather_8h.html">GPUTPCCFGather.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="../../dd/dd8/GPUTPCCFMCLabelFlattener_8h.html">GPUTPCCFMCLabelFlattener.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/da7/GPUTriggerOutputs_8h.html">GPUTriggerOutputs.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/d20/GPUHostDataTypes_8h.html">GPUHostDataTypes.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/dc6/GPUTPCCFChainContext_8h.html">GPUTPCCFChainContext.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="../../dd/d04/ZeroSuppression_8h.html">DataFormatsTPC/ZeroSuppression.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/dec/Raw_2include_2DetectorsRaw_2RDHUtils_8h.html">DetectorsRaw/RDHUtils.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="../../d3/d7d/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Digit_8h.html">DataFormatsTPC/Digit.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="../../d0/dda/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h.html">DataFormatsTPC/Constants.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/d0d/TPC_2base_2include_2TPCBase_2RDHUtils_8h.html">TPCBase/RDHUtils.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#ifdef GPUCA_HAS_ONNX</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d92/GPUTPCNNClusterizerKernels_8h.html">GPUTPCNNClusterizerKernels.h</a>&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/d3a/GPUTPCNNClusterizerHost_8h.html">GPUTPCNNClusterizerHost.h</a>&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#ifdef GPUCA_O2_LIB</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#include &quot;<a class="code" href="../../d9/d80/InteractionRecord_8h.html">CommonDataFormat/InteractionRecord.h</a>&quot;</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/d3c/VcShim_8h.html">utils/VcShim.h</a>&quot;</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/d75/strtag_8h.html">utils/strtag.h</a>&quot;</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d0/db4/namespaceo2_1_1gpu.html">o2::gpu</a>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d0/d0a/namespaceo2_1_1tpc.html">o2::tpc</a>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d5/da0/namespaceo2_1_1tpc_1_1constants.html">o2::tpc::constants</a>;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d1/dea/namespaceo2_1_1dataformats.html">o2::dataformats</a>;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">#ifdef GPUCA_TPC_GEOMETRY_O2</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>std::pair&lt;uint32_t, uint32_t&gt; GPUChainTracking::TPCClusterizerDecodeZSCountUpdate(uint32_t iSector, <span class="keyword">const</span> <a class="code hl_struct" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">CfFragment</a>&amp; fragment)</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>{</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  <span class="keywordtype">bool</span> doGPU = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a3e4e6513aa5aeacacdf2ba0b5f411b10">GetRecoStepsGPU</a>() &amp; <a class="code hl_enumvalue" href="../../d2/d32/classo2_1_1gpu_1_1GPUDataTypes.html#a1facf0dc3cb552042810943788544f2ca1eef409358bdd23c54be456b119a3b82">GPUDataTypes::RecoStep::TPCClusterFinding</a>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>  <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector];</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>  <a class="code hl_struct" href="../../d9/d4a/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset.html">GPUTPCClusterFinder::ZSOffset</a>* o = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>  uint32_t <a class="code hl_variable" href="../../dc/d45/test__ctf__io__hmpid_8cxx.html#a41a6d224f3eccd6ee0a0db7355e20877">digits</a> = 0;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  uint32_t pages = 0;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  <span class="keywordflow">for</span> (uint16_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>].minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>      uint16_t posInEndpoint = 0;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>      uint16_t pagesEndpoint = 0;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>      <span class="keywordflow">for</span> (uint32_t k = clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a85476db9a9015d416ba888fe04a9c8af">zsPtrFirst</a>; k &lt; clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#aa0f961018fbb989c50ce34cdeceec8a8">zsPtrLast</a>; k++) {</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <span class="keyword">const</span> uint32_t pageFirst = (k == clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a85476db9a9015d416ba888fe04a9c8af">zsPtrFirst</a>) ? clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a1f3a39665a98cff28c666c6d49dbf95b">zsPageFirst</a> : 0;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <span class="keyword">const</span> uint32_t pageLast = (k + 1 == clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#aa0f961018fbb989c50ce34cdeceec8a8">zsPtrLast</a>) ? clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a054aee0df9d3bf1b87255d0d399f4395">zsPageLast</a> : <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.tpcZS-&gt;sector[iSector].nZSPtr[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k];</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <span class="keywordflow">for</span> (uint32_t l = pageFirst; l &lt; pageLast; l++) {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>          uint16_t pageDigits = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>].pageDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][posInEndpoint++];</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>          <span class="keywordflow">if</span> (pageDigits) {</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>            *(o++) = <a class="code hl_struct" href="../../d9/d4a/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset.html">GPUTPCClusterFinder::ZSOffset</a>{<a class="code hl_variable" href="../../dc/d45/test__ctf__io__hmpid_8cxx.html#a41a6d224f3eccd6ee0a0db7355e20877">digits</a>, <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>, pagesEndpoint};</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>            <a class="code hl_variable" href="../../dc/d45/test__ctf__io__hmpid_8cxx.html#a41a6d224f3eccd6ee0a0db7355e20877">digits</a> += pageDigits;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>          }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>          pagesEndpoint++;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        }</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>      }</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>      <span class="keywordflow">if</span> (pagesEndpoint != <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>].pageDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].size()) {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().ignoreNonFatalGPUErrors) {</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>          GPUError(<span class="stringliteral">&quot;TPC raw page count mismatch in TPCClusterizerDecodeZSCountUpdate: expected %d / buffered %lu&quot;</span>, pagesEndpoint, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>].pageDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].size());</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>          <span class="keywordflow">return</span> {0, 0};</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>          GPUFatal(<span class="stringliteral">&quot;TPC raw page count mismatch in TPCClusterizerDecodeZSCountUpdate: expected %d / buffered %lu&quot;</span>, pagesEndpoint, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>].pageDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].size());</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        }</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>      }</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>      clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = <a class="code hl_struct" href="../../d9/d4a/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset.html">GPUTPCClusterFinder::ZSOffset</a>{<a class="code hl_variable" href="../../dc/d45/test__ctf__io__hmpid_8cxx.html#a41a6d224f3eccd6ee0a0db7355e20877">digits</a>, <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>, 0};</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>      <a class="code hl_variable" href="../../dc/d45/test__ctf__io__hmpid_8cxx.html#a41a6d224f3eccd6ee0a0db7355e20877">digits</a> += <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>].nDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>      pages += <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>].nPages[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    }</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>  }</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>  <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    pages = o - <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  }</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().clusterizerZSSanityCheck &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion &gt;= ZSVersion::ZSVersionDenseLinkBased) {</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    TPCClusterizerEnsureZSOffsets(iSector, fragment);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  }</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  <span class="keywordflow">return</span> {<a class="code hl_variable" href="../../dc/d45/test__ctf__io__hmpid_8cxx.html#a41a6d224f3eccd6ee0a0db7355e20877">digits</a>, pages};</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>}</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="keywordtype">void</span> GPUChainTracking::TPCClusterizerEnsureZSOffsets(uint32_t iSector, <span class="keyword">const</span> <a class="code hl_struct" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">CfFragment</a>&amp; fragment)</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>{</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector];</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  uint32_t nAdcs = 0;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>  <span class="keywordflow">for</span> (uint16_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a> = 0; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a> &lt; <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>++) {</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>];</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    uint32_t pagesEndpoint = 0;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keyword">const</span> uint32_t nAdcsExpected = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.nDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>];</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="keyword">const</span> uint32_t nPagesExpected = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.nPages[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>];</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    uint32_t nAdcDecoded = 0;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; zs = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector];</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>].zsPtrFirst; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>].zsPtrLast; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>      <span class="keyword">const</span> uint32_t pageFirst = (<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> == <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>].zsPtrFirst) ? <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>].zsPageFirst : 0;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>      <span class="keyword">const</span> uint32_t pageLast = (<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> + 1 == <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>].zsPtrLast) ? <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>].zsPageLast : zs.nZSPtr[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>][<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>];</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>      <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = pageFirst; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; pageLast; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <span class="keyword">const</span> <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a>* page = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a>*<span class="keyword">&gt;</span>(zs.zsPtr[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>][<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]) + <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">header::RAWDataHeader</a>* rawDataHeader = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">header::RAWDataHeader</a>*<span class="keyword">&gt;</span>(page);</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>* decHdr = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>*<span class="keyword">&gt;</span>(page + raw::RDHUtils::getMemorySize(*rawDataHeader) - <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>));</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        <span class="keyword">const</span> uint16_t nSamplesInPage = decHdr-&gt;<a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#af23bf9b0cc7cc269c3dacfb06d1c19e8">nADCsamples</a>;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        nAdcDecoded += nSamplesInPage;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        pagesEndpoint++;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>      }</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keywordflow">if</span> (pagesEndpoint != nPagesExpected) {</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>      GPUFatal(<span class="stringliteral">&quot;Sector %d, Endpoint %d, Fragment %d: TPC raw page count mismatch: expected %d / buffered %u&quot;</span>, iSector, <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>, fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>, pagesEndpoint, nPagesExpected);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    }</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keywordflow">if</span> (nAdcDecoded != nAdcsExpected) {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>      GPUFatal(<span class="stringliteral">&quot;Sector %d, Endpoint %d, Fragment %d: TPC ADC count mismatch: expected %u, buffered %u&quot;</span>, iSector, <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>, fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>, nAdcsExpected, nAdcDecoded);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    }</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="keywordflow">if</span> (nAdcs != clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>].<a class="code hl_variable" href="../../d9/d4a/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset.html#aa25d8db9d2615fc3c6c088fff03e8393">offset</a>) {</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>      GPUFatal(<span class="stringliteral">&quot;Sector %d, Endpoint %d, Fragment %d: TPC ADC offset mismatch: expected %u, buffered %u&quot;</span>, iSector, <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>, fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>, nAdcs, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a>].<a class="code hl_variable" href="../../d9/d4a/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset.html#aa25d8db9d2615fc3c6c088fff03e8393">offset</a>);</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    }</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    nAdcs += nAdcsExpected;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>  }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>}</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span><span class="keyword">namespace</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>{</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span><span class="keyword">struct </span>TPCCFDecodeScanTmp {</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>  int32_t zsPtrFirst, zsPageFirst, zsPtrLast, zsPageLast, <a class="code hl_function" href="../../dd/d5f/Painter_8cxx.html#a69a07fb02abd25371c7b7ba7d2bd397c">hasData</a>, pageCounter;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>};</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>} <span class="comment">// namespace</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>std::pair&lt;uint32_t, uint32_t&gt; GPUChainTracking::TPCClusterizerDecodeZSCount(uint32_t iSector, <span class="keyword">const</span> <a class="code hl_struct" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">CfFragment</a>&amp; fragment)</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>{</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a11ba34a4786ed29e61d69551e0a0f79b">getGeneralStepTimer</a>(GeneralStep::Prepare).<a class="code hl_function" href="../../da/dd8/classHighResTimer.html#a8a58469ba2f0df31a316a9000fcf12bf">Start</a>();</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  uint32_t nDigits = 0;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  uint32_t nPages = 0;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>  uint32_t endpointAdcSamples[<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>];</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  memset(endpointAdcSamples, 0, <span class="keyword">sizeof</span>(endpointAdcSamples));</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <span class="keywordtype">bool</span> doGPU = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a3e4e6513aa5aeacacdf2ba0b5f411b10">GetRecoStepsGPU</a>() &amp; <a class="code hl_enumvalue" href="../../d2/d32/classo2_1_1gpu_1_1GPUDataTypes.html#a1facf0dc3cb552042810943788544f2ca1eef409358bdd23c54be456b119a3b82">GPUDataTypes::RecoStep::TPCClusterFinding</a>;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  int32_t firstHBF = (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a> &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a>-&gt;<a class="code hl_variable" href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#a631cf0cf91bf5aa22708551c15919996">hasTfStartOrbit</a>) ? <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a>-&gt;<a class="code hl_variable" href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#aeddb4d8d0b87ac2e5c2e0bd1285f0bde">tfStartOrbit</a> : ((<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.tpcZS-&gt;sector[iSector].<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>[0] &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.tpcZS-&gt;sector[iSector].nZSPtr[0][0]) ? <a class="code hl_namespace" href="../../d4/d7c/namespaceo2.html">o2</a>::raw::<a class="code hl_struct" href="../../da/d2c/structo2_1_1raw_1_1RDHUtils.html">RDHUtils</a>::getHeartBeatOrbit(*(const <a class="code hl_namespace" href="../../d4/d7c/namespaceo2.html">o2</a>::header::<a class="code hl_typedef" href="../../de/dd4/namespaceo2_1_1header.html#a7c0b849287be61d721ffec6a44b7ab34">RAWDataHeader</a>*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.tpcZS-&gt;sector[iSector].zsPtr[0][0]) : 0);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>  <span class="keywordflow">for</span> (uint16_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().prefetchTPCpageScan &gt;= 3 &amp;&amp; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a> - 1) {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>      <span class="keywordflow">for</span> (uint32_t k = 0; k &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a21fe6b3122527f9999d7429650184639">count</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> + 1]; k++) {</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <span class="keywordflow">for</span> (uint32_t l = 0; l &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">nZSPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> + 1][k]; l++) {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>          Vc::Common::prefetchMid(((<span class="keyword">const</span> uint8_t*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> + 1][k]) + l * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>          Vc::Common::prefetchMid(((<span class="keyword">const</span> uint8_t*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> + 1][k]) + l * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>));</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>        }</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>      }</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    std::vector&lt;std::pair&lt;CfFragment, TPCCFDecodeScanTmp&gt;&gt; fragments;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    fragments.reserve(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nFragments);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    fragments.emplace_back(std::pair&lt;CfFragment, TPCCFDecodeScanTmp&gt;{fragment, {0, 0, 0, 0, 0, -1}});</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 1; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nFragments; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>      fragments.emplace_back(std::pair&lt;CfFragment, TPCCFDecodeScanTmp&gt;{fragments.back().<a class="code hl_class" href="../../d1/da0/classint.html">first</a>.next(), {0, 0, 0, 0, 0, -1}});</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    }</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    std::vector&lt;bool&gt; fragmentExtends(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nFragments, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    uint32_t firstPossibleFragment = 0;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    uint32_t pageCounter = 0;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    uint32_t emptyPages = 0;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="keywordflow">for</span> (uint32_t k = 0; k &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a21fe6b3122527f9999d7429650184639">count</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]; k++) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcSingleSector != -1 &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcSingleSector != (int32_t)iSector) {</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>      }</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>      nPages += <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">nZSPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k];</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>      <span class="keywordflow">for</span> (uint32_t l = 0; l &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">nZSPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k]; l++) {</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().prefetchTPCpageScan &gt;= 2 &amp;&amp; l + 1 &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">nZSPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k]) {</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>          Vc::Common::prefetchForOneRead(((<span class="keyword">const</span> uint8_t*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k]) + (l + 1) * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>);</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>          Vc::Common::prefetchForOneRead(((<span class="keyword">const</span> uint8_t*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k]) + (l + 1) * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>));</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        }</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        <span class="keyword">const</span> <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a>* <span class="keyword">const</span> page = ((<span class="keyword">const</span> <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a>*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k]) + l * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>* rdh = (<span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>*)page;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        <span class="keywordflow">if</span> (o2::raw::RDHUtils::getMemorySize(*rdh) == <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../de/dd4/namespaceo2_1_1header.html#a7c0b849287be61d721ffec6a44b7ab34">o2::header::RAWDataHeader</a>)) {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>          emptyPages++;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>        }</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        pageCounter++;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html">TPCZSHDR</a>* <span class="keyword">const</span> hdr = (<span class="keyword">const</span> <a class="code hl_struct" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html">TPCZSHDR</a>*)(rdh_utils::getLink(o2::raw::RDHUtils::getFEEID(*rdh)) == rdh_utils::DLBZSLinkID ? (page + o2::raw::RDHUtils::getMemorySize(*rdh) - <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>)) : (page + <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../de/dd4/namespaceo2_1_1header.html#a7c0b849287be61d721ffec6a44b7ab34">o2::header::RAWDataHeader</a>)));</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion == -1) {</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>          <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion = hdr-&gt;<a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#a67b8704cce7b6e0e03b8b8c0ee90c4cc">version</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().param.tpcTriggerHandling &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion &lt; ZSVersion::ZSVersionDenseLinkBased) { <span class="comment">// TODO: Move tpcTriggerHandling to recoSteps bitmask</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>            <span class="keyword">static</span> <span class="keywordtype">bool</span> errorShown = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>            <span class="keywordflow">if</span> (errorShown == <span class="keyword">false</span>) {</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>              GPUAlarm(<span class="stringliteral">&quot;Trigger handling only possible with TPC Dense Link Based data, received version %d, disabling&quot;</span>, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion);</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>            }</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>            errorShown = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>          }</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion != (int32_t)hdr-&gt;<a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#a67b8704cce7b6e0e03b8b8c0ee90c4cc">version</a>) {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>          GPUError(<span class="stringliteral">&quot;Received TPC ZS 8kb page of mixed versions, expected %d, received %d (linkid %d, feeCRU %d, feeEndpoint %d, feelinkid %d)&quot;</span>, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion, (int32_t)hdr-&gt;<a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#a67b8704cce7b6e0e03b8b8c0ee90c4cc">version</a>, (int32_t)o2::raw::RDHUtils::getLinkID(*rdh), (int32_t)rdh_utils::getCRU(*rdh), (int32_t)rdh_utils::getEndPoint(*rdh), (int32_t)rdh_utils::getLink(*rdh));</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>          <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> bufferSize = 3 * std::max(<span class="keyword">sizeof</span>(*rdh), <span class="keyword">sizeof</span>(*hdr)) + 1;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>          <span class="keywordtype">char</span> <a class="code hl_function" href="../../d7/d88/namespaceo2_1_1mch_1_1raw_1_1impl.html#ae0e742b4683330d86930fe3f0eb600c2">dumpBuffer</a>[bufferSize];</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <span class="keyword">sizeof</span>(*rdh); <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>            <span class="comment">// &quot;%02X &quot; guaranteed to be 3 chars + ending 0.</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>            snprintf(dumpBuffer + 3 * <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>, 4, <span class="stringliteral">&quot;%02X &quot;</span>, (int32_t)((uint8_t*)rdh)[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>          }</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>          GPUAlarm(<span class="stringliteral">&quot;RDH of page: %s&quot;</span>, dumpBuffer);</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <span class="keyword">sizeof</span>(*hdr); <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>            <span class="comment">// &quot;%02X &quot; guaranteed to be 3 chars + ending 0.</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            snprintf(dumpBuffer + 3 * <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>, 4, <span class="stringliteral">&quot;%02X &quot;</span>, (int32_t)((uint8_t*)hdr)[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]);</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>          }</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>          GPUAlarm(<span class="stringliteral">&quot;Metainfo of page: %s&quot;</span>, dumpBuffer);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().ignoreNonFatalGPUErrors) {</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;abandonTimeframe = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            <span class="keywordflow">return</span> {0, 0};</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>            GPUFatal(<span class="stringliteral">&quot;Cannot process with invalid TPC ZS data, exiting&quot;</span>);</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>          }</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        }</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a>.tpcTriggerHandling) {</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>          <span class="keyword">const</span> <a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>* <span class="keyword">const</span> hdr2 = (<span class="keyword">const</span> <a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>*)hdr;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>          <span class="keywordflow">if</span> (hdr2-&gt;<a class="code hl_variable" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html#a1620a13d9908955846fef88a27078e45">flags</a> &amp; TPCZSHDRV2::ZSFlags::TriggerWordPresent) {</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>            <span class="keyword">const</span> <span class="keywordtype">char</span>* triggerWord = (<span class="keyword">const</span> <span class="keywordtype">char</span>*)hdr - <a class="code hl_variable" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html#a8440fd11a556a3918d00d1ecc2f5007b">TPCZSHDRV2::TRIGGER_WORD_SIZE</a>;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>            <a class="code hl_struct" href="../../d2/dba/structo2_1_1tpc_1_1TriggerInfoDLBZS.html">o2::tpc::TriggerInfoDLBZS</a> tmp;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>            memcpy((<span class="keywordtype">void</span>*)&amp;tmp.<a class="code hl_variable" href="../../d2/dba/structo2_1_1tpc_1_1TriggerInfoDLBZS.html#ada4375a6d7431c1b2048e7b2e7fb2c21">triggerWord</a>, triggerWord, <a class="code hl_variable" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html#a8440fd11a556a3918d00d1ecc2f5007b">TPCZSHDRV2::TRIGGER_WORD_SIZE</a>);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>            tmp.<a class="code hl_variable" href="../../d2/dba/structo2_1_1tpc_1_1TriggerInfoDLBZS.html#a5aabf85b21ea646c3d310d199ab3c2a5">orbit</a> = o2::raw::RDHUtils::getHeartBeatOrbit(*rdh);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            <span class="keywordflow">if</span> (tmp.<a class="code hl_variable" href="../../d2/dba/structo2_1_1tpc_1_1TriggerInfoDLBZS.html#ada4375a6d7431c1b2048e7b2e7fb2c21">triggerWord</a>.<a class="code hl_function" href="../../df/d65/structo2_1_1tpc_1_1TriggerWordDLBZS.html#aef11e69b08635bab902ef013309b635f">isValid</a>(0)) {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>              <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">mTriggerBuffer</a>-&gt;triggers.emplace(tmp);</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>            }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>          }</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        }</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        nDigits += hdr-&gt;nADCsamples;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        endpointAdcSamples[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] += hdr-&gt;nADCsamples;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        uint32_t timeBin = (hdr-&gt;timeOffset + (o2::raw::RDHUtils::getHeartBeatOrbit(*rdh) - firstHBF) * <a class="code hl_variable" href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a296bf820b93d969ac714d0aa4ea82d7c">o2::constants::lhc::LHCMaxBunches</a>) / <a class="code hl_variable" href="../../d5/da0/namespaceo2_1_1tpc_1_1constants.html#aafb14a7cd1b982bce14d282d9dcfebaf">LHCBCPERTIMEBIN</a>;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        uint32_t maxTimeBin = timeBin + hdr-&gt;nTimeBinSpan;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion &gt;= ZSVersion::ZSVersionDenseLinkBased) {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>          <span class="keyword">const</span> <a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>* <span class="keyword">const</span> hdr2 = (<span class="keyword">const</span> <a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>*)hdr;</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>          <span class="keywordflow">if</span> (hdr2-&gt;<a class="code hl_variable" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html#a1620a13d9908955846fef88a27078e45">flags</a> &amp; TPCZSHDRV2::ZSFlags::nTimeBinSpanBit8) {</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            maxTimeBin += 256;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>          }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        }</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <span class="keywordflow">if</span> (maxTimeBin &gt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;tpcMaxTimeBin) {</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>          <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;tpcMaxTimeBin = maxTimeBin;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        }</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <span class="keywordtype">bool</span> extendsInNextPage = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion &gt;= ZSVersion::ZSVersionDenseLinkBased) {</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>          <span class="keywordflow">if</span> (l + 1 &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">nZSPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k] &amp;&amp; o2::raw::RDHUtils::getMemorySize(*rdh) == <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>) {</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>            <span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>* nextrdh = (<span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>*)(page + <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>);</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>            extendsInNextPage = o2::raw::RDHUtils::getHeartBeatOrbit(*nextrdh) == o2::raw::RDHUtils::getHeartBeatOrbit(*rdh) &amp;&amp; o2::raw::RDHUtils::getMemorySize(*nextrdh) &gt; <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../de/dd4/namespaceo2_1_1header.html#a7c0b849287be61d721ffec6a44b7ab34">o2::header::RAWDataHeader</a>);</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>          }</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        }</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        <span class="keywordflow">while</span> (firstPossibleFragment &amp;&amp; (uint32_t)fragments[firstPossibleFragment - 1].first.last() &gt; timeBin) {</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>          firstPossibleFragment--;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        }</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <span class="keyword">auto</span> handleExtends = [&amp;](uint32_t ff) {</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>          <span class="keywordflow">if</span> (fragmentExtends[ff]) {</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>            <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>              <span class="comment">// Only add extended page on GPU. On CPU the pages are in consecutive memory anyway.</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>              <span class="comment">// Not adding the page prevents an issue where a page is decoded twice on CPU, when only the extend should be decoded.</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>              fragments[ff].second.zsPageLast++;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>              <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[ff].nPages[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]++;</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>              <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[ff].pageDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].emplace_back(0);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>            }</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>            fragmentExtends[ff] = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>          }</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        };</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion &gt;= ZSVersion::ZSVersionDenseLinkBased) {</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>          <span class="keywordflow">for</span> (uint32_t ff = 0; ff &lt; firstPossibleFragment; ff++) {</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>            handleExtends(ff);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>          }</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        }</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        <span class="keywordflow">for</span> (uint32_t <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> = firstPossibleFragment; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nFragments; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>++) {</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>          <span class="keywordflow">if</span> (timeBin &lt; (uint32_t)fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].<a class="code hl_class" href="../../d1/da0/classint.html">first</a>.last() &amp;&amp; (uint32_t)fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].first.first() &lt;= maxTimeBin) {</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>            <span class="keywordflow">if</span> (!fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.hasData) {</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>              fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.hasData = 1;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>              fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPtrFirst = k;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>              fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPageFirst = l;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>              <span class="keywordflow">if</span> (pageCounter &gt; (uint32_t)fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.pageCounter + 1) {</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>                <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].nPages[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] += emptyPages + pageCounter - fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.pageCounter - 1;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>                <span class="keywordflow">for</span> (uint32_t k2 = fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPtrLast - 1; <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#aafcde2b6070034db5357ea7d6ebf5cfe">k2</a> &lt;= k; <a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#aafcde2b6070034db5357ea7d6ebf5cfe">k2</a>++) {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>                  <span class="keywordflow">for</span> (uint32_t l2 = ((int32_t)k2 == fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPtrLast - 1) ? fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPageLast : 0; l2 &lt; (<a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#aafcde2b6070034db5357ea7d6ebf5cfe">k2</a> &lt; k ? <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">nZSPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][<a class="code hl_variable" href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#aafcde2b6070034db5357ea7d6ebf5cfe">k2</a>] : l); l2++) {</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>                    <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>                      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].pageDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].emplace_back(0);</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                      <span class="comment">// CPU cannot skip unneeded pages, so we must keep space to store the invalid dummy clusters</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                      <span class="keyword">const</span> <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a>* <span class="keyword">const</span> pageTmp = ((<span class="keyword">const</span> <a class="code hl_variable" href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">uint8_t</a>*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k2]) + l2 * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>;</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                      <span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>* rdhTmp = (<span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>*)pageTmp;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                      <span class="keywordflow">if</span> (o2::raw::RDHUtils::getMemorySize(*rdhTmp) != <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../de/dd4/namespaceo2_1_1header.html#a7c0b849287be61d721ffec6a44b7ab34">o2::header::RAWDataHeader</a>)) {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                        <span class="keyword">const</span> <a class="code hl_struct" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html">TPCZSHDR</a>* <span class="keyword">const</span> hdrTmp = (<span class="keyword">const</span> <a class="code hl_struct" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html">TPCZSHDR</a>*)(rdh_utils::getLink(o2::raw::RDHUtils::getFEEID(*rdhTmp)) == rdh_utils::DLBZSLinkID ? (pageTmp + o2::raw::RDHUtils::getMemorySize(*rdhTmp) - <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">TPCZSHDRV2</a>)) : (pageTmp + <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../de/dd4/namespaceo2_1_1header.html#a7c0b849287be61d721ffec6a44b7ab34">o2::header::RAWDataHeader</a>)));</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                        <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].nDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] += hdrTmp-&gt;<a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#af23bf9b0cc7cc269c3dacfb06d1c19e8">nADCsamples</a>;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                      }</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>                    }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                  }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>                }</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (emptyPages) {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].nPages[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] += emptyPages;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>                <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>                  <span class="keywordflow">for</span> (uint32_t <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a11941354c1d09e70ec63bde35fc79d4f">m</a> = 0; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a11941354c1d09e70ec63bde35fc79d4f">m</a> &lt; emptyPages; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a11941354c1d09e70ec63bde35fc79d4f">m</a>++) {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>                    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].pageDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].emplace_back(0);</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>                  }</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>                }</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>              }</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>            fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPtrLast = k + 1;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>            fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPageLast = l + 1;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>            fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.pageCounter = pageCounter;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>            <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].nPages[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]++;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].nDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] += hdr-&gt;nADCsamples;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>            <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>              <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].pageDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].emplace_back(hdr-&gt;nADCsamples);</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            }</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            fragmentExtends[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>] = extendsInNextPage;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            handleExtends(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>);</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>            <span class="keywordflow">if</span> (timeBin &lt; (uint32_t)fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].<a class="code hl_class" href="../../d1/da0/classint.html">first</a>.last()) {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>              <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion &gt;= ZSVersion::ZSVersionDenseLinkBased) {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                <span class="keywordflow">for</span> (uint32_t ff = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> + 1; ff &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nFragments; ff++) {</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                  handleExtends(ff);</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>                }</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>              }</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>              firstPossibleFragment = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> + 1;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>            }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>          }</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        }</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        emptyPages = 0;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>      }</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> = 0; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nFragments; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>++) {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].zsPtrLast = fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPtrLast;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].zsPtrFirst = fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPtrFirst;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].zsPageLast = fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPageLast;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].minMaxCN[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].zsPageFirst = fragments[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>].second.zsPageFirst;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    }</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>  }</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>  <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesTotal += nPages;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>  <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesSector[iSector] = nPages;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span> </div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>  <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nDigitsEndpointMax[iSector] = 0;</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="keywordflow">if</span> (endpointAdcSamples[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>] &gt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nDigitsEndpointMax[iSector]) {</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nDigitsEndpointMax[iSector] = endpointAdcSamples[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>];</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    }</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>  }</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>  uint32_t nDigitsFragmentMax = 0;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nFragments; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    uint32_t pagesInFragment = 0;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    uint32_t digitsInFragment = 0;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <span class="keywordflow">for</span> (uint16_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>      pagesInFragment += <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>].nPages[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>      digitsInFragment += <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentData[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>].nDigits[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    }</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesFragmentMax = std::max(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesFragmentMax, pagesInFragment);</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    nDigitsFragmentMax = std::max(nDigitsFragmentMax, digitsInFragment);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>  }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>  <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a11ba34a4786ed29e61d69551e0a0f79b">getGeneralStepTimer</a>(GeneralStep::Prepare).<a class="code hl_function" href="../../da/dd8/classHighResTimer.html#acaf9fd768897e478d200e514a71971d5">Stop</a>();</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>  <span class="keywordflow">return</span> {nDigits, nDigitsFragmentMax};</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>}</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span> </div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span><span class="keywordtype">void</span> GPUChainTracking::RunTPCClusterizer_compactPeaks(<a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer, <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clustererShadow, int32_t stage, <span class="keywordtype">bool</span> doGPU, int32_t lane)</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>{</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>  <span class="keyword">auto</span>&amp; in = stage ? clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a31706a49811cb41c1c09b77e32884da9">mPpeakPositions</a> : clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ab603087840ecaadb677b933bbd5616a8">mPpositions</a>;</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>  <span class="keyword">auto</span>&amp; out = stage ? clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#abfe433690b2e1d9afef3c319bd16aa39">mPfilteredPeakPositions</a> : clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a31706a49811cb41c1c09b77e32884da9">mPpeakPositions</a>;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>  <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <span class="keyword">const</span> uint32_t iSector = clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a4493fc3aad322eb5e67e826c48dd6b3c">mISector</a>;</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = stage ? clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">nPeaks</a> : clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>;</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    std::vector&lt;size_t&gt; counts;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    uint32_t nSteps = clusterer.<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#aad4421b447b7574f4745f4337cd2b28c">getNSteps</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>);</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="keywordflow">if</span> (nSteps &gt; clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a73e99ecedbb5e35498657018a5176715">mNBufs</a>) {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>      GPUError(<span class="stringliteral">&quot;Clusterer buffers exceeded (%u &gt; %u)&quot;</span>, nSteps, (int32_t)clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a73e99ecedbb5e35498657018a5176715">mNBufs</a>);</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>      exit(1);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    }</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    int32_t scanWorkgroupSize = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#aeee81bf41ad5f1f2bb2d240061e0f664">getGPUParameters</a>(doGPU).par_CF_SCAN_WORKGROUP_SIZE;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <span class="keywordtype">size_t</span> tmpCount = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <span class="keywordflow">if</span> (nSteps &gt; 1) {</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>      <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 1; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; nSteps; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        counts.push_back(tmpCount);</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> == 1) {</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>          runKernel&lt;GPUTPCCFStreamCompaction, GPUTPCCFStreamCompaction::scanStart&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(tmpCount, scanWorkgroupSize, lane), {iSector}}, <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>, stage);</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>          runKernel&lt;GPUTPCCFStreamCompaction, GPUTPCCFStreamCompaction::scanUp&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(tmpCount, scanWorkgroupSize, lane), {iSector}}, <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>, tmpCount);</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        tmpCount = (tmpCount + scanWorkgroupSize - 1) / scanWorkgroupSize;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>      }</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>      runKernel&lt;GPUTPCCFStreamCompaction, GPUTPCCFStreamCompaction::scanTop&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(tmpCount, scanWorkgroupSize, lane), {iSector}}, nSteps, tmpCount);</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span> </div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>      <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = nSteps - 1; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &gt; 1; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>--) {</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        tmpCount = counts[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> - 1];</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        runKernel&lt;GPUTPCCFStreamCompaction, GPUTPCCFStreamCompaction::scanDown&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(tmpCount - scanWorkgroupSize, scanWorkgroupSize, lane), {iSector}}, <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>, scanWorkgroupSize, tmpCount);</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>      }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    }</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    runKernel&lt;GPUTPCCFStreamCompaction, GPUTPCCFStreamCompaction::compactDigits&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>, scanWorkgroupSize, lane), {iSector}}, 1, stage, in, out);</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    <span class="keyword">auto</span>&amp; nOut = stage ? clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a> : clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">nPeaks</a>;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="keyword">auto</span>&amp; nIn = stage ? clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">nPeaks</a> : clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    <span class="keywordtype">size_t</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a> = 0;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; nIn; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>      <span class="keywordflow">if</span> (clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#af55916721167170302ad73c34231f6d9">mPisPeak</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]) {</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        out[<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>++] = in[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>];</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>      }</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    }</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    nOut = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a>;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>  }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>}</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>std::pair&lt;uint32_t, uint32_t&gt; GPUChainTracking::RunTPCClusterizer_transferZS(int32_t iSector, <span class="keyword">const</span> <a class="code hl_struct" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">CfFragment</a>&amp; fragment, int32_t lane)</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>{</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  <span class="keywordtype">bool</span> doGPU = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a24af3ee3d7a9a0df05751143da734c8a">GetRecoStepsGPU</a>() &amp; RecoStep::TPCClusterFinding;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;abandonTimeframe) {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    <span class="keywordflow">return</span> {0, 0};</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  }</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="../../db/d5b/GPUReconstruction_8cxx.html#a9c8dc68de0d58c3b8236802d75077499">retVal</a> = TPCClusterizerDecodeZSCountUpdate(iSector, fragment);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>  <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector];</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clustererShadow = doGPU ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector] : clusterer;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    uint32_t nPagesSector = 0;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>      uint32_t nPages = 0;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPzsMeta-&gt;sector[iSector].zsPtr[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = &amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPzsPtrs[iSector * <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a> + <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPzsPtrs[iSector * <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a> + <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a8a6b95fd94cf61b84c4f7859ac84ca09">mPzs</a> + (nPagesSector + nPages) * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>      <span class="keywordflow">for</span> (uint32_t k = clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a85476db9a9015d416ba888fe04a9c8af">zsPtrFirst</a>; k &lt; clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#aa0f961018fbb989c50ce34cdeceec8a8">zsPtrLast</a>; k++) {</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        <span class="keyword">const</span> uint32_t <a class="code hl_variable" href="../../d2/d0e/test__Algorithm_8cxx.html#a7eacb0eaa625b8263894a6cb11fe4df1">min</a> = (k == clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a85476db9a9015d416ba888fe04a9c8af">zsPtrFirst</a>) ? clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a1f3a39665a98cff28c666c6d49dbf95b">zsPageFirst</a> : 0;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <span class="keyword">const</span> uint32_t <a class="code hl_variable" href="../../d2/d0e/test__Algorithm_8cxx.html#ab79a753a0d458e4d18352429f03adf8e">max</a> = (k + 1 == clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#aa0f961018fbb989c50ce34cdeceec8a8">zsPtrLast</a>) ? clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">mMinMaxCN</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>].<a class="code hl_variable" href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a054aee0df9d3bf1b87255d0d399f4395">zsPageLast</a> : <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.tpcZS-&gt;sector[iSector].nZSPtr[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k];</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d0e/test__Algorithm_8cxx.html#ab79a753a0d458e4d18352429f03adf8e">max</a> &gt; <a class="code hl_variable" href="../../d2/d0e/test__Algorithm_8cxx.html#a7eacb0eaa625b8263894a6cb11fe4df1">min</a>) {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>          <span class="keywordtype">char</span>* <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a> = (<span class="keywordtype">char</span>*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k] + <a class="code hl_variable" href="../../d2/d0e/test__Algorithm_8cxx.html#a7eacb0eaa625b8263894a6cb11fe4df1">min</a> * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>          <span class="keywordtype">char</span>* ptrLast = (<span class="keywordtype">char</span>*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k] + (<a class="code hl_variable" href="../../d2/d0e/test__Algorithm_8cxx.html#ab79a753a0d458e4d18352429f03adf8e">max</a> - 1) * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>          <span class="keywordtype">size_t</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a> = (ptrLast - <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>) + o2::raw::RDHUtils::getMemorySize(*(<span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>*)ptrLast);</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0c7b2fd2882ac371ab3bfb0faabb30b9">GPUMemCpy</a>(RecoStep::TPCClusterFinding, clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a8a6b95fd94cf61b84c4f7859ac84ca09">mPzs</a> + (nPagesSector + nPages) * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>, lane, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>        }</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        nPages += <a class="code hl_variable" href="../../d2/d0e/test__Algorithm_8cxx.html#ab79a753a0d458e4d18352429f03adf8e">max</a> - <a class="code hl_variable" href="../../d2/d0e/test__Algorithm_8cxx.html#a7eacb0eaa625b8263894a6cb11fe4df1">min</a>;</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>      }</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPzsMeta-&gt;sector[iSector].nZSPtr[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = &amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPzsSizes[iSector * <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a> + <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPzsSizes[iSector * <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a> + <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = nPages;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPzsMeta-&gt;sector[iSector].count[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = 1;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>      nPagesSector += nPages;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    }</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0c7b2fd2882ac371ab3bfb0faabb30b9">GPUMemCpy</a>(RecoStep::TPCClusterFinding, clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ac3defe25ac168c527c5839d613358b07">mNMaxPages</a> * <span class="keyword">sizeof</span>(*clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>), lane, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>  }</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../db/d5b/GPUReconstruction_8cxx.html#a9c8dc68de0d58c3b8236802d75077499">retVal</a>;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>}</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span> </div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>int32_t GPUChainTracking::RunTPCClusterizer_prepare(<span class="keywordtype">bool</span> restorePointers)</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>{</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>  <span class="keywordtype">bool</span> doGPU = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a3e4e6513aa5aeacacdf2ba0b5f411b10">GetRecoStepsGPU</a>() &amp; <a class="code hl_enumvalue" href="../../d2/d32/classo2_1_1gpu_1_1GPUDataTypes.html#a1facf0dc3cb552042810943788544f2ca1eef409358bdd23c54be456b119a3b82">GPUDataTypes::RecoStep::TPCClusterFinding</a>;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>  <span class="keywordflow">if</span> (restorePointers) {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <span class="keywordflow">for</span> (uint32_t iSector = 0; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSector++) {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;ptrSave[iSector].zsOffsetHost;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;ptrSave[iSector].zsOffsetDevice;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a8a6b95fd94cf61b84c4f7859ac84ca09">mPzs</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;ptrSave[iSector].zsDevice;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#ae373430434b7ec02a30843a71e01884c">ioPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a1869ca1b2d21d2962fbe0ca4a1dfb5f2">clustersNative</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;ptrClusterNativeSave;</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; threadContext = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a6d707d7b58a2ec3806a701ac6e7dae88">GetThreadContext</a>();</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>  <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a07ef82a99ea630bb9e2ee0beb665b06d">nTPCdigits</a> = 0;</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>.reset(<span class="keyword">new</span> <a class="code hl_struct" href="../../dc/d27/structo2_1_1gpu_1_1GPUTPCCFChainContext.html">GPUTPCCFChainContext</a>);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>  }</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>  <span class="keyword">const</span> int16_t maxFragmentLen = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().overrideClusterizerFragmentLen;</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>  <span class="keyword">const</span> uint32_t maxAllowedTimebin = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a97c8370f617643519290f0e96f7b09ab">param</a>().<a class="code hl_variable" href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#a5bea12a792404864f6018b24d0029a33">par</a>.continuousTracking ? std::max&lt;int32_t&gt;(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a97c8370f617643519290f0e96f7b09ab">param</a>().continuousMaxTimeBin, maxFragmentLen) : <a class="code hl_define" href="../../d2/d37/GPUDefConstantsAndSettings_8h.html#a2ab6c1ed85b61a21d0bea16c903599ec">TPC_MAX_TIME_BIN_TRIGGERED</a>;</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>  <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;tpcMaxTimeBin = maxAllowedTimebin;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>  <span class="keyword">const</span> <a class="code hl_struct" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">CfFragment</a> fragmentMax{(<a class="code hl_typedef" href="../../d7/db4/namespaceo2_1_1gpu_1_1tpccf.html#a2134dbdd1ba3283c84b9051cb2e7ef01">tpccf::TPCTime</a>)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;tpcMaxTimeBin + 1, maxFragmentLen};</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>  <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;prepare(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>, fragmentMax);</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().param.tpcTriggerHandling) {</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">mTriggerBuffer</a>-&gt;triggers.clear();</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>  }</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    uint32_t nDigitsFragmentMax[<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>];</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion = -1;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    <span class="keywordflow">for</span> (uint32_t iSector = 0; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSector++) {</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a21fe6b3122527f9999d7429650184639">count</a>[0]) {</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        <span class="keyword">const</span> <span class="keywordtype">void</span>* rdh = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[0][0];</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <span class="keywordflow">if</span> (rdh &amp;&amp; o2::raw::RDHUtils::getVersion&lt;o2::header::RAWDataHeaderV6&gt;() &gt; <a class="code hl_function" href="../../da/d2c/structo2_1_1raw_1_1RDHUtils.html#aedd6045560063979bd3e0a035d4f526a">o2::raw::RDHUtils::getVersion</a>(rdh)) {</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>          GPUError(<span class="stringliteral">&quot;Data has invalid RDH version %d, %d required\n&quot;</span>, <a class="code hl_function" href="../../da/d2c/structo2_1_1raw_1_1RDHUtils.html#aedd6045560063979bd3e0a035d4f526a">o2::raw::RDHUtils::getVersion</a>(rdh), o2::raw::RDHUtils::getVersion&lt;o2::header::RAWDataHeader&gt;());</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>          <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>      }</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span> </div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().prefetchTPCpageScan &gt;= 1 &amp;&amp; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a> - 1) {</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>          <span class="keywordflow">for</span> (uint32_t k = 0; k &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a21fe6b3122527f9999d7429650184639">count</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]; k++) {</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>            <span class="keywordflow">for</span> (uint32_t l = 0; l &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">nZSPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k]; l++) {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>              Vc::Common::prefetchFar(((<span class="keyword">const</span> uint8_t*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector + 1].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k]) + l * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a>);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>              Vc::Common::prefetchFar(((<span class="keyword">const</span> uint8_t*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector + 1].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>][k]) + l * <a class="code hl_variable" href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">TPCZSHDR::TPC_ZS_PAGE_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>));</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>            }</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>          }</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        }</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>      }</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a> = TPCClusterizerDecodeZSCount(iSector, fragmentMax);</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>      nDigitsFragmentMax[iSector] = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.first;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a1d922eeefa100424779812065f8131c7">nDigits</a> = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.first;</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>      <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a07ef82a99ea630bb9e2ee0beb665b06d">nTPCdigits</a> += <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.first;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    }</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="keywordflow">for</span> (uint32_t iSector = 0; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSector++) {</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>      uint32_t nDigitsBase = nDigitsFragmentMax[iSector];</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>      uint32_t threshold = 40000000;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>      uint32_t nDigitsScaled = nDigitsBase &gt; threshold ? nDigitsBase : std::min((threshold + nDigitsBase) / 2, 2 * nDigitsBase);</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3ba2ae40d5e36642b4030bb0d9eb4c64">SetNMaxDigits</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcClusterer[iSector].mPmemory-&gt;counters.nDigits, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesFragmentMax, nDigitsScaled, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nDigitsEndpointMax[iSector]);</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>      <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3ba2ae40d5e36642b4030bb0d9eb4c64">SetNMaxDigits</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcClusterer[iSector].mPmemory-&gt;counters.nDigits, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesFragmentMax, nDigitsScaled, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nDigitsEndpointMax[iSector]);</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>      }</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>      <span class="keywordflow">if</span> (mPipelineNotifyCtx &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().doublePipelineClusterizer) {</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        mPipelineNotifyCtx-&gt;<a class="code hl_variable" href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#af866fc964591b35925b19c077d1188db">rec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a1795aee999e950158c85d64010b605a1">AllocateRegisteredForeignMemory</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcClusterer[iSector].mZSOffsetId, <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>);</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>        mPipelineNotifyCtx-&gt;<a class="code hl_variable" href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#af866fc964591b35925b19c077d1188db">rec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a1795aee999e950158c85d64010b605a1">AllocateRegisteredForeignMemory</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcClusterer[iSector].mZSId, <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>);</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a5540c38bf3e268f532d380bf8dcb61b7">AllocateRegisteredMemory</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcClusterer[iSector].mZSOffsetId);</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a5540c38bf3e268f532d380bf8dcb61b7">AllocateRegisteredMemory</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcClusterer[iSector].mZSId);</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>      }</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    }</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    <span class="keywordflow">for</span> (uint32_t iSector = 0; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSector++) {</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>      uint32_t nDigits = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a>-&gt;<a class="code hl_variable" href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a76564b04b15f226f6b6bd572b7dbb169">nTPCDigits</a>[iSector];</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>      <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a07ef82a99ea630bb9e2ee0beb665b06d">nTPCdigits</a> += nDigits;</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3ba2ae40d5e36642b4030bb0d9eb4c64">SetNMaxDigits</a>(nDigits, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesFragmentMax, nDigits, 0);</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    }</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>  }</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span> </div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) {</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    GPUInfo(<span class="stringliteral">&quot;Event has %u 8kb TPC ZS pages (version %d), %ld digits&quot;</span>, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesTotal, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion, (int64_t)<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a07ef82a99ea630bb9e2ee0beb665b06d">nTPCdigits</a>);</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    GPUInfo(<span class="stringliteral">&quot;Event has %ld TPC Digits&quot;</span>, (int64_t)<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a07ef82a99ea630bb9e2ee0beb665b06d">nTPCdigits</a>);</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>  }</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span> </div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;tpcMaxTimeBin &gt; maxAllowedTimebin) {</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    GPUError(<span class="stringliteral">&quot;Input data has invalid time bin %u &gt; %d&quot;</span>, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;tpcMaxTimeBin, maxAllowedTimebin);</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().ignoreNonFatalGPUErrors) {</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;abandonTimeframe = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;tpcMaxTimeBin = maxAllowedTimebin;</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    }</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>  }</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span> </div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>  <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentFirst = <a class="code hl_struct" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">CfFragment</a>{std::max&lt;int32_t&gt;(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;tpcMaxTimeBin + 1, maxFragmentLen), maxFragmentLen};</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  <span class="keywordflow">for</span> (int32_t iSector = 0; iSector &lt; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes &amp;&amp; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSector++) {</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a> &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesSector[iSector] &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion != -1) {</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nextPos[iSector] = RunTPCClusterizer_transferZS(iSector, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentFirst, <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes + iSector);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    }</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>  }</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span> </div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>  <span class="keywordflow">if</span> (mPipelineNotifyCtx &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().doublePipelineClusterizer) {</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <span class="keywordflow">for</span> (uint32_t iSector = 0; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSector++) {</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;ptrSave[iSector].zsOffsetHost = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>;</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;ptrSave[iSector].zsOffsetDevice = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">mPzsOffsets</a>;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;ptrSave[iSector].zsDevice = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a8a6b95fd94cf61b84c4f7859ac84ca09">mPzs</a>;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    }</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>  }</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>}</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span> </div>
<div class="foldopen" id="foldopen00584" data-start="{" data-end="}">
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno"><a class="line" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a52a7d9a8dbd7908e12c343b9271706d2">  584</a></span>int32_t <a class="code hl_function" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a52a7d9a8dbd7908e12c343b9271706d2">GPUChainTracking::RunTPCClusterizer</a>(<span class="keywordtype">bool</span> synchronizeOutput)</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>{</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a97c8370f617643519290f0e96f7b09ab">param</a>().<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#af03a26d3c23835e083e424e38629ccde">rec</a>.fwdTPCDigitsAsClusters) {</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#af70af0786ed82604fe65a4e366a0b178">ForwardTPCDigits</a>();</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>  }</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span><span class="preprocessor">#ifdef GPUCA_TPC_GEOMETRY_O2</span></div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>  [[maybe_unused]] int32_t tpcTimeBinCut = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a9772a027922e03165fe5e51fa81d4b9b">mUpdateNewCalibObjects</a> &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#acb9264c286fa5e83579b23ae36c8c334">mNewCalibValues</a>-&gt;newTPCTimeBinCut ? <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#acb9264c286fa5e83579b23ae36c8c334">mNewCalibValues</a>-&gt;tpcTimeBinCut : <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a97c8370f617643519290f0e96f7b09ab">param</a>().<a class="code hl_variable" href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#aa837006951944c37d54c8f26124e7400">tpcCutTimeBin</a>;</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>  <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#ac1e3e71994a8ec7fa6e02184e423feac">PushNonPersistentMemory</a>(<a class="code hl_function" href="../../d6/d75/strtag_8h.html#a3c542c21bfc745e5472d610a586bd9c8">qStr2Tag</a>(<span class="stringliteral">&quot;TPCCLUST&quot;</span>));</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; threadContext = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a6d707d7b58a2ec3806a701ac6e7dae88">GetThreadContext</a>();</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> doGPU = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a24af3ee3d7a9a0df05751143da734c8a">GetRecoStepsGPU</a>() &amp; RecoStep::TPCClusterFinding;</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>  <span class="keywordflow">if</span> (RunTPCClusterizer_prepare(mPipelineNotifyCtx &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().doublePipelineClusterizer)) {</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>  }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().autoAdjustHostThreads &amp;&amp; !doGPU) {</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a6802aae83285761c26dfa5b5f5d3e368">SetNActiveThreads</a>(<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a07ef82a99ea630bb9e2ee0beb665b06d">nTPCdigits</a> / 6000);</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>  }</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span> </div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>  <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a> = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_function" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a33316783ab1df489cc17b66d76d49fd0">NTPCClusters</a>(<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a07ef82a99ea630bb9e2ee0beb665b06d">nTPCdigits</a>);</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  <span class="keywordtype">float</span> tpcHitLowOccupancyScalingFactor = 1.f;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a> &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a>-&gt;<a class="code hl_variable" href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#ac5132b5f6c124eca953247a3fe939e92">hasNHBFPerTF</a>) {</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    uint32_t nHitsBase = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a>;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    uint32_t threshold = 30000000 / 256 * <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a>-&gt;<a class="code hl_variable" href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#a32baf415cc5437466f51da24e262aec0">nHBFPerTF</a>;</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a>-&gt;<a class="code hl_variable" href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#a32baf415cc5437466f51da24e262aec0">nHBFPerTF</a> &lt; 64) {</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>      threshold *= 2;</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    }</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a> = std::max&lt;uint32_t&gt;(nHitsBase, std::min&lt;uint32_t&gt;(threshold, nHitsBase * 3.5f)); <span class="comment">// Increase the buffer size for low occupancy data to compensate for noisy pads creating exceiive clusters</span></div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="keywordflow">if</span> (nHitsBase &lt; threshold) {</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>      <span class="keywordtype">float</span> maxFactor = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a> &lt; threshold * 2 / 3 ? 3 : (<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a> &lt; threshold ? 2.25f : 1.75f);</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>      <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a0d9a35a8ffd24655589119066e6bb933">temporaryFactor</a> *= std::min(maxFactor, (<span class="keywordtype">float</span>)threshold / nHitsBase);</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>      tpcHitLowOccupancyScalingFactor = std::min(3.5f, (<span class="keywordtype">float</span>)threshold / nHitsBase);</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    }</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>  }</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>  <span class="keywordflow">for</span> (uint32_t iSector = 0; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSector++) {</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector].<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a2ac3f23887f0f96157a166b7b6f6e569">SetMaxData</a>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>); <span class="comment">// First iteration to set data sizes</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>  }</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>  <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a2f7769e56e0f17cc59f6ab40f69d4f32">ComputeReuseMax</a>(<span class="keyword">nullptr</span>); <span class="comment">// Resolve maximums for shared buffers</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>  <span class="keywordflow">for</span> (uint32_t iSector = 0; iSector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSector++) {</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a9e17a31147209a8f55caef65c0404d6e">SetupGPUProcessor</a>(&amp;<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcClusterer[iSector], <span class="keyword">true</span>); <span class="comment">// Now we allocate</span></div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>  }</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>  <span class="keywordflow">if</span> (mPipelineNotifyCtx &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().doublePipelineClusterizer) {</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    RunTPCClusterizer_prepare(<span class="keyword">true</span>); <span class="comment">// Restore some pointers, allocated by the other pipeline, and set to 0 by SetupGPUProcessor (since not allocated in this pipeline)</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>  }</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span> </div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>  <span class="keywordflow">if</span> (doGPU &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) {</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#ae373430434b7ec02a30843a71e01884c">ioPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPzsMeta;</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a2e6403139bd241fbe0918f36a8cdf9a0">WriteToConstantMemory</a>(RecoStep::TPCClusterFinding, (<span class="keywordtype">char</span>*)&amp;<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;ioPtrs - (<span class="keywordtype">char</span>*)<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>(), &amp;<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;ioPtrs, <span class="keyword">sizeof</span>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;ioPtrs), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1);</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>  }</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>  <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a2e6403139bd241fbe0918f36a8cdf9a0">WriteToConstantMemory</a>(RecoStep::TPCClusterFinding, (<span class="keywordtype">char</span>*)<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcClusterer - (<span class="keywordtype">char</span>*)<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>(), <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;tpcClusterer, <span class="keyword">sizeof</span>(<a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>) * <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>, <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1, &amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a497cef20fc1000df3afeb7d93a78a525">mEvents</a>-&gt;<a class="code hl_variable" href="../../d8/ded/structo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct.html#adddd7f5e498c9f0428f40b54d50332c2">init</a>);</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>  }</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span><span class="preprocessor">#ifdef GPUCA_HAS_ONNX</span></div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>  <span class="keyword">const</span> GPUSettingsProcessingNNclusterizer&amp; nn_settings = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nn;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>  <a class="code hl_class" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html">GPUTPCNNClusterizerHost</a> nnApplications[<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes];</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>  <span class="comment">// Maximum of 4 lanes supported</span></div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>  <a class="code hl_class" href="../../da/dd8/classHighResTimer.html">HighResTimer</a>* nnTimers[12];</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nn.applyNNclusterizer) {</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    int32_t deviceId = -1;</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    int32_t numLanes = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes;</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    int32_t maxThreads = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#aa8be1511007035cbcf05248d454c9fcd">getNKernelHostThreads</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <span class="comment">// bool recreateMemoryAllocator = false;</span></div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 1) {</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>      nnTimers[0] = &amp;getTimer&lt;GPUTPCNNClusterizer, 0&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXClassification_0_&quot;</span>, 0);</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>      nnTimers[1] = &amp;getTimer&lt;GPUTPCNNClusterizer, 1&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXRegression_1_&quot;</span>, 1);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>      nnTimers[2] = &amp;getTimer&lt;GPUTPCNNClusterizer, 2&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXRegression2_2_&quot;</span>, 2);</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>      nnTimers[3] = &amp;getTimer&lt;GPUTPCNNClusterizer, 3&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXClassification_0_&quot;</span>, 3);</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>      nnTimers[4] = &amp;getTimer&lt;GPUTPCNNClusterizer, 4&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXRegression_1_&quot;</span>, 4);</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>      nnTimers[5] = &amp;getTimer&lt;GPUTPCNNClusterizer, 5&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXRegression2_2_&quot;</span>, 5);</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>      nnTimers[6] = &amp;getTimer&lt;GPUTPCNNClusterizer, 6&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXClassification_0_&quot;</span>, 6);</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>      nnTimers[7] = &amp;getTimer&lt;GPUTPCNNClusterizer, 7&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXRegression_1_&quot;</span>, 7);</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>      nnTimers[8] = &amp;getTimer&lt;GPUTPCNNClusterizer, 8&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXRegression2_2_&quot;</span>, 8);</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>      nnTimers[9] = &amp;getTimer&lt;GPUTPCNNClusterizer, 9&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXClassification_0_&quot;</span>, 9);</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>      nnTimers[10] = &amp;getTimer&lt;GPUTPCNNClusterizer, 10&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXRegression_1_&quot;</span>, 10);</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>      nnTimers[11] = &amp;getTimer&lt;GPUTPCNNClusterizer, 11&gt;(<span class="stringliteral">&quot;GPUTPCNNClusterizer_ONNXRegression2_2_&quot;</span>, 11);</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>    }</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span> </div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a2d828fb344766f0d8f6e7825ea5f2ea1">runParallelOuterLoop</a>(doGPU, numLanes, [&amp;](uint32_t lane) {</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>      nnApplications[lane].<a class="code hl_function" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a844e2486aa8662bdf550e1dc701acc86">init</a>(nn_settings, <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().deterministicGPUReconstruction);</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>      <span class="keywordflow">if</span> (nnApplications[lane].mModelsUsed[0]) {</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a890a7b64d995e9f06473afdf8172c6c5">SetONNXGPUStream</a>(*(nnApplications[lane].mModelClass).getSessionOptions(), lane, &amp;deviceId);</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>).setDeviceId(deviceId);</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>        <span class="keywordflow">if</span> (nnApplications[lane].mModelClass.getIntraOpNumThreads() &gt; maxThreads) {</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>          nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a74087bd5bf35a3f613a2a9ad3f63fc7a">setIntraOpNumThreads</a>(maxThreads);</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        }</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>).initEnvironment();</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>        <span class="comment">// Registering this once seems to be enough, even with different environmnents / models. ONNX apparently uses this per device and stores the OrtAllocator internally. All models will then use the volatile allocation.</span></div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        <span class="comment">// But environment must be valid, so we init the model environment first and use it here afterwards.</span></div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        <span class="comment">// Either this is done in one environment with lane == 0 or by recreating the allocator using recreateMemoryAllocator.</span></div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>        <span class="comment">// TODO: Volatile allocation works for reserving, but not yet for allocations when binding the input tensor</span></div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <span class="comment">// if (lane == 0) {</span></div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        <span class="comment">//   nnApplications[lane].directOrtAllocator((nnApplications[lane].mModelClass).getEnv(), (nnApplications[lane].mModelClass).getMemoryInfo(), mRec, recreateMemoryAllocator);</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <span class="comment">// }</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>        <span class="comment">// recreateMemoryAllocator = true;</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>).initSession();</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>      }</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>      <span class="keywordflow">if</span> (nnApplications[lane].mModelsUsed[1]) {</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a890a7b64d995e9f06473afdf8172c6c5">SetONNXGPUStream</a>(*(nnApplications[lane].mModelReg1).getSessionOptions(), lane, &amp;deviceId);</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>).setDeviceId(deviceId);</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        <span class="keywordflow">if</span> (nnApplications[lane].mModelReg1.getIntraOpNumThreads() &gt; maxThreads) {</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>          nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a74087bd5bf35a3f613a2a9ad3f63fc7a">setIntraOpNumThreads</a>(maxThreads);</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        }</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>        <span class="comment">// (nnApplications[lane].mModelReg1).setEnv((nnApplications[lane].mModelClass).getEnv());</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>).initEnvironment();</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>        <span class="comment">// nnApplications[lane].directOrtAllocator((nnApplications[lane].mModelReg1).getEnv(), (nnApplications[lane].mModelReg1).getMemoryInfo(), mRec, recreateMemoryAllocator);</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>).initSession();</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>      }</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>      <span class="keywordflow">if</span> (nnApplications[lane].mModelsUsed[2]) {</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a890a7b64d995e9f06473afdf8172c6c5">SetONNXGPUStream</a>(*(nnApplications[lane].mModelReg2).getSessionOptions(), lane, &amp;deviceId);</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>).setDeviceId(deviceId);</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        <span class="keywordflow">if</span> (nnApplications[lane].mModelReg2.getIntraOpNumThreads() &gt; maxThreads) {</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>          nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a74087bd5bf35a3f613a2a9ad3f63fc7a">setIntraOpNumThreads</a>(maxThreads);</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>        }</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>        <span class="comment">// (nnApplications[lane].mModelReg2).setEnv((nnApplications[lane].mModelClass).getEnv());</span></div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>).initEnvironment();</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        <span class="comment">// nnApplications[lane].directOrtAllocator((nnApplications[lane].mModelClass).getEnv(), (nnApplications[lane].mModelClass).getMemoryInfo(), mRec, recreateMemoryAllocator);</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>        (nnApplications[lane].<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>).initSession();</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>      }</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>      <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 0) {</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(ORT) Allocated ONNX stream for lane &quot;</span> &lt;&lt; lane &lt;&lt; <span class="stringliteral">&quot; and device &quot;</span> &lt;&lt; deviceId;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>      }</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    });</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    <span class="keyword">const</span> int16_t maxFragmentLen = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().overrideClusterizerFragmentLen;</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>    <span class="keyword">const</span> uint32_t maxAllowedTimebin = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a97c8370f617643519290f0e96f7b09ab">param</a>().<a class="code hl_variable" href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#a5bea12a792404864f6018b24d0029a33">par</a>.continuousTracking ? std::max&lt;int32_t&gt;(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a97c8370f617643519290f0e96f7b09ab">param</a>().continuousMaxTimeBin, maxFragmentLen) : <a class="code hl_define" href="../../d2/d37/GPUDefConstantsAndSettings_8h.html#a2ab6c1ed85b61a21d0bea16c903599ec">TPC_MAX_TIME_BIN_TRIGGERED</a>;</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="keywordflow">for</span> (int32_t sector = 0; sector &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; sector++) {</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>      <a class="code hl_class" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html">GPUTPCNNClusterizer</a>&amp; clustererNN = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcNNClusterer[sector];</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>      <a class="code hl_class" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html">GPUTPCNNClusterizer</a>&amp; clustererNNShadow = doGPU ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;tpcNNClusterer[sector] : clustererNN;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>      int32_t lane = sector % numLanes;</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>      clustererNN.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a2e512e4ce7aa415267e5234eb79b1d1d">mDeviceId</a> = deviceId;</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>      clustererNN.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a1ca692b872aa9605625ed8765453dde3">mISector</a> = sector;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>      clustererNN.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a657a9b6a98c7b02e7eafaf70e09c7b0f">mNnClusterizerTotalClusters</a> = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[lane].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a8a1111a130d63f39f36f20b9e2af6dfd">mNMaxClusters</a>;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>      nnApplications[lane].<a class="code hl_function" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#afb96865edb10fb1f9f1ca8449244ba6e">initClusterizer</a>(nn_settings, clustererNN, maxFragmentLen, maxAllowedTimebin);</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>      <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>        clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a2e512e4ce7aa415267e5234eb79b1d1d">mDeviceId</a> = deviceId;</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>        clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a1ca692b872aa9605625ed8765453dde3">mISector</a> = sector;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a657a9b6a98c7b02e7eafaf70e09c7b0f">mNnClusterizerTotalClusters</a> = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[lane].<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a8a1111a130d63f39f36f20b9e2af6dfd">mNMaxClusters</a>;</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>        nnApplications[lane].<a class="code hl_function" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#afb96865edb10fb1f9f1ca8449244ba6e">initClusterizer</a>(nn_settings, clustererNNShadow, maxFragmentLen, maxAllowedTimebin);</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>      }</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>      <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 2) {</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Processor initialized. Sector &quot;</span> &lt;&lt; sector &lt;&lt; <span class="stringliteral">&quot;, lane &quot;</span> &lt;&lt; lane &lt;&lt; <span class="stringliteral">&quot;, max clusters &quot;</span> &lt;&lt; clustererNN.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a657a9b6a98c7b02e7eafaf70e09c7b0f">mNnClusterizerTotalClusters</a> &lt;&lt; <span class="stringliteral">&quot; (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>      }</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a5540c38bf3e268f532d380bf8dcb61b7">AllocateRegisteredMemory</a>(clustererNN.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#aeede60518a9d9afed5c36c7b6d1c6817">mMemoryId</a>);</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>      <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 2) {</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Memory registered for memoryId &quot;</span> &lt;&lt; clustererNN.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#aeede60518a9d9afed5c36c7b6d1c6817">mMemoryId</a> &lt;&lt; <span class="stringliteral">&quot; (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>      }</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>      <span class="comment">// nnApplications[lane].createBoundary(clustererNNShadow);</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>      <span class="comment">// nnApplications[lane].createIndexLookup(clustererNNShadow);</span></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    }</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>      <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 2) {</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Writing to constant memory...&quot;</span>;</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>      }</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a2e6403139bd241fbe0918f36a8cdf9a0">WriteToConstantMemory</a>(RecoStep::TPCClusterFinding, (<span class="keywordtype">char</span>*)&amp;<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcNNClusterer - (<span class="keywordtype">char</span>*)<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>(), &amp;<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;tpcNNClusterer, <span class="keyword">sizeof</span>(<a class="code hl_class" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html">GPUTPCNNClusterizer</a>) * <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>, <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1, &amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a497cef20fc1000df3afeb7d93a78a525">mEvents</a>-&gt;<a class="code hl_variable" href="../../d8/ded/structo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct.html#adddd7f5e498c9f0428f40b54d50332c2">init</a>);</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>      <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 2) {</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Writing to constant memory done&quot;</span>;</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>      }</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    }</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>  }</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span> </div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>  <span class="keywordtype">size_t</span> nClsTotal = 0;</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>  <a class="code hl_struct" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html">ClusterNativeAccess</a>* tmpNativeAccess = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a340cb39b521009dafc0a8dcd18e10787">mClusterNativeAccess</a>.get();</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>  <a class="code hl_struct" href="../../dc/dbc/structo2_1_1tpc_1_1ClusterNative.html">ClusterNative</a>* tmpNativeClusters = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>  std::unique_ptr&lt;ClusterNative[]&gt; tmpNativeClusterBuffer;</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>  <span class="comment">// setup MC Labels</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>  <span class="keywordtype">bool</span> propagateMCLabels = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().runMC &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#ae373430434b7ec02a30843a71e01884c">ioPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a> &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#ae373430434b7ec02a30843a71e01884c">ioPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a>-&gt;<a class="code hl_variable" href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a8c3d1d3f0c025468d88ebff313e662d3">tpcDigitsMC</a>;</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span> </div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>  <span class="keyword">auto</span>* digitsMC = propagateMCLabels ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#ae373430434b7ec02a30843a71e01884c">ioPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a>-&gt;<a class="code hl_variable" href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a8c3d1d3f0c025468d88ebff313e662d3">tpcDigitsMC</a> : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span> </div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>  <span class="keywordtype">bool</span> buildNativeGPU = doGPU &amp;&amp; NeedTPCClustersOnGPU();</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>  <span class="keywordtype">bool</span> buildNativeHost = (<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#ac3ef7da851fbed334926c0830e4f96b1">GetRecoStepsOutputs</a>() &amp; <a class="code hl_enumvalue" href="../../d2/d32/classo2_1_1gpu_1_1GPUDataTypes.html#ab3ee3baae27e95ee599e8ecfc1c47b62a70eba767897ae1f9ade06c8ea75cfff9">GPUDataTypes::InOutType::TPCClusters</a>) || <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().deterministicGPUReconstruction; <span class="comment">// TODO: Should do this also when clusters are needed for later steps on the host but not requested as output</span></div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span> </div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>  <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mNClusterNative = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mNClusterNative = <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a> * tpcHitLowOccupancyScalingFactor;</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>  <span class="keywordflow">if</span> (buildNativeGPU) {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a5540c38bf3e268f532d380bf8dcb61b7">AllocateRegisteredMemory</a>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mResourceClusterNativeBuffer);</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>  }</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>  <span class="keywordflow">if</span> (mWaitForFinalInputs &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes &gt; 6) {</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    GPUFatal(<span class="stringliteral">&quot;ERROR, mWaitForFinalInputs cannot be called with nTPCClustererLanes &gt; 6&quot;</span>);</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>  }</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>  <span class="keywordflow">if</span> (buildNativeHost &amp;&amp; !(buildNativeGPU &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().delayedOutput)) {</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <span class="keywordflow">if</span> (mWaitForFinalInputs) {</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>      GPUFatal(<span class="stringliteral">&quot;Cannot use waitForFinalInput callback without delayed output&quot;</span>);</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>    }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcApplyClusterFilterOnCPU) {</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a5540c38bf3e268f532d380bf8dcb61b7">AllocateRegisteredMemory</a>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mResourceClusterNativeOutput, <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcWriteClustersAfterRejection ? <span class="keyword">nullptr</span> : <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">mSubOutputControls</a>[<a class="code hl_function" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">GPUTrackingOutputs::getIndex</a>(&amp;<a class="code hl_variable" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a1c865570694053b57d40e0221f8f5631">GPUTrackingOutputs::clustersNative</a>)]);</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>      tmpNativeClusters = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPclusterNativeOutput;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>      tmpNativeClusterBuffer = std::make_unique&lt;ClusterNative[]&gt;(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mNClusterNative);</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>      tmpNativeClusters = tmpNativeClusterBuffer.get();</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    }</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>  }</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span> </div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>  <a class="code hl_struct" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html">GPUTPCLinearLabels</a> mcLinearLabels;</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>  <span class="keywordflow">if</span> (propagateMCLabels) {</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    <span class="comment">// No need to overallocate here, nTPCHits is anyway an upper bound used for the GPU cluster buffer, and we can always enlarge the buffer anyway</span></div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    mcLinearLabels.<a class="code hl_variable" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#ac34e467563f8a809081f761de8162c56">header</a>.reserve(<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a> / 2);</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>    mcLinearLabels.<a class="code hl_variable" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#a0e679f238099bc0a36bda2ed4f1f6fe6">data</a>.reserve(<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a>);</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>  }</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span> </div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>  int8_t transferRunning[<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>] = {0};</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>  uint32_t outputQueueStart = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a883e23a31cefb85d9defcaf203f1409c">mOutputQueue</a>.size();</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span> </div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>  <span class="keyword">auto</span> notifyForeignChainFinished = [<span class="keyword">this</span>]() {</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>    <span class="keywordflow">if</span> (mPipelineNotifyCtx) {</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(OutputStream()); <span class="comment">// Must finish before updating ioPtrs in (global) constant memory</span></div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>      {</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>        std::lock_guard&lt;std::mutex&gt; lock(mPipelineNotifyCtx-&gt;<a class="code hl_variable" href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#a9ee684377747e275e506dce6461e9b13">mutex</a>);</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        mPipelineNotifyCtx-&gt;<a class="code hl_variable" href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#a746a09365f587184642f0e507dfcb3f5">ready</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>      }</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>      mPipelineNotifyCtx-&gt;<a class="code hl_variable" href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#a45d187e33d6f66697b4eae0cd784fbca">cond</a>.notify_one();</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    }</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>  };</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>  <span class="keywordtype">bool</span> synchronizeCalibUpdate = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span> </div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>  <span class="keywordflow">for</span> (uint32_t iSectorBase = 0; iSectorBase &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; iSectorBase += <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes) {</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    std::vector&lt;bool&gt; laneHasData(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    <span class="keyword">static_assert</span>(<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a> &lt;= <a class="code hl_define" href="../../d3/d0c/GPUDefParametersConstants_8h.html#a965cb1eb4e2b1f84d1ed7fc1d4e7b5c7">GPUCA_MAX_STREAMS</a>, <span class="stringliteral">&quot;Stream events must be able to hold all sectors&quot;</span>);</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    <span class="keyword">const</span> int32_t maxLane = std::min&lt;int32_t&gt;(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes, <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a> - iSectorBase);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>    <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">CfFragment</a> fragment = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentFirst; !fragment.isEnd(); fragment = fragment.next()) {</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 3) {</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        GPUInfo(<span class="stringliteral">&quot;Processing time bins [%d, %d) for sectors %d to %d&quot;</span>, fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#afe077918006895dca45c515f440eb7a9">start</a>, fragment.last(), iSectorBase, iSectorBase + <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes - 1);</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>      }</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>      <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a2d828fb344766f0d8f6e7825ea5f2ea1">runParallelOuterLoop</a>(doGPU, maxLane, [&amp;](uint32_t lane) {</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        <span class="keywordflow">if</span> (doGPU &amp;&amp; fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a> != 0) {</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>          SynchronizeStream(lane); <span class="comment">// Don&#39;t overwrite charge map from previous iteration until cluster computation is finished</span></div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        }</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span> </div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        uint32_t iSector = iSectorBase + lane;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>        <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector];</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clustererShadow = doGPU ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector] : clusterer;</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">nPeaks</a> = clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a> = 0;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a784c1c62f7e3d45355b8e7c628a335e2">fragment</a> = fragment;</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span> </div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a>) {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>          <span class="keywordtype">bool</span> setDigitsOnGPU = doGPU &amp;&amp; not <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>          <span class="keywordtype">bool</span> setDigitsOnHost = (not doGPU &amp;&amp; not <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) || propagateMCLabels;</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>          <span class="keyword">auto</span>* inDigits = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a>;</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>          <span class="keywordtype">size_t</span> numDigits = inDigits-&gt;<a class="code hl_variable" href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a76564b04b15f226f6b6bd572b7dbb169">nTPCDigits</a>[iSector];</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>          <span class="keywordflow">if</span> (setDigitsOnGPU) {</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>            <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0c7b2fd2882ac371ab3bfb0faabb30b9">GPUMemCpy</a>(RecoStep::TPCClusterFinding, clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a41522a82c3e2ec6175649f7621d82908">mPdigits</a>, inDigits-&gt;tpcDigits[iSector], <span class="keyword">sizeof</span>(clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a41522a82c3e2ec6175649f7621d82908">mPdigits</a>[0]) * numDigits, lane, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>          }</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>          <span class="keywordflow">if</span> (setDigitsOnHost) {</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>            clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a41522a82c3e2ec6175649f7621d82908">mPdigits</a> = <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="../../d1/d46/classo2_1_1tpc_1_1Digit.html">o2::tpc::Digit</a>*<span class="keyword">&gt;</span>(inDigits-&gt;tpcDigits[iSector]); <span class="comment">// TODO: Needs fixing (invalid const cast)</span></div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>          }</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>          clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a1d922eeefa100424779812065f8131c7">nDigits</a> = numDigits;</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        }</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span> </div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) {</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesSector[iSector] &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion != -1) {</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>            clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nextPos[iSector].first;</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>            clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a1277e21601ec9e7dbddac8d441351f8c">nPagesSubsector</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nextPos[iSector].second;</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>            clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a> = clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a1277e21601ec9e7dbddac8d441351f8c">nPagesSubsector</a> = 0;</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>          }</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        }</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a00a4eb6512be294afc5ecdc28bf765d8">TransferMemoryResourceLinkToGPU</a>(RecoStep::TPCClusterFinding, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a595cd52d65d91dd4490069bb9adb8ffc">mMemoryId</a>, lane);</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span> </div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>        <span class="keyword">using </span>ChargeMapType = <span class="keyword">decltype</span>(*clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a9b551492fe4c156f453f03173cf2ecdb">mPchargeMap</a>);</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>        <span class="keyword">using </span>PeakMapType = <span class="keyword">decltype</span>(*clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a140a95cae76c43c48c78d668879f5c28">mPpeakMap</a>);</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>        runKernel&lt;GPUMemClean16&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac16fec7768fd45a609dd29024b658a92">GetGridAutoStep</a>(lane, RecoStep::TPCClusterFinding)}, clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a9b551492fe4c156f453f03173cf2ecdb">mPchargeMap</a>, <a class="code hl_class" href="../../db/d26/classo2_1_1gpu_1_1LinearLayout.html">TPCMapMemoryLayout&lt;ChargeMapType&gt;::items</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().overrideClusterizerFragmentLen) * <span class="keyword">sizeof</span>(ChargeMapType));</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>        runKernel&lt;GPUMemClean16&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac16fec7768fd45a609dd29024b658a92">GetGridAutoStep</a>(lane, RecoStep::TPCClusterFinding)}, clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a140a95cae76c43c48c78d668879f5c28">mPpeakMap</a>, <a class="code hl_class" href="../../db/d26/classo2_1_1gpu_1_1LinearLayout.html">TPCMapMemoryLayout&lt;PeakMapType&gt;::items</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().overrideClusterizerFragmentLen) * <span class="keyword">sizeof</span>(PeakMapType));</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>        <span class="keywordflow">if</span> (fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a> == 0) {</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>          runKernel&lt;GPUMemClean16&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac16fec7768fd45a609dd29024b658a92">GetGridAutoStep</a>(lane, RecoStep::TPCClusterFinding)}, clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a10c5632ebb55fef80131eec25e94593f">mPpadIsNoisy</a>, <a class="code hl_define" href="../../d9/db0/clusterFinderDefs_8h.html#a4082b85f5e23a1209a83a5878f586ea6">TPC_PADS_IN_SECTOR</a> * <span class="keyword">sizeof</span>(*clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a10c5632ebb55fef80131eec25e94593f">mPpadIsNoisy</a>));</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>        }</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21faa3ddf216d0c5467b063d2cbe2c89e636">GPUChainTrackingDebugFlags::TPCClustererZeroedCharges</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#aa09731b70ece6cd2870b8e1ca9c60081">GPUTPCClusterFinder::DumpChargeMap</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>, <span class="stringliteral">&quot;Zeroed Charges&quot;</span>);</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span> </div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>        <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a> &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesSector[iSector] &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion != -1) {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>            <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a00a4eb6512be294afc5ecdc28bf765d8">TransferMemoryResourceLinkToGPU</a>(RecoStep::TPCClusterFinding, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mResourceZS, lane);</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>            <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes + lane);</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>          }</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1); <span class="comment">// Wait for copying to constant memory</span></div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>        }</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span> </div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a> &amp;&amp; (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;abandonTimeframe || !<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nPagesSector[iSector] || <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion == -1)) {</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>          clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a> = 0;</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>        }</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a> &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a>-&gt;<a class="code hl_variable" href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a76564b04b15f226f6b6bd572b7dbb169">nTPCDigits</a>[iSector] == 0) {</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>          clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a> = 0;</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>        }</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span> </div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>        <span class="keywordflow">if</span> (propagateMCLabels &amp;&amp; fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a> == 0) {</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>          clusterer.<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0917678590972aa079db85ad657560b7">PrepareMC</a>();</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>          clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6bfa82523b7d0ab7e0ac2094fd422f14">mPinputLabels</a> = digitsMC-&gt;v[iSector];</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>          <span class="keywordflow">if</span> (clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6bfa82523b7d0ab7e0ac2094fd422f14">mPinputLabels</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>            GPUFatal(<span class="stringliteral">&quot;MC label container missing, sector %d&quot;</span>, iSector);</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>          }</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>          <span class="keywordflow">if</span> (clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6bfa82523b7d0ab7e0ac2094fd422f14">mPinputLabels</a>-&gt;<a class="code hl_function" href="../../de/d68/classo2_1_1dataformats_1_1ConstMCTruthContainerView.html#a3aff3a2987f92af904a1527db1132077">getIndexedSize</a>() != <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a>-&gt;<a class="code hl_variable" href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a76564b04b15f226f6b6bd572b7dbb169">nTPCDigits</a>[iSector]) {</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>            GPUFatal(<span class="stringliteral">&quot;MC label container has incorrect number of entries: %d expected, has %d\n&quot;</span>, (int32_t)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">tpcPackedDigits</a>-&gt;<a class="code hl_variable" href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a76564b04b15f226f6b6bd572b7dbb169">nTPCDigits</a>[iSector], (int32_t)clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6bfa82523b7d0ab7e0ac2094fd422f14">mPinputLabels</a>-&gt;<a class="code hl_function" href="../../de/d68/classo2_1_1dataformats_1_1ConstMCTruthContainerView.html#a3aff3a2987f92af904a1527db1132077">getIndexedSize</a>());</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>          }</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        }</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span> </div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcSingleSector == -1 || <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcSingleSector == (int32_t)iSector) {</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>          <span class="keywordflow">if</span> (not <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) {</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>            runKernel&lt;GPUTPCCFChargeMapFiller, GPUTPCCFChargeMapFiller::findFragmentStart&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(1, lane), {iSector}}, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a> == <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>            <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#acdaab29923e08f062b5fb34fa5fdbfd0">TransferMemoryResourceLinkToHost</a>(RecoStep::TPCClusterFinding, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a595cd52d65d91dd4490069bb9adb8ffc">mMemoryId</a>, lane);</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (propagateMCLabels) {</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>            runKernel&lt;GPUTPCCFChargeMapFiller, GPUTPCCFChargeMapFiller::findFragmentStart&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(1, lane, <a class="code hl_enumvalue" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a8d910fd15ab553d8cbd98502885f08c6a2b55387dd066c5bac646ac61543d152d">GPUReconstruction::krnlDeviceType::CPU</a>), {iSector}}, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a> == <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>            <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a00a4eb6512be294afc5ecdc28bf765d8">TransferMemoryResourceLinkToGPU</a>(RecoStep::TPCClusterFinding, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a595cd52d65d91dd4490069bb9adb8ffc">mMemoryId</a>, lane);</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>          }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        }</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span> </div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) {</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>          int32_t firstHBF = (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a> &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a>-&gt;<a class="code hl_variable" href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#a631cf0cf91bf5aa22708551c15919996">hasTfStartOrbit</a>) ? <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">settingsTF</a>-&gt;<a class="code hl_variable" href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#aeddb4d8d0b87ac2e5c2e0bd1285f0bde">tfStartOrbit</a> : ((<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a21fe6b3122527f9999d7429650184639">count</a>[0] &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">nZSPtr</a>[0][0]) ? o2::raw::RDHUtils::getHeartBeatOrbit(*(<span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeader</a>*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>-&gt;<a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">sector</a>[iSector].<a class="code hl_variable" href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">zsPtr</a>[0][0]) : 0);</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>          uint32_t nBlocks = doGPU ? clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a1277e21601ec9e7dbddac8d441351f8c">nPagesSubsector</a> : <a class="code hl_variable" href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">GPUTrackingInOutZS::NENDPOINTS</a>;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span> </div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>          <span class="keywordflow">switch</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion) {</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>              GPUFatal(<span class="stringliteral">&quot;Data with invalid TPC ZS mode (%d) received&quot;</span>, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion);</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/d0a/namespaceo2_1_1tpc.html#a7c67a88febc2fad8cc73f0797f2f5c67a71fc9cbcc1ad8a2ac74e1e9ff747863b">ZSVersionRowBased10BitADC</a>:</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/d0a/namespaceo2_1_1tpc.html#a7c67a88febc2fad8cc73f0797f2f5c67aa64d888896c3236c61e9f7fadcf4093a">ZSVersionRowBased12BitADC</a>:</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>              runKernel&lt;GPUTPCCFDecodeZS&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ae80d16510eb89630785eacbfba8f1061">GetGridBlk</a>(nBlocks, lane), {iSector}}, firstHBF);</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/d0a/namespaceo2_1_1tpc.html#a7c67a88febc2fad8cc73f0797f2f5c67a42f01eff18f45cceab64cdfc1dc2dcac">ZSVersionLinkBasedWithMeta</a>:</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>              runKernel&lt;GPUTPCCFDecodeZSLink&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ae80d16510eb89630785eacbfba8f1061">GetGridBlk</a>(nBlocks, lane), {iSector}}, firstHBF);</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/d0a/namespaceo2_1_1tpc.html#a7c67a88febc2fad8cc73f0797f2f5c67a2d643bad1854b27450c5b4e70ffb2c4b">ZSVersionDenseLinkBased</a>:</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>              runKernel&lt;GPUTPCCFDecodeZSDenseLink&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ae80d16510eb89630785eacbfba8f1061">GetGridBlk</a>(nBlocks, lane), {iSector}}, firstHBF);</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>          }</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#acdaab29923e08f062b5fb34fa5fdbfd0">TransferMemoryResourceLinkToHost</a>(RecoStep::TPCClusterFinding, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a595cd52d65d91dd4490069bb9adb8ffc">mMemoryId</a>, lane);</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        } <span class="comment">// clang-format off</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>      });</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>      <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a2d828fb344766f0d8f6e7825ea5f2ea1">runParallelOuterLoop</a>(doGPU, maxLane, [&amp;](uint32_t lane) {</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        uint32_t iSector = iSectorBase + lane;</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(lane);</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>        }</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>          <a class="code hl_struct" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">CfFragment</a> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> = fragment.next();</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>          int32_t nextSector = iSector;</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>          <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>.isEnd()) {</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>            nextSector += <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes;</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>            <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;fragmentFirst;</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>          }</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>          <span class="keywordflow">if</span> (nextSector &lt; NSECTORS &amp;&amp; mIOPtrs.tpcZS &amp;&amp; mCFContext-&gt;nPagesSector[nextSector] &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;zsVersion != -1 &amp;&amp; !<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;abandonTimeframe) {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>            <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">mCFContext</a>-&gt;nextPos[nextSector] = RunTPCClusterizer_transferZS(nextSector, <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>, <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes + lane);</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>          }</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>        }</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector];</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clustererShadow = doGPU ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector] : clusterer;</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>        <span class="keywordflow">if</span> (clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a> == 0) {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>        }</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">tpcZS</a>) {</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>          runKernel&lt;GPUTPCCFChargeMapFiller, GPUTPCCFChargeMapFiller::fillFromDigits&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>, lane), {iSector}});</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>        }</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa86abf50bc2433b01708f19ba062b29c2">GPUChainTrackingDebugFlags::TPCClustererDigits</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a067d7265bd74917b85706e9bc477d720">GPUTPCClusterFinder::DumpDigits</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>)) {</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>          clusterer.<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#aa09731b70ece6cd2870b8e1ca9c60081">DumpChargeMap</a>(*<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>, <span class="stringliteral">&quot;Charges&quot;</span>);</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>        }</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span> </div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>        <span class="keywordflow">if</span> (propagateMCLabels) {</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>          runKernel&lt;GPUTPCCFChargeMapFiller, GPUTPCCFChargeMapFiller::fillIndexMap&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a13184bd4d7b938ea923d465c74d20a72">nDigitsInFragment</a>, lane, <a class="code hl_enumvalue" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a8d910fd15ab553d8cbd98502885f08c6a2b55387dd066c5bac646ac61543d152d">GPUReconstruction::krnlDeviceType::CPU</a>), {iSector}});</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        }</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span> </div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        <span class="keywordtype">bool</span> checkForNoisyPads = (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#af03a26d3c23835e083e424e38629ccde">rec</a>()-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#ab189badd0e75789609536dc3faf6b69f">GetParam</a>().<a class="code hl_variable" href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#a72687d237b42d2587c54b0df864f6eda">rec</a>.tpc.maxTimeBinAboveThresholdIn1000Bin &gt; 0) || (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#af03a26d3c23835e083e424e38629ccde">rec</a>()-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#ab189badd0e75789609536dc3faf6b69f">GetParam</a>().<a class="code hl_variable" href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#a72687d237b42d2587c54b0df864f6eda">rec</a>.tpc.maxConsecTimeBinAboveThreshold &gt; 0);</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        checkForNoisyPads &amp;= (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#af03a26d3c23835e083e424e38629ccde">rec</a>()-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#ab189badd0e75789609536dc3faf6b69f">GetParam</a>().<a class="code hl_variable" href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#a72687d237b42d2587c54b0df864f6eda">rec</a>.tpc.noisyPadsQuickCheck ? fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a> == 0 : <span class="keyword">true</span>);</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        checkForNoisyPads &amp;= !<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().disableTPCNoisyPadFilter;</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span> </div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>        <span class="keywordflow">if</span> (checkForNoisyPads) {</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>          int32_t nBlocks = <a class="code hl_define" href="../../d9/db0/clusterFinderDefs_8h.html#a4082b85f5e23a1209a83a5878f586ea6">TPC_PADS_IN_SECTOR</a> / <a class="code hl_enumvalue" href="../../d1/d27/classo2_1_1gpu_1_1GPUTPCCFCheckPadBaseline.html#a19647e32a1b98451b4bf5cd054609ad0aa007830c411d60ac56240d2ff01a75cb">GPUTPCCFCheckPadBaseline::PadsPerCacheline</a>;</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>          runKernel&lt;GPUTPCCFCheckPadBaseline&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ae80d16510eb89630785eacbfba8f1061">GetGridBlk</a>(nBlocks, lane), {iSector}});</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>        }</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span> </div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>        runKernel&lt;GPUTPCCFPeakFinder&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>, lane), {iSector}});</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa7e39a76c338e13027b08d7adc9c50080">GPUChainTrackingDebugFlags::TPCClustererPeaks</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#afa9bfa7544967e093577c6647c23317b">GPUTPCClusterFinder::DumpPeaks</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>)) {</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>          clusterer.<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a635b45d16d1f7741682d8890f3ce944d">DumpPeakMap</a>(*<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>, <span class="stringliteral">&quot;Peaks&quot;</span>);</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>        }</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span> </div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        RunTPCClusterizer_compactPeaks(clusterer, clustererShadow, 0, doGPU, lane);</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#acdaab29923e08f062b5fb34fa5fdbfd0">TransferMemoryResourceLinkToHost</a>(RecoStep::TPCClusterFinding, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a595cd52d65d91dd4490069bb9adb8ffc">mMemoryId</a>, lane);</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa7e39a76c338e13027b08d7adc9c50080">GPUChainTrackingDebugFlags::TPCClustererPeaks</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ad3f4145a56489e42b992fb11a65936fb">GPUTPCClusterFinder::DumpPeaksCompacted</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>); <span class="comment">// clang-format off</span></div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>      });</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>      <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a2d828fb344766f0d8f6e7825ea5f2ea1">runParallelOuterLoop</a>(doGPU, maxLane, [&amp;](uint32_t lane) {</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        uint32_t iSector = iSectorBase + lane;</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector];</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clustererShadow = doGPU ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector] : clusterer;</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>        <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(lane);</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>        }</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>        <span class="keywordflow">if</span> (clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">nPeaks</a> == 0) {</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>        }</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        runKernel&lt;GPUTPCCFNoiseSuppression, GPUTPCCFNoiseSuppression::noiseSuppression&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">nPeaks</a>, lane), {iSector}});</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>        runKernel&lt;GPUTPCCFNoiseSuppression, GPUTPCCFNoiseSuppression::updatePeaks&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">nPeaks</a>, lane), {iSector}});</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa385ff0ac12af7cbdd50f0f414cbc6dfa">GPUChainTrackingDebugFlags::TPCClustererSuppressedPeaks</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a423b1e953c11b51f89cf697074e06521">GPUTPCClusterFinder::DumpSuppressedPeaks</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>)) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>          clusterer.<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a635b45d16d1f7741682d8890f3ce944d">DumpPeakMap</a>(*<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>, <span class="stringliteral">&quot;Suppressed Peaks&quot;</span>);</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>        }</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span> </div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>        RunTPCClusterizer_compactPeaks(clusterer, clustererShadow, 1, doGPU, lane);</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#acdaab29923e08f062b5fb34fa5fdbfd0">TransferMemoryResourceLinkToHost</a>(RecoStep::TPCClusterFinding, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a595cd52d65d91dd4490069bb9adb8ffc">mMemoryId</a>, lane);</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa385ff0ac12af7cbdd50f0f414cbc6dfa">GPUChainTrackingDebugFlags::TPCClustererSuppressedPeaks</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ac294f4bc2a452f0b07979028978c4270">GPUTPCClusterFinder::DumpSuppressedPeaksCompacted</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>); <span class="comment">// clang-format off</span></div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>      });</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>      <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a2d828fb344766f0d8f6e7825ea5f2ea1">runParallelOuterLoop</a>(doGPU, maxLane, [&amp;](uint32_t lane) {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>        uint32_t iSector = iSectorBase + lane;</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>        <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector];</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>        <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clustererShadow = doGPU ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector] : clusterer;</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span> </div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>        <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(lane);</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>        }</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span> </div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        <span class="keywordflow">if</span> (fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a> == 0) {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>          <a class="code hl_struct" href="../../d0/d80/structo2_1_1gpu_1_1gpu__reconstruction__kernels_1_1deviceEvent.html">deviceEvent</a>* waitEvent = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>          <span class="keywordflow">if</span> (transferRunning[lane] == 1) {</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>            waitEvent = &amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a497cef20fc1000df3afeb7d93a78a525">mEvents</a>-&gt;<a class="code hl_variable" href="../../d8/ded/structo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct.html#a02f1db2bcc4cb9e2bb3a486d776dc5b1">stream</a>[lane];</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>            transferRunning[lane] = 2;</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>          }</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>          runKernel&lt;GPUMemClean16&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac16fec7768fd45a609dd29024b658a92">GetGridAutoStep</a>(lane, RecoStep::TPCClusterFinding), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>, {<span class="keyword">nullptr</span>, waitEvent}}, clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">mPclusterInRow</a>, <a class="code hl_define" href="../../d6/d1b/GPUTPCGeometry_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a> * <span class="keyword">sizeof</span>(*clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">mPclusterInRow</a>));</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>        }</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span> </div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>        <span class="keywordflow">if</span> (clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a> == 0) {</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>        }</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span> </div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nn.applyNNclusterizer) {</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span><span class="preprocessor">#ifdef GPUCA_HAS_ONNX</span></div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>          <a class="code hl_class" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html">GPUTPCNNClusterizer</a>&amp; clustererNN = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;tpcNNClusterer[lane];</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>          <a class="code hl_class" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html">GPUTPCNNClusterizer</a>&amp; clustererNNShadow = doGPU ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;tpcNNClusterer[lane] : clustererNN;</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>          <a class="code hl_class" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html">GPUTPCNNClusterizerHost</a>&amp; nnApplication = nnApplications[lane];</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span> </div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>          <span class="comment">// int withMC = (doGPU &amp;&amp; propagateMCLabels);</span></div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span> </div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>          <span class="keywordflow">if</span> (nn_settings.nnClusterizerApplyCfDeconvolution) {</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>            runKernel&lt;GPUTPCCFDeconvolution&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>, lane), {iSector}}, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#aebe96f7551e8f2f312de0814bebbf847">mNnClusterizerSetDeconvolutionFlags</a>) {</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>            runKernel&lt;GPUTPCCFDeconvolution&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>, lane), {iSector}}, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>          }</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span> </div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>          <span class="comment">// float time_clusterizer = 0, time_fill = 0, time_networks = 0;</span></div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>          <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 2) {</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>            <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Starting loop over batched data. clustererNNShadow.mNnClusterizerBatchedMode=&quot;</span> &lt;&lt; clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a4d94c68df54ca31bfdbe7a2d0fb661e8">mNnClusterizerBatchedMode</a> &lt;&lt; <span class="stringliteral">&quot;, numLoops=&quot;</span> &lt;&lt; std::ceil((<span class="keywordtype">float</span>)clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a> / clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a4d94c68df54ca31bfdbe7a2d0fb661e8">mNnClusterizerBatchedMode</a>) &lt;&lt; <span class="stringliteral">&quot;, numClusters=&quot;</span> &lt;&lt; clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a> &lt;&lt; <span class="stringliteral">&quot;. (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>          }</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> batch = 0; batch &lt; std::ceil((<span class="keywordtype">float</span>)clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a> / clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a4d94c68df54ca31bfdbe7a2d0fb661e8">mNnClusterizerBatchedMode</a>); batch++) {</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>            <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 3) {</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>              <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Start. Loop=&quot;</span> &lt;&lt; batch &lt;&lt; <span class="stringliteral">&quot;. (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>            }</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>            uint batchStart = batch * clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a4d94c68df54ca31bfdbe7a2d0fb661e8">mNnClusterizerBatchedMode</a>;</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <span class="keywordtype">size_t</span> iSize = CAMath::Min((uint)clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a4d94c68df54ca31bfdbe7a2d0fb661e8">mNnClusterizerBatchedMode</a>, (uint)(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a> - batchStart));</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span> </div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>            <span class="comment">// Filling the data</span></div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a48e4bc2a14ea86e413f0e45c970c2083">IsGPU</a>() || <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nn.nnClusterizerForceGpuInputFill) {</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>              <span class="comment">// Fills element by element of each input matrix -&gt; better parallelizability, but worse on CPU due to unnecessary computations</span></div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>              runKernel&lt;GPUTPCNNClusterizerKernels, GPUTPCNNClusterizerKernels::fillInputNNGPU&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(iSize * clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ad024c51968e88333c23afd0f2661b468">mNnClusterizerRowTimeSizeThreads</a> , lane), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>}, iSector, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a>, propagateMCLabels, batchStart);</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>              <span class="comment">// Fills the whole input matrix at once -&gt; better performance on CPU, but worse parallelizability</span></div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>              runKernel&lt;GPUTPCNNClusterizerKernels, GPUTPCNNClusterizerKernels::fillInputNNCPU&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(iSize, lane), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>}, iSector, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a>, propagateMCLabels, batchStart);</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>            }</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>            <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 3) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>              <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Done filling data. Loop=&quot;</span> &lt;&lt; batch &lt;&lt; <span class="stringliteral">&quot;. (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>            }</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span> </div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>            <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#aebe96f7551e8f2f312de0814bebbf847">mNnClusterizerSetDeconvolutionFlags</a>) {</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>              runKernel&lt;GPUTPCNNClusterizerKernels, GPUTPCNNClusterizerKernels::publishDeconvolutionFlags&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(iSize, lane), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>}, iSector, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a>, propagateMCLabels, batchStart); <span class="comment">// Publishing the deconvolution flags</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>              <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 3) {</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>                <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Done setting deconvolution flags. Loop=&quot;</span> &lt;&lt; batch &lt;&lt; <span class="stringliteral">&quot;. (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>              }</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>            }</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span> </div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>            <span class="comment">// NN evaluations</span></div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>            <span class="keywordflow">if</span>(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#afd944d14c15edca2211d3099aa25ec78">mNnClusterizerUseClassification</a>) {</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>              <span class="keywordflow">if</span>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 1 &amp;&amp; (doGPU || lane &lt; 4)) { nnTimers[3*lane]-&gt;<a class="code hl_function" href="../../da/dd8/classHighResTimer.html#a8a58469ba2f0df31a316a9000fcf12bf">Start</a>(); }</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>              <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a> == 0) {</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>                <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 0) {</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>                  (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a06dc81690fd47a8f44e554e37edba3dd">mInputData_16</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#adc9e4662bae9be1166cb1a9bfcaf8b49">mModelProbabilities_16</a>);</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 1) {</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>                  (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a06dc81690fd47a8f44e554e37edba3dd">mInputData_16</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a7ddb532b419c95de392e68c5d3902936">mModelProbabilities_32</a>);</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>                }</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a> == 1) {</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>                <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 0) {</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>                  (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a84608bf6acbf49df0ef545f869972ea0">mInputData_32</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#adc9e4662bae9be1166cb1a9bfcaf8b49">mModelProbabilities_16</a>);</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 1) {</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>                  (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a84608bf6acbf49df0ef545f869972ea0">mInputData_32</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a7ddb532b419c95de392e68c5d3902936">mModelProbabilities_32</a>);</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                }</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>              }</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>              <span class="keywordflow">if</span>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 1 &amp;&amp; (doGPU || lane &lt; 4)) { nnTimers[3*lane]-&gt;<a class="code hl_function" href="../../da/dd8/classHighResTimer.html#acaf9fd768897e478d200e514a71971d5">Stop</a>(); } <span class="comment">// doGPU || lane&lt;4 -&gt; only for GPU or first 4 CPU lanes (to limit number of concurrent timers). At least gives some statistics for CPU time...</span></div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>              <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 3) {</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Done with NN classification inference. Loop=&quot;</span> &lt;&lt; batch &lt;&lt; <span class="stringliteral">&quot;. (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>              }</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>            }</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>            <span class="keywordflow">if</span> (!clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a81c5b1e1546ff5dd109e8bed039c2219">mNnClusterizerUseCfRegression</a>) {</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>              <span class="keywordflow">if</span>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 1 &amp;&amp; (doGPU || lane &lt; 4)) { nnTimers[3*lane + 1]-&gt;<a class="code hl_function" href="../../da/dd8/classHighResTimer.html#a8a58469ba2f0df31a316a9000fcf12bf">Start</a>(); }</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>              <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a> == 0) {</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>                <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 0) {</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>                  (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a06dc81690fd47a8f44e554e37edba3dd">mInputData_16</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#afacff5d82bfbd6868a81ed90331c1cc0">mOutputDataReg1_16</a>);</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 1) {</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>                  (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a06dc81690fd47a8f44e554e37edba3dd">mInputData_16</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ac592f140f50b8af0554e7b97b8a07505">mOutputDataReg1_32</a>);</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>                }</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a> == 1) {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 0) {</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>                  (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a84608bf6acbf49df0ef545f869972ea0">mInputData_32</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#afacff5d82bfbd6868a81ed90331c1cc0">mOutputDataReg1_16</a>);</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 1) {</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>                  (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a84608bf6acbf49df0ef545f869972ea0">mInputData_32</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ac592f140f50b8af0554e7b97b8a07505">mOutputDataReg1_32</a>);</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>                }</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>              }</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>              <span class="keywordflow">if</span>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 1 &amp;&amp; (doGPU || lane &lt; 4)) { nnTimers[3*lane + 1]-&gt;<a class="code hl_function" href="../../da/dd8/classHighResTimer.html#acaf9fd768897e478d200e514a71971d5">Stop</a>(); }</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>              <span class="keywordflow">if</span> (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#abd7f515642fc8398853a034d6f6eac8b">getNumOutputNodes</a>()[0][1] &gt; 1 &amp;&amp; nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a53c3b796ebca935e3d82237aa1719996">isInitialized</a>()) {</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>                <span class="keywordflow">if</span>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 1 &amp;&amp; (doGPU || lane &lt; 4)) { nnTimers[3*lane + 2]-&gt;<a class="code hl_function" href="../../da/dd8/classHighResTimer.html#a8a58469ba2f0df31a316a9000fcf12bf">Start</a>(); }</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>                <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a> == 0) {</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>                  <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 0) {</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>                    (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a06dc81690fd47a8f44e554e37edba3dd">mInputData_16</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a7804afe9c1cec6b60ec181afd44275b0">mOutputDataReg2_16</a>);</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>                  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 1) {</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                    (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a06dc81690fd47a8f44e554e37edba3dd">mInputData_16</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a0257126ea9c0a1f1e9a20ed12561ff7e">mOutputDataReg2_32</a>);</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>                  }</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a> == 1) {</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                  <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 0) {</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                    (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a84608bf6acbf49df0ef545f869972ea0">mInputData_32</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a7804afe9c1cec6b60ec181afd44275b0">mOutputDataReg2_16</a>);</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a> == 1) {</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>                    (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>).inference(clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a84608bf6acbf49df0ef545f869972ea0">mInputData_32</a>, iSize, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a0257126ea9c0a1f1e9a20ed12561ff7e">mOutputDataReg2_32</a>);</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>                  }</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>                }</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>                <span class="keywordflow">if</span>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 1 &amp;&amp; (doGPU || lane &lt; 4)) { nnTimers[3*lane + 2]-&gt;<a class="code hl_function" href="../../da/dd8/classHighResTimer.html#acaf9fd768897e478d200e514a71971d5">Stop</a>(); }</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>              }</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>              <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 3) {</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>                <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Done with NN regression inference. Loop=&quot;</span> &lt;&lt; batch &lt;&lt; <span class="stringliteral">&quot;. (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>              }</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>            }</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span> </div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>            <span class="comment">// Publishing kernels for class labels and regression results</span></div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>            <span class="comment">// In case classification should not be used, this kernel should still be executed to fill the mOutputDataClass array with default values</span></div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>            <span class="keywordflow">if</span> (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#abd7f515642fc8398853a034d6f6eac8b">getNumOutputNodes</a>()[0][1] == 1) {</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>              runKernel&lt;GPUTPCNNClusterizerKernels, GPUTPCNNClusterizerKernels::determineClass1Labels&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(iSize, lane), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>}, iSector, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a>, propagateMCLabels, batchStart); <span class="comment">// Assigning class labels</span></div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>              runKernel&lt;GPUTPCNNClusterizerKernels, GPUTPCNNClusterizerKernels::determineClass2Labels&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(iSize, lane), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>}, iSector, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a>, propagateMCLabels, batchStart); <span class="comment">// Assigning class labels</span></div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>            }</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>            <span class="keywordflow">if</span> (!clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a81c5b1e1546ff5dd109e8bed039c2219">mNnClusterizerUseCfRegression</a>) {</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>              runKernel&lt;GPUTPCNNClusterizerKernels, GPUTPCNNClusterizerKernels::publishClass1Regression&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(iSize, lane), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>}, iSector, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a>, propagateMCLabels, batchStart); <span class="comment">// Publishing class 1 regression results</span></div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>              <span class="keywordflow">if</span> (nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#abd7f515642fc8398853a034d6f6eac8b">getNumOutputNodes</a>()[0][1] &gt; 1 &amp;&amp; nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a53c3b796ebca935e3d82237aa1719996">isInitialized</a>()) {</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                runKernel&lt;GPUTPCNNClusterizerKernels, GPUTPCNNClusterizerKernels::publishClass2Regression&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(iSize, lane), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>}, iSector, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">mNnInferenceOutputDType</a>, propagateMCLabels, batchStart); <span class="comment">// Publishing class 2 regression results</span></div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>              }</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>            }</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>            <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 3) {</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>              <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Done publishing. Loop=&quot;</span> &lt;&lt; batch &lt;&lt; <span class="stringliteral">&quot;. (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>            }</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>          }</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span> </div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>          <span class="keywordflow">if</span> (clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a81c5b1e1546ff5dd109e8bed039c2219">mNnClusterizerUseCfRegression</a>) {</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>            <span class="keywordflow">if</span>(!nn_settings.nnClusterizerApplyCfDeconvolution) { <span class="comment">// If it is already applied don&#39;t do it twice, otherwise apply now</span></div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>              runKernel&lt;GPUTPCCFDeconvolution&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>, lane), {iSector}}, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>            }</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>            <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa82a61ad98b65aac9a852c767590706a2">GPUChainTrackingDebugFlags::TPCClustererChargeMap</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#aa09731b70ece6cd2870b8e1ca9c60081">GPUTPCClusterFinder::DumpChargeMap</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>, <span class="stringliteral">&quot;Split Charges&quot;</span>);</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>            runKernel&lt;GPUTPCNNClusterizerKernels, GPUTPCNNClusterizerKernels::runCfClusterizer&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a>, lane), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">krnlRunRangeNone</a>}, iSector, clustererNNShadow.<a class="code hl_variable" href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">mNnInferenceInputDType</a>, propagateMCLabels, 0); <span class="comment">// Running the CF regression kernel - no batching needed: batchStart = 0</span></div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>            <span class="keywordflow">if</span> (nn_settings.nnClusterizerVerbosity &gt; 3) {</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>              <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(NNCLUS, GPUChainTrackingClusterizer, this=&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;) Done with CF regression. (clustererNN=&quot;</span> &lt;&lt; &amp;clustererNN &lt;&lt; <span class="stringliteral">&quot;, clustererNNShadow=&quot;</span> &lt;&lt; &amp;clustererNNShadow &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>            }</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>          }</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>          GPUFatal(<span class="stringliteral">&quot;Project not compiled with neural network clusterization. Aborting.&quot;</span>);</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>          runKernel&lt;GPUTPCCFDeconvolution&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>, lane), {iSector}}, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa82a61ad98b65aac9a852c767590706a2">GPUChainTrackingDebugFlags::TPCClustererChargeMap</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#aa09731b70ece6cd2870b8e1ca9c60081">GPUTPCClusterFinder::DumpChargeMap</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>, <span class="stringliteral">&quot;Split Charges&quot;</span>);</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>          runKernel&lt;GPUTPCCFClusterizer&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a>, lane), {iSector}}, 0);</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>        }</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span> </div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>        <span class="keywordflow">if</span> (doGPU &amp;&amp; propagateMCLabels) {</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#acdaab29923e08f062b5fb34fa5fdbfd0">TransferMemoryResourceLinkToHost</a>(RecoStep::TPCClusterFinding, clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ab34e00abd1a02ab8fc27147e2c9b224b">mScratchId</a>, lane);</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>          <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>            <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(lane);</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>          }</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>          runKernel&lt;GPUTPCCFClusterizer&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a>, lane, <a class="code hl_enumvalue" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a8d910fd15ab553d8cbd98502885f08c6a2b55387dd066c5bac646ac61543d152d">GPUReconstruction::krnlDeviceType::CPU</a>), {iSector}}, 1); <span class="comment">// Computes MC labels</span></div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>        }</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span> </div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 3) {</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>          GPUInfo(<span class="stringliteral">&quot;Sector %02d Fragment %02d Lane %d: Found clusters: digits %u peaks %u clusters %u&quot;</span>, iSector, fragment.<a class="code hl_variable" href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">index</a>, lane, (int32_t)clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">nPositions</a>, (int32_t)clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">nPeaks</a>, (int32_t)clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">mPmemory</a>-&gt;<a class="code hl_variable" href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">counters</a>.<a class="code hl_variable" href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">nClusters</a>);</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        }</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span> </div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ad2b4b3b41fcba5b5e6a7aa60c4d0acab">TransferMemoryResourcesToHost</a>(RecoStep::TPCClusterFinding, &amp;clusterer, lane);</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>        laneHasData[lane] = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>        <span class="comment">// Include clusters in default debug mask, exclude other debug output by default</span></div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">DoDebugAndDump</a>(RecoStep::TPCClusterFinding, <a class="code hl_enumvalue" href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa993d538c5972abb3aac553a271771b62">GPUChainTrackingDebugFlags::TPCClustererClusters</a>, clusterer, &amp;<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3ac24c39179573f5c8a0cd0520a83bf3">GPUTPCClusterFinder::DumpClusters</a>, *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">mDebugFile</a>); <span class="comment">// clang-format off</span></div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>      });</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>      <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#afa8e445ee050e175baa6354581dce0ba">SetNActiveThreadsOuterLoop</a>(1);</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>    }</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span> </div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>    <span class="keywordtype">size_t</span> nClsFirst = nClsTotal;</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>    <span class="keywordtype">bool</span> anyLaneHasData = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>    <span class="keywordflow">for</span> (int32_t lane = 0; lane &lt; maxLane; lane++) {</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>      uint32_t iSector = iSectorBase + lane;</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>      std::fill(&amp;tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a0433cf46a3a892aea69074303977cc66">nClusters</a>[iSector][0], &amp;tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a0433cf46a3a892aea69074303977cc66">nClusters</a>[iSector][0] + <a class="code hl_variable" href="../../d5/da0/namespaceo2_1_1tpc_1_1constants.html#ae1e6bd46c1d096a01e7759bba569776d">MAXGLOBALPADROW</a>, 0);</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>      <span class="keywordflow">if</span> (doGPU) {</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(lane);</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>      }</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>      <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clusterer = <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector];</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>      <a class="code hl_class" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">GPUTPCClusterFinder</a>&amp; clustererShadow = doGPU ? <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSector] : clusterer;</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span> </div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>      <span class="keywordflow">if</span> (laneHasData[lane]) {</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>        anyLaneHasData = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>        <span class="keywordflow">if</span> (buildNativeGPU &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpccfGatherKernel) {</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>          runKernel&lt;GPUTPCCFGather&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ae80d16510eb89630785eacbfba8f1061">GetGridBlk</a>(<a class="code hl_define" href="../../d6/d1b/GPUTPCGeometry_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a>, <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1), {iSector}}, &amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPclusterNativeBuffer[nClsTotal]);</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>        }</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>        <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; <a class="code hl_define" href="../../d6/d1b/GPUTPCGeometry_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a>; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>          <span class="keywordflow">if</span> (nClsTotal + clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">mPclusterInRow</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] &gt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mNClusterNative) {</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>            clusterer.raiseError(GPUErrors::ERROR_CF_GLOBAL_CLUSTER_OVERFLOW, iSector * 1000 + <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>, nClsTotal + clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">mPclusterInRow</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>], <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mNClusterNative);</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>          }</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>          <span class="keywordflow">if</span> (buildNativeGPU) {</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpccfGatherKernel) {</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>              <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0661d09541af8cf9826dc453f31e4a81">GPUMemCpyAlways</a>(RecoStep::TPCClusterFinding, (<span class="keywordtype">void</span>*)&amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPclusterNativeBuffer[nClsTotal], (<span class="keyword">const</span> <span class="keywordtype">void</span>*)&amp;clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ae5d8c6367437aab3fdd22cf996e1f87b">mPclusterByRow</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> * clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a52c9f7d71b768b6ac95f0416cee494fd">mNMaxClusterPerRow</a>], <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a1869ca1b2d21d2962fbe0ca4a1dfb5f2">clustersNative</a>-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#ad78d5c1413c1708fe5ba19a4163fe9de">clustersLinear</a>[0]) * clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">mPclusterInRow</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>], <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1, -2);</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>            }</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buildNativeHost) {</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>            <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0661d09541af8cf9826dc453f31e4a81">GPUMemCpyAlways</a>(RecoStep::TPCClusterFinding, (<span class="keywordtype">void</span>*)&amp;tmpNativeClusters[nClsTotal], (<span class="keyword">const</span> <span class="keywordtype">void</span>*)&amp;clustererShadow.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ae5d8c6367437aab3fdd22cf996e1f87b">mPclusterByRow</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> * clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a52c9f7d71b768b6ac95f0416cee494fd">mNMaxClusterPerRow</a>], <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a1869ca1b2d21d2962fbe0ca4a1dfb5f2">clustersNative</a>-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#ad78d5c1413c1708fe5ba19a4163fe9de">clustersLinear</a>[0]) * clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">mPclusterInRow</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>], <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>          }</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>          tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a0433cf46a3a892aea69074303977cc66">nClusters</a>[iSector][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] += clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">mPclusterInRow</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>          nClsTotal += clusterer.<a class="code hl_variable" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">mPclusterInRow</a>[<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>        }</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>        <span class="keywordflow">if</span> (transferRunning[lane]) {</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>          <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a395f2a5a67aab4a1178d4c9dde532ee9">ReleaseEvent</a>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a497cef20fc1000df3afeb7d93a78a525">mEvents</a>-&gt;<a class="code hl_variable" href="../../d8/ded/structo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct.html#a02f1db2bcc4cb9e2bb3a486d776dc5b1">stream</a>[lane], doGPU);</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        }</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a005ba8dd32cd8fd4ae93d8f00017258e">RecordMarker</a>(&amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a497cef20fc1000df3afeb7d93a78a525">mEvents</a>-&gt;<a class="code hl_variable" href="../../d8/ded/structo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct.html#a02f1db2bcc4cb9e2bb3a486d776dc5b1">stream</a>[lane], <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1);</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>        transferRunning[lane] = 1;</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>      }</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span> </div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>      <span class="keywordflow">if</span> (not propagateMCLabels || not laneHasData[lane]) {</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>        assert(propagateMCLabels ? mcLinearLabels.<a class="code hl_variable" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#ac34e467563f8a809081f761de8162c56">header</a>.size() == nClsTotal : <span class="keyword">true</span>);</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>      }</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span> </div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>      runKernel&lt;GPUTPCCFMCLabelFlattener, GPUTPCCFMCLabelFlattener::setRowOffsets&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(<a class="code hl_define" href="../../d6/d1b/GPUTPCGeometry_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a>, lane, <a class="code hl_enumvalue" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a8d910fd15ab553d8cbd98502885f08c6a2b55387dd066c5bac646ac61543d152d">GPUReconstruction::krnlDeviceType::CPU</a>), {iSector}});</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>      <a class="code hl_function" href="../../d2/d9e/classo2_1_1gpu_1_1GPUTPCCFMCLabelFlattener.html#a55e60214b5b2de52f3e8d907c84987cc">GPUTPCCFMCLabelFlattener::setGlobalOffsetsAndAllocate</a>(clusterer, mcLinearLabels);</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>      runKernel&lt;GPUTPCCFMCLabelFlattener, GPUTPCCFMCLabelFlattener::flatten&gt;({<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">GetGrid</a>(<a class="code hl_define" href="../../d6/d1b/GPUTPCGeometry_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a>, lane, <a class="code hl_enumvalue" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a8d910fd15ab553d8cbd98502885f08c6a2b55387dd066c5bac646ac61543d152d">GPUReconstruction::krnlDeviceType::CPU</a>), {iSector}}, &amp;mcLinearLabels);</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>      clusterer.<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3fae1a209d0dacec5562d35ccb89fe09">clearMCMemory</a>();</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>      assert(propagateMCLabels ? mcLinearLabels.<a class="code hl_variable" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#ac34e467563f8a809081f761de8162c56">header</a>.size() == nClsTotal : <span class="keyword">true</span>);</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>    }</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    <span class="keywordflow">if</span> (propagateMCLabels) {</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>      <span class="keywordflow">for</span> (int32_t lane = 0; lane &lt; maxLane; lane++) {</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">tpcClusterer</a>[iSectorBase + lane].<a class="code hl_function" href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3fae1a209d0dacec5562d35ccb89fe09">clearMCMemory</a>();</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>      }</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    }</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    <span class="keywordflow">if</span> (buildNativeHost &amp;&amp; buildNativeGPU &amp;&amp; anyLaneHasData) {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().delayedOutput) {</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>        <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a883e23a31cefb85d9defcaf203f1409c">mOutputQueue</a>.emplace_back(<a class="code hl_struct" href="../../dd/d69/structo2_1_1gpu_1_1GPUChainTracking_1_1outputQueueEntry.html">outputQueueEntry</a>{(<span class="keywordtype">void</span>*)((<span class="keywordtype">char</span>*)&amp;tmpNativeClusters[nClsFirst] - (<span class="keywordtype">char</span>*)&amp;tmpNativeClusters[0]), &amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPclusterNativeBuffer[nClsFirst], (nClsTotal - nClsFirst) * <span class="keyword">sizeof</span>(tmpNativeClusters[0]), RecoStep::TPCClusterFinding});</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>        <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0c7b2fd2882ac371ab3bfb0faabb30b9">GPUMemCpy</a>(RecoStep::TPCClusterFinding, (<span class="keywordtype">void</span>*)&amp;tmpNativeClusters[nClsFirst], (<span class="keyword">const</span> <span class="keywordtype">void</span>*)&amp;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPclusterNativeBuffer[nClsFirst], (nClsTotal - nClsFirst) * <span class="keyword">sizeof</span>(tmpNativeClusters[0]), <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>      }</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    }</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span> </div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    <span class="keywordflow">if</span> (mWaitForFinalInputs &amp;&amp; iSectorBase &gt;= 21 &amp;&amp; (int32_t)iSectorBase &lt; 21 + <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes) {</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>      notifyForeignChainFinished();</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>    }</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>    <span class="keywordflow">if</span> (mWaitForFinalInputs &amp;&amp; iSectorBase &gt;= 30 &amp;&amp; (int32_t)iSectorBase &lt; 30 + <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes) {</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>      mWaitForFinalInputs();</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>      synchronizeCalibUpdate = <a class="code hl_function" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ac99075e4383ae0a029bbe56cf83588e8">DoQueuedUpdates</a>(0, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    }</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>  }</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>  <span class="keywordflow">for</span> (int32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nTPCClustererLanes; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span><span class="preprocessor">#ifdef GPUCA_HAS_ONNX</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nn.applyNNclusterizer) {</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().nn.nnClusterizerVerbosity &gt; 0) {</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>        <a class="code hl_function" href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;(ORT) Environment releasing...&quot;</span>;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>      }</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>      <a class="code hl_class" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html">GPUTPCNNClusterizerHost</a>&amp; nnApplication = nnApplications[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>];</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>      nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">mModelClass</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a44a791fc07d5873708d72adf71245f5d">release</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>      nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">mModelReg1</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a44a791fc07d5873708d72adf71245f5d">release</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>      nnApplication.<a class="code hl_variable" href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">mModelReg2</a>.<a class="code hl_function" href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a44a791fc07d5873708d72adf71245f5d">release</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    }</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    <span class="keywordflow">if</span> (transferRunning[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>]) {</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a395f2a5a67aab4a1178d4c9dde532ee9">ReleaseEvent</a>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a497cef20fc1000df3afeb7d93a78a525">mEvents</a>-&gt;<a class="code hl_variable" href="../../d8/ded/structo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct.html#a02f1db2bcc4cb9e2bb3a486d776dc5b1">stream</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>], doGPU);</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    }</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>  }</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span> </div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a>.tpcTriggerHandling) {</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <a class="code hl_struct" href="../../df/d3c/structo2_1_1gpu_1_1GPUOutputControl.html">GPUOutputControl</a>* triggerOutput = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">mSubOutputControls</a>[<a class="code hl_function" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">GPUTrackingOutputs::getIndex</a>(&amp;<a class="code hl_variable" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#aedcdbeec4487b43ff9d560e2b2749213">GPUTrackingOutputs::tpcTriggerWords</a>)];</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <span class="keywordflow">if</span> (triggerOutput &amp;&amp; triggerOutput-&gt;<a class="code hl_variable" href="../../df/d3c/structo2_1_1gpu_1_1GPUOutputControl.html#add7f1a2697f2ba56fe794f5d2765e3f7">allocator</a>) {</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>      <span class="comment">// GPUInfo(&quot;Storing %lu trigger words&quot;, mTriggerBuffer-&gt;triggers.size());</span></div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>      <span class="keyword">auto</span>* outputBuffer = (<span class="keyword">decltype</span>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">mTriggerBuffer</a>-&gt;triggers)::value_type*)triggerOutput-&gt;<a class="code hl_variable" href="../../df/d3c/structo2_1_1gpu_1_1GPUOutputControl.html#add7f1a2697f2ba56fe794f5d2765e3f7">allocator</a>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">mTriggerBuffer</a>-&gt;triggers.size() * <span class="keyword">sizeof</span>(<span class="keyword">decltype</span>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">mTriggerBuffer</a>-&gt;triggers)::value_type));</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>      std::copy(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">mTriggerBuffer</a>-&gt;triggers.begin(), <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">mTriggerBuffer</a>-&gt;triggers.end(), outputBuffer);</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    }</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">mTriggerBuffer</a>-&gt;triggers.clear();</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>  }</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span> </div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>  <a class="code hl_class" href="../../de/d68/classo2_1_1dataformats_1_1ConstMCTruthContainerView.html">ClusterNativeAccess::ConstMCLabelContainerView</a>* mcLabelsConstView = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>  <span class="keywordflow">if</span> (propagateMCLabels) {</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    <span class="comment">// TODO: write to buffer directly</span></div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    <a class="code hl_class" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">o2::dataformats::MCTruthContainer&lt;o2::MCCompLabel&gt;</a> mcLabels;</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>    std::pair&lt;ConstMCLabelContainer*, ConstMCLabelContainerView*&gt; <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>;</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcWriteClustersAfterRejection &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">mSubOutputControls</a>[<a class="code hl_function" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">GPUTrackingOutputs::getIndex</a>(&amp;<a class="code hl_variable" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#ab523bcbe0336abaf9a6651858e2b1b99">GPUTrackingOutputs::clusterLabels</a>)] &amp;&amp; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">mSubOutputControls</a>[<a class="code hl_function" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">GPUTrackingOutputs::getIndex</a>(&amp;<a class="code hl_variable" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#ab523bcbe0336abaf9a6651858e2b1b99">GPUTrackingOutputs::clusterLabels</a>)]-&gt;useExternal()) {</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>      <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">mSubOutputControls</a>[<a class="code hl_function" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">GPUTrackingOutputs::getIndex</a>(&amp;<a class="code hl_variable" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#ab523bcbe0336abaf9a6651858e2b1b99">GPUTrackingOutputs::clusterLabels</a>)]-&gt;allocator) {</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Cluster MC Label buffer missing&quot;</span>);</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>      }</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>      <a class="code hl_typedef" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a36a2cecbb3006499a32ab75fd8b6e7d2">ClusterNativeAccess::ConstMCLabelContainerViewWithBuffer</a>* container = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a36a2cecbb3006499a32ab75fd8b6e7d2">ClusterNativeAccess::ConstMCLabelContainerViewWithBuffer</a>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">mSubOutputControls</a>[<a class="code hl_function" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">GPUTrackingOutputs::getIndex</a>(&amp;<a class="code hl_variable" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#ab523bcbe0336abaf9a6651858e2b1b99">GPUTrackingOutputs::clusterLabels</a>)]-&gt;allocator(0));</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a> = {&amp;container-&gt;first, &amp;container-&gt;second};</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae4a3f4cbaa2108f4d2d85a354767f54e">mIOMem</a>.<a class="code hl_variable" href="../../df/dbe/structo2_1_1gpu_1_1GPUChainTracking_1_1InOutMemory.html#a559cb570ca9343324b8837406ff4ff0a">clusterNativeMCView</a> = std::make_unique&lt;ConstMCLabelContainerView&gt;();</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae4a3f4cbaa2108f4d2d85a354767f54e">mIOMem</a>.<a class="code hl_variable" href="../../df/dbe/structo2_1_1gpu_1_1GPUChainTracking_1_1InOutMemory.html#a8e99ffc9d376fa502114d31815b741af">clusterNativeMCBuffer</a> = std::make_unique&lt;ConstMCLabelContainer&gt;();</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>.first = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae4a3f4cbaa2108f4d2d85a354767f54e">mIOMem</a>.<a class="code hl_variable" href="../../df/dbe/structo2_1_1gpu_1_1GPUChainTracking_1_1InOutMemory.html#a8e99ffc9d376fa502114d31815b741af">clusterNativeMCBuffer</a>.get();</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>      <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>.second = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae4a3f4cbaa2108f4d2d85a354767f54e">mIOMem</a>.<a class="code hl_variable" href="../../df/dbe/structo2_1_1gpu_1_1GPUChainTracking_1_1InOutMemory.html#a559cb570ca9343324b8837406ff4ff0a">clusterNativeMCView</a>.get();</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    }</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span> </div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>    assert(propagateMCLabels ? mcLinearLabels.<a class="code hl_variable" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#ac34e467563f8a809081f761de8162c56">header</a>.size() == nClsTotal : <span class="keyword">true</span>);</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>    assert(propagateMCLabels ? mcLinearLabels.<a class="code hl_variable" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#a0e679f238099bc0a36bda2ed4f1f6fe6">data</a>.size() &gt;= nClsTotal : <span class="keyword">true</span>);</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span> </div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>    mcLabels.<a class="code hl_function" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a985ade4a3ea55da8c98ec79e963c2078">setFrom</a>(mcLinearLabels.<a class="code hl_variable" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#ac34e467563f8a809081f761de8162c56">header</a>, mcLinearLabels.<a class="code hl_variable" href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#a0e679f238099bc0a36bda2ed4f1f6fe6">data</a>);</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>    mcLabels.<a class="code hl_function" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#ae77c019892975eccd942023547adad22">flatten_to</a>(*<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>.first);</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    *<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>.second = *<a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>.first;</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    mcLabelsConstView = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>.second;</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>  }</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span> </div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>  <span class="keywordflow">if</span> (buildNativeHost &amp;&amp; buildNativeGPU &amp;&amp; <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().delayedOutput) {</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mNClusterNative = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mNClusterNative = nClsTotal;</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a5540c38bf3e268f532d380bf8dcb61b7">AllocateRegisteredMemory</a>(<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mResourceClusterNativeOutput, <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcWriteClustersAfterRejection ? <span class="keyword">nullptr</span> : <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">mSubOutputControls</a>[<a class="code hl_function" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">GPUTrackingOutputs::getIndex</a>(&amp;<a class="code hl_variable" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a1c865570694053b57d40e0221f8f5631">GPUTrackingOutputs::clustersNative</a>)]);</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>    tmpNativeClusters = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPclusterNativeOutput;</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = outputQueueStart; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a883e23a31cefb85d9defcaf203f1409c">mOutputQueue</a>.size(); <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>      <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a883e23a31cefb85d9defcaf203f1409c">mOutputQueue</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>].dst = (<span class="keywordtype">char</span>*)tmpNativeClusters + (<span class="keywordtype">size_t</span>)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a883e23a31cefb85d9defcaf203f1409c">mOutputQueue</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>].dst;</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    }</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>  }</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span> </div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>  <span class="keywordflow">if</span> (buildNativeHost) {</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#ad78d5c1413c1708fe5ba19a4163fe9de">clustersLinear</a> = tmpNativeClusters;</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a1495f74639f2395ac66f158ae395f6cb">clustersMCTruth</a> = mcLabelsConstView;</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>    tmpNativeAccess-&gt;<a class="code hl_function" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#afbb61f84fedb341004571f15245b4d56">setOffsetPtrs</a>();</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a1869ca1b2d21d2962fbe0ca4a1dfb5f2">clustersNative</a> = tmpNativeAccess;</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().tpcApplyClusterFilterOnCPU) {</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>      <span class="keyword">auto</span> allocator = [<span class="keyword">this</span>, &amp;tmpNativeClusters](<span class="keywordtype">size_t</span> <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>) {</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>        this-&gt;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mNClusterNative = <a class="code hl_typedef" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>        this-&gt;<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a5540c38bf3e268f532d380bf8dcb61b7">AllocateRegisteredMemory</a>(this-&gt;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mResourceClusterNativeOutput, this-&gt;GetProcessingSettings().tpcWriteClustersAfterRejection ? <span class="keyword">nullptr</span> : this-&gt;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">mSubOutputControls</a>[<a class="code hl_function" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">GPUTrackingOutputs::getIndex</a>(&amp;<a class="code hl_variable" href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a1c865570694053b57d40e0221f8f5631">GPUTrackingOutputs::clustersNative</a>)]);</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>        <span class="keywordflow">return</span> (tmpNativeClusters = this-&gt;<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPclusterNativeOutput);</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>      };</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>      RunTPCClusterFilter(tmpNativeAccess, allocator, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>      nClsTotal = tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a3c467fd7af6577c8aa662cd4e958a772">nClustersTotal</a>;</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    }</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>  }</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span> </div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>  <span class="keywordflow">if</span> (!mWaitForFinalInputs) {</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    notifyForeignChainFinished();</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>  }</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span> </div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>  <span class="keywordflow">if</span> (buildNativeGPU) {</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;<a class="code hl_variable" href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#ae373430434b7ec02a30843a71e01884c">ioPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a1869ca1b2d21d2962fbe0ca4a1dfb5f2">clustersNative</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPclusterNativeAccess;</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a2e6403139bd241fbe0918f36a8cdf9a0">WriteToConstantMemory</a>(RecoStep::TPCClusterFinding, (<span class="keywordtype">char</span>*)&amp;<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>()-&gt;ioPtrs - (<span class="keywordtype">char</span>*)<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">processors</a>(), &amp;<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;ioPtrs, <span class="keyword">sizeof</span>(<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">processorsShadow</a>()-&gt;ioPtrs), 0);</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>    *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPclusterNativeAccess = *<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">mIOPtrs</a>.<a class="code hl_variable" href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a1869ca1b2d21d2962fbe0ca4a1dfb5f2">clustersNative</a>;</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPclusterNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#ad78d5c1413c1708fe5ba19a4163fe9de">clustersLinear</a> = <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPclusterNativeBuffer;</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>    <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mPclusterNativeAccess-&gt;setOffsetPtrs();</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a00a4eb6512be294afc5ecdc28bf765d8">TransferMemoryResourceLinkToGPU</a>(RecoStep::TPCClusterFinding, <a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">mInputsHost</a>-&gt;mResourceClusterNativeAccess, 0);</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>  }</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>  <span class="keywordflow">if</span> (doGPU &amp;&amp; synchronizeOutput) {</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(<a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">NStreams</a>() - 1);</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>  }</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>  <span class="keywordflow">if</span> (doGPU &amp;&amp; synchronizeCalibUpdate) {</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">SynchronizeStream</a>(0);</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>  }</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>  <span class="keywordflow">if</span> (buildNativeHost &amp;&amp; (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().deterministicGPUReconstruction || <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().debugLevel &gt;= 4)) {</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> = 0; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a> &lt; <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">NSECTORS</a>; <a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>++) {</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>      <span class="keywordflow">for</span> (uint32_t <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; <a class="code hl_define" href="../../d6/d1b/GPUTPCGeometry_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a>; <a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>        std::sort(&amp;tmpNativeClusters[tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a8582a4734beb8569a480cd0a9b79a487">clusterOffset</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]], &amp;tmpNativeClusters[tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a8582a4734beb8569a480cd0a9b79a487">clusterOffset</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] + tmpNativeAccess-&gt;<a class="code hl_variable" href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a0433cf46a3a892aea69074303977cc66">nClusters</a>[<a class="code hl_variable" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a>][<a class="code hl_variable" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]]);</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>      }</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>    }</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    <span class="keywordflow">if</span> (buildNativeGPU) {</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>      <a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0c7b2fd2882ac371ab3bfb0faabb30b9">GPUMemCpy</a>(RecoStep::TPCClusterFinding, (<span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">mInputsShadow</a>-&gt;mPclusterNativeBuffer, (<span class="keyword">const</span> <span class="keywordtype">void</span>*)tmpNativeClusters, nClsTotal * <span class="keyword">sizeof</span>(tmpNativeClusters[0]), -1, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>    }</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>  }</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>  <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">MemoryScalers</a>()-&gt;<a class="code hl_variable" href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">nTPCHits</a> = nClsTotal;</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>  <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aab124a391a945101e74eb480d2bb72f2">PopNonPersistentMemory</a>(RecoStep::TPCClusterFinding, <a class="code hl_function" href="../../d6/d75/strtag_8h.html#a3c542c21bfc745e5472d610a586bd9c8">qStr2Tag</a>(<span class="stringliteral">&quot;TPCCLUST&quot;</span>));</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>  <span class="keywordflow">if</span> (mPipelineNotifyCtx) {</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>    <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a878f30578598a4ff634556336cc5ecb7">UnblockStackedMemory</a>();</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>    mPipelineNotifyCtx = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>  }</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span> </div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">GetProcessingSettings</a>().autoAdjustHostThreads &amp;&amp; !doGPU) {</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>    <a class="code hl_variable" href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">mRec</a>-&gt;<a class="code hl_function" href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a6802aae83285761c26dfa5b5f5d3e368">SetNActiveThreads</a>(-1);</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>  }</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span> </div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>}</div>
</div>
<div class="ttc" id="aCfArray2D_8h_html"><div class="ttname"><a href="../../dd/da3/CfArray2D_8h.html">CfArray2D.h</a></div></div>
<div class="ttc" id="aCfChargePos_8h_html"><div class="ttname"><a href="../../d0/d02/CfChargePos_8h.html">CfChargePos.h</a></div></div>
<div class="ttc" id="aDataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h_html"><div class="ttname"><a href="../../d0/dda/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aDataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Digit_8h_html"><div class="ttname"><a href="../../d3/d7d/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Digit_8h.html">Digit.h</a></div><div class="ttdoc">Definition of the TPC Digit.</div></div>
<div class="ttc" id="aGPUChainTrackingDebug_8h_html"><div class="ttname"><a href="../../db/dca/GPUChainTrackingDebug_8h.html">GPUChainTrackingDebug.h</a></div></div>
<div class="ttc" id="aGPUChainTrackingDefs_8h_html"><div class="ttname"><a href="../../d6/d8c/GPUChainTrackingDefs_8h.html">GPUChainTrackingDefs.h</a></div></div>
<div class="ttc" id="aGPUChainTracking_8h_html"><div class="ttname"><a href="../../db/ded/GPUChainTracking_8h.html">GPUChainTracking.h</a></div></div>
<div class="ttc" id="aGPUCommonAlgorithm_8h_html_ad9484f5522d0e5f033037c369365ec61"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#ad9484f5522d0e5f033037c369365ec61">i</a></div><div class="ttdeci">int32_t i</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00435">GPUCommonAlgorithm.h:436</a></div></div>
<div class="ttc" id="aGPUConstantMem_8h_html"><div class="ttname"><a href="../../db/df8/GPUConstantMem_8h.html">GPUConstantMem.h</a></div></div>
<div class="ttc" id="aGPUDefConstantsAndSettings_8h_html_a2ab6c1ed85b61a21d0bea16c903599ec"><div class="ttname"><a href="../../d2/d37/GPUDefConstantsAndSettings_8h.html#a2ab6c1ed85b61a21d0bea16c903599ec">TPC_MAX_TIME_BIN_TRIGGERED</a></div><div class="ttdeci">#define TPC_MAX_TIME_BIN_TRIGGERED</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d37/GPUDefConstantsAndSettings_8h_source.html#l00049">GPUDefConstantsAndSettings.h:49</a></div></div>
<div class="ttc" id="aGPUDefParametersConstants_8h_html_a965cb1eb4e2b1f84d1ed7fc1d4e7b5c7"><div class="ttname"><a href="../../d3/d0c/GPUDefParametersConstants_8h.html#a965cb1eb4e2b1f84d1ed7fc1d4e7b5c7">GPUCA_MAX_STREAMS</a></div><div class="ttdeci">#define GPUCA_MAX_STREAMS</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d0c/GPUDefParametersConstants_8h_source.html#l00026">GPUDefParametersConstants.h:26</a></div></div>
<div class="ttc" id="aGPUGeneralKernels_8h_html"><div class="ttname"><a href="../../d9/de5/GPUGeneralKernels_8h.html">GPUGeneralKernels.h</a></div></div>
<div class="ttc" id="aGPUHostDataTypes_8h_html"><div class="ttname"><a href="../../d6/d20/GPUHostDataTypes_8h.html">GPUHostDataTypes.h</a></div></div>
<div class="ttc" id="aGPULogging_8h_html"><div class="ttname"><a href="../../df/ddc/GPULogging_8h.html">GPULogging.h</a></div></div>
<div class="ttc" id="aGPUMemorySizeScalers_8h_html"><div class="ttname"><a href="../../d3/d36/GPUMemorySizeScalers_8h.html">GPUMemorySizeScalers.h</a></div></div>
<div class="ttc" id="aGPUNewCalibValues_8h_html"><div class="ttname"><a href="../../de/d6e/GPUNewCalibValues_8h.html">GPUNewCalibValues.h</a></div></div>
<div class="ttc" id="aGPUO2DataTypes_8h_html"><div class="ttname"><a href="../../d5/d5c/GPUO2DataTypes_8h.html">GPUO2DataTypes.h</a></div></div>
<div class="ttc" id="aGPUReconstruction_8cxx_html_a9c8dc68de0d58c3b8236802d75077499"><div class="ttname"><a href="../../db/d5b/GPUReconstruction_8cxx.html#a9c8dc68de0d58c3b8236802d75077499">retVal</a></div><div class="ttdeci">int32_t retVal</div><div class="ttdef"><b>Definition</b> <a href="../../db/d5b/GPUReconstruction_8cxx_source.html#l00061">GPUReconstruction.cxx:61</a></div></div>
<div class="ttc" id="aGPUTPCCFChainContext_8h_html"><div class="ttname"><a href="../../d2/dc6/GPUTPCCFChainContext_8h.html">GPUTPCCFChainContext.h</a></div></div>
<div class="ttc" id="aGPUTPCCFChargeMapFiller_8h_html"><div class="ttname"><a href="../../dc/d10/GPUTPCCFChargeMapFiller_8h.html">GPUTPCCFChargeMapFiller.h</a></div></div>
<div class="ttc" id="aGPUTPCCFCheckPadBaseline_8h_html"><div class="ttname"><a href="../../df/d52/GPUTPCCFCheckPadBaseline_8h.html">GPUTPCCFCheckPadBaseline.h</a></div></div>
<div class="ttc" id="aGPUTPCCFClusterizer_8h_html"><div class="ttname"><a href="../../dd/d99/GPUTPCCFClusterizer_8h.html">GPUTPCCFClusterizer.h</a></div></div>
<div class="ttc" id="aGPUTPCCFDecodeZS_8h_html"><div class="ttname"><a href="../../dc/d65/GPUTPCCFDecodeZS_8h.html">GPUTPCCFDecodeZS.h</a></div></div>
<div class="ttc" id="aGPUTPCCFDeconvolution_8h_html"><div class="ttname"><a href="../../dc/d21/GPUTPCCFDeconvolution_8h.html">GPUTPCCFDeconvolution.h</a></div></div>
<div class="ttc" id="aGPUTPCCFGather_8h_html"><div class="ttname"><a href="../../d5/d54/GPUTPCCFGather_8h.html">GPUTPCCFGather.h</a></div></div>
<div class="ttc" id="aGPUTPCCFMCLabelFlattener_8h_html"><div class="ttname"><a href="../../dd/dd8/GPUTPCCFMCLabelFlattener_8h.html">GPUTPCCFMCLabelFlattener.h</a></div></div>
<div class="ttc" id="aGPUTPCCFNoiseSuppression_8h_html"><div class="ttname"><a href="../../d7/d30/GPUTPCCFNoiseSuppression_8h.html">GPUTPCCFNoiseSuppression.h</a></div></div>
<div class="ttc" id="aGPUTPCCFPeakFinder_8h_html"><div class="ttname"><a href="../../d6/d92/GPUTPCCFPeakFinder_8h.html">GPUTPCCFPeakFinder.h</a></div></div>
<div class="ttc" id="aGPUTPCCFStreamCompaction_8h_html"><div class="ttname"><a href="../../dc/deb/GPUTPCCFStreamCompaction_8h.html">GPUTPCCFStreamCompaction.h</a></div></div>
<div class="ttc" id="aGPUTPCGeometry_8h_html_afd2e13a07f9d227b8949af90d39812cf"><div class="ttname"><a href="../../d6/d1b/GPUTPCGeometry_8h.html#afd2e13a07f9d227b8949af90d39812cf">GPUCA_ROW_COUNT</a></div><div class="ttdeci">#define GPUCA_ROW_COUNT</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d1b/GPUTPCGeometry_8h_source.html#l00023">GPUTPCGeometry.h:23</a></div></div>
<div class="ttc" id="aGPUTPCNNClusterizerHost_8h_html"><div class="ttname"><a href="../../da/d3a/GPUTPCNNClusterizerHost_8h.html">GPUTPCNNClusterizerHost.h</a></div></div>
<div class="ttc" id="aGPUTPCNNClusterizerKernels_8h_html"><div class="ttname"><a href="../../d5/d92/GPUTPCNNClusterizerKernels_8h.html">GPUTPCNNClusterizerKernels.h</a></div></div>
<div class="ttc" id="aGPUTrackingInputProvider_8h_html"><div class="ttname"><a href="../../dd/dc8/GPUTrackingInputProvider_8h.html">GPUTrackingInputProvider.h</a></div></div>
<div class="ttc" id="aGPUTriggerOutputs_8h_html"><div class="ttname"><a href="../../d2/da7/GPUTriggerOutputs_8h.html">GPUTriggerOutputs.h</a></div></div>
<div class="ttc" id="aInteractionRecord_8h_html"><div class="ttname"><a href="../../d9/d80/InteractionRecord_8h.html">InteractionRecord.h</a></div></div>
<div class="ttc" id="aPainter_8cxx_html_a69a07fb02abd25371c7b7ba7d2bd397c"><div class="ttname"><a href="../../dd/d5f/Painter_8cxx.html#a69a07fb02abd25371c7b7ba7d2bd397c">hasData</a></div><div class="ttdeci">std::enable_if_t&lt; std::is_signed&lt; T &gt;::value, bool &gt; hasData(const CalArray&lt; T &gt; &amp;cal)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d5f/Painter_8cxx_source.html#l00599">Painter.cxx:599</a></div></div>
<div class="ttc" id="aRawData_8h_html_a5ee9234d389c6be7f0a75b450da09722"><div class="ttname"><a href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a></div><div class="ttdeci">uint32_t j</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d62/RawData_8h_source.html#l00000">RawData.h:0</a></div></div>
<div class="ttc" id="aRawData_8h_html_a7d397493728da2bca8d55b2d61c4ec5d"><div class="ttname"><a href="../../dc/d62/RawData_8h.html#a7d397493728da2bca8d55b2d61c4ec5d">endpoint</a></div><div class="ttdeci">uint8_t endpoint</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d62/RawData_8h_source.html#l00000">RawData.h:0</a></div></div>
<div class="ttc" id="aRaw_2include_2DetectorsRaw_2RDHUtils_8h_html"><div class="ttname"><a href="../../d6/dec/Raw_2include_2DetectorsRaw_2RDHUtils_8h.html">RDHUtils.h</a></div></div>
<div class="ttc" id="aTPC_2base_2include_2TPCBase_2RDHUtils_8h_html"><div class="ttname"><a href="../../db/d0d/TPC_2base_2include_2TPCBase_2RDHUtils_8h.html">RDHUtils.h</a></div></div>
<div class="ttc" id="aVcShim_8h_html"><div class="ttname"><a href="../../da/d3c/VcShim_8h.html">VcShim.h</a></div><div class="ttdoc">Provides a basic fallback implementation for Vc.</div></div>
<div class="ttc" id="aZeroSuppression_8h_html"><div class="ttname"><a href="../../dd/d04/ZeroSuppression_8h.html">ZeroSuppression.h</a></div><div class="ttdoc">Definitions of TPC Zero Suppression Data Headers.</div></div>
<div class="ttc" id="aclassHighResTimer_html"><div class="ttname"><a href="../../da/dd8/classHighResTimer.html">HighResTimer</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/dd0/timer_8h_source.html#l00020">timer.h:21</a></div></div>
<div class="ttc" id="aclassHighResTimer_html_a8a58469ba2f0df31a316a9000fcf12bf"><div class="ttname"><a href="../../da/dd8/classHighResTimer.html#a8a58469ba2f0df31a316a9000fcf12bf">HighResTimer::Start</a></div><div class="ttdeci">void Start()</div><div class="ttdef"><b>Definition</b> <a href="../../da/d64/timer_8cxx_source.html#l00064">timer.cxx:64</a></div></div>
<div class="ttc" id="aclassHighResTimer_html_acaf9fd768897e478d200e514a71971d5"><div class="ttname"><a href="../../da/dd8/classHighResTimer.html#acaf9fd768897e478d200e514a71971d5">HighResTimer::Stop</a></div><div class="ttdeci">void Stop()</div><div class="ttdef"><b>Definition</b> <a href="../../da/d64/timer_8cxx_source.html#l00076">timer.cxx:76</a></div></div>
<div class="ttc" id="aclassint_html"><div class="ttname"><a href="../../d1/da0/classint.html">int</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1ConstMCTruthContainerView_html"><div class="ttname"><a href="../../de/d68/classo2_1_1dataformats_1_1ConstMCTruthContainerView.html">o2::dataformats::ConstMCTruthContainerView&lt; o2::MCCompLabel &gt;</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1ConstMCTruthContainerView_html_a3aff3a2987f92af904a1527db1132077"><div class="ttname"><a href="../../de/d68/classo2_1_1dataformats_1_1ConstMCTruthContainerView.html#a3aff3a2987f92af904a1527db1132077">o2::dataformats::ConstMCTruthContainerView::getIndexedSize</a></div><div class="ttdeci">size_t getIndexedSize() const</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/ConstMCTruthContainer_8h_source.html#l00163">ConstMCTruthContainer.h:163</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">o2::dataformats::MCTruthContainer</a></div><div class="ttdoc">A container to hold and manage MC truth information/labels.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d14/MCTruthContainer_8h_source.html#l00082">MCTruthContainer.h:83</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html_a985ade4a3ea55da8c98ec79e963c2078"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a985ade4a3ea55da8c98ec79e963c2078">o2::dataformats::MCTruthContainer::setFrom</a></div><div class="ttdeci">void setFrom(std::vector&lt; MCTruthHeaderElement &gt; &amp;header, std::vector&lt; TruthElement &gt; &amp;truthArray)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d14/MCTruthContainer_8h_source.html#l00293">MCTruthContainer.h:293</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html_ae77c019892975eccd942023547adad22"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#ae77c019892975eccd942023547adad22">o2::dataformats::MCTruthContainer::flatten_to</a></div><div class="ttdeci">size_t flatten_to(ContainerType &amp;container) const</div><div class="ttdef"><b>Definition</b> <a href="../../db/d14/MCTruthContainer_8h_source.html#l00342">MCTruthContainer.h:342</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a340cb39b521009dafc0a8dcd18e10787"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a340cb39b521009dafc0a8dcd18e10787">o2::gpu::GPUChainTracking::mClusterNativeAccess</a></div><div class="ttdeci">std::unique_ptr&lt; o2::tpc::ClusterNativeAccess &gt; mClusterNativeAccess</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00268">GPUChainTracking.h:268</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a497cef20fc1000df3afeb7d93a78a525"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a497cef20fc1000df3afeb7d93a78a525">o2::gpu::GPUChainTracking::mEvents</a></div><div class="ttdeci">eventStruct * mEvents</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00287">GPUChainTracking.h:287</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a52a7d9a8dbd7908e12c343b9271706d2"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a52a7d9a8dbd7908e12c343b9271706d2">o2::gpu::GPUChainTracking::RunTPCClusterizer</a></div><div class="ttdeci">int32_t RunTPCClusterizer(bool synchronizeOutput=true)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d96/GPUChainTrackingClusterizer_8cxx_source.html#l00584">GPUChainTrackingClusterizer.cxx:584</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a65a7e7f9736bbae3a9f37b09642704ba"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a65a7e7f9736bbae3a9f37b09642704ba">o2::gpu::GPUChainTracking::mInputsHost</a></div><div class="ttdeci">std::unique_ptr&lt; GPUTrackingInputProvider &gt; mInputsHost</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00246">GPUChainTracking.h:246</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a7d40e25b8e3f6dc395f39e61ca861f86"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7d40e25b8e3f6dc395f39e61ca861f86">o2::gpu::GPUChainTracking::mSubOutputControls</a></div><div class="ttdeci">std::array&lt; GPUOutputControl *, GPUTrackingOutputs::count()&gt; mSubOutputControls</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00269">GPUChainTracking.h:269</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a7f5949504bef27b1a18e96dfc6fafee1"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a7f5949504bef27b1a18e96dfc6fafee1">o2::gpu::GPUChainTracking::mDebugFile</a></div><div class="ttdeci">std::unique_ptr&lt; std::ofstream &gt; mDebugFile</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00284">GPUChainTracking.h:284</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a8456310095be6c34b402d6a3a24558dd"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a8456310095be6c34b402d6a3a24558dd">o2::gpu::GPUChainTracking::mTriggerBuffer</a></div><div class="ttdeci">std::unique_ptr&lt; GPUTriggerOutputs &gt; mTriggerBuffer</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00270">GPUChainTracking.h:270</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a883e23a31cefb85d9defcaf203f1409c"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a883e23a31cefb85d9defcaf203f1409c">o2::gpu::GPUChainTracking::mOutputQueue</a></div><div class="ttdeci">std::vector&lt; outputQueueEntry &gt; mOutputQueue</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00290">GPUChainTracking.h:290</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_a9772a027922e03165fe5e51fa81d4b9b"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#a9772a027922e03165fe5e51fa81d4b9b">o2::gpu::GPUChainTracking::mUpdateNewCalibObjects</a></div><div class="ttdeci">bool mUpdateNewCalibObjects</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00276">GPUChainTracking.h:276</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_abe12fc7c4b63d595ca38f6f60ab2fde0"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#abe12fc7c4b63d595ca38f6f60ab2fde0">o2::gpu::GPUChainTracking::mCFContext</a></div><div class="ttdeci">std::unique_ptr&lt; GPUTPCCFChainContext &gt; mCFContext</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00273">GPUChainTracking.h:273</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_ac99075e4383ae0a029bbe56cf83588e8"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ac99075e4383ae0a029bbe56cf83588e8">o2::gpu::GPUChainTracking::DoQueuedUpdates</a></div><div class="ttdeci">int32_t DoQueuedUpdates(int32_t stream, bool updateSlave=true)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d58/GPUChainTracking_8cxx_source.html#l00605">GPUChainTracking.cxx:605</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_acb9264c286fa5e83579b23ae36c8c334"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#acb9264c286fa5e83579b23ae36c8c334">o2::gpu::GPUChainTracking::mNewCalibValues</a></div><div class="ttdeci">std::unique_ptr&lt; GPUNewCalibValues &gt; mNewCalibValues</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00277">GPUChainTracking.h:277</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_ae033e3b245ca116f84ee8e8232b66f74"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae033e3b245ca116f84ee8e8232b66f74">o2::gpu::GPUChainTracking::mIOPtrs</a></div><div class="ttdeci">GPUTrackingInOutPointers &amp; mIOPtrs</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00091">GPUChainTracking.h:91</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_ae4a3f4cbaa2108f4d2d85a354767f54e"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae4a3f4cbaa2108f4d2d85a354767f54e">o2::gpu::GPUChainTracking::mIOMem</a></div><div class="ttdeci">struct o2::gpu::GPUChainTracking::InOutMemory mIOMem</div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_ae75307ed4eba29ecb31ed96ab2cf5f67"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#ae75307ed4eba29ecb31ed96ab2cf5f67">o2::gpu::GPUChainTracking::mInputsShadow</a></div><div class="ttdeci">std::unique_ptr&lt; GPUTrackingInputProvider &gt; mInputsShadow</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00247">GPUChainTracking.h:247</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChainTracking_html_af70af0786ed82604fe65a4e366a0b178"><div class="ttname"><a href="../../da/d7f/classo2_1_1gpu_1_1GPUChainTracking.html#af70af0786ed82604fe65a4e366a0b178">o2::gpu::GPUChainTracking::ForwardTPCDigits</a></div><div class="ttdeci">int32_t ForwardTPCDigits()</div><div class="ttdef"><b>Definition</b> <a href="../../db/d78/GPUChainTrackingTransformation_8cxx_source.html#l00129">GPUChainTrackingTransformation.cxx:129</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a005ba8dd32cd8fd4ae93d8f00017258e"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a005ba8dd32cd8fd4ae93d8f00017258e">o2::gpu::GPUChain::RecordMarker</a></div><div class="ttdeci">void RecordMarker(deviceEvent *ev, int32_t stream)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00108">GPUChain.h:108</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a00a4eb6512be294afc5ecdc28bf765d8"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a00a4eb6512be294afc5ecdc28bf765d8">o2::gpu::GPUChain::TransferMemoryResourceLinkToGPU</a></div><div class="ttdeci">void TransferMemoryResourceLinkToGPU(RecoStep step, int16_t res, int32_t stream=-1, deviceEvent *ev=nullptr, deviceEvent *evList=nullptr, int32_t nEvents=1)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00124">GPUChain.h:124</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a0661d09541af8cf9826dc453f31e4a81"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0661d09541af8cf9826dc453f31e4a81">o2::gpu::GPUChain::GPUMemCpyAlways</a></div><div class="ttdeci">void GPUMemCpyAlways(RecoStep step, void *dst, const void *src, size_t size, int32_t stream, int32_t toGPU, deviceEvent *ev=nullptr, deviceEvent *evList=nullptr, int32_t nEvents=1)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00129">GPUChain.h:129</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a0c7b2fd2882ac371ab3bfb0faabb30b9"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a0c7b2fd2882ac371ab3bfb0faabb30b9">o2::gpu::GPUChain::GPUMemCpy</a></div><div class="ttdeci">void GPUMemCpy(RecoStep step, void *dst, const void *src, size_t size, int32_t stream, int32_t toGPU, deviceEvent *ev=nullptr, deviceEvent *evList=nullptr, int32_t nEvents=1)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00128">GPUChain.h:128</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a1330f6ef127378f56dc148dc0dcb9cee"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a1330f6ef127378f56dc148dc0dcb9cee">o2::gpu::GPUChain::DoDebugAndDump</a></div><div class="ttdeci">bool DoDebugAndDump(RecoStep step, uint32_t mask, T &amp;processor, S T::*func, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00230">GPUChain.h:230</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a24af3ee3d7a9a0df05751143da734c8a"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a24af3ee3d7a9a0df05751143da734c8a">o2::gpu::GPUChain::GetRecoStepsGPU</a></div><div class="ttdeci">GPUReconstruction::RecoStepField GetRecoStepsGPU() const</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00072">GPUChain.h:72</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a2e6403139bd241fbe0918f36a8cdf9a0"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a2e6403139bd241fbe0918f36a8cdf9a0">o2::gpu::GPUChain::WriteToConstantMemory</a></div><div class="ttdeci">void WriteToConstantMemory(RecoStep step, size_t offset, const void *src, size_t size, int32_t stream=-1, deviceEvent *ev=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00127">GPUChain.h:127</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a395f2a5a67aab4a1178d4c9dde532ee9"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a395f2a5a67aab4a1178d4c9dde532ee9">o2::gpu::GPUChain::ReleaseEvent</a></div><div class="ttdeci">void ReleaseEvent(deviceEvent ev, bool doGPU=true)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00111">GPUChain.h:111</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a5540c38bf3e268f532d380bf8dcb61b7"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a5540c38bf3e268f532d380bf8dcb61b7">o2::gpu::GPUChain::AllocateRegisteredMemory</a></div><div class="ttdeci">size_t AllocateRegisteredMemory(GPUProcessor *proc)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00217">GPUChain.h:217</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a6d707d7b58a2ec3806a701ac6e7dae88"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a6d707d7b58a2ec3806a701ac6e7dae88">o2::gpu::GPUChain::GetThreadContext</a></div><div class="ttdeci">virtual std::unique_ptr&lt; GPUReconstructionProcessing::threadContext &gt; GetThreadContext()</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00109">GPUChain.h:109</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a741125497a4b54349cebb38f94ba07a3"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a741125497a4b54349cebb38f94ba07a3">o2::gpu::GPUChain::processors</a></div><div class="ttdeci">GPUConstantMem * processors()</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00084">GPUChain.h:84</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a78f87aa13d90b5068cc76adbd55da062"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a78f87aa13d90b5068cc76adbd55da062">o2::gpu::GPUChain::krnlRunRangeNone</a></div><div class="ttdeci">static constexpr krnlRunRange krnlRunRangeNone</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00041">GPUChain.h:41</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a890a7b64d995e9f06473afdf8172c6c5"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a890a7b64d995e9f06473afdf8172c6c5">o2::gpu::GPUChain::SetONNXGPUStream</a></div><div class="ttdeci">void SetONNXGPUStream(Ort::SessionOptions &amp;opt, int32_t stream, int32_t *deviceId)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00090">GPUChain.h:90</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a97c8370f617643519290f0e96f7b09ab"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a97c8370f617643519290f0e96f7b09ab">o2::gpu::GPUChain::param</a></div><div class="ttdeci">GPUParam &amp; param()</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00087">GPUChain.h:87</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_a9e17a31147209a8f55caef65c0404d6e"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#a9e17a31147209a8f55caef65c0404d6e">o2::gpu::GPUChain::SetupGPUProcessor</a></div><div class="ttdeci">void SetupGPUProcessor(T *proc, bool allocate)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00220">GPUChain.h:220</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_ab4253f510d419c40d420fb3694878e87"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4253f510d419c40d420fb3694878e87">o2::gpu::GPUChain::GetProcessingSettings</a></div><div class="ttdeci">const GPUSettingsProcessing &amp; GetProcessingSettings() const</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00076">GPUChain.h:76</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_ab4329478a0e2c67c5fb2139da8f50742"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab4329478a0e2c67c5fb2139da8f50742">o2::gpu::GPUChain::SynchronizeStream</a></div><div class="ttdeci">void SynchronizeStream(int32_t stream)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00089">GPUChain.h:89</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_ab50b41f381ec351846f854176743d5af"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab50b41f381ec351846f854176743d5af">o2::gpu::GPUChain::mRec</a></div><div class="ttdeci">GPUReconstructionCPU * mRec</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00079">GPUChain.h:79</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_ab8ac798b2e0059b07533f835c955f759"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ab8ac798b2e0059b07533f835c955f759">o2::gpu::GPUChain::processorsShadow</a></div><div class="ttdeci">GPUConstantMem * processorsShadow()</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00085">GPUChain.h:85</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_ac16fec7768fd45a609dd29024b658a92"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac16fec7768fd45a609dd29024b658a92">o2::gpu::GPUChain::GetGridAutoStep</a></div><div class="ttdeci">krnlExec GetGridAutoStep(int32_t stream, GPUDataTypes::RecoStep st=GPUDataTypes::RecoStep::NoRecoStep)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d86/GPUChain_8cxx_source.html#l00047">GPUChain.cxx:47</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_ac6fe296e72adc9c124c1114d24bc7740"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ac6fe296e72adc9c124c1114d24bc7740">o2::gpu::GPUChain::NSECTORS</a></div><div class="ttdeci">static constexpr int32_t NSECTORS</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00058">GPUChain.h:58</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_acdaab29923e08f062b5fb34fa5fdbfd0"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#acdaab29923e08f062b5fb34fa5fdbfd0">o2::gpu::GPUChain::TransferMemoryResourceLinkToHost</a></div><div class="ttdeci">void TransferMemoryResourceLinkToHost(RecoStep step, int16_t res, int32_t stream=-1, deviceEvent *ev=nullptr, deviceEvent *evList=nullptr, int32_t nEvents=1)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00125">GPUChain.h:125</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_ad2b4b3b41fcba5b5e6a7aa60c4d0acab"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ad2b4b3b41fcba5b5e6a7aa60c4d0acab">o2::gpu::GPUChain::TransferMemoryResourcesToHost</a></div><div class="ttdeci">void TransferMemoryResourcesToHost(RecoStep step, GPUProcessor *proc, int32_t stream=-1, bool all=false)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00123">GPUChain.h:123</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_adffba64f93ce79c3c33e8a7f8216cce7"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#adffba64f93ce79c3c33e8a7f8216cce7">o2::gpu::GPUChain::GetGrid</a></div><div class="ttdeci">krnlExec GetGrid(uint32_t totalItems, uint32_t nThreads, int32_t stream, GPUReconstruction::krnlDeviceType d=GPUReconstruction::krnlDeviceType::Auto, GPUDataTypes::RecoStep st=GPUDataTypes::RecoStep::NoRecoStep)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d86/GPUChain_8cxx_source.html#l00021">GPUChain.cxx:21</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_ae80d16510eb89630785eacbfba8f1061"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#ae80d16510eb89630785eacbfba8f1061">o2::gpu::GPUChain::GetGridBlk</a></div><div class="ttdeci">krnlExec GetGridBlk(uint32_t nBlocks, int32_t stream, GPUReconstruction::krnlDeviceType d=GPUReconstruction::krnlDeviceType::Auto, GPUDataTypes::RecoStep st=GPUDataTypes::RecoStep::NoRecoStep)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d86/GPUChain_8cxx_source.html#l00032">GPUChain.cxx:32</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUChain_html_af03a26d3c23835e083e424e38629ccde"><div class="ttname"><a href="../../dd/d1c/classo2_1_1gpu_1_1GPUChain.html#af03a26d3c23835e083e424e38629ccde">o2::gpu::GPUChain::rec</a></div><div class="ttdeci">GPUReconstruction * rec()</div><div class="ttdef"><b>Definition</b> <a href="../../d3/dbe/GPUChain_8h_source.html#l00066">GPUChain.h:66</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUDataTypes_html_a1facf0dc3cb552042810943788544f2ca1eef409358bdd23c54be456b119a3b82"><div class="ttname"><a href="../../d2/d32/classo2_1_1gpu_1_1GPUDataTypes.html#a1facf0dc3cb552042810943788544f2ca1eef409358bdd23c54be456b119a3b82">o2::gpu::GPUDataTypes::RecoStep::TPCClusterFinding</a></div><div class="ttdeci">@ TPCClusterFinding</div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUDataTypes_html_ab3ee3baae27e95ee599e8ecfc1c47b62a70eba767897ae1f9ade06c8ea75cfff9"><div class="ttname"><a href="../../d2/d32/classo2_1_1gpu_1_1GPUDataTypes.html#ab3ee3baae27e95ee599e8ecfc1c47b62a70eba767897ae1f9ade06c8ea75cfff9">o2::gpu::GPUDataTypes::InOutType::TPCClusters</a></div><div class="ttdeci">@ TPCClusters</div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstructionProcessing_html_a11ba34a4786ed29e61d69551e0a0f79b"><div class="ttname"><a href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a11ba34a4786ed29e61d69551e0a0f79b">o2::gpu::GPUReconstructionProcessing::getGeneralStepTimer</a></div><div class="ttdeci">HighResTimer &amp; getGeneralStepTimer(GeneralStep step)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d68/GPUReconstructionProcessing_8h_source.html#l00171">GPUReconstructionProcessing.h:171</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstructionProcessing_html_a2d828fb344766f0d8f6e7825ea5f2ea1"><div class="ttname"><a href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a2d828fb344766f0d8f6e7825ea5f2ea1">o2::gpu::GPUReconstructionProcessing::runParallelOuterLoop</a></div><div class="ttdeci">void runParallelOuterLoop(bool doGPU, uint32_t nThreads, std::function&lt; void(uint32_t)&gt; lambda)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dec/GPUReconstructionProcessing_8cxx_source.html#l00070">GPUReconstructionProcessing.cxx:70</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstructionProcessing_html_a6802aae83285761c26dfa5b5f5d3e368"><div class="ttname"><a href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#a6802aae83285761c26dfa5b5f5d3e368">o2::gpu::GPUReconstructionProcessing::SetNActiveThreads</a></div><div class="ttdeci">void SetNActiveThreads(int32_t n)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dec/GPUReconstructionProcessing_8cxx_source.html#l00061">GPUReconstructionProcessing.cxx:61</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstructionProcessing_html_aa8be1511007035cbcf05248d454c9fcd"><div class="ttname"><a href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#aa8be1511007035cbcf05248d454c9fcd">o2::gpu::GPUReconstructionProcessing::getNKernelHostThreads</a></div><div class="ttdeci">int32_t getNKernelHostThreads(bool splitCores)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dec/GPUReconstructionProcessing_8cxx_source.html#l00044">GPUReconstructionProcessing.cxx:44</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstructionProcessing_html_aeee81bf41ad5f1f2bb2d240061e0f664"><div class="ttname"><a href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#aeee81bf41ad5f1f2bb2d240061e0f664">o2::gpu::GPUReconstructionProcessing::getGPUParameters</a></div><div class="ttdeci">const GPUDefParameters &amp; getGPUParameters(bool doGPU) const override</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d68/GPUReconstructionProcessing_8h_source.html#l00178">GPUReconstructionProcessing.h:178</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstructionProcessing_html_afa8e445ee050e175baa6354581dce0ba"><div class="ttname"><a href="../../db/ddc/classo2_1_1gpu_1_1GPUReconstructionProcessing.html#afa8e445ee050e175baa6354581dce0ba">o2::gpu::GPUReconstructionProcessing::SetNActiveThreadsOuterLoop</a></div><div class="ttdeci">void SetNActiveThreadsOuterLoop(uint32_t f)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d68/GPUReconstructionProcessing_8h_source.html#l00157">GPUReconstructionProcessing.h:157</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_a1795aee999e950158c85d64010b605a1"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a1795aee999e950158c85d64010b605a1">o2::gpu::GPUReconstruction::AllocateRegisteredForeignMemory</a></div><div class="ttdeci">void AllocateRegisteredForeignMemory(int16_t res, GPUReconstruction *rec, GPUOutputControl *control=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d5b/GPUReconstruction_8cxx_source.html#l00710">GPUReconstruction.cxx:710</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_a2f7769e56e0f17cc59f6ab40f69d4f32"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a2f7769e56e0f17cc59f6ab40f69d4f32">o2::gpu::GPUReconstruction::ComputeReuseMax</a></div><div class="ttdeci">void ComputeReuseMax(GPUProcessor *proc)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d5b/GPUReconstruction_8cxx_source.html#l00482">GPUReconstruction.cxx:482</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_a3e4e6513aa5aeacacdf2ba0b5f411b10"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a3e4e6513aa5aeacacdf2ba0b5f411b10">o2::gpu::GPUReconstruction::GetRecoStepsGPU</a></div><div class="ttdeci">RecoStepField GetRecoStepsGPU() const</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de8/GPUReconstruction_8h_source.html#l00226">GPUReconstruction.h:226</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_a48e4bc2a14ea86e413f0e45c970c2083"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a48e4bc2a14ea86e413f0e45c970c2083">o2::gpu::GPUReconstruction::IsGPU</a></div><div class="ttdeci">bool IsGPU() const</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de8/GPUReconstruction_8h_source.html#l00202">GPUReconstruction.h:202</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_a878f30578598a4ff634556336cc5ecb7"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a878f30578598a4ff634556336cc5ecb7">o2::gpu::GPUReconstruction::UnblockStackedMemory</a></div><div class="ttdeci">void UnblockStackedMemory()</div><div class="ttdef"><b>Definition</b> <a href="../../db/d5b/GPUReconstruction_8cxx_source.html#l00939">GPUReconstruction.cxx:939</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_a8d910fd15ab553d8cbd98502885f08c6a2b55387dd066c5bac646ac61543d152d"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#a8d910fd15ab553d8cbd98502885f08c6a2b55387dd066c5bac646ac61543d152d">o2::gpu::GPUReconstruction::krnlDeviceType::CPU</a></div><div class="ttdeci">@ CPU</div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_aab124a391a945101e74eb480d2bb72f2"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aab124a391a945101e74eb480d2bb72f2">o2::gpu::GPUReconstruction::PopNonPersistentMemory</a></div><div class="ttdeci">void PopNonPersistentMemory(RecoStep step, uint64_t tag, const GPUProcessor *proc=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d5b/GPUReconstruction_8cxx_source.html#l00886">GPUReconstruction.cxx:886</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_aabb73ffd9d2c7e139cc8bcd04b3b626f"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aabb73ffd9d2c7e139cc8bcd04b3b626f">o2::gpu::GPUReconstruction::NStreams</a></div><div class="ttdeci">uint32_t NStreams() const</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de8/GPUReconstruction_8h_source.html#l00221">GPUReconstruction.h:221</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_ab189badd0e75789609536dc3faf6b69f"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#ab189badd0e75789609536dc3faf6b69f">o2::gpu::GPUReconstruction::GetParam</a></div><div class="ttdeci">const GPUParam &amp; GetParam() const</div><div class="ttdef"><b>Definition</b> <a href="../../db/d5b/GPUReconstruction_8cxx_source.html#l01291">GPUReconstruction.cxx:1291</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_ac1e3e71994a8ec7fa6e02184e423feac"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#ac1e3e71994a8ec7fa6e02184e423feac">o2::gpu::GPUReconstruction::PushNonPersistentMemory</a></div><div class="ttdeci">void PushNonPersistentMemory(uint64_t tag)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d5b/GPUReconstruction_8cxx_source.html#l00881">GPUReconstruction.cxx:881</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_ac3ef7da851fbed334926c0830e4f96b1"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#ac3ef7da851fbed334926c0830e4f96b1">o2::gpu::GPUReconstruction::GetRecoStepsOutputs</a></div><div class="ttdeci">InOutTypeField GetRecoStepsOutputs() const</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de8/GPUReconstruction_8h_source.html#l00228">GPUReconstruction.h:228</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUReconstruction_html_aca17b6647dab2b1e450ab50481c36d7f"><div class="ttname"><a href="../../d8/d04/classo2_1_1gpu_1_1GPUReconstruction.html#aca17b6647dab2b1e450ab50481c36d7f">o2::gpu::GPUReconstruction::MemoryScalers</a></div><div class="ttdeci">GPUMemorySizeScalers * MemoryScalers()</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de8/GPUReconstruction_8h_source.html#l00193">GPUReconstruction.h:193</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCCFCheckPadBaseline_html_a19647e32a1b98451b4bf5cd054609ad0aa007830c411d60ac56240d2ff01a75cb"><div class="ttname"><a href="../../d1/d27/classo2_1_1gpu_1_1GPUTPCCFCheckPadBaseline.html#a19647e32a1b98451b4bf5cd054609ad0aa007830c411d60ac56240d2ff01a75cb">o2::gpu::GPUTPCCFCheckPadBaseline::PadsPerCacheline</a></div><div class="ttdeci">@ PadsPerCacheline</div><div class="ttdef"><b>Definition</b> <a href="../../df/d52/GPUTPCCFCheckPadBaseline_8h_source.html#l00031">GPUTPCCFCheckPadBaseline.h:31</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCCFMCLabelFlattener_html_a55e60214b5b2de52f3e8d907c84987cc"><div class="ttname"><a href="../../d2/d9e/classo2_1_1gpu_1_1GPUTPCCFMCLabelFlattener.html#a55e60214b5b2de52f3e8d907c84987cc">o2::gpu::GPUTPCCFMCLabelFlattener::setGlobalOffsetsAndAllocate</a></div><div class="ttdeci">static void setGlobalOffsetsAndAllocate(GPUTPCClusterFinder &amp;, GPUTPCLinearLabels &amp;)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d5e/GPUTPCCFMCLabelFlattener_8cxx_source.html#l00025">GPUTPCCFMCLabelFlattener.cxx:25</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html">o2::gpu::GPUTPCClusterFinder</a></div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00052">GPUTPCClusterFinder.h:53</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a067d7265bd74917b85706e9bc477d720"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a067d7265bd74917b85706e9bc477d720">o2::gpu::GPUTPCClusterFinder::DumpDigits</a></div><div class="ttdeci">void DumpDigits(std::ostream &amp;out)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db7/GPUTPCClusterFinderDump_8cxx_source.html#l00025">GPUTPCClusterFinderDump.cxx:25</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a0917678590972aa079db85ad657560b7"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0917678590972aa079db85ad657560b7">o2::gpu::GPUTPCClusterFinder::PrepareMC</a></div><div class="ttdeci">void PrepareMC()</div><div class="ttdef"><b>Definition</b> <a href="../../df/da0/GPUTPCClusterFinder_8cxx_source.html#l00163">GPUTPCClusterFinder.cxx:163</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a0c54ba5a663bd3b7581d2ef14ba73e12"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a0c54ba5a663bd3b7581d2ef14ba73e12">o2::gpu::GPUTPCClusterFinder::mPzsOffsets</a></div><div class="ttdeci">ZSOffset * mPzsOffsets</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00098">GPUTPCClusterFinder.h:98</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a10c5632ebb55fef80131eec25e94593f"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a10c5632ebb55fef80131eec25e94593f">o2::gpu::GPUTPCClusterFinder::mPpadIsNoisy</a></div><div class="ttdeci">uint8_t * mPpadIsNoisy</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00100">GPUTPCClusterFinder.h:100</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a1184ef83b3cbe34a02a66d0945a197b4"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a1184ef83b3cbe34a02a66d0945a197b4">o2::gpu::GPUTPCClusterFinder::mPmemory</a></div><div class="ttdeci">Memory * mPmemory</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00116">GPUTPCClusterFinder.h:116</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a140a95cae76c43c48c78d668879f5c28"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a140a95cae76c43c48c78d668879f5c28">o2::gpu::GPUTPCClusterFinder::mPpeakMap</a></div><div class="ttdeci">uint8_t * mPpeakMap</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00110">GPUTPCClusterFinder.h:110</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a2ac3f23887f0f96157a166b7b6f6e569"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a2ac3f23887f0f96157a166b7b6f6e569">o2::gpu::GPUTPCClusterFinder::SetMaxData</a></div><div class="ttdeci">void SetMaxData(const GPUTrackingInOutPointers &amp;io)</div><div class="ttdef"><b>Definition</b> <a href="../../df/da0/GPUTPCClusterFinder_8cxx_source.html#l00118">GPUTPCClusterFinder.cxx:118</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a31706a49811cb41c1c09b77e32884da9"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a31706a49811cb41c1c09b77e32884da9">o2::gpu::GPUTPCClusterFinder::mPpeakPositions</a></div><div class="ttdeci">CfChargePos * mPpeakPositions</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00103">GPUTPCClusterFinder.h:103</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a3ac24c39179573f5c8a0cd0520a83bf3"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3ac24c39179573f5c8a0cd0520a83bf3">o2::gpu::GPUTPCClusterFinder::DumpClusters</a></div><div class="ttdeci">void DumpClusters(std::ostream &amp;out)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db7/GPUTPCClusterFinderDump_8cxx_source.html#l00156">GPUTPCClusterFinderDump.cxx:156</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a3ba2ae40d5e36642b4030bb0d9eb4c64"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3ba2ae40d5e36642b4030bb0d9eb4c64">o2::gpu::GPUTPCClusterFinder::SetNMaxDigits</a></div><div class="ttdeci">void SetNMaxDigits(size_t nDigits, size_t nPages, size_t nDigitsFragment, size_t nDigitsEndpointMax)</div><div class="ttdef"><b>Definition</b> <a href="../../df/da0/GPUTPCClusterFinder_8cxx_source.html#l00140">GPUTPCClusterFinder.cxx:140</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a3fae1a209d0dacec5562d35ccb89fe09"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a3fae1a209d0dacec5562d35ccb89fe09">o2::gpu::GPUTPCClusterFinder::clearMCMemory</a></div><div class="ttdeci">void clearMCMemory()</div><div class="ttdef"><b>Definition</b> <a href="../../df/da0/GPUTPCClusterFinder_8cxx_source.html#l00173">GPUTPCClusterFinder.cxx:173</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a41522a82c3e2ec6175649f7621d82908"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a41522a82c3e2ec6175649f7621d82908">o2::gpu::GPUTPCClusterFinder::mPdigits</a></div><div class="ttdeci">tpc::Digit * mPdigits</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00101">GPUTPCClusterFinder.h:101</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a423b1e953c11b51f89cf697074e06521"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a423b1e953c11b51f89cf697074e06521">o2::gpu::GPUTPCClusterFinder::DumpSuppressedPeaks</a></div><div class="ttdeci">void DumpSuppressedPeaks(std::ostream &amp;out)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db7/GPUTPCClusterFinderDump_8cxx_source.html#l00130">GPUTPCClusterFinderDump.cxx:130</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a4493fc3aad322eb5e67e826c48dd6b3c"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a4493fc3aad322eb5e67e826c48dd6b3c">o2::gpu::GPUTPCClusterFinder::mISector</a></div><div class="ttdeci">int32_t mISector</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00125">GPUTPCClusterFinder.h:125</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a52c9f7d71b768b6ac95f0416cee494fd"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a52c9f7d71b768b6ac95f0416cee494fd">o2::gpu::GPUTPCClusterFinder::mNMaxClusterPerRow</a></div><div class="ttdeci">uint32_t mNMaxClusterPerRow</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00126">GPUTPCClusterFinder.h:126</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a595cd52d65d91dd4490069bb9adb8ffc"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a595cd52d65d91dd4490069bb9adb8ffc">o2::gpu::GPUTPCClusterFinder::mMemoryId</a></div><div class="ttdeci">int16_t mMemoryId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00136">GPUTPCClusterFinder.h:136</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a635b45d16d1f7741682d8890f3ce944d"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a635b45d16d1f7741682d8890f3ce944d">o2::gpu::GPUTPCClusterFinder::DumpPeakMap</a></div><div class="ttdeci">void DumpPeakMap(std::ostream &amp;out, std::string_view)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db7/GPUTPCClusterFinderDump_8cxx_source.html#l00072">GPUTPCClusterFinderDump.cxx:72</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a6a2f3aaf622fbaa193244651d798863d"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6a2f3aaf622fbaa193244651d798863d">o2::gpu::GPUTPCClusterFinder::mMinMaxCN</a></div><div class="ttdeci">MinMaxCN * mMinMaxCN</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00099">GPUTPCClusterFinder.h:99</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a6bfa82523b7d0ab7e0ac2094fd422f14"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a6bfa82523b7d0ab7e0ac2094fd422f14">o2::gpu::GPUTPCClusterFinder::mPinputLabels</a></div><div class="ttdeci">o2::dataformats::ConstMCTruthContainerView&lt; o2::MCCompLabel &gt; const  * mPinputLabels</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00120">GPUTPCClusterFinder.h:120</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a73e99ecedbb5e35498657018a5176715"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a73e99ecedbb5e35498657018a5176715">o2::gpu::GPUTPCClusterFinder::mNBufs</a></div><div class="ttdeci">uint32_t mNBufs</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00134">GPUTPCClusterFinder.h:134</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a7cfc59c4a6c199e74519ca8948eb654e"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a7cfc59c4a6c199e74519ca8948eb654e">o2::gpu::GPUTPCClusterFinder::mPclusterInRow</a></div><div class="ttdeci">uint32_t * mPclusterInRow</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00112">GPUTPCClusterFinder.h:112</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a8a1111a130d63f39f36f20b9e2af6dfd"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a8a1111a130d63f39f36f20b9e2af6dfd">o2::gpu::GPUTPCClusterFinder::mNMaxClusters</a></div><div class="ttdeci">uint32_t mNMaxClusters</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00127">GPUTPCClusterFinder.h:127</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a8a6b95fd94cf61b84c4f7859ac84ca09"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a8a6b95fd94cf61b84c4f7859ac84ca09">o2::gpu::GPUTPCClusterFinder::mPzs</a></div><div class="ttdeci">uint8_t * mPzs</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00097">GPUTPCClusterFinder.h:97</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_a9b551492fe4c156f453f03173cf2ecdb"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#a9b551492fe4c156f453f03173cf2ecdb">o2::gpu::GPUTPCClusterFinder::mPchargeMap</a></div><div class="ttdeci">uint16_t * mPchargeMap</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00109">GPUTPCClusterFinder.h:109</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_aa09731b70ece6cd2870b8e1ca9c60081"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#aa09731b70ece6cd2870b8e1ca9c60081">o2::gpu::GPUTPCClusterFinder::DumpChargeMap</a></div><div class="ttdeci">void DumpChargeMap(std::ostream &amp;out, std::string_view)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db7/GPUTPCClusterFinderDump_8cxx_source.html#l00039">GPUTPCClusterFinderDump.cxx:39</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_aad4421b447b7574f4745f4337cd2b28c"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#aad4421b447b7574f4745f4337cd2b28c">o2::gpu::GPUTPCClusterFinder::getNSteps</a></div><div class="ttdeci">uint32_t getNSteps(size_t items) const</div><div class="ttdef"><b>Definition</b> <a href="../../df/da0/GPUTPCClusterFinder_8cxx_source.html#l00148">GPUTPCClusterFinder.cxx:148</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_ab34e00abd1a02ab8fc27147e2c9b224b"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ab34e00abd1a02ab8fc27147e2c9b224b">o2::gpu::GPUTPCClusterFinder::mScratchId</a></div><div class="ttdeci">int16_t mScratchId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00137">GPUTPCClusterFinder.h:137</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_ab603087840ecaadb677b933bbd5616a8"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ab603087840ecaadb677b933bbd5616a8">o2::gpu::GPUTPCClusterFinder::mPpositions</a></div><div class="ttdeci">CfChargePos * mPpositions</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00102">GPUTPCClusterFinder.h:102</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_abfe433690b2e1d9afef3c319bd16aa39"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#abfe433690b2e1d9afef3c319bd16aa39">o2::gpu::GPUTPCClusterFinder::mPfilteredPeakPositions</a></div><div class="ttdeci">CfChargePos * mPfilteredPeakPositions</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00104">GPUTPCClusterFinder.h:104</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_ac294f4bc2a452f0b07979028978c4270"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ac294f4bc2a452f0b07979028978c4270">o2::gpu::GPUTPCClusterFinder::DumpSuppressedPeaksCompacted</a></div><div class="ttdeci">void DumpSuppressedPeaksCompacted(std::ostream &amp;out)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db7/GPUTPCClusterFinderDump_8cxx_source.html#l00144">GPUTPCClusterFinderDump.cxx:144</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_ac3defe25ac168c527c5839d613358b07"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ac3defe25ac168c527c5839d613358b07">o2::gpu::GPUTPCClusterFinder::mNMaxPages</a></div><div class="ttdeci">uint32_t mNMaxPages</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00128">GPUTPCClusterFinder.h:128</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_ad3f4145a56489e42b992fb11a65936fb"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ad3f4145a56489e42b992fb11a65936fb">o2::gpu::GPUTPCClusterFinder::DumpPeaksCompacted</a></div><div class="ttdeci">void DumpPeaksCompacted(std::ostream &amp;out)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db7/GPUTPCClusterFinderDump_8cxx_source.html#l00119">GPUTPCClusterFinderDump.cxx:119</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_ae5d8c6367437aab3fdd22cf996e1f87b"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#ae5d8c6367437aab3fdd22cf996e1f87b">o2::gpu::GPUTPCClusterFinder::mPclusterByRow</a></div><div class="ttdeci">tpc::ClusterNative * mPclusterByRow</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00113">GPUTPCClusterFinder.h:113</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_af55916721167170302ad73c34231f6d9"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#af55916721167170302ad73c34231f6d9">o2::gpu::GPUTPCClusterFinder::mPisPeak</a></div><div class="ttdeci">uint8_t * mPisPeak</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00105">GPUTPCClusterFinder.h:105</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCClusterFinder_html_afa9bfa7544967e093577c6647c23317b"><div class="ttname"><a href="../../d7/ddd/classo2_1_1gpu_1_1GPUTPCClusterFinder.html#afa9bfa7544967e093577c6647c23317b">o2::gpu::GPUTPCClusterFinder::DumpPeaks</a></div><div class="ttdeci">void DumpPeaks(std::ostream &amp;out)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db7/GPUTPCClusterFinderDump_8cxx_source.html#l00108">GPUTPCClusterFinderDump.cxx:108</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizerHost_html"><div class="ttname"><a href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html">o2::gpu::GPUTPCNNClusterizerHost</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/d3a/GPUTPCNNClusterizerHost_8h_source.html#l00044">GPUTPCNNClusterizerHost.h:45</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizerHost_html_a224d5a8d3e1111e43d37db110bdb60cd"><div class="ttname"><a href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a224d5a8d3e1111e43d37db110bdb60cd">o2::gpu::GPUTPCNNClusterizerHost::mModelReg1</a></div><div class="ttdeci">o2::ml::OrtModel mModelReg1</div><div class="ttdef"><b>Definition</b> <a href="../../da/d3a/GPUTPCNNClusterizerHost_8h_source.html#l00061">GPUTPCNNClusterizerHost.h:61</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizerHost_html_a255dc92078e77fea53024b926973c57e"><div class="ttname"><a href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a255dc92078e77fea53024b926973c57e">o2::gpu::GPUTPCNNClusterizerHost::mModelClass</a></div><div class="ttdeci">o2::ml::OrtModel mModelClass</div><div class="ttdef"><b>Definition</b> <a href="../../da/d3a/GPUTPCNNClusterizerHost_8h_source.html#l00061">GPUTPCNNClusterizerHost.h:61</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizerHost_html_a6df769b03b11b39032d7831fa5e6287a"><div class="ttname"><a href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a6df769b03b11b39032d7831fa5e6287a">o2::gpu::GPUTPCNNClusterizerHost::mModelReg2</a></div><div class="ttdeci">o2::ml::OrtModel mModelReg2</div><div class="ttdef"><b>Definition</b> <a href="../../da/d3a/GPUTPCNNClusterizerHost_8h_source.html#l00061">GPUTPCNNClusterizerHost.h:61</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizerHost_html_a844e2486aa8662bdf550e1dc701acc86"><div class="ttname"><a href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#a844e2486aa8662bdf550e1dc701acc86">o2::gpu::GPUTPCNNClusterizerHost::init</a></div><div class="ttdeci">void init(const GPUSettingsProcessingNNclusterizer &amp;, bool=false)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/de2/GPUTPCNNClusterizerHost_8cxx_source.html#l00032">GPUTPCNNClusterizerHost.cxx:32</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizerHost_html_afb96865edb10fb1f9f1ca8449244ba6e"><div class="ttname"><a href="../../d4/d7a/classo2_1_1gpu_1_1GPUTPCNNClusterizerHost.html#afb96865edb10fb1f9f1ca8449244ba6e">o2::gpu::GPUTPCNNClusterizerHost::initClusterizer</a></div><div class="ttdeci">void initClusterizer(const GPUSettingsProcessingNNclusterizer &amp;, GPUTPCNNClusterizer &amp;, int32_t=-1, int32_t=-1)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/de2/GPUTPCNNClusterizerHost_8cxx_source.html#l00088">GPUTPCNNClusterizerHost.cxx:88</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html">o2::gpu::GPUTPCNNClusterizer</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00029">GPUTPCNNClusterizer.h:30</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a0257126ea9c0a1f1e9a20ed12561ff7e"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a0257126ea9c0a1f1e9a20ed12561ff7e">o2::gpu::GPUTPCNNClusterizer::mOutputDataReg2_32</a></div><div class="ttdeci">float * mOutputDataReg2_32</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00096">GPUTPCNNClusterizer.h:96</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a06dc81690fd47a8f44e554e37edba3dd"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a06dc81690fd47a8f44e554e37edba3dd">o2::gpu::GPUTPCNNClusterizer::mInputData_16</a></div><div class="ttdeci">OrtDataType::Float16_t * mInputData_16</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00099">GPUTPCNNClusterizer.h:99</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a1ca692b872aa9605625ed8765453dde3"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a1ca692b872aa9605625ed8765453dde3">o2::gpu::GPUTPCNNClusterizer::mISector</a></div><div class="ttdeci">int32_t mISector</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00060">GPUTPCNNClusterizer.h:60</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a2e512e4ce7aa415267e5234eb79b1d1d"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a2e512e4ce7aa415267e5234eb79b1d1d">o2::gpu::GPUTPCNNClusterizer::mDeviceId</a></div><div class="ttdeci">int32_t mDeviceId</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00061">GPUTPCNNClusterizer.h:61</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a4d94c68df54ca31bfdbe7a2d0fb661e8"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a4d94c68df54ca31bfdbe7a2d0fb661e8">o2::gpu::GPUTPCNNClusterizer::mNnClusterizerBatchedMode</a></div><div class="ttdeci">int32_t mNnClusterizerBatchedMode</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00051">GPUTPCNNClusterizer.h:51</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a657a9b6a98c7b02e7eafaf70e09c7b0f"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a657a9b6a98c7b02e7eafaf70e09c7b0f">o2::gpu::GPUTPCNNClusterizer::mNnClusterizerTotalClusters</a></div><div class="ttdeci">int32_t mNnClusterizerTotalClusters</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00052">GPUTPCNNClusterizer.h:52</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a7804afe9c1cec6b60ec181afd44275b0"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a7804afe9c1cec6b60ec181afd44275b0">o2::gpu::GPUTPCNNClusterizer::mOutputDataReg2_16</a></div><div class="ttdeci">OrtDataType::Float16_t * mOutputDataReg2_16</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00102">GPUTPCNNClusterizer.h:102</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a7ddb532b419c95de392e68c5d3902936"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a7ddb532b419c95de392e68c5d3902936">o2::gpu::GPUTPCNNClusterizer::mModelProbabilities_32</a></div><div class="ttdeci">float * mModelProbabilities_32</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00094">GPUTPCNNClusterizer.h:94</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a81c5b1e1546ff5dd109e8bed039c2219"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a81c5b1e1546ff5dd109e8bed039c2219">o2::gpu::GPUTPCNNClusterizer::mNnClusterizerUseCfRegression</a></div><div class="ttdeci">int32_t mNnClusterizerUseCfRegression</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00050">GPUTPCNNClusterizer.h:50</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_a84608bf6acbf49df0ef545f869972ea0"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#a84608bf6acbf49df0ef545f869972ea0">o2::gpu::GPUTPCNNClusterizer::mInputData_32</a></div><div class="ttdeci">float * mInputData_32</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00093">GPUTPCNNClusterizer.h:93</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_ab67cc1bc04e974f71799efd3b2955328"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ab67cc1bc04e974f71799efd3b2955328">o2::gpu::GPUTPCNNClusterizer::mNnInferenceInputDType</a></div><div class="ttdeci">int32_t mNnInferenceInputDType</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00058">GPUTPCNNClusterizer.h:58</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_abda7928b5b6dadba0e7179d1b482fe83"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#abda7928b5b6dadba0e7179d1b482fe83">o2::gpu::GPUTPCNNClusterizer::mNnInferenceOutputDType</a></div><div class="ttdeci">int32_t mNnInferenceOutputDType</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00059">GPUTPCNNClusterizer.h:59</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_ac592f140f50b8af0554e7b97b8a07505"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ac592f140f50b8af0554e7b97b8a07505">o2::gpu::GPUTPCNNClusterizer::mOutputDataReg1_32</a></div><div class="ttdeci">float * mOutputDataReg1_32</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00095">GPUTPCNNClusterizer.h:95</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_ad024c51968e88333c23afd0f2661b468"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#ad024c51968e88333c23afd0f2661b468">o2::gpu::GPUTPCNNClusterizer::mNnClusterizerRowTimeSizeThreads</a></div><div class="ttdeci">uint32_t mNnClusterizerRowTimeSizeThreads</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00074">GPUTPCNNClusterizer.h:74</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_adc9e4662bae9be1166cb1a9bfcaf8b49"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#adc9e4662bae9be1166cb1a9bfcaf8b49">o2::gpu::GPUTPCNNClusterizer::mModelProbabilities_16</a></div><div class="ttdeci">OrtDataType::Float16_t * mModelProbabilities_16</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00100">GPUTPCNNClusterizer.h:100</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_aebe96f7551e8f2f312de0814bebbf847"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#aebe96f7551e8f2f312de0814bebbf847">o2::gpu::GPUTPCNNClusterizer::mNnClusterizerSetDeconvolutionFlags</a></div><div class="ttdeci">int8_t mNnClusterizerSetDeconvolutionFlags</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00049">GPUTPCNNClusterizer.h:49</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_aeede60518a9d9afed5c36c7b6d1c6817"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#aeede60518a9d9afed5c36c7b6d1c6817">o2::gpu::GPUTPCNNClusterizer::mMemoryId</a></div><div class="ttdeci">int16_t mMemoryId</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00104">GPUTPCNNClusterizer.h:104</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_afacff5d82bfbd6868a81ed90331c1cc0"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#afacff5d82bfbd6868a81ed90331c1cc0">o2::gpu::GPUTPCNNClusterizer::mOutputDataReg1_16</a></div><div class="ttdeci">OrtDataType::Float16_t * mOutputDataReg1_16</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00101">GPUTPCNNClusterizer.h:101</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1GPUTPCNNClusterizer_html_afd944d14c15edca2211d3099aa25ec78"><div class="ttname"><a href="../../de/dc7/classo2_1_1gpu_1_1GPUTPCNNClusterizer.html#afd944d14c15edca2211d3099aa25ec78">o2::gpu::GPUTPCNNClusterizer::mNnClusterizerUseClassification</a></div><div class="ttdeci">int8_t mNnClusterizerUseClassification</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8b/GPUTPCNNClusterizer_8h_source.html#l00046">GPUTPCNNClusterizer.h:46</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1LinearLayout_html"><div class="ttname"><a href="../../db/d26/classo2_1_1gpu_1_1LinearLayout.html">o2::gpu::LinearLayout</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/da3/CfArray2D_8h_source.html#l00072">CfArray2D.h:73</a></div></div>
<div class="ttc" id="aclasso2_1_1ml_1_1OrtModel_html_a44a791fc07d5873708d72adf71245f5d"><div class="ttname"><a href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a44a791fc07d5873708d72adf71245f5d">o2::ml::OrtModel::release</a></div><div class="ttdeci">void release(bool=false)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/df3/OrtInterface_8cxx_source.html#l00450">OrtInterface.cxx:450</a></div></div>
<div class="ttc" id="aclasso2_1_1ml_1_1OrtModel_html_a53c3b796ebca935e3d82237aa1719996"><div class="ttname"><a href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a53c3b796ebca935e3d82237aa1719996">o2::ml::OrtModel::isInitialized</a></div><div class="ttdeci">bool isInitialized()</div><div class="ttdef"><b>Definition</b> <a href="../../de/d85/OrtInterface_8h_source.html#l00055">OrtInterface.h:55</a></div></div>
<div class="ttc" id="aclasso2_1_1ml_1_1OrtModel_html_a74087bd5bf35a3f613a2a9ad3f63fc7a"><div class="ttname"><a href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#a74087bd5bf35a3f613a2a9ad3f63fc7a">o2::ml::OrtModel::setIntraOpNumThreads</a></div><div class="ttdeci">void setIntraOpNumThreads(int threads)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d85/OrtInterface_8h_source.html#l00073">OrtInterface.h:73</a></div></div>
<div class="ttc" id="aclasso2_1_1ml_1_1OrtModel_html_abd7f515642fc8398853a034d6f6eac8b"><div class="ttname"><a href="../../db/df8/classo2_1_1ml_1_1OrtModel.html#abd7f515642fc8398853a034d6f6eac8b">o2::ml::OrtModel::getNumOutputNodes</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int64_t &gt; &gt; getNumOutputNodes() const</div><div class="ttdef"><b>Definition</b> <a href="../../de/d85/OrtInterface_8h_source.html#l00060">OrtInterface.h:60</a></div></div>
<div class="ttc" id="aclasso2_1_1tpc_1_1Digit_html"><div class="ttname"><a href="../../d1/d46/classo2_1_1tpc_1_1Digit.html">o2::tpc::Digit</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/d7d/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Digit_8h_source.html#l00035">Digit.h:36</a></div></div>
<div class="ttc" id="aclusterFinderDefs_8h_html_a4082b85f5e23a1209a83a5878f586ea6"><div class="ttname"><a href="../../d9/db0/clusterFinderDefs_8h.html#a4082b85f5e23a1209a83a5878f586ea6">TPC_PADS_IN_SECTOR</a></div><div class="ttdeci">#define TPC_PADS_IN_SECTOR</div><div class="ttdef"><b>Definition</b> <a href="../../d9/db0/clusterFinderDefs_8h_source.html#l00043">clusterFinderDefs.h:43</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a0cdec8e97a75ee9458b23d152bf962d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00403">glcorearb.h:403</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a11941354c1d09e70ec63bde35fc79d4f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a11941354c1d09e70ec63bde35fc79d4f">m</a></div><div class="ttdeci">const GLfloat * m</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l04066">glcorearb.h:4066</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a2a98ddb6f79ec1048ff9e15cdd2422ba"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a></div><div class="ttdeci">GLenum src</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01767">glcorearb.h:1767</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a31eafbeac9256b106b6acfd78f305200"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a31eafbeac9256b106b6acfd78f305200">count</a></div><div class="ttdeci">GLint GLsizei count</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00399">glcorearb.h:399</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a3667f558219c90437106b544a3ca00b8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a></div><div class="ttdeci">GLuint buffer</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00655">glcorearb.h:655</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a3d1e3edfcf61ca2d831883e1afbad89e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a></div><div class="ttdeci">GLsizeiptr size</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00659">glcorearb.h:659</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a6a8efad2e332fcd916bde9e19ddef215"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a></div><div class="ttdeci">GLdouble f</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00310">glcorearb.h:310</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a8922a680b00df660c57f47c1971d04c5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a></div><div class="ttdeci">GLboolean * data</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00298">glcorearb.h:298</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_ac7c896d55e93a6cf7ff8524005b4e7b4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac7c896d55e93a6cf7ff8524005b4e7b4">param</a></div><div class="ttdeci">GLenum GLfloat param</div><div class="ttdef"><b>Definition</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00271">glcorearb.h:271</a></div></div>
<div class="ttc" id="anamespaceo2_1_1aod_1_1track_html_a825747040c3055d6c96911fa0ff75092"><div class="ttname"><a href="../../d6/dba/namespaceo2_1_1aod_1_1track.html#a825747040c3055d6c96911fa0ff75092">o2::aod::track::uint8_t</a></div><div class="ttdeci">uint8_t itsSharedClusterMap uint8_t</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d8c/AnalysisDataModel_8h_source.html#l00436">AnalysisDataModel.h:436</a></div></div>
<div class="ttc" id="anamespaceo2_1_1constants_1_1lhc_html_a296bf820b93d969ac714d0aa4ea82d7c"><div class="ttname"><a href="../../d5/d46/namespaceo2_1_1constants_1_1lhc.html#a296bf820b93d969ac714d0aa4ea82d7c">o2::constants::lhc::LHCMaxBunches</a></div><div class="ttdeci">constexpr int LHCMaxBunches</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc6/LHCConstants_8h_source.html#l00031">LHCConstants.h:31</a></div></div>
<div class="ttc" id="anamespaceo2_1_1dataformats_html"><div class="ttname"><a href="../../d1/dea/namespaceo2_1_1dataformats.html">o2::dataformats</a></div><div class="ttdoc">Definition of a container to keep/associate and arbitrary number of labels associated to an index wit...</div><div class="ttdef"><b>Definition</b> <a href="../../de/dfb/MeanVertexObject_8h_source.html#l00021">MeanVertexObject.h:22</a></div></div>
<div class="ttc" id="anamespaceo2_1_1gpu_1_1tpccf_html_a2134dbdd1ba3283c84b9051cb2e7ef01"><div class="ttname"><a href="../../d7/db4/namespaceo2_1_1gpu_1_1tpccf.html#a2134dbdd1ba3283c84b9051cb2e7ef01">o2::gpu::tpccf::TPCTime</a></div><div class="ttdeci">int32_t TPCTime</div><div class="ttdef"><b>Definition</b> <a href="../../d9/db0/clusterFinderDefs_8h_source.html#l00061">clusterFinderDefs.h:61</a></div></div>
<div class="ttc" id="anamespaceo2_1_1gpu_html"><div class="ttname"><a href="../../d0/db4/namespaceo2_1_1gpu.html">o2::gpu</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/d2e/TrackTRD_8h_source.html#l00034">TrackTRD.h:35</a></div></div>
<div class="ttc" id="anamespaceo2_1_1gpu_html_a371b698581f19cbf49ff24cff350b21fa385ff0ac12af7cbdd50f0f414cbc6dfa"><div class="ttname"><a href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa385ff0ac12af7cbdd50f0f414cbc6dfa">o2::gpu::TPCClustererSuppressedPeaks</a></div><div class="ttdeci">@ TPCClustererSuppressedPeaks</div><div class="ttdef"><b>Definition</b> <a href="../../db/dca/GPUChainTrackingDebug_8h_source.html#l00046">GPUChainTrackingDebug.h:46</a></div></div>
<div class="ttc" id="anamespaceo2_1_1gpu_html_a371b698581f19cbf49ff24cff350b21fa7e39a76c338e13027b08d7adc9c50080"><div class="ttname"><a href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa7e39a76c338e13027b08d7adc9c50080">o2::gpu::TPCClustererPeaks</a></div><div class="ttdeci">@ TPCClustererPeaks</div><div class="ttdef"><b>Definition</b> <a href="../../db/dca/GPUChainTrackingDebug_8h_source.html#l00045">GPUChainTrackingDebug.h:45</a></div></div>
<div class="ttc" id="anamespaceo2_1_1gpu_html_a371b698581f19cbf49ff24cff350b21fa82a61ad98b65aac9a852c767590706a2"><div class="ttname"><a href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa82a61ad98b65aac9a852c767590706a2">o2::gpu::TPCClustererChargeMap</a></div><div class="ttdeci">@ TPCClustererChargeMap</div><div class="ttdef"><b>Definition</b> <a href="../../db/dca/GPUChainTrackingDebug_8h_source.html#l00047">GPUChainTrackingDebug.h:47</a></div></div>
<div class="ttc" id="anamespaceo2_1_1gpu_html_a371b698581f19cbf49ff24cff350b21fa86abf50bc2433b01708f19ba062b29c2"><div class="ttname"><a href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa86abf50bc2433b01708f19ba062b29c2">o2::gpu::TPCClustererDigits</a></div><div class="ttdeci">@ TPCClustererDigits</div><div class="ttdef"><b>Definition</b> <a href="../../db/dca/GPUChainTrackingDebug_8h_source.html#l00044">GPUChainTrackingDebug.h:44</a></div></div>
<div class="ttc" id="anamespaceo2_1_1gpu_html_a371b698581f19cbf49ff24cff350b21fa993d538c5972abb3aac553a271771b62"><div class="ttname"><a href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21fa993d538c5972abb3aac553a271771b62">o2::gpu::TPCClustererClusters</a></div><div class="ttdeci">@ TPCClustererClusters</div><div class="ttdef"><b>Definition</b> <a href="../../db/dca/GPUChainTrackingDebug_8h_source.html#l00043">GPUChainTrackingDebug.h:43</a></div></div>
<div class="ttc" id="anamespaceo2_1_1gpu_html_a371b698581f19cbf49ff24cff350b21faa3ddf216d0c5467b063d2cbe2c89e636"><div class="ttname"><a href="../../d0/db4/namespaceo2_1_1gpu.html#a371b698581f19cbf49ff24cff350b21faa3ddf216d0c5467b063d2cbe2c89e636">o2::gpu::TPCClustererZeroedCharges</a></div><div class="ttdeci">@ TPCClustererZeroedCharges</div><div class="ttdef"><b>Definition</b> <a href="../../db/dca/GPUChainTrackingDebug_8h_source.html#l00049">GPUChainTrackingDebug.h:48</a></div></div>
<div class="ttc" id="anamespaceo2_1_1header_html_a7c0b849287be61d721ffec6a44b7ab34"><div class="ttname"><a href="../../de/dd4/namespaceo2_1_1header.html#a7c0b849287be61d721ffec6a44b7ab34">o2::header::RAWDataHeader</a></div><div class="ttdeci">RAWDataHeaderV7 RAWDataHeader</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dee/RAWDataHeader_8h_source.html#l00524">RAWDataHeader.h:524</a></div></div>
<div class="ttc" id="anamespaceo2_1_1its_1_1math__utils_html_aafcde2b6070034db5357ea7d6ebf5cfe"><div class="ttname"><a href="../../d2/dc1/namespaceo2_1_1its_1_1math__utils.html#aafcde2b6070034db5357ea7d6ebf5cfe">o2::its::math_utils::k2</a></div><div class="ttdeci">const float k2</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d3e/MathUtils_8h_source.html#l00072">MathUtils.h:72</a></div></div>
<div class="ttc" id="anamespaceo2_1_1mch_1_1raw_1_1impl_html_ae0e742b4683330d86930fe3f0eb600c2"><div class="ttname"><a href="../../d7/d88/namespaceo2_1_1mch_1_1raw_1_1impl.html#ae0e742b4683330d86930fe3f0eb600c2">o2::mch::raw::impl::dumpBuffer</a></div><div class="ttdeci">void dumpBuffer(gsl::span&lt; const std::byte &gt; buffer, std::ostream &amp;out=std::cout, size_t maxbytes=std::numeric_limits&lt; size_t &gt;::max())</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d53/DumpBuffer_8h_source.html#l00139">DumpBuffer.h:139</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_1_1constants_html"><div class="ttname"><a href="../../d5/da0/namespaceo2_1_1tpc_1_1constants.html">o2::tpc::constants</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/dda/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h_source.html#l00024">Constants.h:25</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_1_1constants_html_aafb14a7cd1b982bce14d282d9dcfebaf"><div class="ttname"><a href="../../d5/da0/namespaceo2_1_1tpc_1_1constants.html#aafb14a7cd1b982bce14d282d9dcfebaf">o2::tpc::constants::LHCBCPERTIMEBIN</a></div><div class="ttdeci">constexpr int LHCBCPERTIMEBIN</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dda/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h_source.html#l00038">Constants.h:38</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_1_1constants_html_ae1e6bd46c1d096a01e7759bba569776d"><div class="ttname"><a href="../../d5/da0/namespaceo2_1_1tpc_1_1constants.html#ae1e6bd46c1d096a01e7759bba569776d">o2::tpc::constants::MAXGLOBALPADROW</a></div><div class="ttdeci">constexpr int MAXGLOBALPADROW</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dda/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h_source.html#l00034">Constants.h:34</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_html"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html">o2::tpc</a></div><div class="ttdoc">Global TPC definitions and constants.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/dbc/SimTraits_8h_source.html#l00167">SimTraits.h:168</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_html_a7c67a88febc2fad8cc73f0797f2f5c67a2d643bad1854b27450c5b4e70ffb2c4b"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#a7c67a88febc2fad8cc73f0797f2f5c67a2d643bad1854b27450c5b4e70ffb2c4b">o2::tpc::ZSVersionDenseLinkBased</a></div><div class="ttdeci">@ ZSVersionDenseLinkBased</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00033">ZeroSuppression.h:33</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_html_a7c67a88febc2fad8cc73f0797f2f5c67a42f01eff18f45cceab64cdfc1dc2dcac"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#a7c67a88febc2fad8cc73f0797f2f5c67a42f01eff18f45cceab64cdfc1dc2dcac">o2::tpc::ZSVersionLinkBasedWithMeta</a></div><div class="ttdeci">@ ZSVersionLinkBasedWithMeta</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00032">ZeroSuppression.h:32</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_html_a7c67a88febc2fad8cc73f0797f2f5c67a71fc9cbcc1ad8a2ac74e1e9ff747863b"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#a7c67a88febc2fad8cc73f0797f2f5c67a71fc9cbcc1ad8a2ac74e1e9ff747863b">o2::tpc::ZSVersionRowBased10BitADC</a></div><div class="ttdeci">@ ZSVersionRowBased10BitADC</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00030">ZeroSuppression.h:30</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_html_a7c67a88febc2fad8cc73f0797f2f5c67aa64d888896c3236c61e9f7fadcf4093a"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#a7c67a88febc2fad8cc73f0797f2f5c67aa64d888896c3236c61e9f7fadcf4093a">o2::tpc::ZSVersionRowBased12BitADC</a></div><div class="ttdeci">@ ZSVersionRowBased12BitADC</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00031">ZeroSuppression.h:31</a></div></div>
<div class="ttc" id="anamespaceo2_html"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="ttdoc">a couple of static helper functions to create timestamp values for CCDB queries or override obsolete ...</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d24/BitstreamReader_8h_source.html#l00023">BitstreamReader.h:24</a></div></div>
<div class="ttc" id="astrtag_8h_html"><div class="ttname"><a href="../../d6/d75/strtag_8h.html">strtag.h</a></div></div>
<div class="ttc" id="astrtag_8h_html_a3c542c21bfc745e5472d610a586bd9c8"><div class="ttname"><a href="../../d6/d75/strtag_8h.html#a3c542c21bfc745e5472d610a586bd9c8">qStr2Tag</a></div><div class="ttdeci">constexpr T qStr2Tag(const char *str)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d75/strtag_8h_source.html#l00022">strtag.h:22</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1CfFragment_html"><div class="ttname"><a href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html">o2::gpu::CfFragment</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/dcc/CfFragment_8h_source.html#l00024">CfFragment.h:24</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1CfFragment_html_a68e7f238f9fba5d160fd7367f8c48a94"><div class="ttname"><a href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#a68e7f238f9fba5d160fd7367f8c48a94">o2::gpu::CfFragment::index</a></div><div class="ttdeci">uint32_t index</div><div class="ttdef"><b>Definition</b> <a href="../../d8/dcc/CfFragment_8h_source.html#l00037">CfFragment.h:37</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1CfFragment_html_afe077918006895dca45c515f440eb7a9"><div class="ttname"><a href="../../d4/da9/structo2_1_1gpu_1_1CfFragment.html#afe077918006895dca45c515f440eb7a9">o2::gpu::CfFragment::start</a></div><div class="ttdeci">tpccf::TPCTime start</div><div class="ttdef"><b>Definition</b> <a href="../../d8/dcc/CfFragment_8h_source.html#l00031">CfFragment.h:31</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTrackingFinalContext_html_a45d187e33d6f66697b4eae0cd784fbca"><div class="ttname"><a href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#a45d187e33d6f66697b4eae0cd784fbca">o2::gpu::GPUChainTrackingFinalContext::cond</a></div><div class="ttdeci">std::condition_variable cond</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d8c/GPUChainTrackingDefs_8h_source.html#l00026">GPUChainTrackingDefs.h:26</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTrackingFinalContext_html_a746a09365f587184642f0e507dfcb3f5"><div class="ttname"><a href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#a746a09365f587184642f0e507dfcb3f5">o2::gpu::GPUChainTrackingFinalContext::ready</a></div><div class="ttdeci">bool ready</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d8c/GPUChainTrackingDefs_8h_source.html#l00027">GPUChainTrackingDefs.h:27</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTrackingFinalContext_html_a9ee684377747e275e506dce6461e9b13"><div class="ttname"><a href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#a9ee684377747e275e506dce6461e9b13">o2::gpu::GPUChainTrackingFinalContext::mutex</a></div><div class="ttdeci">std::mutex mutex</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d8c/GPUChainTrackingDefs_8h_source.html#l00025">GPUChainTrackingDefs.h:25</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTrackingFinalContext_html_af866fc964591b35925b19c077d1188db"><div class="ttname"><a href="../../d7/d4a/structo2_1_1gpu_1_1GPUChainTrackingFinalContext.html#af866fc964591b35925b19c077d1188db">o2::gpu::GPUChainTrackingFinalContext::rec</a></div><div class="ttdeci">GPUReconstruction * rec</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d8c/GPUChainTrackingDefs_8h_source.html#l00024">GPUChainTrackingDefs.h:24</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTracking_1_1InOutMemory_html_a559cb570ca9343324b8837406ff4ff0a"><div class="ttname"><a href="../../df/dbe/structo2_1_1gpu_1_1GPUChainTracking_1_1InOutMemory.html#a559cb570ca9343324b8837406ff4ff0a">o2::gpu::GPUChainTracking::InOutMemory::clusterNativeMCView</a></div><div class="ttdeci">std::unique_ptr&lt; o2::dataformats::ConstMCTruthContainerView&lt; o2::MCCompLabel &gt; &gt; clusterNativeMCView</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00124">GPUChainTracking.h:124</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTracking_1_1InOutMemory_html_a8e99ffc9d376fa502114d31815b741af"><div class="ttname"><a href="../../df/dbe/structo2_1_1gpu_1_1GPUChainTracking_1_1InOutMemory.html#a8e99ffc9d376fa502114d31815b741af">o2::gpu::GPUChainTracking::InOutMemory::clusterNativeMCBuffer</a></div><div class="ttdeci">std::unique_ptr&lt; o2::dataformats::ConstMCTruthContainer&lt; o2::MCCompLabel &gt; &gt; clusterNativeMCBuffer</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00128">GPUChainTracking.h:128</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct_html_a02f1db2bcc4cb9e2bb3a486d776dc5b1"><div class="ttname"><a href="../../d8/ded/structo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct.html#a02f1db2bcc4cb9e2bb3a486d776dc5b1">o2::gpu::GPUChainTracking::eventStruct::stream</a></div><div class="ttdeci">deviceEvent stream[GPUCA_MAX_STREAMS]</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00213">GPUChainTracking.h:213</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct_html_adddd7f5e498c9f0428f40b54d50332c2"><div class="ttname"><a href="../../d8/ded/structo2_1_1gpu_1_1GPUChainTracking_1_1eventStruct.html#adddd7f5e498c9f0428f40b54d50332c2">o2::gpu::GPUChainTracking::eventStruct::init</a></div><div class="ttdeci">deviceEvent init</div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00214">GPUChainTracking.h:214</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUChainTracking_1_1outputQueueEntry_html"><div class="ttname"><a href="../../dd/d69/structo2_1_1gpu_1_1GPUChainTracking_1_1outputQueueEntry.html">o2::gpu::GPUChainTracking::outputQueueEntry</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/ded/GPUChainTracking_8h_source.html#l00218">GPUChainTracking.h:218</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUConstantMem_html_a784350559768f761f84264208ceb4e99"><div class="ttname"><a href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#a784350559768f761f84264208ceb4e99">o2::gpu::GPUConstantMem::tpcClusterer</a></div><div class="ttdeci">GPUTPCClusterFinder tpcClusterer[GPUCA_NSECTORS]</div><div class="ttdef"><b>Definition</b> <a href="../../db/df8/GPUConstantMem_8h_source.html#l00049">GPUConstantMem.h:49</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUConstantMem_html_ae373430434b7ec02a30843a71e01884c"><div class="ttname"><a href="../../df/d4e/structo2_1_1gpu_1_1GPUConstantMem.html#ae373430434b7ec02a30843a71e01884c">o2::gpu::GPUConstantMem::ioPtrs</a></div><div class="ttdeci">GPUTrackingInOutPointers ioPtrs</div><div class="ttdef"><b>Definition</b> <a href="../../db/df8/GPUConstantMem_8h_source.html#l00051">GPUConstantMem.h:51</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUMemorySizeScalers_html_a07ef82a99ea630bb9e2ee0beb665b06d"><div class="ttname"><a href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a07ef82a99ea630bb9e2ee0beb665b06d">o2::gpu::GPUMemorySizeScalers::nTPCdigits</a></div><div class="ttdeci">size_t nTPCdigits</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d36/GPUMemorySizeScalers_8h_source.html#l00025">GPUMemorySizeScalers.h:25</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUMemorySizeScalers_html_a0d9a35a8ffd24655589119066e6bb933"><div class="ttname"><a href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a0d9a35a8ffd24655589119066e6bb933">o2::gpu::GPUMemorySizeScalers::temporaryFactor</a></div><div class="ttdeci">double temporaryFactor</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d36/GPUMemorySizeScalers_8h_source.html#l00034">GPUMemorySizeScalers.h:34</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUMemorySizeScalers_html_a33316783ab1df489cc17b66d76d49fd0"><div class="ttname"><a href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#a33316783ab1df489cc17b66d76d49fd0">o2::gpu::GPUMemorySizeScalers::NTPCClusters</a></div><div class="ttdeci">size_t NTPCClusters(size_t tpcDigits, bool perSector=false)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d36/GPUMemorySizeScalers_8h_source.html#l00080">GPUMemorySizeScalers.h:80</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUMemorySizeScalers_html_aa553ba6c0d2c7e3166d3630ca7ca1676"><div class="ttname"><a href="../../d4/d55/structo2_1_1gpu_1_1GPUMemorySizeScalers.html#aa553ba6c0d2c7e3166d3630ca7ca1676">o2::gpu::GPUMemorySizeScalers::nTPCHits</a></div><div class="ttdeci">size_t nTPCHits</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d36/GPUMemorySizeScalers_8h_source.html#l00026">GPUMemorySizeScalers.h:26</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUOutputControl_html"><div class="ttname"><a href="../../df/d3c/structo2_1_1gpu_1_1GPUOutputControl.html">o2::gpu::GPUOutputControl</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d5b/GPUOutputControl_8h_source.html#l00034">GPUOutputControl.h:34</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUOutputControl_html_add7f1a2697f2ba56fe794f5d2765e3f7"><div class="ttname"><a href="../../df/d3c/structo2_1_1gpu_1_1GPUOutputControl.html#add7f1a2697f2ba56fe794f5d2765e3f7">o2::gpu::GPUOutputControl::allocator</a></div><div class="ttdeci">std::function&lt; void *(size_t)&gt; allocator</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d5b/GPUOutputControl_8h_source.html#l00063">GPUOutputControl.h:63</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUSettingsTF_html_a32baf415cc5437466f51da24e262aec0"><div class="ttname"><a href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#a32baf415cc5437466f51da24e262aec0">o2::gpu::GPUSettingsTF::nHBFPerTF</a></div><div class="ttdeci">int32_t nHBFPerTF</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dc6/GPUSettings_8h_source.html#l00071">GPUSettings.h:71</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUSettingsTF_html_a631cf0cf91bf5aa22708551c15919996"><div class="ttname"><a href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#a631cf0cf91bf5aa22708551c15919996">o2::gpu::GPUSettingsTF::hasTfStartOrbit</a></div><div class="ttdeci">int32_t hasTfStartOrbit</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dc6/GPUSettings_8h_source.html#l00064">GPUSettings.h:64</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUSettingsTF_html_ac5132b5f6c124eca953247a3fe939e92"><div class="ttname"><a href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#ac5132b5f6c124eca953247a3fe939e92">o2::gpu::GPUSettingsTF::hasNHBFPerTF</a></div><div class="ttdeci">int32_t hasNHBFPerTF</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dc6/GPUSettings_8h_source.html#l00070">GPUSettings.h:70</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUSettingsTF_html_aeddb4d8d0b87ac2e5c2e0bd1285f0bde"><div class="ttname"><a href="../../d0/d1b/structo2_1_1gpu_1_1GPUSettingsTF.html#aeddb4d8d0b87ac2e5c2e0bd1285f0bde">o2::gpu::GPUSettingsTF::tfStartOrbit</a></div><div class="ttdeci">int32_t tfStartOrbit</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dc6/GPUSettings_8h_source.html#l00065">GPUSettings.h:65</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCCFChainContext_html"><div class="ttname"><a href="../../dc/d27/structo2_1_1gpu_1_1GPUTPCCFChainContext.html">o2::gpu::GPUTPCCFChainContext</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/dc6/GPUTPCCFChainContext_8h_source.html#l00028">GPUTPCCFChainContext.h:28</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t_html_a1277e21601ec9e7dbddac8d441351f8c"><div class="ttname"><a href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a1277e21601ec9e7dbddac8d441351f8c">o2::gpu::GPUTPCClusterFinder::Memory::counters_t::nPagesSubsector</a></div><div class="ttdeci">uint32_t nPagesSubsector</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00063">GPUTPCClusterFinder.h:63</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t_html_a13184bd4d7b938ea923d465c74d20a72"><div class="ttname"><a href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a13184bd4d7b938ea923d465c74d20a72">o2::gpu::GPUTPCClusterFinder::Memory::counters_t::nDigitsInFragment</a></div><div class="ttdeci">tpccf::SizeT nDigitsInFragment</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00058">GPUTPCClusterFinder.h:58</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t_html_a1d922eeefa100424779812065f8131c7"><div class="ttname"><a href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a1d922eeefa100424779812065f8131c7">o2::gpu::GPUTPCClusterFinder::Memory::counters_t::nDigits</a></div><div class="ttdeci">size_t nDigits</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00057">GPUTPCClusterFinder.h:57</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t_html_a453e7c3e505ff386ed15666c0ccb91f3"><div class="ttname"><a href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a453e7c3e505ff386ed15666c0ccb91f3">o2::gpu::GPUTPCClusterFinder::Memory::counters_t::nPositions</a></div><div class="ttdeci">tpccf::SizeT nPositions</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00059">GPUTPCClusterFinder.h:59</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t_html_a72fe9973800114d8242bcbcf1a403561"><div class="ttname"><a href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#a72fe9973800114d8242bcbcf1a403561">o2::gpu::GPUTPCClusterFinder::Memory::counters_t::nPeaks</a></div><div class="ttdeci">tpccf::SizeT nPeaks</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00060">GPUTPCClusterFinder.h:60</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t_html_af292365723e11de5a4489fe19398ff3e"><div class="ttname"><a href="../../dc/d38/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_1_1counters__t.html#af292365723e11de5a4489fe19398ff3e">o2::gpu::GPUTPCClusterFinder::Memory::counters_t::nClusters</a></div><div class="ttdeci">tpccf::SizeT nClusters</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00061">GPUTPCClusterFinder.h:61</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_html_a1516f332ab413a660970b58d9adbf588"><div class="ttname"><a href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a1516f332ab413a660970b58d9adbf588">o2::gpu::GPUTPCClusterFinder::Memory::counters</a></div><div class="ttdeci">struct o2::gpu::GPUTPCClusterFinder::Memory::counters_t counters</div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory_html_a784c1c62f7e3d45355b8e7c628a335e2"><div class="ttname"><a href="../../d6/d9d/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1Memory.html#a784c1c62f7e3d45355b8e7c628a335e2">o2::gpu::GPUTPCClusterFinder::Memory::fragment</a></div><div class="ttdeci">CfFragment fragment</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00065">GPUTPCClusterFinder.h:65</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN_html_a054aee0df9d3bf1b87255d0d399f4395"><div class="ttname"><a href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a054aee0df9d3bf1b87255d0d399f4395">o2::gpu::GPUTPCClusterFinder::MinMaxCN::zsPageLast</a></div><div class="ttdeci">uint32_t zsPageLast</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00075">GPUTPCClusterFinder.h:75</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN_html_a1f3a39665a98cff28c666c6d49dbf95b"><div class="ttname"><a href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a1f3a39665a98cff28c666c6d49dbf95b">o2::gpu::GPUTPCClusterFinder::MinMaxCN::zsPageFirst</a></div><div class="ttdeci">uint32_t zsPageFirst</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00075">GPUTPCClusterFinder.h:75</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN_html_a85476db9a9015d416ba888fe04a9c8af"><div class="ttname"><a href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#a85476db9a9015d416ba888fe04a9c8af">o2::gpu::GPUTPCClusterFinder::MinMaxCN::zsPtrFirst</a></div><div class="ttdeci">uint32_t zsPtrFirst</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00075">GPUTPCClusterFinder.h:75</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN_html_aa0f961018fbb989c50ce34cdeceec8a8"><div class="ttname"><a href="../../de/d98/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1MinMaxCN.html#aa0f961018fbb989c50ce34cdeceec8a8">o2::gpu::GPUTPCClusterFinder::MinMaxCN::zsPtrLast</a></div><div class="ttdeci">uint32_t zsPtrLast</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00075">GPUTPCClusterFinder.h:75</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset_html"><div class="ttname"><a href="../../d9/d4a/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset.html">o2::gpu::GPUTPCClusterFinder::ZSOffset</a></div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00068">GPUTPCClusterFinder.h:68</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset_html_aa25d8db9d2615fc3c6c088fff03e8393"><div class="ttname"><a href="../../d9/d4a/structo2_1_1gpu_1_1GPUTPCClusterFinder_1_1ZSOffset.html#aa25d8db9d2615fc3c6c088fff03e8393">o2::gpu::GPUTPCClusterFinder::ZSOffset::offset</a></div><div class="ttdeci">uint32_t offset</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d4b/GPUTPCClusterFinder_8h_source.html#l00069">GPUTPCClusterFinder.h:69</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCLinearLabels_html"><div class="ttname"><a href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html">o2::gpu::GPUTPCLinearLabels</a></div><div class="ttdef"><b>Definition</b> <a href="../../d6/d20/GPUHostDataTypes_8h_source.html#l00051">GPUHostDataTypes.h:51</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCLinearLabels_html_a0e679f238099bc0a36bda2ed4f1f6fe6"><div class="ttname"><a href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#a0e679f238099bc0a36bda2ed4f1f6fe6">o2::gpu::GPUTPCLinearLabels::data</a></div><div class="ttdeci">std::vector&lt; o2::MCCompLabel &gt; data</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d20/GPUHostDataTypes_8h_source.html#l00053">GPUHostDataTypes.h:53</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTPCLinearLabels_html_ac34e467563f8a809081f761de8162c56"><div class="ttname"><a href="../../de/d33/structo2_1_1gpu_1_1GPUTPCLinearLabels.html#ac34e467563f8a809081f761de8162c56">o2::gpu::GPUTPCLinearLabels::header</a></div><div class="ttdeci">std::vector&lt; o2::dataformats::MCTruthHeaderElement &gt; header</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d20/GPUHostDataTypes_8h_source.html#l00052">GPUHostDataTypes.h:52</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutDigits_html_a76564b04b15f226f6b6bd572b7dbb169"><div class="ttname"><a href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a76564b04b15f226f6b6bd572b7dbb169">o2::gpu::GPUTrackingInOutDigits::nTPCDigits</a></div><div class="ttdeci">size_t nTPCDigits[NSECTORS]</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00210">GPUDataTypes.h:210</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutDigits_html_a8c3d1d3f0c025468d88ebff313e662d3"><div class="ttname"><a href="../../db/d32/structo2_1_1gpu_1_1GPUTrackingInOutDigits.html#a8c3d1d3f0c025468d88ebff313e662d3">o2::gpu::GPUTrackingInOutDigits::tpcDigitsMC</a></div><div class="ttdeci">const GPUTPCDigitsMCInput * tpcDigitsMC</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00211">GPUDataTypes.h:211</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutPointers_html_a1869ca1b2d21d2962fbe0ca4a1dfb5f2"><div class="ttname"><a href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a1869ca1b2d21d2962fbe0ca4a1dfb5f2">o2::gpu::GPUTrackingInOutPointers::clustersNative</a></div><div class="ttdeci">const o2::tpc::ClusterNativeAccess * clustersNative</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00225">GPUDataTypes.h:225</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutPointers_html_a7616bedf0da1fdd014c400f0abace888"><div class="ttname"><a href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a7616bedf0da1fdd014c400f0abace888">o2::gpu::GPUTrackingInOutPointers::settingsTF</a></div><div class="ttdeci">const GPUSettingsTF * settingsTF</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00305">GPUDataTypes.h:305</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutPointers_html_a86d33b56ba73168a39c83d228669c248"><div class="ttname"><a href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#a86d33b56ba73168a39c83d228669c248">o2::gpu::GPUTrackingInOutPointers::tpcZS</a></div><div class="ttdeci">const GPUTrackingInOutZS * tpcZS</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00219">GPUDataTypes.h:219</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutPointers_html_ae7c120ad5e91a3ea4281bcc0ef5f6106"><div class="ttname"><a href="../../d4/d84/structo2_1_1gpu_1_1GPUTrackingInOutPointers.html#ae7c120ad5e91a3ea4281bcc0ef5f6106">o2::gpu::GPUTrackingInOutPointers::tpcPackedDigits</a></div><div class="ttdeci">const GPUTrackingInOutDigits * tpcPackedDigits</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00220">GPUDataTypes.h:220</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector_html_a1b7b6cbfbca7ac7de1e0bcc1389282b0"><div class="ttname"><a href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a1b7b6cbfbca7ac7de1e0bcc1389282b0">o2::gpu::GPUTrackingInOutZS::GPUTrackingInOutZSSector::zsPtr</a></div><div class="ttdeci">const void *const  * zsPtr[NENDPOINTS]</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00193">GPUDataTypes.h:193</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector_html_a21fe6b3122527f9999d7429650184639"><div class="ttname"><a href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#a21fe6b3122527f9999d7429650184639">o2::gpu::GPUTrackingInOutZS::GPUTrackingInOutZSSector::count</a></div><div class="ttdeci">uint32_t count[NENDPOINTS]</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00195">GPUDataTypes.h:195</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector_html_aa018886703dddb682c63a607a56120ab"><div class="ttname"><a href="../../dd/dad/structo2_1_1gpu_1_1GPUTrackingInOutZS_1_1GPUTrackingInOutZSSector.html#aa018886703dddb682c63a607a56120ab">o2::gpu::GPUTrackingInOutZS::GPUTrackingInOutZSSector::nZSPtr</a></div><div class="ttdeci">const uint32_t * nZSPtr[NENDPOINTS]</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00194">GPUDataTypes.h:194</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutZS_html_a6f3fbfb2a556eda9d00d59f29ed9ad9e"><div class="ttname"><a href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a6f3fbfb2a556eda9d00d59f29ed9ad9e">o2::gpu::GPUTrackingInOutZS::sector</a></div><div class="ttdeci">GPUTrackingInOutZSSector sector[NSECTORS]</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00204">GPUDataTypes.h:204</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingInOutZS_html_a86dcd3c0f2624c5a2c1c85299dc058f7"><div class="ttname"><a href="../../da/d79/structo2_1_1gpu_1_1GPUTrackingInOutZS.html#a86dcd3c0f2624c5a2c1c85299dc058f7">o2::gpu::GPUTrackingInOutZS::NENDPOINTS</a></div><div class="ttdeci">static constexpr uint32_t NENDPOINTS</div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc5/GPUDataTypes_8h_source.html#l00191">GPUDataTypes.h:191</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingOutputs_html_a1c865570694053b57d40e0221f8f5631"><div class="ttname"><a href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a1c865570694053b57d40e0221f8f5631">o2::gpu::GPUTrackingOutputs::clustersNative</a></div><div class="ttdeci">GPUOutputControl clustersNative</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d5b/GPUOutputControl_8h_source.html#l00068">GPUOutputControl.h:68</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingOutputs_html_a6134b63b838a257a65603fc20048f29b"><div class="ttname"><a href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#a6134b63b838a257a65603fc20048f29b">o2::gpu::GPUTrackingOutputs::getIndex</a></div><div class="ttdeci">size_t getIndex(const GPUOutputControl &amp;v)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d5b/GPUOutputControl_8h_source.html#l00080">GPUOutputControl.h:80</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingOutputs_html_ab523bcbe0336abaf9a6651858e2b1b99"><div class="ttname"><a href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#ab523bcbe0336abaf9a6651858e2b1b99">o2::gpu::GPUTrackingOutputs::clusterLabels</a></div><div class="ttdeci">GPUOutputControl clusterLabels</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d5b/GPUOutputControl_8h_source.html#l00070">GPUOutputControl.h:70</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1GPUTrackingOutputs_html_aedcdbeec4487b43ff9d560e2b2749213"><div class="ttname"><a href="../../de/d07/structo2_1_1gpu_1_1GPUTrackingOutputs.html#aedcdbeec4487b43ff9d560e2b2749213">o2::gpu::GPUTrackingOutputs::tpcTriggerWords</a></div><div class="ttdeci">GPUOutputControl tpcTriggerWords</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d5b/GPUOutputControl_8h_source.html#l00076">GPUOutputControl.h:76</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1gpu__reconstruction__kernels_1_1deviceEvent_html"><div class="ttname"><a href="../../d0/d80/structo2_1_1gpu_1_1gpu__reconstruction__kernels_1_1deviceEvent.html">o2::gpu::gpu_reconstruction_kernels::deviceEvent</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/d68/GPUReconstructionProcessing_8h_source.html#l00036">GPUReconstructionProcessing.h:36</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1internal_1_1GPUParam__t_html_a5bea12a792404864f6018b24d0029a33"><div class="ttname"><a href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#a5bea12a792404864f6018b24d0029a33">o2::gpu::internal::GPUParam_t::par</a></div><div class="ttdeci">S par</div><div class="ttdef"><b>Definition</b> <a href="../../df/d13/GPUParam_8h_source.html#l00053">GPUParam.h:53</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1internal_1_1GPUParam__t_html_a72687d237b42d2587c54b0df864f6eda"><div class="ttname"><a href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#a72687d237b42d2587c54b0df864f6eda">o2::gpu::internal::GPUParam_t::rec</a></div><div class="ttdeci">T rec</div><div class="ttdef"><b>Definition</b> <a href="../../df/d13/GPUParam_8h_source.html#l00052">GPUParam.h:52</a></div></div>
<div class="ttc" id="astructo2_1_1gpu_1_1internal_1_1GPUParam__t_html_aa837006951944c37d54c8f26124e7400"><div class="ttname"><a href="../../da/dde/structo2_1_1gpu_1_1internal_1_1GPUParam__t.html#aa837006951944c37d54c8f26124e7400">o2::gpu::internal::GPUParam_t::tpcCutTimeBin</a></div><div class="ttdeci">int32_t tpcCutTimeBin</div><div class="ttdef"><b>Definition</b> <a href="../../df/d13/GPUParam_8h_source.html#l00061">GPUParam.h:61</a></div></div>
<div class="ttc" id="astructo2_1_1header_1_1RAWDataHeaderV7_html"><div class="ttname"><a href="../../d8/d60/structo2_1_1header_1_1RAWDataHeaderV7.html">o2::header::RAWDataHeaderV7</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/dee/RAWDataHeader_8h_source.html#l00071">RAWDataHeader.h:71</a></div></div>
<div class="ttc" id="astructo2_1_1raw_1_1RDHUtils_html"><div class="ttname"><a href="../../da/d2c/structo2_1_1raw_1_1RDHUtils.html">o2::raw::RDHUtils</a></div><div class="ttdef"><b>Definition</b> <a href="../../d6/dec/Raw_2include_2DetectorsRaw_2RDHUtils_8h_source.html#l00038">RDHUtils.h:38</a></div></div>
<div class="ttc" id="astructo2_1_1raw_1_1RDHUtils_html_aedd6045560063979bd3e0a035d4f526a"><div class="ttname"><a href="../../da/d2c/structo2_1_1raw_1_1RDHUtils.html#aedd6045560063979bd3e0a035d4f526a">o2::raw::RDHUtils::getVersion</a></div><div class="ttdeci">static constexpr int getVersion()</div><div class="ttdoc">get numeric version of the RDH</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dec/Raw_2include_2DetectorsRaw_2RDHUtils_8h_source.html#l00060">RDHUtils.h:60</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNativeAccess_html"><div class="ttname"><a href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html">o2::tpc::ClusterNativeAccess</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00174">ClusterNative.h:174</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNativeAccess_html_a0433cf46a3a892aea69074303977cc66"><div class="ttname"><a href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a0433cf46a3a892aea69074303977cc66">o2::tpc::ClusterNativeAccess::nClusters</a></div><div class="ttdeci">unsigned int nClusters[constants::MAXSECTOR][constants::MAXGLOBALPADROW]</div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00178">ClusterNative.h:178</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNativeAccess_html_a1495f74639f2395ac66f158ae395f6cb"><div class="ttname"><a href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a1495f74639f2395ac66f158ae395f6cb">o2::tpc::ClusterNativeAccess::clustersMCTruth</a></div><div class="ttdeci">const o2::dataformats::ConstMCTruthContainerView&lt; o2::MCCompLabel &gt; * clustersMCTruth</div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00177">ClusterNative.h:177</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNativeAccess_html_a36a2cecbb3006499a32ab75fd8b6e7d2"><div class="ttname"><a href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a36a2cecbb3006499a32ab75fd8b6e7d2">o2::tpc::ClusterNativeAccess::ConstMCLabelContainerViewWithBuffer</a></div><div class="ttdeci">std::pair&lt; ConstMCLabelContainer, ConstMCLabelContainerView &gt; ConstMCLabelContainerViewWithBuffer</div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00188">ClusterNative.h:188</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNativeAccess_html_a3c467fd7af6577c8aa662cd4e958a772"><div class="ttname"><a href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a3c467fd7af6577c8aa662cd4e958a772">o2::tpc::ClusterNativeAccess::nClustersTotal</a></div><div class="ttdeci">unsigned int nClustersTotal</div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00181">ClusterNative.h:181</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNativeAccess_html_a8582a4734beb8569a480cd0a9b79a487"><div class="ttname"><a href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#a8582a4734beb8569a480cd0a9b79a487">o2::tpc::ClusterNativeAccess::clusterOffset</a></div><div class="ttdeci">unsigned int clusterOffset[constants::MAXSECTOR][constants::MAXGLOBALPADROW]</div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00180">ClusterNative.h:180</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNativeAccess_html_ad78d5c1413c1708fe5ba19a4163fe9de"><div class="ttname"><a href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#ad78d5c1413c1708fe5ba19a4163fe9de">o2::tpc::ClusterNativeAccess::clustersLinear</a></div><div class="ttdeci">const ClusterNative * clustersLinear</div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00175">ClusterNative.h:175</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNativeAccess_html_afbb61f84fedb341004571f15245b4d56"><div class="ttname"><a href="../../da/d95/structo2_1_1tpc_1_1ClusterNativeAccess.html#afbb61f84fedb341004571f15245b4d56">o2::tpc::ClusterNativeAccess::setOffsetPtrs</a></div><div class="ttdeci">void setOffsetPtrs()</div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00192">ClusterNative.h:192</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1ClusterNative_html"><div class="ttname"><a href="../../dc/dbc/structo2_1_1tpc_1_1ClusterNative.html">o2::tpc::ClusterNative</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00054">ClusterNative.h:54</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TPCZSHDRV2_html"><div class="ttname"><a href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html">o2::tpc::TPCZSHDRV2</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00055">ZeroSuppression.h:55</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TPCZSHDRV2_html_a1620a13d9908955846fef88a27078e45"><div class="ttname"><a href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html#a1620a13d9908955846fef88a27078e45">o2::tpc::TPCZSHDRV2::flags</a></div><div class="ttdeci">unsigned char flags</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00069">ZeroSuppression.h:69</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TPCZSHDRV2_html_a8440fd11a556a3918d00d1ecc2f5007b"><div class="ttname"><a href="../../da/df9/structo2_1_1tpc_1_1TPCZSHDRV2.html#a8440fd11a556a3918d00d1ecc2f5007b">o2::tpc::TPCZSHDRV2::TRIGGER_WORD_SIZE</a></div><div class="ttdeci">static constexpr unsigned int TRIGGER_WORD_SIZE</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00059">ZeroSuppression.h:59</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TPCZSHDR_html"><div class="ttname"><a href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html">o2::tpc::TPCZSHDR</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00037">ZeroSuppression.h:37</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TPCZSHDR_html_a67b8704cce7b6e0e03b8b8c0ee90c4cc"><div class="ttname"><a href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#a67b8704cce7b6e0e03b8b8c0ee90c4cc">o2::tpc::TPCZSHDR::version</a></div><div class="ttdeci">unsigned char version</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00045">ZeroSuppression.h:45</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TPCZSHDR_html_ad488dc6a158bdd929d85746f14c6a523"><div class="ttname"><a href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#ad488dc6a158bdd929d85746f14c6a523">o2::tpc::TPCZSHDR::TPC_ZS_PAGE_SIZE</a></div><div class="ttdeci">static constexpr size_t TPC_ZS_PAGE_SIZE</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00038">ZeroSuppression.h:38</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TPCZSHDR_html_af23bf9b0cc7cc269c3dacfb06d1c19e8"><div class="ttname"><a href="../../dc/d83/structo2_1_1tpc_1_1TPCZSHDR.html#af23bf9b0cc7cc269c3dacfb06d1c19e8">o2::tpc::TPCZSHDR::nADCsamples</a></div><div class="ttdeci">unsigned short nADCsamples</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00053">ZeroSuppression.h:53</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TriggerInfoDLBZS_html"><div class="ttname"><a href="../../d2/dba/structo2_1_1tpc_1_1TriggerInfoDLBZS.html">o2::tpc::TriggerInfoDLBZS</a></div><div class="ttdoc">Trigger info including the orbit.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00110">ZeroSuppression.h:110</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TriggerInfoDLBZS_html_a5aabf85b21ea646c3d310d199ab3c2a5"><div class="ttname"><a href="../../d2/dba/structo2_1_1tpc_1_1TriggerInfoDLBZS.html#a5aabf85b21ea646c3d310d199ab3c2a5">o2::tpc::TriggerInfoDLBZS::orbit</a></div><div class="ttdeci">uint32_t orbit</div><div class="ttdoc">orbit of the trigger word</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00112">ZeroSuppression.h:112</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TriggerInfoDLBZS_html_ada4375a6d7431c1b2048e7b2e7fb2c21"><div class="ttname"><a href="../../d2/dba/structo2_1_1tpc_1_1TriggerInfoDLBZS.html#ada4375a6d7431c1b2048e7b2e7fb2c21">o2::tpc::TriggerInfoDLBZS::triggerWord</a></div><div class="ttdeci">TriggerWordDLBZS triggerWord</div><div class="ttdoc">trigger Word information</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00111">ZeroSuppression.h:111</a></div></div>
<div class="ttc" id="astructo2_1_1tpc_1_1TriggerWordDLBZS_html_aef11e69b08635bab902ef013309b635f"><div class="ttname"><a href="../../df/d65/structo2_1_1tpc_1_1TriggerWordDLBZS.html#aef11e69b08635bab902ef013309b635f">o2::tpc::TriggerWordDLBZS::isValid</a></div><div class="ttdeci">bool isValid(int entry=0) const</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d04/ZeroSuppression_8h_source.html#l00104">ZeroSuppression.h:104</a></div></div>
<div class="ttc" id="atest__Algorithm_8cxx_html_a7eacb0eaa625b8263894a6cb11fe4df1"><div class="ttname"><a href="../../d2/d0e/test__Algorithm_8cxx.html#a7eacb0eaa625b8263894a6cb11fe4df1">min</a></div><div class="ttdeci">constexpr size_t min</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d0e/test__Algorithm_8cxx_source.html#l00048">test_Algorithm.cxx:48</a></div></div>
<div class="ttc" id="atest__Algorithm_8cxx_html_ab79a753a0d458e4d18352429f03adf8e"><div class="ttname"><a href="../../d2/d0e/test__Algorithm_8cxx.html#ab79a753a0d458e4d18352429f03adf8e">max</a></div><div class="ttdeci">constexpr size_t max</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d0e/test__Algorithm_8cxx_source.html#l00049">test_Algorithm.cxx:49</a></div></div>
<div class="ttc" id="atest__ctf__io__cpv_8cxx_html_a1ef7964b771b9b29688dfa8810b27d00"><div class="ttname"><a href="../../dc/da7/test__ctf__io__cpv_8cxx.html#a1ef7964b771b9b29688dfa8810b27d00">LOG</a></div><div class="ttdeci">LOG(info)&lt;&lt; &quot;Compressed in &quot;&lt;&lt; sw.CpuTime()&lt;&lt; &quot; s&quot;</div></div>
<div class="ttc" id="atest__ctf__io__hmpid_8cxx_html_a41a6d224f3eccd6ee0a0db7355e20877"><div class="ttname"><a href="../../dc/d45/test__ctf__io__hmpid_8cxx.html#a41a6d224f3eccd6ee0a0db7355e20877">digits</a></div><div class="ttdeci">std::vector&lt; Digit &gt; digits</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d45/test__ctf__io__hmpid_8cxx_source.html#l00040">test_ctf_io_hmpid.cxx:40</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_f511f1e9c03c071966ae594f00bbc5e0.html">GPU</a></li><li class="navelem"><a class="el" href="../../dir_77030b149987c946eb2e85728f65acc0.html">GPUTracking</a></li><li class="navelem"><a class="el" href="../../dir_b1dd2c3d7fcd0d0d24ad7c8634d4eb04.html">Global</a></li><li class="navelem"><a class="el" href="../../d4/d96/GPUChainTrackingClusterizer_8cxx.html">GPUChainTrackingClusterizer.cxx</a></li>
    <li class="footer">Generated on Fri Oct 31 2025 12:28:14 for Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
